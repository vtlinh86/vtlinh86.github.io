System.register("chunks:///_virtual/action-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts"],(function(t){var e,i,n,a,r,c,o,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,c=t._decorator},function(t){o=t.ARTrackingType,s=t.ActionType}],execute:function(){var u,l,p,f,d,h,A,v;r._RF.push({},"2ae23iBT5xCjL78kE6pnAMk","action-base",void 0);var y=c.ccclass,g=c.property,b=t("ARActionBase",y("cc.ARActionBase")(u=function(){function t(){this.type=s.NONE,this.priority=999,this.activated=!1}var e=t.prototype;return e.setActivated=function(t){this.activated=t},e.getActivated=function(t){return t!==o.Image&&this.activated},e.resetAction=function(t){this.activated=!1},t}())||u);t("ARActionUpdateBase",(l=y("cc.ARActionUpdateBase"),p=g({serializable:!0}),f=g({serializable:!0,visible:!1}),l((A=e((h=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),c=0;c<i;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_matchTrackingUpdate",A,a(e)),n(e,"closeTracking",v,a(e)),e}return i(e,t),e}(b)).prototype,"_matchTrackingUpdate",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=e(h.prototype,"closeTracking",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=h))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/adaptive-scale.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-tracking-base.ts","./ar-enum.ts","./action-base.ts"],(function(t){var e,a,i,n,c,r,o,l,s,p,h,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,c=t.createClass},function(t){r=t.cclegacy,o=t._decorator,l=t.ccenum,s=t.CCFloat,p=t.Quat},function(t){h=t.ARTrackingBase},function(t){u=t.ActionType},function(t){d=t.ARActionUpdateBase}],execute:function(){var m,_,g,f,S,y,k,v;r._RF.push({},"bc2066lfr1FZISz/co2BLpq","adaptive-scale",void 0);var A=o.ccclass,x=o.property,T=function(t){return t[t.Uniform=0]="Uniform",t[t.NonUniform=1]="NonUniform",t[t.AlignLongSideToX=2]="AlignLongSideToX",t}(T||{}),b=function(t){return t[t.None=0]="None",t[t.Minimum=1]="Minimum",t[t.Average=2]="Average",t}(b||{});l(T),l(b);t("ARAdaptiveScale",(m=A("cc.ARAdaptiveScale"),_=x({serializable:!0}),g=x({type:s,displayOrder:3,slide:!0,range:[1,10,.1],tooltip:"i18n:xr-plugin.action.adaptive_scale.maxScale"}),f=x({displayOrder:4,tooltip:"i18n:xr-plugin.action.adaptive_scale.matchTrackingUpdate"}),m(((v=function(t){function e(){var e;return e=t.call(this)||this,i(e,"_maxScale",k,n(e)),e._planeStretch=T.Uniform,e._verticalStretch=b.Minimum,e._trackableNode=null,e.type=u.ADAPTIVE_SCALE,e}a(e,t);var r=e.prototype;return r._updateAction=function(t){if(this._trackableNode){var a=t.extent;if(a){var i=Math.min(a.x,a.y),n=this._trackableNode.scale.clone(),c=this._trackableNode.worldRotation.clone();switch(this._planeStretch){case T.Uniform:n.x=i,n.z=i;break;case T.NonUniform:n.x=a.x,n.z=a.y;break;case T.AlignLongSideToX:a.x<a.y?(p.multiply(c,c,e.ROTATE_QUARTER),n.x=a.y,n.z=a.x):(n.x=a.x,n.z=a.y)}switch(this._verticalStretch){case b.Minimum:n.y=i;break;case b.Average:n.y=.5*(a.x+a.y)}n.x=Math.min(n.x,this._maxScale),n.y=Math.min(n.y,this._maxScale),n.z=Math.min(n.z,this._maxScale),this._trackableNode.setScale(n),this._planeStretch===T.AlignLongSideToX&&this._trackableNode.setWorldRotation(c)}}},r.runAction=function(t){if(t.trackableNode&&t.trackingNode){var e=t.trackingNode.getComponent(h);this.getActivated(null==e?void 0:e.trackingType)||(this._trackableNode=t.trackableNode,this._updateAction(t),this.setActivated(!0))}},r.updateAction=function(t){this._matchTrackingUpdate&&this._updateAction(t)},r.reset=function(){this.planeStretch=T.Uniform,this.verticalStretch=b.Minimum,this.maxScale=2,this.matchTrackingUpdate=!0,this.setActivated(!1),this._trackableNode=null},c(e,[{key:"planeStretch",get:function(){return this._planeStretch},set:function(t){t!==this._planeStretch&&(this._planeStretch=t)}},{key:"verticalStretch",get:function(){return this._verticalStretch},set:function(t){t!==this._verticalStretch&&(this._verticalStretch=t)}},{key:"maxScale",get:function(){return this._maxScale},set:function(t){t!==this._maxScale&&(this._maxScale=t)}},{key:"matchTrackingUpdate",get:function(){return this._matchTrackingUpdate},set:function(t){t!==this._matchTrackingUpdate&&(this._matchTrackingUpdate=t)}}]),e}(d)).ROTATE_QUARTER=p.fromEuler(new p,0,90,0),k=e((y=v).prototype,"_maxScale",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),e(y.prototype,"maxScale",[g],Object.getOwnPropertyDescriptor(y.prototype,"maxScale"),y.prototype),e(y.prototype,"matchTrackingUpdate",[f],Object.getOwnPropertyDescriptor(y.prototype,"matchTrackingUpdate"),y.prototype),S=y))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/alignment.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-camera.ts","./ar-tracking-base.ts","./ar-enum.ts","./action-base.ts"],(function(t){var e,a,r,o,i,n,c,l,p,s,u,d,f,y,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized,i=t.createClass},function(t){n=t.cclegacy,c=t._decorator,l=t.ccenum,p=t.Vec3,s=t.Quat,u=t.director},function(t){d=t.ARCameraMgr},function(t){f=t.ARTrackingBase},function(t){y=t.ActionType},function(t){m=t.ARActionUpdateBase}],execute:function(){var g,h,_,b,k,w,T,v,U,C,A,P,O;n._RF.push({},"fe9feGmKwRJDbUSGFTd8vUM","alignment",void 0);var z=c.ccclass,L=c.property,N=function(t){return t[t.Center=0]="Center",t}(N||{}),R=function(t){return t[t.World_Up=0]="World_Up",t[t.Local_Up=1]="Local_Up",t}(R||{});l(N),l(R);t("ARAlignment",(g=z("cc.ARAlignment"),h=L({serializable:!0}),_=L({serializable:!0}),b=L({serializable:!0}),k=L({type:N,displayOrder:1,visible:!1}),w=L({type:R,displayOrder:2,tooltip:"i18n:xr-plugin.action.alignment.towards"}),T=L({displayOrder:3,tooltip:"i18n:xr-plugin.action.alignment.faceToCamera"}),v=L({displayOrder:4,tooltip:"i18n:xr-plugin.action.alignment.matchTrackingUpdate"}),g((A=e((C=function(t){function e(){var e;return e=t.call(this)||this,r(e,"_layout",A,o(e)),r(e,"_upward",P,o(e)),r(e,"_faceToCamera",O,o(e)),e._trackableNode=null,e.type=y.ALIGNMENT,e}a(e,t);var n=e.prototype;return n._updateAction=function(t){if(this._trackableNode){var e;if(this._upward===R.Local_Up)null==(e=t.trackablePose)||e.rotation.set(t.pose.rotation.clone());else if(t.trackablePose){var a=new p;s.toEuler(a,t.pose.rotation),s.fromEuler(t.trackablePose.rotation,0,a.y,0)}if(this._faceToCamera){var r=u.getScene().getComponentInChildren(d);if(null!=r&&r.Camera&&t.trackablePose){var o=new p;if(p.subtract(o,r.Camera.node.position,t.trackablePose.position),this._upward===R.Local_Up){var i=p.transformQuat(new p,p.UP,t.trackablePose.rotation),n=p.transformQuat(new p,p.FORWARD,t.trackablePose.rotation).negative(),c=new p;p.projectOnPlane(c,o,i);var l=p.angle(n,c),f=p.cross(new p,n,c);i.equals(f.normalize().negative())&&(l=-l),s.rotateAroundLocal(t.trackablePose.rotation,t.trackablePose.rotation,p.UP,l)}else{var y=new s;s.fromViewUp(y,o.normalize()),s.toEuler(o,y),s.fromEuler(t.trackablePose.rotation,0,o.y,0)}}}}},n.runAction=function(t){if(t.trackableNode&&t.trackingNode){var e=t.trackingNode.getComponent(f);this.getActivated(null==e?void 0:e.trackingType)||(this._trackableNode=t.trackableNode,this._updateAction(t),this.setActivated(!0))}},n.updateAction=function(t){this._matchTrackingUpdate&&this._updateAction(t)},n.reset=function(){this.layout=N.Center,this.upward=R.Local_Up,this.faceToCamera=!1,this.matchTrackingUpdate=!0,this.setActivated(!1),this._trackableNode=null},i(e,[{key:"layout",get:function(){return this._layout},set:function(t){t!==this._layout&&(this._layout=t)}},{key:"upward",get:function(){return this._upward},set:function(t){t!==this._upward&&(this._upward=t)}},{key:"faceToCamera",get:function(){return this._faceToCamera},set:function(t){t!==this._faceToCamera&&(this._faceToCamera=t)}},{key:"matchTrackingUpdate",get:function(){return this._matchTrackingUpdate},set:function(t){t!==this._matchTrackingUpdate&&(this._matchTrackingUpdate=t)}}]),e}(m)).prototype,"_layout",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return N.Center}}),P=e(C.prototype,"_upward",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.Local_Up}}),O=e(C.prototype,"_faceToCamera",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(C.prototype,"layout",[k],Object.getOwnPropertyDescriptor(C.prototype,"layout"),C.prototype),e(C.prototype,"upward",[w],Object.getOwnPropertyDescriptor(C.prototype,"upward"),C.prototype),e(C.prototype,"faceToCamera",[T],Object.getOwnPropertyDescriptor(C.prototype,"faceToCamera"),C.prototype),e(C.prototype,"matchTrackingUpdate",[v],Object.getOwnPropertyDescriptor(C.prototype,"matchTrackingUpdate"),C.prototype),U=C))||U));n._RF.pop()}}}));

System.register("chunks:///_virtual/ar-api.ts",["cc","./ar-session.ts","./ar-defines.ts","./ar-enum.ts","./ar-device-manager.ts"],(function(e){var n,t,i,r,s;return{setters:[function(e){n=e.cclegacy},function(e){t=e.ARSession},function(e){i=e.FeatureType},function(e){r=e.ARTrackingType},function(e){s=e.ARDeviceManager}],execute:function(){n._RF.push({},"17fbevVtl5H5pZ/s526NzwZ","ar-api",void 0);e("arApi",{createDevice:function(){return s.create()},checkDevice:function(e,n){return s.checkSupported(e,n)},initDevice:function(e,n,t){return s.init(e,n,t)},getDevice:function(){return s.device},removeDevice:function(){s.clear()},setWebXRSessionMode:function(e){var n=this.getDevice();return n?n.setSessionMode(e):Promise.resolve(!1)},getWebXRSessionMode:function(){var e=this.getDevice();return e?e.getSessionMode():"inline"},checkWebXRSessionMode:function(e){var n=this.getDevice();return n?n.checkSessionMode(e):Promise.resolve(!1)},getSession:function(){return t.getSession()},getFeature:function(e){var n=this.getDevice();return n?n.tryGetFeatureByType(e):null},checkFeatureEnable:function(e){var n=this.getDevice();if(n&&(n.FeatureSupportMask&e)===e)return!0;return!1},showAllVisualizer:function(e){var n,i=t.getSession();i&&(null==(n=i.manager)||n.showAllVisualizer(e))},hideAllVisualizer:function(e){var n,i=t.getSession();i&&(null==(n=i.manager)||n.hideAllVisualizer(e))},enableFeatureTracking:function(e,n){var i,r=t.getSession();r&&(null==(i=r.manager)||i.enableFeatureTracking(e,n))},getFeatureConfig:function(e){var n,i=t.getSession();return i?null==(n=i.manager)?void 0:n.getFeatureConfig(e):null},getFeatureAtSystem:function(e){var n,i=t.getSession();return i?null==(n=i.manager)?void 0:n.getFeature(e):null},enableLightingEstimation:function(e){var n,s=t.getSession();s&&(null==(n=s.manager)||n.enableFeatureTracking(r.Lighting,e));var o=this.getFeature(i.LightingEstimation);o&&o.getHandler().enableLightingEstimation(e)},screenHitTest:function(e,n){var t=this.getDevice();return t?t.screenHitTest(e,n):Promise.reject(new Error("screenHitTest error by session === null or session.device === null !"))},worldHitTest:function(e,n){var t=this.getDevice();return t?t.worldHitTest(e,n):Promise.reject(new Error("worldHitTest error by session === null or session.device === null !"))}});n._RF.pop()}}}));

System.register("chunks:///_virtual/ar-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index2.ts","./ar-enum.ts","./ar-event.ts","./ar-manager.ts","./ar-session.ts","./ar-defines.ts","./webxr-session-controller.ts","./tracking-origin.ts"],(function(t){var e,i,n,o,r,a,s,u,c,l,g,p,h,m,d,f,C,y,v,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createClass},function(t){a=t.cclegacy,s=t._decorator,u=t.Camera,c=t.director,l=t.sys,g=t.DirectionalLight,p=t.Component},null,function(t){h=t.XRSessionModeControllerType,m=t.ARTrackingType},function(t){d=t.arEvent},function(t){f=t.ARManager},function(t){C=t.ARSession},function(t){y=t.ARLightingMode},function(t){v=t.WebXRSessionController},function(t){_=t.TrackingOrigin}],execute:function(){var b,R,F,M,E,L,S,A,D,I,k,O;a._RF.push({},"bc192P3DZZKuIIp7tZNRhMf","ar-camera",void 0);var w=s.ccclass,x=s.property,z=s.requireComponent,T=s.disallowMultiple,P=s.menu,H=s.help,X=s.executeInEditMode;t("ARCameraMgr",(b=w("cc.ARCameraMgr"),R=H("i18n:cc.ARCameraMgr"),F=P("XR/Device/ARCameraMgr"),M=z(u),E=x({serializable:!0}),L=x({serializable:!0}),S=x({displayOrder:1,tooltip:"i18n:xr-plugin.tracking.cameraMgr.autoFocus"}),A=x({displayOrder:2,tooltip:"i18n:xr-plugin.tracking.cameraMgr.lightEstimate"}),b(D=R(D=F(D=M(D=T(D=X((k=e((I=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_autoFocus",k,o(e)),n(e,"_lightEstimate",O,o(e)),e._targetCamera=null,e._mainLight=null,e._visibility=null,e}i(e,t);var a=e.prototype;return a.onLoad=function(){var t,e=h.IMMERSIVE_AR,i=c.getScene().getComponentInChildren(_);if(i){var n=i.node.getComponent(v);n&&(e=n.defaultSessionMode)}if(null!=(t=C.getSession())&&t.autoStartARSession&&(l.isNative||e===h.AUTO||e===h.IMMERSIVE_AR)){var o=this.node.getComponent(u);this._visibility=o.camera.visibility,o.camera.visibility=0}},a.onEnable=function(){this._targetCamera=this.node.getComponent(u),this._mainLight=c.getScene().getComponentInChildren(g);var t=c.getScene().getComponentInChildren(_);t&&(t.node.getComponent(f)||t.node.addComponent(f),t.node.getComponent(C)||t.node.addComponent(C));this.updateFeature(!0),this.updateLightingFeature(this._lightEstimate)},a.onDisable=function(){var t=c.getScene().getComponentInChildren(_);t&&(t.node.getComponent(f)&&t.node.removeComponent(f),t.node.getComponent(C)&&t.node.removeComponent(C));this.updateFeature(!1),this.updateLightingFeature(!1)},a.start=function(){var t=c.getScene().getComponentInChildren(_);t&&t.resetOffset()},a.onDestroy=function(){this.updateFeature(!1),this.updateLightingFeature(!1)},a.updateFeature=function(t){t&&l.isXR&&(t=!1);var e={ft:m.Camera,uuid:this.node.uuid,canUse:t,camera:this,visibility:this._visibility};d.collectFeature(e)},a.updateLightingFeature=function(t){var e,i=(null==(e=c.getScene())?void 0:e.globals.skybox.useHDR)?y.HDR:y.NO_HDR,n={ft:m.Lighting,uuid:this.node.uuid,canUse:t,mainLight:this._mainLight,lightingMode:i};d.collectFeature(n)},r(e,[{key:"autoFocus",get:function(){return this._autoFocus},set:function(t){t!==this._autoFocus&&(this._autoFocus=t)}},{key:"lightEstimate",get:function(){return this._lightEstimate},set:function(t){t!==this._lightEstimate&&(this._lightEstimate=t,this.updateLightingFeature(t))}},{key:"Camera",get:function(){return this._targetCamera}},{key:"MainLight",get:function(){return this._mainLight}}]),e}(p)).prototype,"_autoFocus",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=e(I.prototype,"_lightEstimate",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(I.prototype,"autoFocus",[S],Object.getOwnPropertyDescriptor(I.prototype,"autoFocus"),I.prototype),e(I.prototype,"lightEstimate",[A],Object.getOwnPropertyDescriptor(I.prototype,"lightEstimate"),I.prototype),D=I))||D)||D)||D)||D)||D)||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-configuration.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./ar-event.ts","./feature-anchor.ts","./feature-camera.ts","./feature-face.ts","./feature-image.ts","./feature-lighting.ts","./feature-plane.ts","./feature-world-mesh.ts"],(function(e){var t,a,r,i,n,s,u,c,o,g,h,l,F,f,p,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.createClass,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e._decorator},function(e){s=e.ARTrackingType},function(e){u=e.arEvent,c=e.AREventType,o=e.ARInternalEventType},function(e){g=e.ARFeatureAnchor},function(e){h=e.ARFeatureCamera},function(e){l=e.ARFeatureFace},function(e){F=e.ARFeatureImage},function(e){f=e.ARFeatureLighting},function(e){p=e.ARFeaturePlane},function(e){_=e.ARFeatureWorldMesh}],execute:function(){var b,m,y,k,d,C,v,w,A,E,R,U,O,z,T,L,I,P,D,M,W;i._RF.push({},"d35a18JRORA+IiZDNJ32EHt","ar-configuration",void 0);var j=n.ccclass,x=n.property;e("ARConfiguration",(b=j("cc.ARConfiguration"),m=x({serializable:!0,visible:!1}),y=x({serializable:!0,visible:!1}),k=x({serializable:!0}),d=x({serializable:!0}),C=x({serializable:!0}),v=x({serializable:!0}),w=x({serializable:!0}),A=x({displayOrder:1,visible:function(){return!0===this._planeFeature.canUse}}),E=x({displayOrder:2,visible:function(){return!0===this._meshingFeature.canUse}}),R=x({displayOrder:3,visible:function(){return!0===this._imageFeature.canUse}}),U=x({displayOrder:3,visible:function(){return!0===this._faceFeature.canUse}}),b((T=t((z=function(){function e(){r(this,"_cameraFeature",T,this),r(this,"_lightingFeature",L,this),r(this,"_anchorFeature",I,this),r(this,"_planeFeature",P,this),r(this,"_meshingFeature",D,this),r(this,"_imageFeature",M,this),r(this,"_faceFeature",W,this),this._trackings=[]}var t=e.prototype;return t.registerEvent=function(){u.on(c.COLLECT_FEATURE,this.onCollectFeatureEvent,this)},t.unregisterEvent=function(){u.off(c.COLLECT_FEATURE,this.onCollectFeatureEvent,this)},t.reset=function(){this._trackings.length=0,this._anchorFeature.resetConfig(),this._planeFeature.resetConfig(),this._imageFeature.resetConfig(),this._meshingFeature.resetConfig(),this._faceFeature.resetConfig()},t.getFeatureEnable=function(e){switch(e){case s.Plane:return this.planeFeature.enable;case s.Image:return this.imageFeature.enable;case s.WorldMesh:return this.meshingFeature.enable;case s.Face:return this.faceFeature.enable;case s.Lighting:return this._lightingFeature.enable}return!1},t.setFeatureEnable=function(e,t){switch(e){case s.Plane:this.planeFeature.enable=t;break;case s.Image:this.imageFeature.enable=t;break;case s.WorldMesh:this.meshingFeature.enable=t;break;case s.Face:this.faceFeature.enable=t;break;case s.Lighting:this._lightingFeature.enable=t}},t.getFeatureConfig=function(e){switch(e){case s.Plane:return this.planeFeature.getConfig();case s.Image:return this.imageFeature.getConfig();case s.WorldMesh:return this.meshingFeature.getConfig();case s.Face:return this.faceFeature.getConfig();case s.Lighting:return this._lightingFeature.getConfig()}return null},t.getImageAssetsIndex=function(e,t){return this._imageFeature.getImageAssetsIndex(e,t)},t.onCollectFeatureEvent=function(e){if(e.canUse)e.tracking&&this._trackings.filter((function(t){return t&&t.node.uuid===e.uuid})).length<=0&&e.tracking.isValid&&this._trackings.push(e.tracking);else for(var t=0;t<this._trackings.length;t++){if(this._trackings[t].node.uuid===e.uuid){this._trackings.splice(t,1);break}}switch(e.ft){case s.Camera:this._cameraFeature.updateFeature(e);break;case s.Lighting:this._lightingFeature.updateFeature(e);break;case s.Plane:this.planeFeature.updateFeature(e),this.planeFeature.tracking_List=this._trackings.filter((function(e){return e&&e.trackingType===s.Plane}));break;case s.WorldMesh:this.meshingFeature.updateFeature(e),this.meshingFeature.tracking_List=this._trackings.filter((function(e){return e&&e.trackingType===s.WorldMesh}));break;case s.Image:this.imageFeature.updateFeature(e),this.imageFeature.tracking_List=this._trackings.filter((function(e){return e&&e.trackingType===s.Image}));break;case s.Face:this.faceFeature.updateFeature(e),this.faceFeature.tracking_List=this._trackings.filter((function(e){return e&&e.trackingType===s.Face}))}u.dispatch(o.CHECK_TRACKING_NODE_STATE,e)},a(e,[{key:"planeFeature",get:function(){return this._planeFeature},set:function(e){e!==this._planeFeature&&(this._planeFeature=e)}},{key:"meshingFeature",get:function(){return this._meshingFeature},set:function(e){e!==this._meshingFeature&&(this._meshingFeature=e)}},{key:"imageFeature",get:function(){return this._imageFeature},set:function(e){e!==this._imageFeature&&(this._imageFeature=e)}},{key:"faceFeature",get:function(){return this._faceFeature},set:function(e){e!==this._faceFeature&&(this._faceFeature=e)}},{key:"trackings",get:function(){return this._trackings}},{key:"hasConfig",get:function(){return this._planeFeature.canUse||this._meshingFeature.canUse||this._imageFeature.canUse||this._faceFeature.canUse}},{key:"config",get:function(){var e,t=[];return(e=this._cameraFeature.getConfig()).enable&&this._cameraFeature.canUse&&t.push(e),(e=this._lightingFeature.getConfig()).enable&&this._lightingFeature.canUse&&t.push(e),(e=this._anchorFeature.getConfig()).enable&&this._anchorFeature.canUse&&t.push(e),(e=this.planeFeature.getConfig()).enable&&this.planeFeature.canUse&&t.push(e),(e=this._meshingFeature.getConfig()).enable&&this._meshingFeature.canUse&&t.push(e),(e=this.imageFeature.getConfig()).enable&&this.imageFeature.canUse&&t.push(e),(e=this.faceFeature.getConfig()).enable&&this.faceFeature.canUse&&t.push(e),t}}]),e}()).prototype,"_cameraFeature",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new h}}),L=t(z.prototype,"_lightingFeature",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),I=t(z.prototype,"_anchorFeature",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g}}),P=t(z.prototype,"_planeFeature",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),D=t(z.prototype,"_meshingFeature",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new _}}),M=t(z.prototype,"_imageFeature",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new F}}),W=t(z.prototype,"_faceFeature",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),t(z.prototype,"planeFeature",[A],Object.getOwnPropertyDescriptor(z.prototype,"planeFeature"),z.prototype),t(z.prototype,"meshingFeature",[E],Object.getOwnPropertyDescriptor(z.prototype,"meshingFeature"),z.prototype),t(z.prototype,"imageFeature",[R],Object.getOwnPropertyDescriptor(z.prototype,"imageFeature"),z.prototype),t(z.prototype,"faceFeature",[U],Object.getOwnPropertyDescriptor(z.prototype,"faceFeature"),z.prototype),O=z))||O));i._RF.pop()}}}));

System.register("chunks:///_virtual/ar-defines.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,r,t,i,a;return{setters:[function(n){e=n.inheritsLoose,r=n.wrapNativeSuper},function(n){t=n.cclegacy,i=n._decorator,a=n.ccenum}],execute:function(){t._RF.push({},"8aec68FShlMhIIH63nPzVk0","ar-defines",void 0);i.ccclass,i.property,n("ARAPI",function(n){return n[n.ARKit=0]="ARKit",n[n.ARCore=1]="ARCore",n[n.AREngine=2]="AREngine",n[n.WebXR=3]="WebXR",n[n.SpacesXR=4]="SpacesXR",n}({})),n("ARTrackingState",function(n){return n[n.TRACKING=0]="TRACKING",n[n.PAUSED=1]="PAUSED",n[n.STOPPED=2]="STOPPED",n[n.STARTING=3]="STARTING",n[n.STARTED=4]="STARTED",n}({})),n("ARRayCastMode",function(n){return n[n.RAYCAST_ANCHOR=1]="RAYCAST_ANCHOR",n[n.RAYCAST_PLANE_EXTENT=2]="RAYCAST_PLANE_EXTENT",n[n.RAYCAST_PLANE_POLYGON=4]="RAYCAST_PLANE_POLYGON",n[n.RAYCAST_MESH=8]="RAYCAST_MESH",n}({})),n("FeatureType",function(n){return n[n.None=0]="None",n[n.CameraDevice=1]="CameraDevice",n[n.LightingEstimation=2]="LightingEstimation",n[n.Anchor=4]="Anchor",n[n.PlaneDetection=8]="PlaneDetection",n[n.SceneMesh=16]="SceneMesh",n[n.ImageTracking=32]="ImageTracking",n[n.ObjectTracking=64]="ObjectTracking",n[n.FaceTracking=128]="FaceTracking",n}({})),n("ARLightingMode",function(n){return n[n.NO_HDR=1]="NO_HDR",n[n.HDR=2]="HDR",n}({}));var c=n("ARPlaneDetectionMode",function(n){return n[n.Horizontal_Upward=1]="Horizontal_Upward",n[n.Horizontal_Downward=2]="Horizontal_Downward",n[n.Vertical=4]="Vertical",n[n.All=7]="All",n}({}));a(c);var o=n("TrackingQuality",function(n){return n[n.No_Tracking=0]="No_Tracking",n[n.Poor_Quality=1]="Poor_Quality",n[n.Tracking_Normal=2]="Tracking_Normal",n}({}));a(o);var A=n("TrackEvent",function(n){function r(){for(var e,r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return(e=n.call.apply(n,[this].concat(t))||this).id=void 0,e.pose=void 0,e.trackingState=void 0,e}return e(r,n),r}(r(Event)));n("PlaneTrackEvent",function(n){function r(){for(var e,r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return(e=n.call.apply(n,[this].concat(t))||this).extent=void 0,e.anchorType=void 0,e}return e(r,n),r}(A)),n("ImageTrackEvent",function(n){function r(){for(var e,r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return(e=n.call.apply(n,[this].concat(t))||this).extent=void 0,e.libIndex=void 0,e}return e(r,n),r}(A)),n("MeshTrackEvent",function(n){function r(){for(var e,r=arguments.length,t=new Array(r),i=0;i<r;i++)t[i]=arguments[i];return(e=n.call.apply(n,[this].concat(t))||this).vertices=void 0,e.indices=void 0,e}return e(r,n),r}(A));t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-device-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts"],(function(e){var t,r,a,n;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){a=e.cclegacy},function(e){n=e.FeatureType}],execute:function(){a._RF.push({},"7f34bUkQBtE3b8X7fBk9DdO","ar-device-base",void 0);var u=e("IARDevice",(function(){}));e("ARDevice",function(e){function a(){for(var t,r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return(t=e.call.apply(e,[this].concat(a))||this)._featureConfigMask=n.None,t._featuresMap=new Map,t._featuresDataset=[],t}t(a,e);var u=a.prototype;return u.getSessionMode=function(){return"immersive-ar"},u.getCheckSessionMode=function(){return"immersive-ar"},u.checkSupported=function(e){return Promise.resolve(!0)},u.checkFeatureSupport=function(e){return 0!=(this._featureConfigMask&e)},u.tryGetFeature=function(e){return this._featuresMap.has(e)?this._featuresMap.get(e):null},u.tryGetFeatureByType=function(e){var t=this.FeaturePrefix+n[e];return this.tryGetFeature(t)},u.setAllFeaturesActive=function(e){this._featuresMap.forEach((function(t){t.enable=e}))},u.createFeatures=function(e){var t=this;e.forEach((function(e){if(null!=e){var r=t.FeaturePrefix+n[e.type];if(t.checkFeatureAvailable(r)){var a=t.createFeature(r);t._featuresMap.has(r)?console.warn("Error! Duplicate Feature:",e.type):(t._featureConfigMask|=a.featureId,t._featuresMap.set(r,a))}else console.warn("Feature: <"+e.type+"> is not available on",t)}else console.error("ARDevice.createFeatures failed, configData is null!!!")}))},u.checkFeaturesSupport=function(e){for(var t=0;t<8;t++){if(0!==(this._featureConfigMask&1<<t))if(0===(e&1<<t)){var r=n[t*t];this.removeHandler(this.FeaturePrefix+r),this._featuresMap.delete(this.FeaturePrefix+r)}}this._featureConfigMask=e},u.initFeatures=function(e){var t=this;e.forEach((function(e){if(null!=e){var r,a=t.FeaturePrefix+n[e.type];if(t._featuresMap.has(a))null==(r=t._featuresMap.get(a))||r.init(e)}}))},u.createHandlers=function(){var e=this;this._featuresMap.forEach((function(t){var r=e.createHandler(t);r&&t.setHandler(r)}))},u.updateHandlers=function(){this._featuresMap.forEach((function(e){var t=e.getHandler();t&&t.update()}))},u.removeHandler=function(e){var t;this._featuresMap.has(e)&&(null==(t=this._featuresMap.get(e))||t.setHandler(null))},u.clearHandlers=function(){this._featuresMap.forEach((function(e){e.setHandler(null)})),this._featuresMap.clear()},r(a,[{key:"FeaturePrefix",get:function(){return"ARFeature"}},{key:"FeatureSupportMask",get:function(){return this._featureConfigMask}}]),a}(u));a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-device-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-mobile-device.ts","./webxr-device.ts","./spacesxr-device.ts","./xr-permission-helper.ts"],(function(e){var n,i,t,c,r,s,u,o,l;return{setters:[function(e){n=e.createClass},function(e){i=e.cclegacy,t=e.sys},function(e){c=e.ARMobileDevice},function(e){r=e.WebXRDevice},function(e){s=e.SpacesXRDevice},function(e){u=e.XRPermissionHelper,o=e.XRPermissionName,l=e.XRPermissionResult}],execute:function(){i._RF.push({},"904c6j0DHFO76cT3sq8cVgx","ar-device-manager",void 0),e("ARDeviceManager",function(){function e(){}return e.clear=function(){this._device&&(this._device.stop(),this._device.clearHandlers(),this._device=null)},e.create=function(){return new Promise((function(e){var n;t.isXR?(n=new s,e(n)):t.isBrowser?((n=new r).create(),e(n)):t.isNative&&((n=new c).create(),"ANDROID"===t.platform?u.requestPermissions([o.CAMERA],(function(i,t){for(var c=0;c<i.length&&c<t.length;c++)if(i[c]===o.CAMERA&&t[c]===l.PERMISSION_GRANTED)return e(n);return e(null)})):e(n))}))},e.checkSupported=function(e,n){return null==n?void 0:n.checkSupported(e)},e.init=function(e,n,i){var t=this;return new Promise((function(c){null==n||n.init(e,i).then((function(e){e?(t._device=n,c(n)):(console.warn("device not support AR!"),t._device=null,c(null))}))}))},n(e,null,[{key:"device",get:function(){return this._device}}]),e}())._device=null,i._RF.pop()}}}));

System.register("chunks:///_virtual/ar-enum.ts",["cc"],(function(e){var t,i;return{setters:[function(e){t=e.cclegacy,i=e.ccenum}],execute:function(){t._RF.push({},"f35b64IZU5KAJ5sSywBw3AM","ar-enum",void 0);var o=e("ARPropType",function(e){return e[e.None=0]="None",e[e.Factor=1]="Factor",e[e.Action=2]="Action",e}({}));i(o);var L=e("XRSessionModeControllerType",function(e){return e[e.AUTO=1]="AUTO",e[e.INLINE=2]="INLINE",e[e.IMMERSIVE_AR=4]="IMMERSIVE_AR",e[e.IMMERSIVE_VR=8]="IMMERSIVE_VR",e}({}));i(L);var E=e("ARTrackingType",function(e){return e[e.None=0]="None",e[e.Camera=1]="Camera",e[e.Lighting=2]="Lighting",e[e.Plane=8]="Plane",e[e.WorldMesh=16]="WorldMesh",e[e.Image=32]="Image",e[e.Object=64]="Object",e[e.Face=128]="Face",e}({}));i(E);var n=e("ActionType",function(e){return e[e.NONE=0]="NONE",e[e.SURFACE_OVERLAY=1]="SURFACE_OVERLAY",e[e.DISPLAY_CHILDREN=2]="DISPLAY_CHILDREN",e[e.TRACK_EVENT=3]="TRACK_EVENT",e[e.ALIGNMENT=4]="ALIGNMENT",e[e.ADAPTIVE_SCALE=5]="ADAPTIVE_SCALE",e[e.FACE_LANDMARK=6]="FACE_LANDMARK",e[e.FACE_BLEND_SHAPES=7]="FACE_BLEND_SHAPES",e[e.FACE_EXPRESSION_EVENTS=8]="FACE_EXPRESSION_EVENTS",e}({}));i(n);var r=e("FactorType",function(e){return e[e.NONE=0]="NONE",e[e.PLANE_DIRECTION=1]="PLANE_DIRECTION",e[e.PLANE_SIZE=2]="PLANE_SIZE",e[e.PLANE_SEMANTIC=3]="PLANE_SEMANTIC",e[e.IMAGE_SOURCE=4]="IMAGE_SOURCE",e[e.FACE_CONTENT=5]="FACE_CONTENT",e}({}));i(r);var p=e("FaceLandMarkType",function(e){return e[e.None=0]="None",e[e.Chin=1]="Chin",e[e.ForeHead=2]="ForeHead",e[e.Left_Top_Eyelid=3]="Left_Top_Eyelid",e[e.Left_Bottom_Eyelid=4]="Left_Bottom_Eyelid",e[e.Left_EyeBrow=5]="Left_EyeBrow",e[e.Left_Pupil=6]="Left_Pupil",e[e.Lower_Face=7]="Lower_Face",e[e.Lower_Lip=8]="Lower_Lip",e[e.Mouth=9]="Mouth",e[e.Nose_Bridge=10]="Nose_Bridge",e[e.Nose_Tip=11]="Nose_Tip",e[e.Right_Top_Eyelid=12]="Right_Top_Eyelid",e[e.Right_Bottom_Eyelid=13]="Right_Bottom_Eyelid",e[e.Right_EyeBrow=14]="Right_EyeBrow",e[e.Right_Pupil=15]="Right_Pupil",e[e.Upper_Lip=16]="Upper_Lip",e[e.Max=17]="Max",e}({}));i(p);var h=e("ARFaceBlendShapeType",function(e){return e[e.None=0]="None",e[e.BrowsDownLeft=1]="BrowsDownLeft",e[e.BrowsDownRight=2]="BrowsDownRight",e[e.BrowsUpCenter=3]="BrowsUpCenter",e[e.BrowsUpLeft=4]="BrowsUpLeft",e[e.BrowsUpRight=5]="BrowsUpRight",e[e.CheekSquintLeft=6]="CheekSquintLeft",e[e.CheekSquintRight=7]="CheekSquintRight",e[e.EyeBlinkLeft=8]="EyeBlinkLeft",e[e.EyeBlinkRight=9]="EyeBlinkRight",e[e.EyeDownLeft=10]="EyeDownLeft",e[e.EyeDownRight=11]="EyeDownRight",e[e.EyeInLeft=12]="EyeInLeft",e[e.EyeInRight=13]="EyeInRight",e[e.EyeOpenLeft=14]="EyeOpenLeft",e[e.EyeOpenRight=15]="EyeOpenRight",e[e.EyeOutLeft=16]="EyeOutLeft",e[e.EyeOutRight=17]="EyeOutRight",e[e.EyeSquintLeft=18]="EyeSquintLeft",e[e.EyeSquintRight=19]="EyeSquintRight",e[e.EyeUpLeft=20]="EyeUpLeft",e[e.EyeUpRight=21]="EyeUpRight",e[e.JawLeft=22]="JawLeft",e[e.JawRight=23]="JawRight",e[e.JawOpen=24]="JawOpen",e[e.LipsFunnel=25]="LipsFunnel",e[e.LipsPucker=26]="LipsPucker",e[e.LowerLipClose=27]="LowerLipClose",e[e.LowerLipDownLeft=28]="LowerLipDownLeft",e[e.LowerLipDownRight=29]="LowerLipDownRight",e[e.LowerLipRaise=30]="LowerLipRaise",e[e.UpperLipClose=31]="UpperLipClose",e[e.UpperLipRaise=32]="UpperLipRaise",e[e.UpperLipUpLeft=33]="UpperLipUpLeft",e[e.UpperLipUpRight=34]="UpperLipUpRight",e[e.MouthClose=35]="MouthClose",e[e.MouthDimpleLeft=36]="MouthDimpleLeft",e[e.MouthDimpleRight=37]="MouthDimpleRight",e[e.MouthFrownLeft=38]="MouthFrownLeft",e[e.MouthFrownRight=39]="MouthFrownRight",e[e.MouthLeft=40]="MouthLeft",e[e.MouthRight=41]="MouthRight",e[e.MouthSmileLeft=42]="MouthSmileLeft",e[e.MouthSmileRight=43]="MouthSmileRight",e[e.MouthStretchLeft=44]="MouthStretchLeft",e[e.MouthStretchRight=45]="MouthStretchRight",e[e.MouthUpLeft=46]="MouthUpLeft",e[e.MouthUpRight=47]="MouthUpRight",e[e.Puff=48]="Puff",e[e.SneerLeft=49]="SneerLeft",e[e.SneerRight=50]="SneerRight",e[e.Max=51]="Max",e}({}));i(h);var R=e("BlendShapeAssetName",function(e){return{}}());i(R),t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-event.ts",["cc"],(function(e){var t,n,i;return{setters:[function(e){t=e.cclegacy,n=e.ccenum,i=e.EventTarget}],execute:function(){t._RF.push({},"68a38Ekbv5Hc64LUyCwwf2v","ar-event",void 0);var c=e("AREventType",function(e){return e.COLLECT_FEATURE="collect-feature",e.SESSION_INITIALIZED="session-initialized",e.SESSION_UNEXPECTED_ENDED="session-unexpected-ended",e}({}));e("ARInternalEventType",function(e){return e.CHECK_TRACKING_NODE_STATE="check-tracking-node-state",e.FACE_BLEND_SHAPE="face-blend-shape",e.SELECT_ACTION="select_action",e.PLACE_ACTION="place_action",e.SELECT_MOVE_ACTION="select_move_action",e.SELECT_ROTATE_ACTION="select_rotate_action",e.SELECT_SCALE_ACTION="select_sacle_action",e}({}));n(c);var E=e("AREvent",function(){function e(){this._eventTarget=new i}var t=e.prototype;return t.on=function(e,t,n){return this._eventTarget.on(e,t,n),t},t.once=function(e,t,n){return this._eventTarget.once(e,t,n),t},t.off=function(e,t,n){this._eventTarget.off(e,t,n)},t.dispatch=function(e,t){return this._eventTarget.emit(e,t,this),!0},t.dispatchSessionInitialized=function(e){this._eventTarget.emit(c.SESSION_INITIALIZED,e,this)},t.collectFeature=function(e){this._eventTarget.emit(c.COLLECT_FEATURE,e,this)},t.dispatchSessionUnexpectedEnded=function(){this._eventTarget.emit(c.SESSION_UNEXPECTED_ENDED,this)},e}());e("arEvent",new E);t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-face-tracking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./face-blend-shapes.ts","./face-expression-events.ts","./face-landmark.ts","./face-tracking-content.ts","./ar-enum.ts","./ar-event.ts","./ar-tracking-base.ts"],(function(e){var t,n,a,i,r,s,c,o,l,h,p,f,d,u,_,g,k,E,y,M,b,m,F,v,S,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,c=e._decorator,o=e.Prefab,l=e.NodeEventType,h=e.MeshRenderer,p=e.Enum,f=e.instantiate,d=e.CCObject},function(e){u=e.ARFaceBlendShapes},function(e){_=e.ARFaceExpressionEvents},function(e){g=e.ARFaceLandMark},function(e){k=e.ARFaceTrackingContent},function(e){E=e.ARTrackingType,y=e.FaceLandMarkType,M=e.BlendShapeAssetName,b=e.ARPropType,m=e.FactorType,F=e.ActionType},function(e){v=e.arEvent,S=e.ARInternalEventType},function(e){C=e.ARTrackingBase}],execute:function(){var A,T,L,B,P,D,O,w,N,x,R,I,z,H,j,V,U,K,X,q,G;s._RF.push({},"781ddqruKhPrq8U3AGTHViw","ar-face-tracking",void 0);var W=c.ccclass,J=c.property,Q=c.help,Y=c.menu,Z=c.executeInEditMode;e("ARFaceTracking",(A=W("cc.ARFaceTracking"),T=Q("i18n:cc.ARFaceTracking"),L=Y("hidden:XR/AR Tracking/ARFaceTracking"),B=J({serializable:!0,type:o}),P=J({serializable:!0}),D=J({serializable:!0}),O=J({serializable:!0}),w=J({serializable:!0}),N=J({type:E,displayOrder:1,readonly:!0,tooltip:"i18n:xr-plugin.tracking.trackingType"}),x=J({displayOrder:2,tooltip:"i18n:xr-plugin.tracking.faceModelPrefab"}),R=J({displayOrder:3,group:{name:"Factor",displayOrder:1},visible:function(){return null!==this.faceTrackingContent},tooltip:"i18n:xr-plugin.tracking.faceTrackingContent"}),I=J({displayOrder:4,group:{name:"Action",displayOrder:2},visible:function(){return null!==this.faceLandMark},tooltip:"i18n:xr-plugin.tracking.faceLandMark"}),z=J({displayOrder:5,group:{name:"Action",displayOrder:2},visible:function(){return null!==this.faceBlendShapes},tooltip:"i18n:xr-plugin.tracking.faceBlendShapes"}),H=J({displayOrder:6,group:{name:"Action",displayOrder:2},visible:function(){return null!==this.faceExpressionEvents},tooltip:"i18n:xr-plugin.tracking.faceExpressionEvents"}),A(j=T(j=L(j=Z((U=t((V=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,a(t,"_faceModelPrefab",U,i(t)),a(t,"_faceTrackingContent",K,i(t)),a(t,"_faceLandMark",X,i(t)),a(t,"_faceBlendShapes",q,i(t)),a(t,"_faceExpressionEvents",G,i(t)),t._sceneFace=null,t._modelComp=null,t._morph=void 0,t}n(t,e);var s=t.prototype;return s.onLoad=function(){this.faceTrackingContent&&(this.faceTrackingContent.uuid=this.node.uuid),this.registerEvent()},s.onDestroy=function(){e.prototype.onDestroy.call(this),this._sceneFace&&(this._sceneFace.destroy(),this._sceneFace=null),this.faceLandMark&&(this.faceLandMark.destroyDefaultUI(),this.faceLandMark=null),this.unregisterEvent()},s.onEnable=function(){e.prototype.onEnable.call(this),this.createSceneFaceModel(),this.checkMorphModel()},s.onDisable=function(){e.prototype.onDestroy.call(this),this._sceneFace&&(this._sceneFace.destroy(),this._sceneFace=null)},s.registerEvent=function(){this.node.on(l.CHILD_REMOVED,this.onChildDestroyEvent,this),v.on(S.FACE_BLEND_SHAPE,this.onFaceBlendShapeEvent,this)},s.unregisterEvent=function(){this.node.off(l.CHILD_REMOVED,this.onChildDestroyEvent,this),v.off(S.FACE_BLEND_SHAPE,this.onFaceBlendShapeEvent,this)},s.onFaceBlendShapeEvent=function(e){this._modelComp&&this._modelComp.setWeight(e.weight*e.scale,0,e.shapeIndex)},s.onChildDestroyEvent=function(e){if(this.faceLandMark){var t=this.faceLandMark.getLandMarkType(e);t>y.None&&t<y.Max&&this.faceLandMark.removeLandMark(t)}},s.checkMorphModel=function(){if(this._sceneFace)if(this._modelComp=this._sceneFace.getComponentInChildren(h),this._modelComp){var e=this._modelComp.mesh;if(e)if(this._morph=e.struct.morph,this._morph&&this._morph.targetNames)if(0!==this._morph.subMeshMorphs.length){var t=this._morph.subMeshMorphs.find((function(e){return!!e}));if(t)if(this._morph.subMeshMorphs.every((function(e){return!e||e.targets.length===t.targets.length}))){for(var n=0;n<this._morph.targetNames.length;n++){var a=this._morph.targetNames[n].split("."),i=a[a.length-1];M[i]=n}p.update(M),this.faceBlendShapes&&this.faceBlendShapes.initAssetName()}else console.warn("not all submesh count are the same");else console.warn("all submesh don't have morph")}else console.warn("submesh count is 0");else console.warn("this._morph == null or this._morph.targetNames == null");else console.warn("mesh == null")}else console.warn("not find MeshRenderer Component")},s.createSceneFaceModel=function(){this._sceneFace=this.node.getChildByName("__scene_face__"),this._sceneFace&&(this._sceneFace.destroy(),this._sceneFace=null),this.faceModelPrefab&&(this._sceneFace=f(this.faceModelPrefab),this._sceneFace.name="__scene_face__",this.node.addChild(this._sceneFace),this._sceneFace._objFlags|=d.Flags.HideInHierarchy)},s.updateFeature=function(e){var t={ft:E.Face,uuid:this.node.uuid,canUse:e,tracking:this};v.collectFeature(t)},s.addProp=function(e,t){if(e===b.Factor)switch(t){case m.FACE_CONTENT:this.faceTrackingContent=new k(this.node.uuid),this.addFactor(this.faceTrackingContent)}else switch(t){case F.FACE_BLEND_SHAPES:this.faceBlendShapes=new u,this.addAction(this.faceBlendShapes);break;case F.FACE_LANDMARK:this.faceLandMark=new g,this.faceLandMark.initDefaultUI(this.node),this.addAction(this.faceLandMark);break;case F.FACE_EXPRESSION_EVENTS:this.faceExpressionEvents=new _,this.addAction(this.faceExpressionEvents)}},s.removeProp=function(e,t){var n;if(e===b.Factor)switch(t){case m.FACE_CONTENT:this.faceTrackingContent=null,this.removeFactor(t)}else switch(t){case F.FACE_BLEND_SHAPES:this.faceBlendShapes=null,this.removeAction(t);break;case F.FACE_LANDMARK:null==(n=this.faceLandMark)||n.destroyDefaultUI(),this.faceLandMark=null,this.removeAction(t);break;case F.FACE_EXPRESSION_EVENTS:this.faceExpressionEvents=null,this.removeAction(t)}},s.resetProp=function(e,t){var n,a,i,r;if(e===b.Factor)switch(t){case m.FACE_CONTENT:null==(n=this.faceTrackingContent)||n.reset()}else switch(t){case F.FACE_BLEND_SHAPES:null==(a=this.faceBlendShapes)||a.reset();break;case F.FACE_LANDMARK:null==(i=this.faceLandMark)||i.reset();break;case F.FACE_EXPRESSION_EVENTS:null==(r=this.faceExpressionEvents)||r.reset()}},s.removeLandMarkProp=function(e){this.faceLandMark&&this.faceLandMark.removeLandMark(e)},s.addLandMarkProp=function(e){this.faceLandMark&&this.faceLandMark.addLandMark(this.node,e)},s.removeBlendShapeProp=function(e){this.faceBlendShapes&&this.faceBlendShapes.removeBlendShape(e)},s.addBlendShapeProp=function(e){this.faceBlendShapes&&this.faceBlendShapes.addBlendShape(e)},s.enableBlendShapeProp=function(e,t){this.faceBlendShapes&&this.faceBlendShapes.enableBlendShape(e,t)},r(t,[{key:"trackingType",get:function(){return this._trackingType},set:function(e){e!==this._trackingType&&(this._trackingType=e)}},{key:"faceModelPrefab",get:function(){return this._faceModelPrefab},set:function(e){e!==this._faceModelPrefab&&(this._faceModelPrefab=e,this._faceModelPrefab?(this.createSceneFaceModel(),this.checkMorphModel()):(this.faceBlendShapes&&this.faceBlendShapes.clear(),this._sceneFace&&(this._sceneFace.destroy(),this._sceneFace=null)))}},{key:"faceTrackingContent",get:function(){return this._faceTrackingContent},set:function(e){e!==this._faceTrackingContent&&(this._faceTrackingContent=e)}},{key:"faceLandMark",get:function(){return this._faceLandMark},set:function(e){e!==this._faceLandMark&&(this._faceLandMark=e)}},{key:"faceBlendShapes",get:function(){return this._faceBlendShapes},set:function(e){e!==this._faceBlendShapes&&(this._faceBlendShapes=e)}},{key:"faceExpressionEvents",get:function(){return this._faceExpressionEvents},set:function(e){e!==this._faceExpressionEvents&&(this._faceExpressionEvents=e)}}]),t}(C)).prototype,"_faceModelPrefab",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(V.prototype,"_faceTrackingContent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(V.prototype,"_faceLandMark",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(V.prototype,"_faceBlendShapes",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(V.prototype,"_faceExpressionEvents",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(V.prototype,"trackingType",[N],Object.getOwnPropertyDescriptor(V.prototype,"trackingType"),V.prototype),t(V.prototype,"faceModelPrefab",[x],Object.getOwnPropertyDescriptor(V.prototype,"faceModelPrefab"),V.prototype),t(V.prototype,"faceTrackingContent",[R],Object.getOwnPropertyDescriptor(V.prototype,"faceTrackingContent"),V.prototype),t(V.prototype,"faceLandMark",[I],Object.getOwnPropertyDescriptor(V.prototype,"faceLandMark"),V.prototype),t(V.prototype,"faceBlendShapes",[z],Object.getOwnPropertyDescriptor(V.prototype,"faceBlendShapes"),V.prototype),t(V.prototype,"faceExpressionEvents",[H],Object.getOwnPropertyDescriptor(V.prototype,"faceExpressionEvents"),V.prototype),j=V))||j)||j)||j)||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-anchor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(n){var e,t,r,i,a;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){r=n.cclegacy},function(n){i=n.FeatureType},function(n){a=n.ARTrackingFeature}],execute:function(){r._RF.push({},"f0ad2SUu0BL27I+5jqS6oMt","ar-feature-anchor",void 0);n("ARFeatureAnchorTracking",function(n){function r(){return n.apply(this,arguments)||this}e(r,n);var a=r.prototype;return a.init=function(e){n.prototype.init.call(this,e)},a.onEnable=function(){var n=this._handler;n&&this.config&&n.enableAnchor(this.config.enable)},a.onDisable=function(){var n=this._handler;n&&this.config&&n.enableAnchor(this.config.enable)},t(r,[{key:"featureId",get:function(){return i.Anchor}}]),r}(a));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-base.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,i;return{setters:[function(n){t=n.createClass,e=n.inheritsLoose},function(n){i=n.cclegacy}],execute:function(){i._RF.push({},"7b8498FuRVF353D83EZUk24","ar-feature-base",void 0);var o=n("FeatureEvent",function(){function n(){this._handlers=[]}var t=n.prototype;return t.on=function(n){this._handlers.push(n)},t.off=function(n){this._handlers=this._handlers.filter((function(t){return t!==n}))},t.trigger=function(n){this._handlers.forEach((function(t){return t(n)}))},n}()),r=n("ARFeature",function(){function n(){this._config=null,this._handler=null}var e=n.prototype;return e.setHandler=function(n){this._handler=n},e.getHandler=function(){return this._handler},e.init=function(n){this._config=n},e.start=function(){this._config&&this._config.enable?this.onEnable():this.onDisable()},e.stop=function(){this.onDisable()},e.update=function(){},e.onEnable=function(){},e.onDisable=function(){},t(n,[{key:"enable",get:function(){return!!this._config&&this._config.enable},set:function(n){if(this._config){if(this._config.enable===n)return;this._config.enable=n,this.start()}}},{key:"config",get:function(){return this._config}}]),n}());n("ARTrackingFeature",function(n){function t(){for(var t,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))||this).onAddEvent=new o,t.onUpdateEvent=new o,t.onRemoveEvent=new o,t}e(t,n);var i=t.prototype;return i.onAddTracking=function(n){n&&n.length>0&&this.onAddEvent.trigger(n)},i.onUpdateTracking=function(n){n&&n.length>0&&this.onUpdateEvent.trigger(n)},i.onRemoveTracking=function(n){n&&n.length>0&&this.onRemoveEvent.trigger(n)},t}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(e){var a,t,r,i,n,o,s,u;return{setters:[function(e){a=e.inheritsLoose,t=e.createClass},function(e){r=e.cclegacy,i=e.Vec3,n=e.sys,o=e.Quat},function(e){s=e.FeatureType},function(e){u=e.ARFeature}],execute:function(){r._RF.push({},"5dd52O9ZdVJAaYxxDdQUeMB","ar-feature-camera",void 0);e("ARFeatureCameraDevice",function(e){function r(){for(var a,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(a=e.call.apply(e,[this].concat(r))||this)._arCamera=null,a._bInited=!1,a}a(r,e);var u=r.prototype;return u.init=function(a){e.prototype.init.call(this,a),this._arCamera=a.camera,this._bInited=!1;var t=this._handler;t?(t.enableCameraAutoFocus(a.autoFocus),t.Camera=this._arCamera):console.warn("not found camera handler !!!")},u.update=function(){if(this._arCamera){var e=this._handler,a=e.getCameraPose();this._arCamera.node.setPosition(a.position),this._arCamera.node.setRotation(a.rotation);var t=this.config;a.position.equals(i.ZERO)&&(!n.isBrowser||a.rotation.equals(o.IDENTITY))||this._bInited||!t.visibility||(this._arCamera.visibility=t.visibility,this._bInited=!0);var r=e.getCameraFov();0!==r&&(this._arCamera.fov=r)}},t(r,[{key:"featureId",get:function(){return s.CameraDevice}}]),r}(u));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-face.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(e){var n,t,a,i,r;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy},function(e){i=e.FeatureType},function(e){r=e.ARTrackingFeature}],execute:function(){a._RF.push({},"69851CUaR5A05Y17QheoHQc","ar-feature-face",void 0);e("ARFeatureFaceTracking",function(e){function a(){return e.apply(this,arguments)||this}n(a,e);var r=a.prototype;return r.init=function(n){e.prototype.init.call(this,n)},r.onEnable=function(){var e=this._handler;e&&this.config&&e.enableFaceTracking(this.config.enable)},r.onDisable=function(){var e=this._handler;e&&this.config&&e.enableFaceTracking(this.config.enable)},t(a,[{key:"featureId",get:function(){return i.FaceTracking}}]),a}(r));a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-image.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(e){var n,a,t,i,r;return{setters:[function(e){n=e.inheritsLoose,a=e.createClass},function(e){t=e.cclegacy},function(e){i=e.FeatureType},function(e){r=e.ARTrackingFeature}],execute:function(){t._RF.push({},"b460eMjEblM2KYxMhZgR18E","ar-feature-image",void 0);e("ARFeatureImageTracking",function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var r=t.prototype;return r.init=function(n){e.prototype.init.call(this,n);var a=this._handler;a?(a.addImagesToLib(n.arLibImages||[]),a.setImageMaxTrackingNumber(n.maxTrackingNumber||0)):console.warn("not found image tracking handler !!!")},r.onEnable=function(){var e=this._handler;e&&this.config&&e.enableImageTracking(this.config.enable)},r.onDisable=function(){var e=this._handler;e&&this.config&&e.enableImageTracking(this.config.enable)},a(t,[{key:"featureId",get:function(){return i.ImageTracking}}]),t}(r));t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-lighting-estimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(i){var t,e,n,o,r,l,s,a,g;return{setters:[function(i){t=i.inheritsLoose,e=i.createClass},function(i){n=i.cclegacy,o=i.Vec4,r=i.sys,l=i.director},function(i){s=i.ARLightingMode,a=i.FeatureType},function(i){g=i.ARFeature}],execute:function(){n._RF.push({},"24269hZsjBHm7LJxRpMC4Ik","ar-feature-lighting-estimation",void 0);var h=new o,u=new o;i("ARFeatureLightingEstimation",function(i){function n(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return(t=i.call.apply(i,[this].concat(n))||this)._mainLight=null,t._lightingMode=null,t._skyColorLDR=null,t._groundAlbedoLDR=null,t}t(n,i);var g=n.prototype;return g.init=function(t){i.prototype.init.call(this,t),this._mainLight=t.mainLight,this._lightingMode=this.config.lightingMode;var e=this._handler;e&&this.config&&e.setLightingMode(this._lightingMode)},g.update=function(){if(this.config&&this.config.enable){var i=this._handler;if(this._lightingMode===s.NO_HDR){var t;if(r.isBrowser)return;var e=null==(t=l.getScene())?void 0:t.globals.ambient;if(e){var n=i.getAmbientIntensity();e.skyIllum=n}if("IOS"===r.platform){var a=i.getAmbientColorTemperature();a>0&&this._mainLight&&(this._mainLight.colorTemperature=a)}else{var g=i.getAmbientColor();e&&!g.equals(o.ZERO)&&(this._skyColorLDR||this._groundAlbedoLDR||(this._skyColorLDR=e.skyColorLDR.clone(),this._groundAlbedoLDR=e.groundAlbedoLDR.clone()),this._skyColorLDR&&this._groundAlbedoLDR&&(e.skyColor=o.multiply(h,this._skyColorLDR,g),e.groundAlbedo=o.multiply(u,this._groundAlbedoLDR,g)))}}else if("IOS"!==r.platform){var c=i.getMainLightDirection(),d=i.getMainLightIntensity();i.getSphericalHarmonics();this._mainLight&&(this._mainLight.node.setWorldRotationFromEuler(c.x,c.y,c.z),this._mainLight.illuminance=d,l.getScene().globals.skybox.useHDR&&(this._mainLight.illuminance*=38400))}}},e(n,[{key:"featureId",get:function(){return a.LightingEstimation}}]),n}(g));n._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(e){var t,n,i,r,a;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy},function(e){r=e.FeatureType},function(e){a=e.ARTrackingFeature}],execute:function(){i._RF.push({},"d65ffr4sgpMlLGyPJjHey2V","ar-feature-object",void 0);e("ARFeatureObjectTracking",function(e){function i(){return e.apply(this,arguments)||this}t(i,e);var a=i.prototype;return a.init=function(t){e.prototype.init.call(this,t)},a.onEnable=function(){var e=this._handler;e&&this.config&&e.enableObjectTracking(this.config.enable)},a.onDisable=function(){var e=this._handler;e&&this.config&&e.enableObjectTracking(this.config.enable)},n(i,[{key:"featureId",get:function(){return r.ObjectTracking}}]),i}(a));i._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(e){var n,t,a,i,r;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy},function(e){i=e.FeatureType},function(e){r=e.ARTrackingFeature}],execute:function(){a._RF.push({},"a6817QThxJLfbw/SdpujGoK","ar-feature-plane",void 0);e("ARFeaturePlaneDetection",function(e){function a(){return e.apply(this,arguments)||this}n(a,e);var r=a.prototype;return r.init=function(n){e.prototype.init.call(this,n);var t=this._handler;t?t.setPlaneDetectionMode(n.direction||0):console.warn("not found plane tracking handler !!!")},r.onEnable=function(){var e=this._handler;e&&this.config&&e.enablePlane(this.config.enable)},r.onDisable=function(){var e=this._handler;e&&this.config&&e.enablePlane(this.config.enable)},t(a,[{key:"featureId",get:function(){return i.PlaneDetection}}]),a}(r));a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-feature-scene-mesh.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-feature-base.ts"],(function(e){var n,t,i,r,s;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){i=e.cclegacy},function(e){r=e.FeatureType},function(e){s=e.ARTrackingFeature}],execute:function(){i._RF.push({},"004ddZWAM9B/4SfkkKMkHGY","ar-feature-scene-mesh",void 0);e("ARFeatureSceneMesh",function(e){function i(){return e.apply(this,arguments)||this}n(i,e);var s=i.prototype;return s.init=function(n){e.prototype.init.call(this,n)},s.onEnable=function(){var e=this._handler;e&&this.config&&e.enableSceneMesh(this.config.enable)},s.onDisable=function(){var e=this._handler;e&&this.config&&e.enableSceneMesh(this.config.enable)},t(i,[{key:"featureId",get:function(){return r.SceneMesh}}]),i}(s));i._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-anchor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(n){var e,r,t;return{setters:[function(n){e=n.inheritsLoose},function(n){r=n.cclegacy},function(n){t=n.ARHandlerAnchor}],execute:function(){r._RF.push({},"a3c8f7tzS5KFJoNZzWJ0kYj","ar-handler-anchor",void 0);n("ARMobileHandlerAnchor",function(n){function r(){return n.apply(this,arguments)||this}e(r,n);var t=r.prototype;return t.enableAnchor=function(n){this._device.NativeObj.enableAnchor(n)},t.update=function(){},r}(t));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-base.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r;return{setters:[function(n){t=n.inheritsLoose,e=n.createClass},function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"4c7a4BZzf9FJrfjmd+OBqck","ar-handler-base",void 0);var i=n("ARHandler",function(){function n(n,t){this._device=null,this._feature=null,this._device=n,this._feature=t}var t=n.prototype;return t.update=function(){},t.process=function(n,t){},n}());n("ARHandlerAnchor",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i)),n("ARHandlerPlaneDetection",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i)),n("ARHandlerImageTracking",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i)),n("ARHandlerSceneMesh",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i)),n("ARHandlerFaceTracking",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i)),n("ARHandlerObjectTracking",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i)),n("ARHandlerCameraDevice",function(n){function r(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=n.call.apply(n,[this].concat(r))||this)._camera=null,t}return t(r,n),e(r,[{key:"Camera",get:function(){return this._camera},set:function(n){this._camera=n}}]),r}(i)),n("ARHandlerLightingEstimation",function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e}(i));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var a,t,r,i,n,o,s,c;return{setters:[function(e){a=e.inheritsLoose,t=e.createClass},function(e){r=e.cclegacy,i=e.VERSION,n=e.sys,o=e.Quat,s=e.Vec3},function(e){c=e.ARHandlerCameraDevice}],execute:function(){r._RF.push({},"552d9UWWPFII5ussqGTLNQX","ar-handler-camera",void 0);e("ARMobileHandlerCameraDevice",function(e){function r(){return e.apply(this,arguments)||this}a(r,e);var c=r.prototype;return c.enableCameraAutoFocus=function(e){this._device.NativeObj.enableCameraAutoFocus(e)},c.getCameraPose=function(){var e=this._device.NativeObj.getCameraPose();if(i<="3.7.1"&&n.platform===n.Platform.IOS){var a=new o(e[3],e[4],e[5],e[6]),t=jsb.device.getDeviceOrientation();return-90===t?a=new o(e[4],-e[3],e[6],-e[5]):0===t&&o.rotateZ(a,a,.5*Math.PI),{position:new s(e[0],e[1],e[2]),rotation:a}}return{position:new s(e[0],e[1],e[2]),rotation:new o(e[3],e[4],e[5],e[6])}},c.getCameraFov=function(){var e=this._device.NativeObj.getCameraProjectionMatrix();return 2*Math.atan(1/e[5])*180/Math.PI},c.update=function(){var e;this._feature&&null!=(e=this._feature.config)&&e.enable&&this._feature.update()},t(r,[{key:"Camera",set:function(e){this._camera=e,this._camera&&(this._device.NativeObj.setCameraId(this._camera.node.uuid),this._device.NativeObj.setCameraClip(this._camera.near,this._camera.far))}}]),r}(c));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-face.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var n,t,a,i,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e.Vec3,i=e.Quat},function(e){s=e.ARHandlerFaceTracking}],execute:function(){t._RF.push({},"951877f269A3Is2TTfNSjjp","ar-handler-face",void 0),e("ARMobileHandlerFaceTracking",function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var s=t.prototype;return s.enableFaceTracking=function(e){this._device.NativeObj.enableFaceTracking(e)},s.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable){var n=this._device,t=[],a=n.NativeObj.getRemovedFacesInfo();a.length>0&&(this.assembleInfos(a,t),t.length>0&&this._feature.onRemoveTracking(t)),(a=n.NativeObj.getAddedFacesInfo()).length>0&&(t.length=0,this.assembleInfos(a,t),t.length>0&&this._feature.onAddTracking(t)),(a=n.NativeObj.getUpdatedFacesInfo()).length>0&&(t.length=0,this.assembleInfos(a,t),t.length>0&&this._feature.onUpdateTracking(t))}},s.assembleInfos=function(e,n){if(e)for(var s=e.length/t.FACE_INFO_SIZE,r=0,o=0;o<s;o++){for(var c=e[r=o*t.FACE_INFO_SIZE],l=new a(e[r+1],e[r+2],e[r+3]),h=new i(e[r+4],e[r+5],e[r+6],e[r+7]),f=this._device.NativeObj.getFaceBlendShapesOf(c),u=[],g=f.length/2,d=0;d<g;d++){var v={type:f[2*d],value:f[2*d+1]};u.push(v)}var p={id:c,pose:{position:l,rotation:h},blendShapes:u};n.push(p)}},t}(s)).FACE_INFO_SIZE=8,t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-image.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var t,a,i,n,r,s,o,g;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,i=e.VERSION,n=e.sys,r=e.Size,s=e.Vec3,o=e.Quat},function(e){g=e.ARHandlerImageTracking}],execute:function(){a._RF.push({},"0bff3toI+JGOq9d2gjbEwpJ","ar-handler-image",void 0),e("ARMobileHandlerImageTracking",function(e){function a(){for(var t,a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this)._preRemovedImagesId=[],t._fixFlag=!1,t}t(a,e);var g=a.prototype;return g.enableImageTracking=function(e){this._device.NativeObj.enableImageTracking(e)},g.addImagesToLib=function(e){var t=this;e&&e.forEach((function(e){t.addImageToLib(e.assetPath,e.widthInMeters)}))},g.addImageToLib=function(e,t){this._device.NativeObj.addImageToLibWithSize(e,t>0?t:0)},g.setImageMaxTrackingNumber=function(e){this._device.NativeObj.setImageMaxTrackingNumber(e)},g.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable){var t=this._device,a=[],r=t.NativeObj.getRemovedImagesInfo();if(r.length>0&&(this.assembleInfos(r,a),a.length>0)){if(i<="3.7.1"&&n.platform===n.Platform.IOS&&!this._fixFlag)for(var s=a.length-1;s>=0;s--)this._preRemovedImagesId.push(a[s].id),a.splice(s,1),this._fixFlag=!0;this._feature.onRemoveTracking(a)}if((r=t.NativeObj.getAddedImagesInfo()).length>0&&(a.length=0,this.assembleInfos(r,a),a.length>0)){if(i<="3.7.1"&&n.platform===n.Platform.IOS&&this._preRemovedImagesId.length>0){for(var o=a.length-1;o>=0;o--)for(var g=a[o],l=0;l<this._preRemovedImagesId.length;l++)if(this._preRemovedImagesId[l]===g.id){a.splice(o,1);break}this._preRemovedImagesId.length=0}this._feature.onAddTracking(a)}(r=t.NativeObj.getUpdatedImagesInfo()).length>0&&(a.length=0,this.assembleInfos(r,a),a.length>0&&this._feature.onUpdateTracking(a))}},g.assembleInfos=function(e,t){if(e)for(var i=e.length/a.IMAGE_INFO_SIZE,n=0,g=0;g<i;g++){var l={id:e[n=g*a.IMAGE_INFO_SIZE],libIndex:e[n+1],trackingState:e[n+2],extent:new r(e[n+3],e[n+4]),pose:{position:new s(e[n+5],e[n+6],e[n+7]),rotation:new o(e[n+8],e[n+9],e[n+10],e[n+11])}};t.push(l)}},a}(g)).IMAGE_INFO_SIZE=12,a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-lighting-estimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(t){var e,i,n,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.Vec4,r=t.Vec3},function(t){a=t.ARHandlerLightingEstimation}],execute:function(){i._RF.push({},"6600eVAexxNHozkljMPaSWq","ar-handler-lighting-estimation",void 0);t("ARMobileHandlerLightingEstimation",function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var a=i.prototype;return a.enableLightingEstimation=function(t){this._feature&&(this._feature.enable=t),this._device.NativeObj.enableLightEstimate(t)},a.setLightingMode=function(t){this._device.NativeObj.setLightingMode(t.valueOf())},a.getAmbientIntensity=function(){return this._device.NativeObj.getAmbientIntensity()},a.getAmbientColorTemperature=function(){return this._device.NativeObj.getAmbientColorTemperature()},a.getAmbientColor=function(){var t=this._device.NativeObj.getAmbientColor();return new n(t[0],t[1],t[2],t[3])},a.getSphericalHarmonics=function(){return this._device.NativeObj.getSphericalHarmonics()},a.getMainLightDirection=function(){var t=this._device.NativeObj.getMainLightDirection();return new r(t[0],t[1],t[2])},a.getMainLightIntensity=function(){var t=this._device.NativeObj.getMainLightIntensity();return Math.max(t[0],t[1],t[2])},a.update=function(){var t;this._feature&&null!=(t=this._feature.config)&&t.enable&&this._feature.update()},i}(a));i._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var t,n,i,a,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e.Vec3,a=e.Quat},function(e){s=e.ARHandlerObjectTracking}],execute:function(){n._RF.push({},"0ae161nzqRPBLmGoyYxeoJk","ar-handler-object",void 0),e("ARMobileHandlerObjectTracking",function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var s=n.prototype;return s.enableObjectTracking=function(e){this._device.NativeObj.enableObjectTracking(e)},s.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable){var t=this._device,n=[],i=t.NativeObj.getRemovedObjectsInfo();i.length>0&&(this.assembleInfos(i,n),n.length>0&&this._feature.onRemoveTracking(n)),(i=t.NativeObj.getAddedObjectsInfo()).length>0&&(n.length=0,this.assembleInfos(i,n),n.length>0&&this._feature.onAddTracking(n)),(i=t.NativeObj.getUpdatedObjectsInfo()).length>0&&(n.length=0,this.assembleInfos(i,n),n.length>0&&this._feature.onUpdateTracking(n))}},s.assembleInfos=function(e,t){if(e)for(var s=e.length/n.OBJECT_INFO_SIZE,o=0,r=0;r<s;r++){var c={id:e[o=r*n.OBJECT_INFO_SIZE],libIndex:e[o+1],extent:new i(e[o+2],e[o+3],e[o+4]),scale:new i(e[o+5],e[o+6],e[o+7]),pose:{position:new i(e[o+8],e[o+9],e[o+10]),rotation:new a(e[o+11],e[o+12],e[o+13],e[o+14])}};t.push(c)}},n}(s)).OBJECT_INFO_SIZE=15,n._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var n,t,a,i,o,l,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e.Vec2,i=e.Size,o=e.Vec3,l=e.Quat},function(e){s=e.ARHandlerPlaneDetection}],execute:function(){t._RF.push({},"5c68cDoE71FgYO0zxvv3spF","ar-handler-plane",void 0),e("ARMobileHandlerPlaneDetection",function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var s=t.prototype;return s.enablePlane=function(e){this._device.NativeObj.enablePlane(e)},s.setPlaneDetectionMode=function(e){this._device.NativeObj.setPlaneDetectionMode(e)},s.getPlanePolygon=function(e){for(var n=this._device.NativeObj.getPlanePolygon(e),t=new Array,i=2*Math.floor(.5*n.length),o=0;o<i;)t.push(new a(n[o++],n[o++]));return t},s.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable){var n=this._device,t=[],a=n.NativeObj.getRemovedPlanesInfo();a.length>0&&(this.assembleInfos(a,t),t.length>0&&this._feature.onRemoveTracking(t)),(a=n.NativeObj.getAddedPlanesInfo()).length>0&&(t.length=0,this.assembleInfos(a,t),t.length>0&&this._feature.onAddTracking(t)),(a=n.NativeObj.getUpdatedPlanesInfo()).length>0&&(t.length=0,this.assembleInfos(a,t),t.length>0&&this._feature.onUpdateTracking(t))}},s.assembleInfos=function(e,n){if(e)for(var a=e.length/t.PLANE_INFO_SIZE,s=0,r=0;r<a;r++){var c={id:e[s=r*t.PLANE_INFO_SIZE],type:e[s+1],trackingState:e[s+2],extent:new i(e[s+3],e[s+4]),pose:{position:new o(e[s+5],e[s+6],e[s+7]),rotation:new l(e[s+8],e[s+9],e[s+10],e[s+11])}};n.push(c)}},t}(s)).PLANE_INFO_SIZE=12,t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-handler-scene-mesh.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var n,t,s,i,a;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,s=e.Vec3,i=e.Quat},function(e){a=e.ARHandlerSceneMesh}],execute:function(){t._RF.push({},"0ed8ey+8B1P7pfk8q+PQcyN","ar-handler-scene-mesh",void 0),e("ARMobileHandlerSceneMesh",function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var a=t.prototype;return a.enableSceneMesh=function(e){this._device.NativeObj.enableSceneMesh(e)},a.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable){var n,t=this._device,s=[];(n=t.NativeObj.getRemovedSceneMesh()).length>0&&(s.length=0,this.assembleInfos(n,s),s.length>0&&this._feature.onRemoveTracking(s)),(n=t.NativeObj.getAddedSceneMesh()).length>0&&(s.length=0,this.assembleInfos(n,s),s.length>0&&this._feature.onAddTracking(s)),(n=t.NativeObj.getUpdatedSceneMesh()).length>0&&(s.length=0,this.assembleInfos(n,s),s.length>0&&this._feature.onUpdateTracking(s))}},a.assembleInfos=function(e,n){if(e)for(var a=this._device,r=e.length/t.MESH_INFO_SIZE,c=0,h=0;h<r;h++){var o=e[c=h*t.MESH_INFO_SIZE],l=a.NativeObj.getSceneMeshVertices(o),u=a.NativeObj.getSceneMeshTriangleIndices(o);a.NativeObj.endRequireSceneMesh();var d={id:o,pose:{position:new s(e[c+1],e[c+2],e[c+3]),rotation:new i(e[c+4],e[c+5],e[c+6],e[c+7])},vertices:l,indices:u};n.push(d)}},t}(a)).MESH_INFO_SIZE=8,t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-image-tracking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./alignment.ts","./display-children.ts","./image-source.ts","./ar-enum.ts","./ar-event.ts","./ar-tracking-base.ts","./track-event.ts","./surface-overlay.ts"],(function(e){var t,i,n,r,a,s,c,o,u,l,g,p,m,h,y,d,f,_,v,k,A,S,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){s=e.cclegacy,c=e._decorator,o=e.assetManager,u=e.Sprite,l=e.SpriteFrame,g=e.UITransform,p=e.Size},function(e){m=e.ARAlignment},function(e){h=e.ARDisplayChildren},function(e){y=e.ARImageSource},function(e){d=e.ARTrackingType,f=e.ARPropType,_=e.FactorType,v=e.ActionType},function(e){k=e.arEvent},function(e){A=e.ARTrackingBase},function(e){S=e.ARTrackEvent},function(e){I=e.ARSurfaceOverlay}],execute:function(){var b,O,E,T,R,w,C,D,F,L,P,z,N,M,j,x,U,G,V;s._RF.push({},"98f85jlEZ9KuKu/6hZGH7J1","ar-image-tracking",void 0);var Y=c.ccclass,H=c.property,K=c.help,B=c.menu,W=c.executeInEditMode;e("ARImageTracking",(b=Y("cc.ARImageTracking"),O=K("i18n:cc.ARImageTracking"),E=B("XR/AR Tracking/ARImageTracking"),T=H({serializable:!0}),R=H({serializable:!0}),w=H({serializable:!0}),C=H({serializable:!0}),D=H({type:d,displayOrder:1,readonly:!0,tooltip:"i18n:xr-plugin.tracking.trackingType"}),F=H({displayOrder:2,group:{name:"Factor",displayOrder:1},visible:function(){return null!==this.imageSource},tooltip:"i18n:xr-plugin.tracking.imageSource"}),L=H({displayOrder:3,group:{name:"Action",displayOrder:2},visible:function(){return null!==this.display},tooltip:"i18n:xr-plugin.tracking.display"}),P=H({displayOrder:4,displayName:"Align",group:{name:"Action",displayOrder:2},visible:function(){return null!==this.alignment},tooltip:"i18n:xr-plugin.tracking.alignment"}),z=H({displayOrder:5,group:{name:"Action",displayOrder:2},visible:function(){return null!==this.trackEvent},tooltip:"i18n:xr-plugin.tracking.trackEvent"}),N=H({displayOrder:6,group:{name:"Action",displayOrder:2},visible:function(){return null!==this.surfaceOverlay},tooltip:"i18n:xr-plugin.tracking.surfaceOverlay"}),b(M=O(M=E(M=W((x=t((j=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"_imageSource",x,r(t)),n(t,"_display",U,r(t)),n(t,"_alignment",G,r(t)),n(t,"_surfaceOverlay",V,r(t)),t._sceneImage=null,t}i(t,e);var s=t.prototype;return s.onLoad=function(){this.imageSource&&(this.imageSource.uuid=this.node.uuid,this.imageSource.registerImageAssetsChange()),this.createSceneImage()},s.onDestroy=function(){e.prototype.onDestroy.call(this),this.removeSceneImage()},s.removeSceneImage=function(){this._sceneImage=this.node.getChildByName("__scene_image__"),this._sceneImage&&this._sceneImage.isValid&&(this._sceneImage.parent=null,this._sceneImage.destroy(),this._sceneImage=null)},s.createSceneImage=function(){this.removeSceneImage()},s.updateSceneImage=function(){var e=this,t=function(){if(e._imageSource){var t=e._imageSource.getImageAssets(),i=t.length<=0?null:t[0].imageAsset,n=t.length<=0?"255e67f3-b91b-4568-8843-b0075f513f73":t[0].imageAsset._uuid;o.loadAny({uuid:n},(function(t,n){if(e._sceneImage&&e._imageSource){e._sceneImage.getComponent(u).spriteFrame=l.createWithImage(n);var r=e._sceneImage.getComponent(g);r.contentSize=i?e._imageSource.getImageAssetsSize(i._uuid):new p(.15,.15)}}))}};this._sceneImage&&(this._imageSource?(this._imageSource.removeListener(),this._imageSource.addListener((function(e){t()})),t()):o.loadAny({uuid:"255e67f3-b91b-4568-8843-b0075f513f73"},(function(t,i){e._sceneImage&&(e._sceneImage.getComponent(u).spriteFrame=l.createWithImage(i),e._sceneImage.getComponent(g).contentSize=new p(.15,.15))})))},s.updateFeature=function(e){var t={ft:this.trackingType,uuid:this.node.uuid,canUse:e,tracking:this,images:this.imageSource?this.imageSource.getImageAssets():[]};k.collectFeature(t)},s.addProp=function(e,t){if(e===f.Factor)switch(t){case _.IMAGE_SOURCE:this.imageSource=new y(this.node.uuid),this.addFactor(this.imageSource)}else switch(t){case v.DISPLAY_CHILDREN:this.display=new h,this.addAction(this.display);break;case v.ALIGNMENT:this.alignment=new m,this.addAction(this.alignment);break;case v.TRACK_EVENT:this.trackEvent=new S,this.addAction(this.trackEvent);break;case v.SURFACE_OVERLAY:this.surfaceOverlay=new I,this.addAction(this.surfaceOverlay)}},s.removeProp=function(e,t){if(e===f.Factor)switch(t){case _.IMAGE_SOURCE:this.imageSource=null,this.removeFactor(t)}else switch(t){case v.DISPLAY_CHILDREN:this.display=null,this.removeAction(t);break;case v.TRACK_EVENT:this.trackEvent=null,this.removeAction(t);break;case v.ALIGNMENT:this.alignment=null,this.removeAction(t);break;case v.SURFACE_OVERLAY:this.surfaceOverlay=null,this.removeAction(t)}},s.resetProp=function(e,t){var i,n,r,a,s;if(e===f.Factor)switch(t){case _.IMAGE_SOURCE:null==(i=this.imageSource)||i.reset()}else switch(t){case v.DISPLAY_CHILDREN:null==(n=this.display)||n.reset();break;case v.TRACK_EVENT:null==(r=this.trackEvent)||r.reset();break;case v.ALIGNMENT:null==(a=this.alignment)||a.reset();break;case v.SURFACE_OVERLAY:null==(s=this.surfaceOverlay)||s.reset()}},s.updateImageSourceProp=function(e,t){this.imageSource&&(this.imageSource.updateImageAssets(parseInt(e),t),cce.Engine.repaintInEditMode())},a(t,[{key:"trackingType",get:function(){return this._trackingType},set:function(e){e!==this._trackingType&&(this._trackingType=e)}},{key:"imageSource",get:function(){return this._imageSource},set:function(e){e!==this._imageSource&&(this._imageSource=e,this.updateSceneImage())}},{key:"display",get:function(){return this._display},set:function(e){if(e){var t=e;this._alignment&&(this._alignment.closeTracking=t.stopTracking)}e!==this._display&&(this._display=e)}},{key:"alignment",get:function(){return this._alignment},set:function(e){e!==this._alignment&&(this._alignment=e,this._alignment&&this._display&&(this._alignment.closeTracking=this._display.stopTracking))}},{key:"trackEvent",get:function(){return this._trackEvent},set:function(e){e!==this._trackEvent&&(this._trackEvent=e)}},{key:"surfaceOverlay",get:function(){return this._surfaceOverlay},set:function(e){e!==this._surfaceOverlay&&(this._surfaceOverlay=e)}}]),t}(A)).prototype,"_imageSource",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(j.prototype,"_display",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(j.prototype,"_alignment",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(j.prototype,"_surfaceOverlay",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(j.prototype,"trackingType",[D],Object.getOwnPropertyDescriptor(j.prototype,"trackingType"),j.prototype),t(j.prototype,"imageSource",[F],Object.getOwnPropertyDescriptor(j.prototype,"imageSource"),j.prototype),t(j.prototype,"display",[L],Object.getOwnPropertyDescriptor(j.prototype,"display"),j.prototype),t(j.prototype,"alignment",[P],Object.getOwnPropertyDescriptor(j.prototype,"alignment"),j.prototype),t(j.prototype,"trackEvent",[z],Object.getOwnPropertyDescriptor(j.prototype,"trackEvent"),j.prototype),t(j.prototype,"surfaceOverlay",[N],Object.getOwnPropertyDescriptor(j.prototype,"surfaceOverlay"),j.prototype),M=j))||M)||M)||M)||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/ar-interaction-define.ts",["cc"],(function(e){var n,t;return{setters:[function(e){n=e.cclegacy,t=e.ccenum}],execute:function(){n._RF.push({},"23b91w6D+NGz5RyxBcOFZHC","ar-interaction-define",void 0);e("StateAction",function(e){return e[e.Enter=0]="Enter",e[e.Update=1]="Update",e[e.Exit=2]="Exit",e[e.Cancel=3]="Cancel",e}({}));var r=e("SurfaceType",function(e){return e[e.ALL=1]="ALL",e[e.AR_PLANE=1]="AR_PLANE",e[e.AR_MESH=2]="AR_MESH",e}({}));t(r);e("PlaneDirectionType",function(e){return e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e}({})),e("TransformModeType",function(e){return e[e.SPACE=0]="SPACE",e[e.PLANE=1]="PLANE",e[e.MESH=2]="MESH",e}({}));var c=e("PlacementType",function(e){return e[e.Base_On_Spatial_Anchor=0]="Base_On_Spatial_Anchor",e[e.Base_On_Surface=1]="Base_On_Surface",e}({}));t(c),n._RF.pop()}}}));

System.register("chunks:///_virtual/ar-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index3.ts","./ar-configuration.ts","./ar-enum.ts","./ar-tracking-base.ts","./ar-defines.ts","./ar-event.ts","./ar-system-trackable.ts"],(function(e){var t,n,a,i,r,s,o,c,u,g,f,l,h,p,y,m,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,o=e._decorator,c=e.director,u=e.Component},function(e){g=e},function(e){f=e.ARConfiguration},function(e){l=e.ARTrackingType},function(e){h=e.ARTrackingBase},function(e){p=e.FeatureType},function(e){y=e.arEvent,m=e.ARInternalEventType},function(e){k=e.ARSystemTrackable}],execute:function(){var d,_,T,b,F,v,M,E;s._RF.push({},"ca141x9P8hLmqHc3HtVYnDx","ar-manager",void 0);var C=o.ccclass,A=o.property,S=o.help,R=o.menu,w=o.executeInEditMode,I=o.disallowMultiple;e("ARManager",(d=C("cc.ARManager"),_=S("i18n:cc.ARManager"),T=R("XR/AR Tracking/ARManager"),b=A({serializable:!0}),F=A({displayOrder:1,visible:function(){return this._configuration.hasConfig},tooltip:"i18n:xr-plugin.tracking.manager.configuration"}),d(v=_(v=T(v=w(v=I((E=t((M=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,a(t,"_configuration",E,i(t)),t._systemsMap=new Map,t._trackableSystem=null,t}n(t,e);var s=t.prototype;return s.onLoad=function(){this.configuration.registerEvent(),y.on(m.CHECK_TRACKING_NODE_STATE,this.onCheckTrackingNodeState,this)},s.onDestroy=function(){this.configuration.unregisterEvent(),y.off(m.CHECK_TRACKING_NODE_STATE,this.onCheckTrackingNodeState,this)},s.start=function(){},s.collectFeature=function(){this._configuration.reset(),c.getScene().getComponentsInChildren(h).forEach((function(e){e.node.active&&(e.updateFeature(!0),e.init())}))},s.init=function(e){var t=this;this.configuration.trackings.forEach((function(n){n&&t.addToSystemWith(n,e)})),this._trackableSystem=new k,this._systemsMap.forEach((function(e){var n;e.init(t.node),null==(n=t._trackableSystem)||n.registerFeatureSystem(e)}))},s.updateSystem=function(){this._trackableSystem&&this._trackableSystem.update()},s.showAllVisualizer=function(e){if(this._systemsMap.has(e)){var t=this._systemsMap.get(e);null==t||t.showAllVisualizer()}},s.hideAllVisualizer=function(e){if(this._systemsMap.has(e)){var t=this._systemsMap.get(e);null==t||t.hideAllVisualizer()}},s.enableFeatureTracking=function(e,t){(this.configuration.setFeatureEnable(e,t),this._systemsMap.has(e))&&this._systemsMap.get(e).enableFeature(t)},s.getFeature=function(e){return this._systemsMap.has(e)?this._systemsMap.get(e).feature:null},s.enablePlaneTracking=function(e,t){this.enableFeatureTracking(l.Plane,1===parseInt(t))},s.enableImageTracking=function(e,t){this.enableFeatureTracking(l.Image,1===parseInt(t))},s.enableMeshTracking=function(e,t){this.enableFeatureTracking(l.WorldMesh,1===parseInt(t))},s.enableFaceTracking=function(e,t){this.enableFeatureTracking(l.Face,1===parseInt(t))},s.getFeatureConfig=function(e){return this.configuration.getFeatureConfig(e)},s.onCheckTrackingNodeState=function(e){if(this._systemsMap.has(e.ft)){var t=this._systemsMap.get(e.ft);if(e.canUse){var n=t.getTrackingCount();t.addTracking(e.tracking),this.configuration.getFeatureEnable(e.ft)&&n<=0?t.enableFeature(!0):t.updateFeature(this.configuration.getFeatureConfig(e.ft))}else{t.removeTracking(e.tracking);var a=t.getTrackingCount();!this.configuration.getFeatureEnable(e.ft)&&a<=0?t.enableFeature(!1):t.updateFeature(this.configuration.getFeatureConfig(e.ft))}}else console.warn("not found system type with :",l[e.ft])},s.addToSystemWith=function(e,t){if(this._systemsMap.has(e.trackingType)){this._systemsMap.get(e.trackingType).addTracking(e)}else{var n=t.FeaturePrefix+p[e.trackingType],a=t.tryGetFeature(n);if(a){var i="ARSystem"+p[e.trackingType];if(g[i]){var r=new g[i](a);r.addTracking(e),this._systemsMap.set(e.trackingType,r)}}else this.emitUnsupportedEvent(e.trackingType),console.error("ar manager feature init error!",n)}},s.emitUnsupportedEvent=function(e){switch(e){case l.Plane:this._configuration.planeFeature.emitUnsupportedEvent();break;case l.WorldMesh:this._configuration.meshingFeature.emitUnsupportedEvent();break;case l.Image:this._configuration.imageFeature.emitUnsupportedEvent();break;case l.Face:this._configuration.faceFeature.emitUnsupportedEvent()}},r(t,[{key:"configuration",get:function(){return this._configuration},set:function(e){e!==this._configuration&&(this._configuration=e)}}]),t}(u)).prototype,"_configuration",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f}}),t(M.prototype,"configuration",[F],Object.getOwnPropertyDescriptor(M.prototype,"configuration"),M.prototype),v=M))||v)||v)||v)||v)||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/ar-meshing.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./ar-event.ts","./ar-tracking-base.ts"],(function(e){var t,i,r,n,s,a,o,c,p,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){a=e.cclegacy,o=e._decorator,c=e.Prefab},function(e){p=e.ARTrackingType},function(e){u=e.arEvent},function(e){l=e.ARTrackingBase}],execute:function(){var h,y,g,d,f,k,m,z,T;a._RF.push({},"7e16eBsVUBHY7H9X5yX9/ZT","ar-meshing",void 0);var _=o.ccclass,v=o.property,V=o.help,R=o.menu,b=o.executeInEditMode;e("ARMeshing",(h=_("cc.ARMeshing"),y=V("i18n:cc.ARMeshing"),g=R("XR/AR Tracking/ARMeshing"),d=v({serializable:!0}),f=v({type:p,displayOrder:1,readonly:!0,tooltip:"i18n:xr-plugin.tracking.trackingType"}),k=v({type:c,displayOrder:2,tooltip:"i18n:xr-plugin.tracking.meshVisualizer"}),h(m=y(m=g(m=b((T=t((z=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,r(t,"_meshVisualizer",T,n(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.trackingType=p.WorldMesh,this.initialized=!0,this.dependOnFactorOrAction=!1},a.updateFeature=function(e){var t={ft:this.trackingType,uuid:this.node.uuid,canUse:e,tracking:this,visualizer:this.meshVisualizer};u.collectFeature(t)},s(t,[{key:"trackingType",get:function(){return this._trackingType},set:function(e){e!==this._trackingType&&(this._trackingType=e)}},{key:"meshVisualizer",get:function(){return this._meshVisualizer},set:function(e){e!==this._meshVisualizer&&(this._meshVisualizer=e)}}]),t}(l)).prototype,"_meshVisualizer",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(z.prototype,"trackingType",[f],Object.getOwnPropertyDescriptor(z.prototype,"trackingType"),z.prototype),t(z.prototype,"meshVisualizer",[k],Object.getOwnPropertyDescriptor(z.prototype,"meshVisualizer"),z.prototype),m=z))||m)||m)||m)||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-mobile-device.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-device-base.ts","./index5.ts","./index6.ts","./ar-defines.ts"],(function(e){var t,i,n,r,a,s,o,u,c,f;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,r=e.sys,a=e.Vec3,s=e.Quat},function(e){o=e.ARDevice},function(e){u=e},function(e){c=e},function(e){f=e.FeatureType}],execute:function(){n._RF.push({},"55832QVIq5OhJCDF3QZZjy3","ar-mobile-device",void 0);e("ARMobileDevice",function(e){function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._nativeObj=void 0,t}t(n,e);var o=n.prototype;return o.create=function(){this._nativeObj=xr.ARModule.get(),this._nativeObj||(this._nativeObj=xr.ARModule.createARModule())},o.init=function(e,t){if(!this._nativeObj)return console.error("... armodule init in native failed! ..."),Promise.resolve(!1);this.createFeatures(t),this.createHandlers(),this._nativeObj.config(this._featureConfigMask),this.initFeatures(t),this._nativeObj.start();var i=this._nativeObj.getSupportMask();return 0===i?Promise.resolve(!1):(this.checkFeaturesSupport(i),Promise.resolve(!0))},o.start=function(){this._featuresMap.forEach((function(e){e.start()}))},o.stop=function(){this._featuresMap.forEach((function(e){e.stop()})),this._nativeObj.stop()},o.update=function(){r.platform===r.Platform.ANDROID&&this._nativeObj.update(),this.updateHandlers()},o.getAPIState=function(){return this._nativeObj.getAPIState()},o.checkFeatureAvailable=function(e){return!!u[e]},o.createFeature=function(e){return new u[e](this)},o.checkHandlerAvailable=function(e){return!!c[e]},o.createHandler=function(e){var t=this.HandlerPrefix+f[e.featureId];return this.checkHandlerAvailable(t)?new c[t](this,e):null},o.getCameraTexCoords=function(){return this._nativeObj.getCameraTexCoords()},o.setDisplayGeometry=function(e,t,i){this._nativeObj.setDisplayGeometry(e,t,i)},o.setCameraTextureName=function(e){this._nativeObj.setCameraTextureName(e)},o.getCameraTextureRef=function(){return this._nativeObj.getCameraTextureRef()},o.screenHitTest=function(e,t){var i=this;return new Promise((function(n,r){if(t)if(i._nativeObj.tryHitTest(t.x,t.y,e)){var o=i._nativeObj.getHitResult();n({id:i._nativeObj.getHitId(),pose:{position:new a(o[0],o[1],o[2]),rotation:new s(o[3],o[4],o[5],o[6])}})}else n(null)}))},o.worldHitTest=function(e,t){return Promise.reject(new Error("mobile device Ray hit test is not supported "))},i(n,[{key:"NativeObj",get:function(){return this._nativeObj}},{key:"HandlerPrefix",get:function(){return"ARMobileHandler"}}]),n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/ar-placeable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-interaction-define.ts"],(function(e){var t,i,n,a,l,r,c,p,o,s,u,b,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){r=e.cclegacy,c=e._decorator,p=e.EventHandler,o=e.Prefab,s=e.instantiate,u=e.director,b=e.Component,f=e.Vec3},function(e){v=e.SurfaceType}],execute:function(){var d,y,h,m,E,w,_,g,P,z,O,x,C,F,N,T,L,D,R,A,S,k;r._RF.push({},"21929TOG+tDGZ+UmuARY8+B","ar-placeable",void 0);var B=c.ccclass,G=c.property,H=c.help,I=c.menu,M=c.disallowMultiple,j=(d=B("cc.PlacementEvents"),y=G({serializable:!0,type:[p],displayOrder:1,tooltip:"i18n:xr-plugin.placeable.placement_events.placeEnterEvents"}),h=G({serializable:!0,type:[p],displayOrder:2,tooltip:"i18n:xr-plugin.placeable.placement_events.placeCancelEvents"}),m=G({serializable:!0,type:[p],displayOrder:2,tooltip:"i18n:xr-plugin.placeable.placement_events.placeFinishEvents"}),d((_=t((w=function(){function e(){n(this,"placeEnterEvents",_,this),n(this,"placeCancelEvents",g,this),n(this,"placeFinishEvents",P,this)}var t=e.prototype;return t.placeEntered=function(e){p.emitEvents(this.placeEnterEvents,e)},t.placeCanceled=function(e){p.emitEvents(this.placeCancelEvents,e)},t.placeFinished=function(e){p.emitEvents(this.placeFinishEvents,e)},e}()).prototype,"placeEnterEvents",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=t(w.prototype,"placeCancelEvents",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(w.prototype,"placeFinishEvents",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=w))||E);e("Placeable",(z=B("cc.Placeable"),O=H("i18n:cc.Placeable"),x=I("XR/Interaction/Placeable"),C=G({serializable:!0,type:o,displayOrder:1,tooltip:"i18n:xr-plugin.placeable.preview_Placement_Prefab"}),F=G({serializable:!0,displayOrder:2,tooltip:"i18n:xr-plugin.placeable.placementOffset"}),N=G({serializable:!0,type:v,displayOrder:3,visible:function(){return!1},tooltip:"i18n:xr-plugin.placeable.surfaceType"}),T=G({serializable:!0,type:j,displayOrder:4,tooltip:"i18n:xr-plugin.placeable.placementEvents"}),z(L=O(L=x(L=M((R=t((D=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,n(t,"preview_Placement_Prefab",R,a(t)),n(t,"placementOffset",A,a(t)),n(t,"surfaceType",S,a(t)),n(t,"placementEvents",k,a(t)),t._previewNode=null,t}return i(t,e),t.prototype.onLoad=function(){this.preview_Placement_Prefab&&(this._previewNode=s(this.preview_Placement_Prefab),u.getScene().addChild(this._previewNode),this._previewNode.active=!1)},l(t,[{key:"previewNode",get:function(){return this._previewNode}}]),t}(b)).prototype,"preview_Placement_Prefab",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(D.prototype,"placementOffset",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new f(0,0,0)}}),S=t(D.prototype,"surfaceType",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.ALL}}),k=t(D.prototype,"placementEvents",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new j}}),L=D))||L)||L)||L)||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-plane-tracking-visualizer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts"],(function(e){var n,i,t,o,s,r,a,h,l,c,u;return{setters:[function(e){n=e.inheritsLoose,i=e.createClass},function(e){t=e.cclegacy,o=e._decorator,s=e.MeshRenderer,r=e.Line,a=e.MeshCollider,h=e.Vec3,l=e.utils,c=e.Component},function(e){u=e.TrackingQuality}],execute:function(){var g;t._RF.push({},"8a229dA6ttF7rGw1vmOjUlP","ar-plane-tracking-visualizer",void 0);var p=o.ccclass,d=o.help,_=o.menu,f=o.executeInEditMode;e("PlaneTrackingVisualizer",p("cc.PlaneTrackingVisualizer")(g=d("i18n:cc.PlaneTrackingVisualizer")(g=_("hidden:XR/AR Tracking/PlaneTrackingVisualizer")(g=f(g=function(e){function t(){for(var n,i=arguments.length,t=new Array(i),o=0;o<i;o++)t[o]=arguments[o];return(n=e.call.apply(e,[this].concat(t))||this)._usePlaneShape=!0,n._trackingQualityCondition=u.Poor_Quality,n._circle_positions=null,n._originMesh=null,n._originPoints=[new h(-.5,0,-.5),new h(-.5,0,.5),new h(.5,0,.5),new h(.5,0,-.5),new h(-.5,0,-.5)],n._trackingPlaneId=0,n._polygon=[],n._hasMeshCollider=!1,n}n(t,e);var o=t.prototype;return o.onLoad=function(){var e=this.node.getComponent(s);e&&(this._originMesh=e.mesh);var n=this.node.getComponent(r);n&&(n.positions=this._originPoints),this.node.getComponent(a)&&(this._hasMeshCollider=!0)},o.drawSceneEffect=function(e){},o.update=function(e){if(this._usePlaneShape)this.polygon&&this.polygon.length>0&&this.updatePolygonMesh(this.polygon);else{var n=this.node.getComponent(s);if(n&&n.mesh!==this._originMesh)n.mesh=this._originMesh,this.node.getComponent(r).positions=this._originPoints;if(this._hasMeshCollider){var i=this.node.getComponent(a);i&&i.mesh!==this._originMesh&&(i.mesh=this._originMesh)}}},o.updatePolygonMesh=function(e){for(var n=[],i=new Array,t=0;t<e.length;t++){var o=e[t];n.push(o.x,0,o.y),i.push(new h(o.x,0,o.y))}var c=i.slice(0);c.push(i[0]);var u=this.node.getComponent(r);u&&(u.positions=c);var g={positions:n,indices:this.generateIndices(i)},p=l.MeshUtils.createMesh(g),d=this.node.getComponent(s);if(p&&d&&(d.mesh=p),this._hasMeshCollider){var _=this.node.getComponent(a);_&&this.node.removeComponent(a),(_=this.node.addComponent(a)).mesh=p}},o.generateIndices=function(e){var n=e.length-1;n>1&&h.equals(e[0],e[e.length-1])&&n--;for(var i=n,t=[],o=0;o<n;++o){var s=(o+1)%n;t.push(i),t.push(o),t.push(s)}return t},i(t,[{key:"usePlaneShape",set:function(e){this._usePlaneShape=e}},{key:"trackingQualityCondition",set:function(e){this._trackingQualityCondition=e}},{key:"trackingPlaneId",get:function(){return this._trackingPlaneId},set:function(e){this._trackingPlaneId=e}},{key:"polygon",get:function(){return this._polygon},set:function(e){this._polygon=e}}]),t}(c))||g)||g)||g)||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-plane-tracking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./adaptive-scale.ts","./alignment.ts","./display-children.ts","./surface-overlay.ts","./track-event.ts","./ar-defines.ts","./plane-direction.ts","./plane-semantic.ts","./plane-size.ts","./ar-enum.ts","./ar-event.ts","./ar-tracking-base.ts","./ar-plane-tracking-visualizer.ts","./ar-session.ts"],(function(e){var t,i,n,a,r,l,c,s,o,p,u,h,d,y,_,g,f,S,v,k,m,A,P,b,E,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){l=e.cclegacy,c=e._decorator,s=e.instantiate,o=e.CCObject,p=e.Vec3},function(e){u=e.ARAdaptiveScale},function(e){h=e.ARAlignment},function(e){d=e.ARDisplayChildren},function(e){y=e.ARSurfaceOverlay},function(e){_=e.ARTrackEvent},function(e){g=e.ARPlaneDetectionMode},function(e){f=e.ARPlaneDirection},function(e){S=e.ARPlaneSemantic},function(e){v=e.ARPlaneSize},function(e){k=e.ARTrackingType,m=e.ARPropType,A=e.FactorType,P=e.ActionType},function(e){b=e.arEvent},function(e){E=e.ARTrackingBase},function(e){D=e.PlaneTrackingVisualizer},null],execute:function(){var T,O,z,w,C,N,R,L,I,F,V,j,x,M,H,Y,B,Z,K,U,G,W,X,q,J,Q,$,ee;l._RF.push({},"1a3c2iECT1I0ZSWBKxOF6Z4","ar-plane-tracking",void 0);var te=c.ccclass,ie=c.property,ne=c.help,ae=c.menu,re=c.executeInEditMode;e("ARPlaneTracking",(T=te("cc.ARPlaneTracking"),O=ne("i18n:cc.ARPlaneTracking"),z=ae("XR/AR Tracking/ARPlaneTracking"),w=ie({serializable:!0}),C=ie({serializable:!0}),N=ie({serializable:!0}),R=ie({serializable:!0}),L=ie({serializable:!0}),I=ie({serializable:!0}),F=ie({serializable:!0}),V=ie({type:k,displayOrder:1,readonly:!0,override:!0,tooltip:"i18n:xr-plugin.tracking.trackingType"}),j=ie({displayName:"Plane Direction",group:{name:"Factor",displayOrder:1},visible:function(){return null!==this.planeDirection},tooltip:"i18n:xr-plugin.tracking.planeDirection"}),x=ie({displayName:"Plane Size",group:{name:"Factor",displayOrder:1},visible:function(){return null!==this.planeSize},tooltip:"i18n:xr-plugin.tracking.planeSize"}),M=ie({displayName:"Plane Semantic",group:{name:"Factor",displayOrder:1},visible:function(){return null!==this.planeSemantic},tooltip:"i18n:xr-plugin.tracking.planeSemantic"}),H=ie({displayName:"Display",group:{name:"Action",displayOrder:2},visible:function(){return null!==this.displayChildren},tooltip:"i18n:xr-plugin.tracking.display"}),Y=ie({displayName:"Align",group:{name:"Action",displayOrder:2},visible:function(){return null!==this.align},tooltip:"i18n:xr-plugin.tracking.alignment"}),B=ie({displayName:"Adaptive Scale",group:{name:"Action",displayOrder:2},visible:function(){return null!==this.adaptiveScale},tooltip:"i18n:xr-plugin.tracking.adaptiveScale"}),Z=ie({displayName:"Surface Overlay",group:{name:"Action",displayOrder:2},visible:function(){return null!==this.surfaceOverlay},tooltip:"i18n:xr-plugin.tracking.surfaceOverlay"}),K=ie({displayName:"Track Event",group:{name:"Action",displayOrder:2},visible:function(){return null!==this.trackEvent},tooltip:"i18n:xr-plugin.tracking.trackEvent"}),T(U=O(U=z(U=re((W=t((G=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"_planeDirection",W,a(t)),n(t,"_planeSize",X,a(t)),n(t,"_planeSemantic",q,a(t)),n(t,"_display",J,a(t)),n(t,"_surfaceOverlay",Q,a(t)),n(t,"_alignment",$,a(t)),n(t,"_adaptiveScale",ee,a(t)),t._scenePlane=null,t}i(t,e);var l=t.prototype;return l.onLoad=function(){this.planeDirection&&(this.planeDirection.uuid=this.node.uuid),this.planeSize&&(this.planeSize.uuid=this.node.uuid),this.planeSemantic&&(this.planeSemantic.uuid=this.node.uuid),this.createScenePlane()},l.onDestroy=function(){e.prototype.onDestroy.call(this),this.removeScenePlane()},l._emitChangeNode=function(e){},l.removeScenePlane=function(){this._scenePlane=this.node.getChildByName("__scene_plane__"),this._scenePlane&&this._scenePlane.isValid&&(this._scenePlane.parent=null,this._scenePlane.destroy(),this._scenePlane=null)},l.createScenePlane=function(e){this.removeScenePlane()},l.createScenePlaneByPrefab=function(e){this._scenePlane=s(e),this._scenePlane.name="__scene_plane__",this.node.addChild(this._scenePlane),this._scenePlane._objFlags|=o.Flags.HideInHierarchy,this._scenePlane.addComponent(D),this.updateScenePlane()},l.updateScenePlane=function(){var e=this;if(this._scenePlane){var t=this._scenePlane.getComponent(D);if(t||(t=this._scenePlane.addComponent(D)),this._planeSize){t.drawSceneEffect(!1);var i=function(){var t;e._planeSize&&(null==(t=e._scenePlane)||t.setScale(e._planeSize.PlaneSize[0]/1,1,e._planeSize.PlaneSize[1]/1))};this._planeSize.removeListener(),this._planeSize.addListener((function(t){e._emitChangeNode(e.node),i()})),i()}else this._scenePlane.setScale(1,1,1),t.drawSceneEffect(!0);if(this._planeDirection){var n=function(){e._scenePlane&&e._planeDirection&&(e._scenePlane.position=new p(0,0,0),e._planeDirection.directionType===g.Horizontal_Downward?e._scenePlane.eulerAngles=new p(180,0,0):e._planeDirection.directionType===g.Vertical?e._scenePlane.eulerAngles=new p(90,0,0):e._scenePlane.eulerAngles=new p(0,0,0))};this._planeDirection.removeListener(),this._planeDirection.addListener((function(e){n()})),n()}}},l.updateFeature=function(e){var t={ft:k.Plane,uuid:this.node.uuid,canUse:e,tracking:this,direction:this.planeDirection?this.planeDirection.directionType:g.All};b.collectFeature(t)},l.addProp=function(e,t){if(e===m.Factor)switch(t){case A.PLANE_DIRECTION:this.planeDirection=new f(this.node.uuid),this.addFactor(this.planeDirection);break;case A.PLANE_SIZE:this.planeSize=new v(this.node.uuid),this.addFactor(this.planeSize);break;case A.PLANE_SEMANTIC:this.planeSemantic=new S(this.node.uuid),this.addFactor(this.planeSemantic)}else switch(t){case P.DISPLAY_CHILDREN:this.displayChildren=new d,this.addAction(this.displayChildren);break;case P.TRACK_EVENT:this.trackEvent=new _,this.addAction(this.trackEvent);break;case P.SURFACE_OVERLAY:this.surfaceOverlay=new y,this.addAction(this.surfaceOverlay);break;case P.ALIGNMENT:this.align=new h,this.addAction(this.align);break;case P.ADAPTIVE_SCALE:this.adaptiveScale=new u,this.addAction(this.adaptiveScale)}},l.removeProp=function(e,t){if(e===m.Factor)switch(t){case A.PLANE_SEMANTIC:this.planeSemantic=null,this.removeFactor(t);break;case A.PLANE_DIRECTION:this.planeDirection=null,this.removeFactor(t);break;case A.PLANE_SIZE:this.planeSize=null,this.removeFactor(t)}else switch(t){case P.SURFACE_OVERLAY:this.surfaceOverlay=null,this.removeAction(t);break;case P.DISPLAY_CHILDREN:this.displayChildren=null,this.removeAction(t);break;case P.TRACK_EVENT:this.trackEvent=null,this.removeAction(t);break;case P.ALIGNMENT:this.align=null,this.removeAction(t);break;case P.ADAPTIVE_SCALE:this.adaptiveScale=null,this.removeAction(t)}},l.resetProp=function(e,t){var i,n,a,r,l,c,s,o;if(e===m.Factor)switch(t){case A.PLANE_DIRECTION:null==(i=this.planeDirection)||i.reset();break;case A.PLANE_SIZE:null==(n=this.planeSize)||n.reset();break;case A.PLANE_SEMANTIC:null==(a=this.planeSemantic)||a.reset()}else switch(t){case P.DISPLAY_CHILDREN:null==(r=this.displayChildren)||r.reset();break;case P.TRACK_EVENT:null==(l=this.trackEvent)||l.reset();break;case P.SURFACE_OVERLAY:null==(c=this.surfaceOverlay)||c.reset();break;case P.ALIGNMENT:null==(s=this.align)||s.reset();break;case P.ADAPTIVE_SCALE:null==(o=this.adaptiveScale)||o.reset()}},r(t,[{key:"trackingType",get:function(){return this._trackingType},set:function(e){e!==this._trackingType&&(this._trackingType=e)}},{key:"planeDirection",get:function(){return this._planeDirection},set:function(e){e!==this._planeDirection&&(this._planeDirection=e,this.updateScenePlane())}},{key:"planeSize",get:function(){return this._planeSize},set:function(e){e!==this._planeSize&&(this._planeSize=e,this.updateScenePlane())}},{key:"planeSemantic",get:function(){return this._planeSemantic},set:function(e){e!==this._planeSemantic&&(this._planeSemantic=e)}},{key:"displayChildren",get:function(){return this._display},set:function(e){if(e){var t=e;this._alignment&&(this._alignment.closeTracking=t.stopTracking),this._adaptiveScale&&(this._adaptiveScale.closeTracking=t.stopTracking)}e!==this._display&&(this._display=e)}},{key:"align",get:function(){return this._alignment},set:function(e){e!==this._alignment&&(this._alignment=e,this._alignment&&this._display&&(this._alignment.closeTracking=this._display.stopTracking))}},{key:"adaptiveScale",get:function(){return this._adaptiveScale},set:function(e){e!==this._adaptiveScale&&(this._adaptiveScale=e,this._adaptiveScale&&this._display&&(this._adaptiveScale.closeTracking=this._display.stopTracking))}},{key:"surfaceOverlay",get:function(){return this._surfaceOverlay},set:function(e){e!==this._surfaceOverlay&&(this._surfaceOverlay=e)}},{key:"trackEvent",get:function(){return this._trackEvent},set:function(e){e!==this._trackEvent&&(this._trackEvent=e)}}]),t}(E)).prototype,"_planeDirection",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(G.prototype,"_planeSize",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(G.prototype,"_planeSemantic",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(G.prototype,"_display",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(G.prototype,"_surfaceOverlay",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(G.prototype,"_alignment",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(G.prototype,"_adaptiveScale",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(G.prototype,"trackingType",[V],Object.getOwnPropertyDescriptor(G.prototype,"trackingType"),G.prototype),t(G.prototype,"planeDirection",[j],Object.getOwnPropertyDescriptor(G.prototype,"planeDirection"),G.prototype),t(G.prototype,"planeSize",[x],Object.getOwnPropertyDescriptor(G.prototype,"planeSize"),G.prototype),t(G.prototype,"planeSemantic",[M],Object.getOwnPropertyDescriptor(G.prototype,"planeSemantic"),G.prototype),t(G.prototype,"displayChildren",[H],Object.getOwnPropertyDescriptor(G.prototype,"displayChildren"),G.prototype),t(G.prototype,"align",[Y],Object.getOwnPropertyDescriptor(G.prototype,"align"),G.prototype),t(G.prototype,"adaptiveScale",[B],Object.getOwnPropertyDescriptor(G.prototype,"adaptiveScale"),G.prototype),t(G.prototype,"surfaceOverlay",[Z],Object.getOwnPropertyDescriptor(G.prototype,"surfaceOverlay"),G.prototype),t(G.prototype,"trackEvent",[K],Object.getOwnPropertyDescriptor(G.prototype,"trackEvent"),G.prototype),U=G))||U)||U)||U)||U));l._RF.pop()}}}));

System.register("chunks:///_virtual/ar-screen-touch-gesture.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-camera.ts","./ar-selectable.ts"],(function(t){var e,i,s,r,u,n,o,h,a,c,l,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,s=t.initializerDefineProperty},function(t){r=t.cclegacy,u=t._decorator,n=t.ccenum,o=t.Vec2,h=t.director,a=t.geometry,c=t.PhysicsSystem},function(t){l=t.ARCameraMgr},function(t){_=t.Selectable}],execute:function(){var T,g,p,b,d,f,D;r._RF.push({},"2dc09bp1uNMs6VUKD8nFvLw","ar-screen-touch-gesture",void 0);var k=u.ccclass,G=u.property,H=t("Gesture",function(t){return t[t.None=0]="None",t[t.Tap=1]="Tap",t[t.Double_Tap=2]="Double_Tap",t[t.Hold_Tap=3]="Hold_Tap",t[t.Drag=4]="Drag",t[t.Two_Finger_Drag=5]="Two_Finger_Drag",t[t.Two_Finger_Rotate=6]="Two_Finger_Rotate",t[t.Spread_And_Pinch=7]="Spread_And_Pinch",t}({}));n(H);t("ScreenTouchGesture",(T=k("cc.ScreenTouchGesture"),g=G({serializable:!0}),p=G({serializable:!0,visible:!1}),T((f=e((d=function(){function t(){s(this,"_gesture",f,this),s(this,"_enable",D,this),this.actionName="",this._doubleTapDuration=.8,this._holdTapDuration=1,this._tick=0,this._isDoubleTap=!1,this._isHoldTap=!1,this._tapDuration=.3,this._slopPixels=30,this._isTap=!1,this._doubleBeginTick=0,this._doubleHitIds=[],this._isDrag=!1,this._dragPixels=50,this._curFingerNumber=0,this._triggerHoldTap=!1,this._triggerTap=!1,this._startTouch=null,this._touch=null,this.init()}var e=t.prototype;return e.isSelectGesture=function(){return this.isTapGesture()||this.isHoldTapGesture()||this.isDoubleTapGesture()},e.isPlaceGesture=function(){return this.isTapGesture()||this.isDragGesture()},e.isTapGesture=function(){return this._isTap},e.isHoldTapGesture=function(){return this._isHoldTap},e.isDoubleTapGesture=function(){return this._isDoubleTap},e.isDragGesture=function(){return this._isDrag},e.startTouch=function(t){this._startTouch=t,this.updateTouch(t,!0,!1),this._gesture===H.Double_Tap&&0===this._doubleBeginTick&&(this._doubleBeginTick=(new Date).getTime(),this._doubleHitIds.length=0)},e.updateTouch=function(t,e,i){if(this._touch=t,i||(this.curFingerNumber=t.getTouches().length),i&&this._gesture===H.Double_Tap&&this.isSingleTouch()){var s=this._touch.getLocation(),r=this.hitSelectable(s);r&&this._doubleHitIds.push(r.node.uuid)}e&&this.checkGesture()},e.updateGesture=function(t){this._tick+=t,this.checkGesture()},e.isSingleTouch=function(){if(!this._startTouch||!this._touch)return!1;if(1!==this._curFingerNumber)return!1;var t=this._startTouch.getTouches(),e=this._touch.getTouches();return!(t.length>1||e.length>1)},e.isTapTouch=function(){if(!this._startTouch||!this._touch)return!1;if(!this.isSingleTouch())return!1;var t=this._startTouch.getLocation(),e=this._touch.getLocation(),i=new o;return o.subtract(i,t,e),!(i.length()>this._slopPixels)},e.isHoldTapTouch=function(){if(!this._startTouch||!this._touch)return!1;if(!this.isSingleTouch())return!1;var t=this._startTouch.getLocation(),e=this._touch.getLocation(),i=new o;return o.subtract(i,t,e),!(i.length()>2*this._dragPixels)},e.isDragTouch=function(){if(!this._startTouch||!this._touch)return!1;if(!this.isSingleTouch())return!1;var t=this._startTouch.getLocation(),e=this._touch.getLocation(),i=new o;return o.subtract(i,t,e),i.length()>this._dragPixels},e.checkGesture=function(){if(this.enable&&this._startTouch&&this._touch)switch(this._gesture){case H.Tap:if(!this.isTapTouch())return void this.resetGesture();this._isTap=this._tick<=this._tapDuration;break;case H.Hold_Tap:if(!this.isHoldTapTouch())return void this.resetGesture();!this._isHoldTap&&this._tick>=this._holdTapDuration&&(this._isHoldTap=!0);break;case H.Double_Tap:if(!this.isTapTouch())return this.resetGesture(),void this.resetDoubTabGesture();if(0!==this._doubleBeginTick)((new Date).getTime()-this._doubleBeginTick)/1e3<=this._doubleTapDuration?2===this._doubleHitIds.length&&(this.resetDoubTabGesture(),this._doubleHitIds[0]===this._doubleHitIds[1]&&(this._isDoubleTap=!0)):(this.resetDoubTabGesture(),this._doubleBeginTick=(new Date).getTime());break;case H.Drag:this._isDrag=this.isDragTouch()}},e.hitSelectable=function(t){var e=h.getScene().getComponentInChildren(l);if(e&&t){var i,s=new a.Ray;if(null==e||null==(i=e.Camera)||i.screenPointToRay(t.x,t.y,s),c.instance.raycastClosest(s,4294967295,1e7,!1)){var r=c.instance.raycastClosestResult.collider.node.getComponent(_);if(r)return r}}return null},e.resetDoubTabGesture=function(){this._doubleBeginTick=0,this._doubleHitIds.length=0,this._isDoubleTap=!1},e.resetGesture=function(){this._tick=0,this._isTap=!1,this._isHoldTap=!1,this._isDoubleTap=!1,this._isDrag=!1,this._startTouch=null,this._touch=null,this.triggerHoldTap=!1,this.triggerTap=!1},i(t,[{key:"enable",get:function(){return this._enable},set:function(t){this._enable=t}},{key:"doubleTapDuration",get:function(){return this._doubleTapDuration},set:function(t){this._doubleTapDuration=t}},{key:"holdTapDuration",get:function(){return this._holdTapDuration},set:function(t){this._holdTapDuration=t}},{key:"curFingerNumber",get:function(){return this._curFingerNumber},set:function(t){this._curFingerNumber=t}},{key:"triggerHoldTap",get:function(){return this._triggerHoldTap},set:function(t){this._triggerHoldTap=t}},{key:"triggerTap",get:function(){return this._triggerTap},set:function(t){this._triggerTap=t}},{key:"touch",get:function(){return this._touch}}]),t}()).prototype,"_gesture",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.None}}),D=e(d.prototype,"_enable",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),b=d))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-screen-touch-interactor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-event.ts","./ar-selectable.ts","./ar-camera.ts","./ar-defines.ts","./ar-enum.ts","./ar-interaction-define.ts","./ar-screen-touch-gesture.ts","./ar-placeable.ts","./ar-api.ts"],(function(e){var t,i,n,o,c,a,r,s,l,u,p,h,_,d,g,f,A,T,y,b,v,S,C,E,P,D,O,N,R,w,M,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,c=e.createClass},function(e){a=e.cclegacy,r=e._decorator,s=e.ccenum,l=e.Prefab,u=e.director,p=e.instantiate,h=e.input,_=e.Input,d=e.screen,g=e.Vec2,f=e.Vec3,A=e.geometry,T=e.PhysicsSystem,y=e.Quat,b=e.Component},function(e){v=e.arEvent,S=e.ARInternalEventType},function(e){C=e.Selectable},function(e){E=e.ARCameraMgr},function(e){P=e.ARRayCastMode},function(e){D=e.ARTrackingType},function(e){O=e.StateAction,N=e.TransformModeType},function(e){R=e.Gesture,w=e.ScreenTouchGesture},function(e){M=e.Placeable},function(e){m=e.arApi}],execute:function(){var L,I,x,z,H,G,k,U,F,j,B,V,Y,W,X,J,Q,q,K,Z,$,ee,te,ie,ne,oe,ce,ae,re,se,le,ue,pe,he,_e,de,ge,fe,Ae,Te,ye,be,ve,Se,Ce,Ee,Pe,De,Oe,Ne,Re,we,Me,me,Le,Ie,xe,ze,He,Ge,ke,Ue,Fe,je,Be,Ve;a._RF.push({},"260b0sWxoFJ64vHhxdubv0b","ar-screen-touch-interactor",void 0);var Ye=r.ccclass,We=r.help,Xe=r.menu,Je=r.property,Qe=r.disallowMultiple,qe=function(e){return e[e.Tap=R.Tap]="Tap",e[e.Double_Tap=R.Double_Tap]="Double_Tap",e[e.Hold_Tap=R.Hold_Tap]="Hold_Tap",e}(qe||{});s(qe);var Ke=function(e){return e[e.Drag=R.Drag]="Drag",e[e.Tap=R.Tap]="Tap",e}(Ke||{});s(Ke);var Ze=function(e){return e[e.Spread_And_Pinch=R.Spread_And_Pinch]="Spread_And_Pinch",e}(Ze||{});s(Ze);var $e=function(e){return e[e.Drag=R.Drag]="Drag",e}($e||{});s($e);var et=function(e){return e[e.Drag=R.Drag]="Drag",e[e.Two_Finger_Drag=R.Two_Finger_Drag]="Two_Finger_Drag",e[e.Two_Finger_Rotate=R.Two_Finger_Rotate]="Two_Finger_Rotate",e}(et||{});s(et);var tt=function(e){return e[e.Drag=R.Drag]="Drag",e[e.Tap=R.Tap]="Tap",e}(tt||{});s(tt);var it=function(e){return e[e.AR_HIT_DETECTION=0]="AR_HIT_DETECTION",e[e.SPATIAL_DISTANCE=1]="SPATIAL_DISTANCE",e[e.COLLISION_DETECTION=2]="COLLISION_DETECTION",e}(it||{});s(it);var nt=e("SelectAction",(L=Ye("cc.SelectAction"),I=Je({serializable:!0}),x=Je({serializable:!0}),z=Je({serializable:!0}),H=Je({type:qe,displayOrder:1,override:!0,tooltip:"i18n:xr-plugin.screen_touch_gesture.gesture"}),G=Je({displayOrder:2,visible:function(){return this._gesture==qe.Double_Tap},tooltip:"i18n:xr-plugin.screen_touch_gesture.selectAction.doubleTapGap"}),k=Je({displayOrder:3,visible:function(){return this._gesture==qe.Hold_Tap},tooltip:"i18n:xr-plugin.screen_touch_gesture.selectAction.holdTouchDuration"}),L((j=t((F=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t=e.call.apply(e,[this].concat(c))||this,n(t,"_doubleTapGap",j,o(t)),n(t,"_holdTouchDuration",B,o(t)),t}return i(t,e),t.prototype.init=function(){this.actionName="SelectAction",this._gesture===R.None&&(this.gesture=qe.Tap),this.doubleTapDuration=this.doubleTapGap,this.holdTapDuration=this.holdTouchDuration},c(t,[{key:"gesture",get:function(){return this._gesture},set:function(e){e!==this._gesture&&(this._gesture=e)}},{key:"doubleTapGap",get:function(){return this._doubleTapGap},set:function(e){e!==this._doubleTapGap&&(this._doubleTapGap=e,this.doubleTapDuration=e)}},{key:"holdTouchDuration",get:function(){return this._holdTouchDuration},set:function(e){e!==this._holdTouchDuration&&(this._holdTouchDuration=e,this.holdTapDuration=e)}}]),t}(w)).prototype,"_doubleTapGap",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),B=t(F.prototype,"_holdTouchDuration",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(F.prototype,"gesture",[z,H],Object.getOwnPropertyDescriptor(F.prototype,"gesture"),F.prototype),t(F.prototype,"doubleTapGap",[G],Object.getOwnPropertyDescriptor(F.prototype,"doubleTapGap"),F.prototype),t(F.prototype,"holdTouchDuration",[k],Object.getOwnPropertyDescriptor(F.prototype,"holdTouchDuration"),F.prototype),U=F))||U)),ot=e("SelectMoveAction",(V=Ye("cc.SelectMoveAction"),Y=Je({type:$e,displayOrder:1,override:!0,tooltip:"i18n:xr-plugin.screen_touch_gesture.gesture"}),V((t((X=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this)._isMoving=!1,t}return i(t,e),t.prototype.init=function(){this.actionName="SelectMoveAction",this._gesture===R.None&&(this.gesture=$e.Drag)},c(t,[{key:"gesture",get:function(){return this._gesture},set:function(e){e!==this._gesture&&(this._gesture=e)}},{key:"isMoving",get:function(){return this._isMoving},set:function(e){this._isMoving=e}}]),t}(w)).prototype,"gesture",[Y],Object.getOwnPropertyDescriptor(X.prototype,"gesture"),X.prototype),W=X))||W)),ct=e("SelectRotateAction",(J=Ye("cc.SelectRotateAction"),Q=Je({serializable:!0}),q=Je({serializable:!0}),K=Je({type:et,displayOrder:1,override:!0,tooltip:"i18n:xr-plugin.screen_touch_gesture.gesture"}),Z=Je({serializable:!0,displayOrder:2,visible:function(){return this._gesture===et.Drag||this._gesture===et.Two_Finger_Drag},tooltip:"i18n:xr-plugin.screen_touch_gesture.selectRotateAction.dragDegree"}),$=Je({serializable:!0,displayOrder:3,visible:function(){return this._gesture===et.Two_Finger_Rotate},tooltip:"i18n:xr-plugin.screen_touch_gesture.selectRotateAction.twistDegree"}),J((ie=t((te=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t=e.call.apply(e,[this].concat(c))||this,n(t,"_dragDegree",ie,o(t)),n(t,"_twistDegree",ne,o(t)),t._isRotation=!1,t}return i(t,e),t.prototype.init=function(){this.actionName="SelectRotateAction",this._gesture===R.None&&(this.gesture=et.Two_Finger_Drag)},c(t,[{key:"gesture",get:function(){return this._gesture},set:function(e){e!==this._gesture&&(this._gesture=e)}},{key:"dragDegree",get:function(){return this._dragDegree},set:function(e){e!==this._dragDegree&&(this._dragDegree=e)}},{key:"twistDegree",get:function(){return this._twistDegree},set:function(e){e!==this._twistDegree&&(this._twistDegree=e)}},{key:"isRotation",get:function(){return this._isRotation},set:function(e){this._isRotation=e}}]),t}(w)).prototype,"_dragDegree",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),ne=t(te.prototype,"_twistDegree",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2.5}}),t(te.prototype,"gesture",[K],Object.getOwnPropertyDescriptor(te.prototype,"gesture"),te.prototype),t(te.prototype,"dragDegree",[Z],Object.getOwnPropertyDescriptor(te.prototype,"dragDegree"),te.prototype),t(te.prototype,"twistDegree",[$],Object.getOwnPropertyDescriptor(te.prototype,"twistDegree"),te.prototype),ee=te))||ee)),at=e("SelectScaleAction",(oe=Ye("cc.SelectScaleAction"),ce=Je({serializable:!0}),ae=Je({type:Ze,displayOrder:1,override:!0,tooltip:"i18n:xr-plugin.screen_touch_gesture.gesture"}),re=Je({serializable:!0,displayOrder:2,tooltip:"i18n:xr-plugin.screen_touch_gesture.selectScaleAction.sensitivity"}),oe((ue=t((le=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t=e.call.apply(e,[this].concat(c))||this,n(t,"_sensitivity",ue,o(t)),t._isScaling=!1,t._originalTouchDistance=-1,t}return i(t,e),t.prototype.init=function(){this.actionName="SelectScaleAction",this._gesture===R.None&&(this.gesture=Ze.Spread_And_Pinch)},c(t,[{key:"gesture",get:function(){return this._gesture},set:function(e){e!==this._gesture&&(this._gesture=e)}},{key:"sensitivity",get:function(){return this._sensitivity},set:function(e){e!==this._sensitivity&&(this._sensitivity=e)}},{key:"isScaling",get:function(){return this._isScaling},set:function(e){this._isScaling=e}},{key:"originalTouchDistance",get:function(){return this._originalTouchDistance},set:function(e){this._originalTouchDistance=e}}]),t}(w)).prototype,"_sensitivity",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),t(le.prototype,"gesture",[ae],Object.getOwnPropertyDescriptor(le.prototype,"gesture"),le.prototype),t(le.prototype,"sensitivity",[re],Object.getOwnPropertyDescriptor(le.prototype,"sensitivity"),le.prototype),se=le))||se)),rt=e("PlaceAction",(pe=Ye("cc.PlaceAction"),he=Je({serializable:!0}),_e=Je({serializable:!0}),de=Je({serializable:!0}),ge=Je({serializable:!0}),fe=Je({serializable:!0}),Ae=Je({type:Ke,displayOrder:1,override:!0,tooltip:"i18n:xr-plugin.screen_touch_gesture.gesture"}),Te=Je({type:it,displayOrder:2,tooltip:"i18n:xr-plugin.screen_touch_gesture.placeAction.calculationMode"}),ye=Je({serializable:!0,displayOrder:3,visible:function(){return this.calculation_Mode===it.SPATIAL_DISTANCE},tooltip:"i18n:xr-plugin.screen_touch_gesture.placeAction.distance"}),be=Je({serializable:!0,displayOrder:4,visible:function(){return this.calculation_Mode===it.SPATIAL_DISTANCE},tooltip:"i18n:xr-plugin.screen_touch_gesture.placeAction.detectOcclusion"}),ve=Je({type:l,displayOrder:5,visible:function(){return this.calculation_Mode===it.SPATIAL_DISTANCE},tooltip:"i18n:xr-plugin.screen_touch_gesture.placeAction.located_Prefab"}),Se=Je({type:l,displayOrder:6,tooltip:"i18n:xr-plugin.screen_touch_gesture.placeAction.placement_Prefab"}),pe((Pe=t((Ee=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t=e.call.apply(e,[this].concat(c))||this,n(t,"_calculation_Mode",Pe,o(t)),n(t,"_distance",De,o(t)),n(t,"_detectOcclusion",Oe,o(t)),n(t,"_located_Prefab",Ne,o(t)),n(t,"_placement_Prefab",Re,o(t)),t._isPlacing=!1,t._placeNode=null,t._locatedNode=null,t}i(t,e);var a=t.prototype;return a.init=function(){this.actionName="PlaceAction",this._gesture===R.None&&(this.gesture=Ke.Tap),this.createPlaceNode(),this.createLocatedNode()},a.createPlaceNode=function(){var e=u.getScene();e&&(this._placeNode=e.getChildByName("__scene_place__"),this._placeNode&&this._placeNode.isValid&&(this._placeNode.destroy(),this._placeNode=null),this.placement_Prefab&&(this._placeNode=p(this.placement_Prefab),this._placeNode.name="__scene_place__",e.addChild(this._placeNode),this._placeNode.active=!1))},a.createLocatedNode=function(){var e=u.getScene();e&&(this._locatedNode=e.getChildByName("__scene_located__"),this._locatedNode&&this._locatedNode.isValid&&(this._locatedNode.destroy(),this._locatedNode=null),this.located_Prefab&&(this._locatedNode=p(this.located_Prefab),this._locatedNode.name="__scene_place__",e.addChild(this._locatedNode),this._locatedNode.active=!1))},a.updateLocatedNode=function(e){this._locatedNode&&e&&(this._locatedNode.active=!0,this._locatedNode.setPosition(e.pose.position),this._locatedNode.setRotation(e.pose.rotation))},a.onEnable=function(){v.on(S.PLACE_ACTION,this.onPlaceActionEvent,this)},a.onDisable=function(){v.off(S.PLACE_ACTION,this.onPlaceActionEvent,this)},a.getPlaceable=function(){return this._placeNode?this._placeNode.getComponent(M):null},a.getPlaceHitRayCastMode=function(){var e=0;if(!this._placeNode)return e;if(!this._placeNode.getComponent(M))return e;var t=m.getFeatureConfig(D.Plane);t&&t.enable&&(t.usePlaneShape?e|=P.RAYCAST_PLANE_POLYGON:e|=P.RAYCAST_PLANE_EXTENT);var i=m.getFeatureConfig(D.WorldMesh);return i&&i.enable&&(e|=P.RAYCAST_MESH),e},a.onPlaceActionEvent=function(e){if(this._placeNode){var t=this._placeNode.getComponent(M);if(t){var i=t.previewNode;if(e.state===O.Enter)i&&e.anchor&&(i.setPosition(e.anchor.pose.position),i.setRotation(e.anchor.pose.rotation),i.active=!0),t.placementEvents.placeEntered(e);else if(e.state===O.Update)i&&e.anchor&&(i.setPosition(e.anchor.pose.position),i.setRotation(e.anchor.pose.rotation));else if(e.state===O.Exit){if(i&&(i.active=!1),e.prefab&&e.anchor){var n=p(e.prefab);u.getScene().addChild(n);var o=t.placementOffset.clone();o.add(e.anchor.pose.position),n.setPosition(o),n.setRotation(e.anchor.pose.rotation),n.active=!0;var c=n.getComponent(C);c&&(c.transformMode=N.PLANE,c.transformPoint=e.anchor.pose.position)}t.placementEvents.placeFinished(e)}else e.state===O.Cancel&&(i&&(i.active=!1),t.placementEvents.placeCanceled(e))}}},c(t,[{key:"gesture",get:function(){return this._gesture},set:function(e){e!==this._gesture&&(this._gesture=e)}},{key:"calculation_Mode",get:function(){return this._calculation_Mode},set:function(e){e!==this._calculation_Mode&&(this._calculation_Mode=e)}},{key:"distance",get:function(){return this._distance},set:function(e){e!==this._distance&&(this._distance=e)}},{key:"detectOcclusion",get:function(){return this._detectOcclusion},set:function(e){e!==this._detectOcclusion&&(this._detectOcclusion=e)}},{key:"located_Prefab",get:function(){return this._located_Prefab},set:function(e){e!==this._located_Prefab&&(this._located_Prefab=e,this.createLocatedNode())}},{key:"placement_Prefab",get:function(){return this._placement_Prefab},set:function(e){e!==this._placement_Prefab&&(this._placement_Prefab=e,this.createPlaceNode())}},{key:"isPlacing",get:function(){return this._isPlacing},set:function(e){this._isPlacing=e}}]),t}(w)).prototype,"_calculation_Mode",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return it.AR_HIT_DETECTION}}),De=t(Ee.prototype,"_distance",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Oe=t(Ee.prototype,"_detectOcclusion",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ne=t(Ee.prototype,"_located_Prefab",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(Ee.prototype,"_placement_Prefab",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(Ee.prototype,"gesture",[Ae],Object.getOwnPropertyDescriptor(Ee.prototype,"gesture"),Ee.prototype),t(Ee.prototype,"calculation_Mode",[Te],Object.getOwnPropertyDescriptor(Ee.prototype,"calculation_Mode"),Ee.prototype),t(Ee.prototype,"distance",[ye],Object.getOwnPropertyDescriptor(Ee.prototype,"distance"),Ee.prototype),t(Ee.prototype,"detectOcclusion",[be],Object.getOwnPropertyDescriptor(Ee.prototype,"detectOcclusion"),Ee.prototype),t(Ee.prototype,"located_Prefab",[ve],Object.getOwnPropertyDescriptor(Ee.prototype,"located_Prefab"),Ee.prototype),t(Ee.prototype,"placement_Prefab",[Se],Object.getOwnPropertyDescriptor(Ee.prototype,"placement_Prefab"),Ee.prototype),Ce=Ee))||Ce));e("ScreenTouchInteractor",(we=Ye("cc.ScreenTouchInteractor"),Me=We("i18n:cc.ScreenTouchInteractor"),me=Xe("XR/Interaction/ScreenTouchInteractor"),Le=Je({serializable:!0,displayOrder:1,tooltip:"i18n:xr-plugin.screen_touch_interactor.selectAction"}),Ie=Je({serializable:!0,displayOrder:2,tooltip:"i18n:xr-plugin.screen_touch_interactor.selectMoveAction",visible:function(){return this.selectAction.enable}}),xe=Je({serializable:!0,displayOrder:3,tooltip:"i18n:xr-plugin.screen_touch_interactor.selectRotateAction",visible:function(){return this.selectAction.enable}}),ze=Je({serializable:!0,displayOrder:4,tooltip:"i18n:xr-plugin.screen_touch_interactor.selectScaleAction",visible:function(){return this.selectAction.enable}}),He=Je({serializable:!0,displayOrder:5,tooltip:"i18n:xr-plugin.screen_touch_interactor.placeAction"}),we(Ge=Me(Ge=me(Ge=Qe((Ue=t((ke=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t=e.call.apply(e,[this].concat(c))||this,n(t,"selectAction",Ue,o(t)),n(t,"selectMoveAction",Fe,o(t)),n(t,"selectRotateAction",je,o(t)),n(t,"selectScaleAction",Be,o(t)),n(t,"placeAction",Ve,o(t)),t._isTouching=!1,t._selected=[],t}i(t,e);var c=t.prototype;return c.onLoad=function(){this.selectAction.init(),this.selectMoveAction.init(),this.selectRotateAction.init(),this.selectScaleAction.init(),this.placeAction.init()},c.setPlacementPrefab=function(e){this.placeAction.placement_Prefab=e},c.onEnable=function(){h.on(_.EventType.TOUCH_START,this._onTouchBegin,this),h.on(_.EventType.TOUCH_MOVE,this._onTouchMoved,this),h.on(_.EventType.TOUCH_END,this._onTouchEnd,this),h.on(_.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.placeAction.onEnable()},c.onDisable=function(){h.off(_.EventType.TOUCH_START,this._onTouchBegin,this),h.off(_.EventType.TOUCH_MOVE,this._onTouchMoved,this),h.off(_.EventType.TOUCH_END,this._onTouchEnd,this),h.off(_.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.placeAction.onDisable()},c.update=function(e){this._isTouching&&(this.selectAction.updateGesture(e),this.placeAction.updateGesture(e),this.selectMoveAction.updateGesture(e),this.selectAction.isHoldTapGesture()&&!this.selectAction.triggerHoldTap&&this.selectAction.touch&&(this.selectAction.triggerHoldTap=!0,this._handlerSelectTouch(this.selectAction.touch,O.Enter)),this.placeAction.isTapGesture()&&!this.placeAction.triggerTap&&this.placeAction.touch&&(this.placeAction.triggerTap=!0,this._handlerPlaceTouch(this.placeAction.touch,O.Enter))),this._updateLocatedPlace()},c._onTouchBegin=function(e){this._isTouching=!0,this.selectAction.startTouch(e),this.placeAction.startTouch(e),this.selectMoveAction.startTouch(e)},c._onTouchMoved=function(e){this.selectAction.updateTouch(e,!1,!1),this.placeAction.updateTouch(e,!1,!1),this.selectMoveAction.updateTouch(e,!1,!1),this.selectAction.isSelectGesture()||this._handlerUpdateTouch(e,O.Update),this.placeAction.isDragGesture()&&!this._isSelectStageAction()?this.placeAction.isPlacing?this._handlerPlaceTouch(e,O.Update):this._handlerPlaceTouch(e,O.Enter):this.placeAction.isPlacing&&!this.placeAction.isTapGesture()&&this._handlerPlaceTouch(e,O.Cancel)},c._onTouchEnd=function(e){this.selectAction.updateTouch(e,!0,!0),this.placeAction.updateTouch(e,!0,!0),this.selectMoveAction.updateTouch(e,!1,!0);var t=!1;(this.selectAction.isTapGesture()||this.selectAction.isDoubleTapGesture())&&(t=this._handlerSelectTouch(e,O.Enter)),t||(this.placeAction.isTapGesture()||this.placeAction.isDragGesture()&&!this._isSelectStageAction()?this._handlerPlaceTouch(e,O.Exit):this._handlerPlaceTouch(e,O.Cancel)),this._handlerUpdateTouch(e,O.Exit),this._isTouching=!1,this.selectAction.resetGesture(),this.placeAction.resetGesture(),this.selectMoveAction.resetGesture()},c._onTouchCancel=function(e){this._handlerSelectTouch(e,O.Cancel),this._isTouching=!1,this.selectAction.resetGesture(),this.placeAction.resetGesture(),this.selectMoveAction.resetGesture()},c._isSelectStageAction=function(){return!!(this.selectMoveAction.isMoving||this.selectRotateAction.isRotation||this.selectScaleAction.isScaling)},c._handlerSelectTouch=function(e,t){var i=e.getLocation(),n=!1;return this.selectAction.isSelectGesture()&&(n=this._triggerSelect(i,t)),n},c._handlerPlaceTouch=function(e,t){if(this.placeAction.enable)if(!this.selectMoveAction.isMoving||!this.placeAction.isDragGesture()||t!==O.Enter&&t!==O.Update){var i=e.getLocation();if(t===O.Enter||t===O.Exit)if(this.placeAction.hitSelectable(i))return void this._cancelPlace();t!==O.Cancel&&this.selectAction.resetDoubTabGesture(),this._triggerPlace(i,t)}else this._cancelPlace()},c._handlerUpdateTouch=function(e,t){this.selectAction.enable&&this._selected.length>0&&(this._triggerScale(e,t),this._triggerRotation(e,t),this._triggerMove(e,t))},c._triggerSelect=function(e,t){if(!this.selectAction.enable)return!1;var i={uuid:"",state:O.Enter},n=this.selectAction.hitSelectable(e);if(n){if(t===O.Enter){var o=this._selected.indexOf(n);-1===o?(this._selected.length>0&&(i.uuid=this._selected[0].node.uuid,i.state=O.Cancel,v.dispatch(S.SELECT_ACTION,i),this._selected.splice(0,1)),i.uuid=n.node.uuid,i.state=O.Enter,v.dispatch(S.SELECT_ACTION,i),this._selected.push(n)):(i.uuid=n.node.uuid,i.state=O.Cancel,v.dispatch(S.SELECT_ACTION,i),this._selected.splice(o,1))}else if(t===O.Exit)i.uuid=n.node.uuid,i.state=O.Exit,v.dispatch(S.SELECT_ACTION,i);else if(t===O.Cancel){var c=this._selected.indexOf(n);-1!==c&&(i.uuid=n.node.uuid,i.state=O.Cancel,v.dispatch(S.SELECT_ACTION,i),this._selected.splice(c,1))}return!0}return this._selected.length>0&&(i.uuid=this._selected[0].node.uuid,i.state=O.Cancel,v.dispatch(S.SELECT_ACTION,i),this._selected.splice(0,1)),!1},c._getHitRayCastMode=function(){var e=0,t=m.getFeatureConfig(D.Plane);t&&t.enable&&(t.usePlaneShape?e|=P.RAYCAST_PLANE_POLYGON:e|=P.RAYCAST_PLANE_EXTENT);var i=m.getFeatureConfig(D.WorldMesh);return i&&i.enable&&(e|=P.RAYCAST_MESH),e},c._cancelPlace=function(){var e={anchor:null,prefab:null,state:O.Cancel};this.placeAction.isPlacing=!1,v.dispatch(S.PLACE_ACTION,e)},c._triggerPlace=function(e,t){var i=this;if(t!==O.Cancel)if(this.placeAction.getPlaceable()){if(this.placeAction.calculation_Mode===it.AR_HIT_DETECTION){var n=m.getDevice();if(n){var o=this.placeAction.getPlaceHitRayCastMode();if(0===o)return void this._cancelPlace();n.screenHitTest(o,e).then((function(e){e?i._placeHitResult(e,t):i._cancelPlace()}))}}else if(this.placeAction.calculation_Mode===it.SPATIAL_DISTANCE){var c=d.windowSize.width,a=d.windowSize.height;if(e=new g(c/2,a/2),this.placeAction.detectOcclusion){var r=m.getDevice();if(r){var s=this.placeAction.getPlaceHitRayCastMode();if(0===s)return void this._cancelPlace();r.screenHitTest(s,e).then((function(n){if(n){var o,c=new f,a=u.getScene().getComponentInChildren(E);if(null==a||null==(o=a.Camera)||o.screenToWorld(new f(e.x,e.y),c),n.pose.position.clone().subtract(c).length()>i.placeAction.distance)return void i._placeBySpatialAnchor(e,t);i._placeHitResult(n,t)}else i._placeBySpatialAnchor(e,t)}))}}else this._placeBySpatialAnchor(e,t)}else if(this.placeAction.calculation_Mode===it.COLLISION_DETECTION){var l,p=u.getScene().getComponentInChildren(E),h=new A.Ray;if(null==p||null==(l=p.Camera)||l.screenPointToRay(e.x,e.y,h),T.instance.raycastClosest(h,4294967295,1e7,!1)){var _={id:-1,pose:{position:T.instance.raycastClosestResult.hitPoint,rotation:new y(0,0,0,1)}};this._placeHitResult(_,t)}else this._cancelPlace()}}else this._cancelPlace();else this._cancelPlace()},c._placeBySpatialAnchor=function(e,t){var i,n=new A.Ray,o=u.getScene().getComponentInChildren(E);null==o||null==(i=o.Camera)||i.screenPointToRay(e.x,e.y,n);var c={id:-1,pose:{position:n.o.add(n.d.multiplyScalar(this.placeAction.distance)),rotation:new y(0,0,0,1)}};t?this._placeHitResult(c,t):this.placeAction.updateLocatedNode(c)},c._placeHitResult=function(e,t){var i={anchor:e,prefab:this.placeAction.placement_Prefab,state:t};t===O.Enter?this.placeAction.isPlacing=!0:t===O.Exit&&(this.placeAction.isPlacing=!1),v.dispatch(S.PLACE_ACTION,i)},c._updateLocatedPlace=function(){var e=this;if(this.placeAction.calculation_Mode===it.SPATIAL_DISTANCE){var t=d.windowSize.width,i=d.windowSize.height,n=new g(t/2,i/2);if(this.placeAction.detectOcclusion){var o=m.getDevice();if(o){var c=this.placeAction.getPlaceHitRayCastMode();if(0===c)return void this.placeAction.updateLocatedNode();o.screenHitTest(c,n).then((function(t){if(t){var i,o=new f,c=u.getScene().getComponentInChildren(E);if(null==c||null==(i=c.Camera)||i.screenToWorld(new f(n.x,n.y),o),t.pose.position.clone().subtract(o).length()>e.placeAction.distance)return void e._placeBySpatialAnchor(n);e.placeAction.updateLocatedNode(t)}else e._placeBySpatialAnchor(n)}))}}else this._placeBySpatialAnchor(n)}},c._triggerScale=function(e,t){if(this.selectScaleAction.enable){var i=e.getTouches(),n={scale:0,state:O.Enter};if(i.length>1&&e.getAllTouches().length>1){var o=new g;g.subtract(o,i[0].getLocation(),i[1].getLocation());var c=o.length();this.selectScaleAction.isScaling||(this.selectScaleAction.isScaling=!0,this.selectScaleAction.originalTouchDistance=c,n.state=O.Enter,v.dispatch(S.SELECT_SCALE_ACTION,n));var a=this.selectScaleAction.originalTouchDistance,r=1+(c-a)/a*this.selectScaleAction.sensitivity;n.state=O.Update,n.scale=r,v.dispatch(S.SELECT_SCALE_ACTION,n)}else this.selectScaleAction.isScaling&&(this.selectScaleAction.isScaling=!1,n.state=O.Exit,v.dispatch(S.SELECT_SCALE_ACTION,n))}},c._handlerRotateRotation=function(e){var t=e.getTouches(),i=new g,n=new g;g.subtract(i,t[0].getPreviousLocation(),t[1].getPreviousLocation()),g.subtract(n,t[0].getLocation(),t[1].getLocation());var o=i.signAngle(n),c=t[0].getDelta();c.x>0&&c.y>=0?o=Math.abs(o):c.x<0&&c.y<=0&&(o=-Math.abs(o));var a=o*this.selectRotateAction.twistDegree,r={rotation:new f(0,a,0),state:O.Enter};this.selectRotateAction.isRotation?(r.state=O.Update,v.dispatch(S.SELECT_ROTATE_ACTION,r)):(this.selectRotateAction.isRotation=!0,r.state=O.Enter,v.dispatch(S.SELECT_ROTATE_ACTION,r))},c._handlerDragRotation=function(e,t){var i,n=e.getTouches();i=t?n[0].getDelta().length()<n[1].getDelta().length()?n[0].getDelta():n[1].getDelta():n[0].getDelta();var o=d.windowSize.width,c=i.x/o*this.selectRotateAction.dragDegree,a=i.y/o*this.selectRotateAction.dragDegree,r={rotation:new f(a,c,0),state:O.Enter};this.selectRotateAction.isRotation?(r.state=O.Update,v.dispatch(S.SELECT_ROTATE_ACTION,r)):(this.selectRotateAction.isRotation=!0,r.state=O.Enter,v.dispatch(S.SELECT_ROTATE_ACTION,r))},c._triggerRotation=function(e,t){if(this.selectRotateAction.enable)if(e.getTouches().length>1&&t===O.Update)this.selectRotateAction.gesture===et.Two_Finger_Rotate?this._handlerRotateRotation(e):this.selectRotateAction.gesture===et.Two_Finger_Drag&&this._handlerDragRotation(e,!0);else if(this.selectRotateAction.gesture===et.Drag&&t===O.Update)this._handlerDragRotation(e,!1);else if(t===O.Exit){this.selectRotateAction.isRotation=!1;var i={rotation:new f(0,0,0),state:t};v.dispatch(S.SELECT_ROTATE_ACTION,i)}},c._triggerMove=function(e,t){var i;if(this.selectMoveAction.enable){var n=this._selected[0];if(n)if(t!==O.Exit){if(this.selectMoveAction.isDragGesture()){var o=e.getLocation(),c=u.getScene().getComponentInChildren(E),a=new A.Ray;if(null==c||null==(i=c.Camera)||i.screenPointToRay(o.x,o.y,a),!n.isMoveHit)if(T.instance.raycast(a,4294967295,1e7,!1))for(var r=T.instance.raycastResults,s=0;s<r.length;s++){var l=r[s].collider.node.getComponent(C);l&&l.isSelected&&l.node.uuid===n.node.uuid&&(n.isMoveHit=!0)}if(n.isMoveHit)if(this.selectMoveAction.isMoving=!0,n.transformMode===N.SPACE){var p={moveNodeUuid:n.node.uuid,pose:null,ray:a,state:t};v.dispatch(S.SELECT_MOVE_ACTION,p)}else{var h=m.getDevice();if(h){var _=this._getHitRayCastMode();h.screenHitTest(_,o).then((function(e){if(e){var i=e.pose,o={moveNodeUuid:n.node.uuid,pose:i,ray:null,state:t};v.dispatch(S.SELECT_MOVE_ACTION,o)}}))}}}}else{n.isMoveHit=!1,this.selectMoveAction.isMoving=!1;var d={moveNodeUuid:n.node.uuid,pose:null,ray:null,state:t};v.dispatch(S.SELECT_MOVE_ACTION,d)}}},c.enableActionProp=function(e,t){switch(e){case"cc.SelectAction":this.selectAction.enable=t;break;case"cc.SelectMoveAction":this.selectMoveAction.enable=t;break;case"cc.SelectRotateAction":this.selectRotateAction.enable=t;break;case"cc.SelectScaleAction":this.selectScaleAction.enable=t;break;case"cc.PlaceAction":this.placeAction.enable=t}},t}(b)).prototype,"selectAction",[Le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new nt}}),Fe=t(ke.prototype,"selectMoveAction",[Ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ot}}),je=t(ke.prototype,"selectRotateAction",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ct}}),Be=t(ke.prototype,"selectScaleAction",[ze],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new at}}),Ve=t(ke.prototype,"placeAction",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new rt}}),Ge=ke))||Ge)||Ge)||Ge)||Ge));a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-selectable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./ar-camera.ts","./ar-event.ts","./ar-interaction-define.ts","./axis-constraint.ts","./min-max-scale-constraint.ts","./rotation-axis-constraint.ts"],(function(e){var t,i,n,s,o,a,c,l,r,f,h,d,u,_,E,p,v,y,S,A,b,m,C,w,P,x,T,g,O;return{setters:[function(e){t=e.extends,i=e.applyDecoratedDescriptor,n=e.inheritsLoose,s=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,l=e._decorator,r=e.BitMask,f=e.ccenum,h=e.EventHandler,d=e.Prefab,u=e.Vec3,_=e.Collider,E=e.BoxCollider,p=e.director,v=e.Quat,y=e.instantiate,S=e.CCObject,A=e.Component},function(e){b=e.EDITOR},function(e){m=e.ARCameraMgr},function(e){C=e.arEvent,w=e.ARInternalEventType},function(e){P=e.TransformModeType,x=e.StateAction},function(e){T=e.AxisFlagType},function(e){g=e.MinMaxScaleConstraint},function(e){O=e.RotationAxisConstrain}],execute:function(){var M,z,L,R,V,I,H,B,k,U,N,D,F,W,j,G,Q,X,Y,q,J,K;c._RF.push({},"56c6coVQH1GV7fCUL4EjAVn","ar-selectable",void 0);var Z=l.ccclass,$=l.property,ee=l.help,te=l.menu,ie=l.disallowMultiple,ne=l.executeInEditMode,se=function(e){return e[e.MOVE=1]="MOVE",e[e.ROTATE=2]="ROTATE",e[e.SCALE=4]="SCALE",e}(se||{}),oe=function(){};oe.BitMask=r(t({},se)),f(oe);var ae=(M=Z("cc.SelectionEvents"),z=$({serializable:!0,type:[h],displayOrder:1,tooltip:"i18n:xr-plugin.selectable.select_events.selectEnterEvents"}),L=$({serializable:!0,type:[h],displayOrder:2,tooltip:"i18n:xr-plugin.selectable.select_events.selectExitEvents"}),R=$({serializable:!0,type:[h],displayOrder:3,tooltip:"i18n:xr-plugin.selectable.select_events.selectCancelEvents"}),M((H=i((I=function(){function e(){s(this,"selectEnterEvents",H,this),s(this,"selectExitEvents",B,this),s(this,"selectCancelEvents",k,this)}var t=e.prototype;return t.selectEntered=function(e){h.emitEvents(this.selectEnterEvents,e)},t.selectExited=function(e){h.emitEvents(this.selectExitEvents,e)},t.selectCanceled=function(e){h.emitEvents(this.selectCancelEvents,e)},e}()).prototype,"selectEnterEvents",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=i(I.prototype,"selectExitEvents",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),k=i(I.prototype,"selectCancelEvents",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=I))||V);e("Selectable",(U=Z("cc.Selectable"),N=ee("i18n:cc.Selectable"),D=te("XR/Interaction/Selectable"),F=$({serializable:!0}),W=$({serializable:!0}),j=$({type:oe.BitMask,displayOrder:1,tooltip:"i18n:xr-plugin.selectable.allowedActions"}),G=$({serializable:!0,type:ae,displayOrder:2,tooltip:"i18n:xr-plugin.selectable.selectionEvents"}),Q=$({type:d,displayOrder:3,tooltip:"i18n:xr-plugin.selectable.selectedVisualization"}),U(X=N(X=D(X=ie(X=ne((q=i((Y=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(t,"_allowedActions",q,o(t)),s(t,"_selectedVisualization",J,o(t)),s(t,"selectionEvents",K,o(t)),t._transformMode=P.SPACE,t._transformPoint=new u,t._sceneEffect=null,t._isSelected=!1,t._isMoveHit=!1,t._enterScale=new u(1,1,1),t._oriScale=new u(1,1,1),t._enterPos=new u(0,0,0),t}n(t,e);var i=t.prototype;return i.onLoad=function(){this._oriScale.set(this.node.scale),this.node.getComponent(_)||this.node.addComponent(E)},i.onEnable=function(){C.on(w.SELECT_ACTION,this._selectAction,this),this._allowedActions&se.MOVE&&C.on(w.SELECT_MOVE_ACTION,this._selectMoveAction,this),this._allowedActions&se.ROTATE&&C.on(w.SELECT_ROTATE_ACTION,this._selectRotateAction,this),this._allowedActions&se.SCALE&&C.on(w.SELECT_SCALE_ACTION,this._selectScaleAction,this),this.createScenePrefabEffect(this._selectedVisualization)},i.onDisable=function(){C.off(w.SELECT_ACTION,this._selectAction,this),this._allowedActions&se.MOVE&&C.off(w.SELECT_MOVE_ACTION,this._selectMoveAction,this),this._allowedActions&se.ROTATE&&C.off(w.SELECT_ROTATE_ACTION,this._selectRotateAction,this),this._allowedActions&se.SCALE&&C.off(w.SELECT_SCALE_ACTION,this._selectScaleAction,this),this.removePrefabEffect()},i.onDestroy=function(){this.removePrefabEffect()},i._selectAction=function(e){if(e.uuid===this.node.uuid)switch(e.state){case x.Enter:this.isSelected=!0;break;case x.Cancel:this.isSelected=!1}},i._hitPlane=function(e,t,i,n,s){var o=u.dot(s,i);if(0!==o){var a=(u.dot(s,t)-u.dot(s,n))/o;e=u.subtract(e,t,i.multiplyScalar(a))}},i._moveOutHit=function(e){var t=e.ray;if(t){var i=new u;this._hitPlane(i,t.o,t.d,this.node.worldPosition,u.UP);var n=u.dot(u.UP,t.d.normalize());if(Math.abs(n)<=.707){var s,o=p.getScene().getComponentInChildren(m),a=null==o||null==(s=o.Camera)?void 0:s.node.forward;a&&this._hitPlane(i,t.o,t.d,this.node.worldPosition,new u(a.x,0,a.z))}this.node.setWorldPosition(i)}},i._moveInHit=function(e){if(e.pose){var t=e.pose.position;if(t){var i=new u;u.subtract(i,this.node.worldPosition,this._transformPoint),this._transformPoint.set(t),u.add(i,t,i),this.node.setWorldPosition(i)}}},i._selectMoveAction=function(e){this._isSelected&&e.moveNodeUuid===this.node.uuid&&(e.state===x.Update?this._transformMode!==P.SPACE?this._moveInHit(e):this._moveOutHit(e):e.state===x.Exit&&(this.isMoveHit=!1))},i._rotateByLocal=function(e,t){var i=new v;v.rotateAroundLocal(i,this.node.rotation,e,t),this.node.setRotation(i)},i._rotateByWorld=function(e,t){var i=new v;v.rotateAround(i,this.node.worldRotation,e,t),this.node.setWorldRotation(i)},i._selectRotateAction=function(e){if(this._isSelected&&e.state===x.Update){var t=e.rotation;if(this._transformMode===P.SPACE){var i=this.getComponent(O);i?(i.axisFlag&T.X||(t.x=0),i.axisFlag&T.Y||(t.y=0),i.useLocalSpace?(0!==t.y&&this._rotateByLocal(u.UP,t.y),0!==t.x&&this._rotateByLocal(u.RIGHT,t.x)):(0!==t.y&&this._rotateByWorld(u.UP,t.y),0!==t.x&&this._rotateByWorld(u.RIGHT,t.x))):(0!==t.y&&this._rotateByLocal(u.UP,t.y),0!==t.x&&this._rotateByLocal(u.RIGHT,t.x))}else this._rotateByLocal(u.UP,t.y)}},i._selectScaleAction=function(e){if(this._isSelected)switch(e.state){case x.Enter:this._enterScale.set(this.node.scale),this._enterPos.set(this.node.worldPosition);break;case x.Update:if(e.state===x.Update){var t=e.scale,i=new u;u.multiplyScalar(i,this._enterScale,t);var n=this.getComponent(g);if(n){var s=i.x/this._oriScale.x;n.minScale>s?t=n.minScale*this._oriScale.x/this._enterScale.x:n.maxScale<s&&(t=n.maxScale*this._oriScale.x/this._enterScale.x)}if(this._transformMode!==P.SPACE){var o=new u;u.subtract(o,this._enterPos,this._transformPoint),u.scaleAndAdd(o,this._transformPoint,o,t),this.node.setWorldPosition(o)}this.node.setScale(u.multiplyScalar(new u,this._enterScale,t))}}},i.createScenePrefabEffect=function(e){this.removePrefabEffect(),e&&(this._sceneEffect=y(e),this._sceneEffect.name="__scene_select__",this.node.addChild(this._sceneEffect),this._sceneEffect._objFlags|=S.Flags.HideInHierarchy,this._sceneEffect.setPosition(0,0,0),this._sceneEffect.active=b)},i.removePrefabEffect=function(){this._sceneEffect=this.node.getChildByName("__scene_select__"),this._sceneEffect&&this._sceneEffect.isValid&&(this._sceneEffect.destroy(),this._sceneEffect=null)},a(t,[{key:"allowedActions",get:function(){return this._allowedActions},set:function(e){e!==this._allowedActions&&(this._allowedActions=e)}},{key:"selectedVisualization",get:function(){return this._selectedVisualization},set:function(e){e!==this._selectedVisualization&&(this._selectedVisualization=e,this.createScenePrefabEffect(e))}},{key:"transformMode",get:function(){return this._transformMode},set:function(e){this._transformMode=e}},{key:"transformPoint",get:function(){return this._transformPoint},set:function(e){this._transformPoint.set(e)}},{key:"selectedEffect",get:function(){return this._sceneEffect}},{key:"isSelected",get:function(){return this._isSelected},set:function(e){this._isSelected=e,this._sceneEffect||this.createScenePrefabEffect(this._selectedVisualization),this._sceneEffect&&(this._sceneEffect.active=this._isSelected)}},{key:"isMoveHit",get:function(){return this._isMoveHit},set:function(e){this._isMoveHit=e}}]),t}(A)).prototype,"_allowedActions",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return se.MOVE|se.ROTATE|se.SCALE}}),J=i(Y.prototype,"_selectedVisualization",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i(Y.prototype,"allowedActions",[j],Object.getOwnPropertyDescriptor(Y.prototype,"allowedActions"),Y.prototype),K=i(Y.prototype,"selectionEvents",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ae}}),i(Y.prototype,"selectedVisualization",[Q],Object.getOwnPropertyDescriptor(Y.prototype,"selectedVisualization"),Y.prototype),X=Y))||X)||X)||X)||X)||X));c._RF.pop()}}}));

System.register("chunks:///_virtual/ar-session.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-device-manager.ts","./webxr-session-controller.ts","./ar-manager.ts","./ar-enum.ts","./ar-event.ts"],(function(e){var t,n,s,o,i,r,a,c,u,l,p,f,S,g,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,s=e.initializerDefineProperty,o=e.assertThisInitialized,i=e.createClass},function(e){r=e.cclegacy,a=e._decorator,c=e.director,u=e.Director,l=e.Component},function(e){p=e.ARDeviceManager},function(e){f=e.WebXRSessionController},function(e){S=e.ARManager},function(e){g=e.XRSessionModeControllerType},function(e){h=e.arEvent}],execute:function(){var d,R,_,y,A,m,v,E,M;r._RF.push({},"3247cdNys9H94Rl+xbkhen4","ar-session",void 0);var b=a.ccclass,D=a.property,k=a.help,C=a.menu,T=a.disallowMultiple,w=a.executeInEditMode;e("ARSession",(d=b("cc.ARSession"),R=k("i18n:cc.ARSession"),_=C("XR/AR Tracking/ARSession"),y=D({serializable:!0}),A=D({displayOrder:1,tooltip:"i18n:xr-plugin.tracking.session.autoStartARSession"}),d(m=R(m=_(m=T(m=w(((M=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,s(t,"_autoStartARSession",E,o(t)),t}n(t,e),t.getSession=function(){return this._session};var r=t.prototype;return r.start=function(){this.autoStartARSession&&this.startSession()},r.onLoad=function(){t._arManager=this.getComponent(S),t._arManager&&(t._session&&t._session!==this&&(t._session.destroy(),t._session=null),t._session=this)},r.onDestroy=function(){this.endSession()},r.startSession=function(){var e=this;if(this.manager){this.manager.collectFeature();p.create().then((function(t){if(t){var n=g.IMMERSIVE_AR,s=e.getComponent(f);s&&(n=s.defaultSessionMode);t.checkSupported(n).then((function(s){if(s&&e.manager){var o=t.getCheckSessionMode();p.init(o,t,e.manager.configuration.config).then((function(t){t&&e.manager&&(e.manager.init(t),t.start()),h.dispatchSessionInitialized(t)}))}else console.warn("device not supported :",n)}))}}))}},r.endSession=function(){p.clear(),t._session=null},r.onEnable=function(){c.on(u.EVENT_BEFORE_UPDATE,this.onBeforeUpdate,this)},r.onDisable=function(){c.off(u.EVENT_BEFORE_UPDATE,this.onBeforeUpdate,this)},r.onBeforeUpdate=function(){var e=p.device;e&&(e.update(),this.manager&&this.manager.updateSystem())},i(t,[{key:"autoStartARSession",get:function(){return this._autoStartARSession},set:function(e){e!==this._autoStartARSession&&(this._autoStartARSession=e)}},{key:"manager",get:function(){return t._arManager}}]),t}(l))._arManager=null,M._session=null,E=t((v=M).prototype,"_autoStartARSession",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(v.prototype,"autoStartARSession",[A],Object.getOwnPropertyDescriptor(v.prototype,"autoStartARSession"),v.prototype),m=v))||m)||m)||m)||m)||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/ar-system-anchor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-system-base.ts"],(function(t){var n,e,r,o,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Node},function(t){c=t.ARSystemBase}],execute:function(){var a;e._RF.push({},"0f481Cx2hFAobYHfX95BgVT","ar-system-anchor",void 0);var s=r.ccclass;t("ARSystemAnchor",s("cc.ARSystemAnchor")(a=function(t){function e(n){var e;return(e=t.call(this)||this)._feature=n,e}return n(e,t),e.prototype.init=function(n){var e=this;t.prototype.init.call(this,n),this._trackingsParent=new o("_ANCHOR_TRACKINGS_"),n.addChild(this._trackingsParent),this._feature?(this._feature.onRemoveEvent.on((function(t){t&&t.forEach((function(t){e.onRemoveTrackableEvent.trigger(t)}))})),this._feature.onAddEvent.on((function(t){t&&t.forEach((function(t){}))})),this._feature.onUpdateEvent.on((function(t){t&&t.forEach((function(t){e.onUpdateTrackableEvent.trigger(t)}))}))):console.warn("anchor system this._feature === null")},e}(c))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/ar-system-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./action-base.ts","./ar-feature-base.ts"],(function(t){var i,n,a,e,r,o;return{setters:[function(t){i=t.createForOfIteratorHelperLoose,n=t.createClass},function(t){a=t.cclegacy},function(t){e=t.ARTrackingState},function(t){r=t.ARActionUpdateBase},function(t){o=t.FeatureEvent}],execute:function(){a._RF.push({},"e87b6lgL5VLjbssx9bkujhC","ar-system-base",void 0);t("ARSystemBase",function(){function t(){this.onAddTrackableEvent=new o,this.onUpdateTrackableEvent=new o,this.onRemoveTrackableEvent=new o,this._feature=null,this._matchings=new Set,this._trackings=new Array,this._visualizerRoot=null,this._trackingsParent=void 0}var a=t.prototype;return a.addTracking=function(t){for(var i=!1,n=0;n<this._trackings.length;n++){if(this._trackings[n].node.uuid===(null==t?void 0:t.node.uuid)){i=!0;break}}t&&!i&&this._trackings.push(t)},a.removeTracking=function(t){for(var i=0;i<this._trackings.length;i++){if(this._trackings[i].node.uuid===(null==t?void 0:t.node.uuid)){this._trackings.splice(i,1);break}}},a.getTrackingCount=function(){return this._trackings.length},a.showAllVisualizer=function(){this._visualizerRoot&&(this._visualizerRoot.active=!0)},a.hideAllVisualizer=function(){this._visualizerRoot&&(this._visualizerRoot.active=!1)},a.enableFeature=function(t){this._feature&&(this._feature.enable=t)},a.updateFeature=function(t){t&&this._feature?this._feature.init(t):console.warn("update feature error ...")},a.init=function(t){this._matchings.clear()},a.clearMatch=function(t){var n=this.getMatchData(t);n&&this._trackings.filter((function(t){return!!(t&&t.factors.length>0&&t.node.uuid===n.uuid)})).forEach((function(t){t.actions.forEach((function(t){t.resetAction(n.data)}))}));for(var a,e=i(this._matchings);!(a=e()).done;){var r=a.value;if(r.data.id===t){this._matchings.delete(r);break}}},a.isMatchData=function(t){for(var n,a=i(this._matchings);!(n=a()).done;){if(n.value.data.id===t)return!0}return!1},a.getMatchData=function(t){for(var n,a=i(this._matchings);!(n=a()).done;){var e=n.value;if(e.data.id===t)return e}return null},a.isMatchTrackingNode=function(t){for(var n,a=i(this._matchings);!(n=a()).done;){if(n.value.uuid===t)return!0}return!1},a.runAction=function(t,i){i.trackableRootNode=this._trackingsParent,i.trackingNode=t.node,t.actions.sort((function(t,i){return t.priority-i.priority})),t.actions.forEach((function(t){t.runAction(i)}));var n={data:i,uuid:t.node.uuid};this._matchings.add(n)},a.matchTracking=function(t){var n=this;if(!this.isMatchData(t.id))for(var a,e=function(){var i=a.value;if(i&&i.factors.length>0&&!n.isMatchTrackingNode(i.node.uuid)){var e=!0;if(i.factors.forEach((function(i){var n=i.match(t);e&&(e=n)})),e)return n.runAction(i,t),{v:void 0}}},r=i(this._trackings);!(a=r()).done;){var o=e();if("object"==typeof o)return o.v}},a.updateAction=function(t,i){t.actions.sort((function(t,i){return t.priority-i.priority})),t.actions.forEach((function(t){t instanceof r&&t.updateAction(i)}))},a.resetAction=function(t,i){t.actions.sort((function(t,i){return t.priority-i.priority})),t.actions.forEach((function(t){t.resetAction(i)}))},a.updateTracking=function(t){for(var n,a=this,r=function(){var i=n.value;if(i&&i.factors.length>0&&i.node.uuid===t.uuid){var r=!0;i.factors.forEach((function(i){var n=i.match(t.data);r&&(r=n)})),t.data.resetWhenLoss&&t.data.trackingState!==e.TRACKING?a.resetAction(i,t.data):r?a.updateAction(i,t.data):a.resetAction(i,t.data)}},o=i(this._trackings);!(n=o()).done;)r()},n(t,[{key:"feature",get:function(){return this._feature}},{key:"trackingsParent",get:function(){return this._trackingsParent}}]),t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-system-face.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-system-base.ts"],(function(e){var t,n,a,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,r=e.Node},function(e){i=e.ARSystemBase}],execute:function(){var s;n._RF.push({},"a5561bkgqJCHa/7hxkwSbGW","ar-system-face",void 0);var c=a.ccclass;e("ARSystemFaceTracking",c("cc.ARSystemFaceTracking")(s=function(e){function n(t){var n;return(n=e.call(this)||this)._feature=t,n}return t(n,e),n.prototype.init=function(t){var n=this;if(e.prototype.init.call(this,t),this._trackingsParent=new r("_FACE_TRACKINGS_"),t.addChild(this._trackingsParent),this._feature){this._feature.config;this._feature.onRemoveEvent.on((function(e){e&&e.forEach((function(e){n.onRemoveTrackableEvent.trigger(e)}))})),this._feature.onAddEvent.on((function(e){e&&e.forEach((function(e){var t={id:e.id,pose:e.pose,blendShapes:e.blendShapes};n.matchTracking(t),n.onAddTrackableEvent.trigger(e)}))})),this._feature.onUpdateEvent.on((function(e){e&&e.forEach((function(e){var t={id:e.id,pose:e.pose,blendShapes:e.blendShapes};n.matchTracking(t),n.onUpdateTrackableEvent.trigger(e)}))}))}else console.warn("face system this._feature === null")},n}(i))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ar-system-image.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-system-base.ts"],(function(e){var t,a,i,n,o,r,s;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,i=e._decorator,n=e.Node,o=e.instantiate,r=e.Vec3},function(e){s=e.ARSystemBase}],execute:function(){var c;a._RF.push({},"100e2kwwt9Ia77xe9YPpDfw","ar-system-image",void 0);var d=i.ccclass;e("ARSystemImageTracking",d("cc.ARSystemImageTracking")(c=function(e){function a(t){var a;return(a=e.call(this)||this)._imagesNodeMap=new Map,a._feature=t,a}t(a,e);var i=a.prototype;return i.init=function(t){var a=this;e.prototype.init.call(this,t),this._visualizerRoot=new n("_IMAGE_VISUALIZER_"),t.addChild(this._visualizerRoot),this._trackingsParent=new n("_IMAGE_TRACKINGS_"),t.addChild(this._trackingsParent),this._feature?(this._feature.onRemoveEvent.on((function(e){e&&e.forEach((function(e){var t=a.getMatchData(e.id);t&&t.data.trackableNode?(t.data.trackingState=e.trackingState,a.onRemoveTrackableEvent.trigger(t.data)):console.warn("remove image not found match data ..."),a.clearMatch(e.id),a.removeImageVisualizer(e)}))})),this._feature.onAddEvent.on((function(e){e&&e.forEach((function(e){var t={id:e.id,pose:e.pose,trackingState:e.trackingState,libIndex:e.libIndex,extent:e.extent};a.matchTracking(t),a.addImageVisualizer(t),t.trackableNode&&a.onAddTrackableEvent.trigger(t)}))})),this._feature.onUpdateEvent.on((function(e){e&&e.forEach((function(e){var t,i=a.getMatchData(e.id);if(i){if((t=i.data).closeTracking)return a.updateTracking(i),void(t.trackableNode&&a.onUpdateTrackableEvent.trigger(t));t.pose=e.pose,t.libIndex=e.libIndex,t.extent=e.extent,t.trackingState=e.trackingState,t.trackablePose={position:t.pose.position.clone(),rotation:t.pose.rotation.clone()},a.updateTracking(i),a.updateImageVisualizer(t),t.trackableNode&&a.onUpdateTrackableEvent.trigger(t)}}))}))):console.warn("image system this._feature === null")},i.isMatchTrackingNode=function(e){return!1},i.addImageVisualizer=function(e){if(e.replaceVisualizer&&e.id>=0&&!this._imagesNodeMap.has(e.id)){var t,a=o(e.replaceVisualizer);null==(t=this._visualizerRoot)||t.addChild(a),e.extent&&a.setWorldScale(new r(e.extent.x,1,e.extent.y)),a.setPosition(e.pose.position),a.setRotation(e.pose.rotation),this._imagesNodeMap.set(e.id,a)}},i.updateImageVisualizer=function(e){if(this._feature&&e.id>=0&&this._imagesNodeMap.has(e.id)){var t=this._imagesNodeMap.get(e.id);e.extent&&t.setWorldScale(new r(e.extent.x,1,e.extent.y)),t.setPosition(e.pose.position),t.setRotation(e.pose.rotation)}},i.removeImageVisualizer=function(e){e.id>=0&&this._imagesNodeMap.has(e.id)&&(this._imagesNodeMap.get(e.id).destroy(),this._imagesNodeMap.delete(e.id))},a}(s))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-system-mesh.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-system-base.ts"],(function(e){var s,t,i,n,a,r,h,o,c,d,u;return{setters:[function(e){s=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,n=e.Node,a=e.instantiate,r=e.MeshRenderer,h=e.sys,o=e.utils,c=e.MeshCollider,d=e.Mesh},function(e){u=e.ARSystemBase}],execute:function(){var l;t._RF.push({},"0aacePIJm9N14n66jO2R2Lp","ar-system-mesh",void 0);var m=i.ccclass;e("ARSystemSceneMesh",m("cc.ARSystemSceneMesh")(l=function(e){function t(s){var t;return(t=e.call(this)||this)._meshesNodeMap=new Map,t._feature=s,t}s(t,e);var i=t.prototype;return i.init=function(s){var t=this;if(e.prototype.init.call(this,s),this._visualizerRoot=new n("_MESH_VISUALIZER_"),s.addChild(this._visualizerRoot),this._feature){var i=this._trackings[0];this._feature.onRemoveEvent.on((function(e){e&&e.forEach((function(e){t.removeMeshVisualizer(e),t.clearMatch(e.id)}))})),this._feature.onAddEvent.on((function(e){e&&e.forEach((function(e){var s={data:e,uuid:i.node.uuid};t._matchings.add(s),t.showMeshVisualizer(e)}))})),this._feature.onUpdateEvent.on((function(e){e&&e.forEach((function(e){var s=t.getMatchData(e.id);if(s)s.data=e;else{var n={data:e,uuid:i.node.uuid};t._matchings.add(n)}t.showMeshVisualizer(e)}))}))}else console.warn("mesh system this._feature === null")},i.removeMeshVisualizer=function(e){this._meshesNodeMap.has(e.id)&&(this._meshesNodeMap.get(e.id).destroy(),this._meshesNodeMap.delete(e.id))},i.showMeshVisualizer=function(e){if(e.vertices&&e.indices&&this._feature){var s=void 0!==e.verticesArray&&void 0!==e.indicesArray;if(s||!(e.vertices.length<=0||e.indices.length<=0)){var t,i,n=this._feature.config;if(!(t=this._meshesNodeMap.get(e.id)))t=a(n.visualizer),null==(i=this._visualizerRoot)||i.addChild(t),this._meshesNodeMap.set(e.id,t);var d=t.getComponent(r);if(d||(d=t.addComponent(r)),t.setPosition(e.pose.position),t.setRotation(e.pose.rotation),h.platform===h.Platform.IOS){var u={positions:e.vertices,indices:e.indices};d&&(d.mesh=o.createMesh(u))}else e.verticesArray&&e.indicesArray?this.createOrUpdateSubMeshesFast(d,e.verticesArray,e.indicesArray):e.vertices.length>0?this.createOrUpdateSubMeshes(d,e.vertices,e.indices):console.error("ARSystemSceneMesh.showMeshVisualizer.failed (ar mesh invalid) !!!");var l=t.getComponent(c);l&&d&&!s&&(l.mesh=d.mesh)}else console.error("ARSystemSceneMesh.showMeshVisualizer.failed (vertices/indices data length is 0) !!!")}else console.error("ARSystemSceneMesh.showMeshVisualizer.failed (vertices/indices invalid) !!!")},i.createOrUpdateSubMeshes=function(e,s,t){e.mesh||(e.mesh=new d);var i=4095,n=Math.ceil(t.length/i),a=t.length%i;console.log("vertices.length",s.length),console.log("indices.length",t.length),console.log("subMeshCount",n);for(var r={maxSubMeshes:n,maxSubMeshVertices:s.length,maxSubMeshIndices:i},h=e.getMaterial(0),c=e.mesh.renderingSubMeshes.length,u=0;u<n;u++){var l=u*i,m=l+(u===n-1?a:i),M={positions:new Float32Array(s),indices32:new Uint32Array(t.slice(l,m))};u<c?e.mesh.updateSubMesh(u,M):e.mesh=o.MeshUtils.createDynamicMesh(u,M,void 0,r),u>0&&e.setMaterial(h,u)}e.onGeometryChanged()},i.createOrUpdateSubMeshesFast=function(e,s,t){var i=performance.now();e.mesh||(e.mesh=new d);var n=32e4,a=Math.ceil(t.length/n),r=t.length%n,h=e.getMaterial(0),c=e.mesh.renderingSubMeshes.length;e.mesh.struct.dynamic&&e.mesh.struct.dynamic.info?(e.mesh.struct.dynamic.info.maxSubMeshes=a,e.mesh.struct.dynamic.info.maxSubMeshIndices=n,e.mesh.struct.dynamic.info.maxSubMeshVertices=s.length):e.mesh.struct.dynamic||(c=0);for(var u=0;u<a;u++){var l=u*n,m=l+(u===a-1?r:n),M={positions:s,indices32:t.subarray(l,m)};if(u<c)e.mesh.struct.dynamic&&e.mesh.renderingSubMeshes[u].vertexBuffers[0].resize(3*s.length*4),e.mesh.updateSubMesh(u,M);else{var v={maxSubMeshes:a,maxSubMeshVertices:s.length,maxSubMeshIndices:n};e.mesh=o.MeshUtils.createDynamicMesh(u,M,void 0,v)}e.setMaterial(h,u)}e.onGeometryChanged();var f=performance.now()-i;console.log("createOrUpdateSubMeshesFast Vertices:"+s.length+"/"+t.length+",Consume Time:"+f.toFixed(3)+"ms")},t}(u))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-system-plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-plane-tracking-visualizer.ts","./ar-system-base.ts"],(function(e){var t,a,i,n,r,s,o,l;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,i=e._decorator,n=e.Node,r=e.Vec3,s=e.instantiate},function(e){o=e.PlaneTrackingVisualizer},function(e){l=e.ARSystemBase}],execute:function(){var c;a._RF.push({},"f1bd3jB3jZCP55ykFXlRaGr","ar-system-plane",void 0);var d=i.ccclass;e("ARSystemPlaneDetection",d("cc.ARSystemPlaneDetection")(c=function(e){function a(t){var a;return(a=e.call(this)||this)._planesNodeMap=new Map,a._feature=t,a}t(a,e);var i=a.prototype;return i.init=function(t){var a=this;if(e.prototype.init.call(this,t),this._visualizerRoot=new n("_PLANE_VISUALIZER_"),t.addChild(this._visualizerRoot),this._trackingsParent=new n("_PLANE_TRACKINGS_"),t.addChild(this._trackingsParent),this._feature){var i=this._feature.config;this._feature.onRemoveEvent.on((function(e){e&&e.forEach((function(e){var t=a.getMatchData(e.id);t&&t.data.trackableNode?(t.data.trackingState=e.trackingState,a.onRemoveTrackableEvent.trigger(t.data)):console.warn("remove plane not found match data ..."),a.clearMatch(e.id),a.removePlaneVisualizer(e)}))})),this._feature.onAddEvent.on((function(e){e&&e.forEach((function(e){var t={id:e.id,type:e.type,extent:e.extent,pose:e.pose,trackingState:e.trackingState,replaceVisualizer:i.planePrefab};a.matchTracking(t),a.addPlaneVisualizer(t),t.trackableNode&&a.onAddTrackableEvent.trigger(t)}))})),this._feature.onUpdateEvent.on((function(e){e&&e.forEach((function(e){var t,i=a.getMatchData(e.id);if(i){if((t=i.data).closeTracking)return a.updateTracking(i),void(t.trackableNode&&a.onUpdateTrackableEvent.trigger(t));t.pose=e.pose,t.type=e.type,t.extent=e.extent,t.trackingState=e.trackingState,t.trackablePose={position:t.pose.position.clone(),rotation:t.pose.rotation.clone()},a.updateTracking(i),a.updatePlaneVisualizer(t),t.trackableNode&&a.onUpdateTrackableEvent.trigger(t)}else t={id:e.id,type:e.type,extent:e.extent,pose:e.pose,trackingState:e.trackingState},a.matchTracking(t),a.updatePlaneVisualizer(t),t.trackableNode&&a.onAddTrackableEvent.trigger(t)}))}))}else console.warn("plane system this._feature === null")},i._setVisualizerData=function(e,t,a){if(this._feature){!e.usePlaneShape&&a.extent&&t.setWorldScale(new r(a.extent.x,1,a.extent.y)),t.setPosition(a.pose.position),t.setRotation(a.pose.rotation);var i=t.getComponent(o);i||(i=t.addComponent(o)),i.trackingPlaneId=a.id,i.usePlaneShape=e.usePlaneShape,i.trackingQualityCondition=e.trackingQualityCondition,i.polygon=this._feature.getHandler().getPlanePolygon(a.id)}},i.addPlaneVisualizer=function(e){if(this._feature){var t=this._feature.config;if(e.replaceVisualizer||(e.replaceVisualizer=t.planePrefab),e.replaceVisualizer&&e.id>=0&&!this._planesNodeMap.has(e.id)){var a,i=s(e.replaceVisualizer);e.replaceVisualizer=null,null==(a=this._visualizerRoot)||a.addChild(i),this._setVisualizerData(t,i,e),this._planesNodeMap.set(e.id,i)}}},i.updatePlaneVisualizer=function(e){if(this._feature&&e.id>=0&&this._planesNodeMap.has(e.id)){var t,a=this._planesNodeMap.get(e.id);if(e.replaceVisualizer)a.parent=null,a.destroy(),a=s(e.replaceVisualizer),null==(t=this._visualizerRoot)||t.addChild(a),this._planesNodeMap.set(e.id,a),e.replaceVisualizer=null;var i=this._feature.config;this._setVisualizerData(i,a,e)}},i.removePlaneVisualizer=function(e){e.id>=0&&this._planesNodeMap.has(e.id)&&(this._planesNodeMap.get(e.id).destroy(),this._planesNodeMap.delete(e.id))},a}(l))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/ar-system-trackable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(a){var e,t,r;return{setters:[function(a){e=a.createForOfIteratorHelperLoose},function(a){t=a.cclegacy,r=a._decorator}],execute:function(){var o;t._RF.push({},"1d0f8+Y8k5GwIWW7VZveEL+","ar-system-trackable",void 0);var c=r.ccclass;a("ARSystemTrackable",c("cc.ARSystemTrackable")(o=function(){function a(){this._trackableAddMap=new Set,this._trackableUpdateMap=new Set,this._trackableRemoveMap=new Set}var t=a.prototype;return t.registerFeatureSystem=function(a){var e=this;a.onAddTrackableEvent.on((function(a){e.onEnableTrackable(a)})),a.onUpdateTrackableEvent.on((function(a){e.onUpdateTrackable(a)})),a.onRemoveTrackableEvent.on((function(a){e.onDisableTrackable(a)}))},t.update=function(){for(var a,t=e(this._trackableAddMap);!(a=t()).done;){var r=a.value;r.trackableNode&&r.trackablePose&&(r.trackableNode.setPosition(r.trackablePose.position),r.trackableNode.setRotation(r.trackablePose.rotation),r.trackableNode.active=!0)}for(var o,c=e(this._trackableRemoveMap);!(o=c()).done;){var n=o.value;n.trackableNode&&(n.trackableNode.active=!1)}for(var l,s=e(this._trackableUpdateMap);!(l=s()).done;){var i=l.value;i.trackableNode&&i.trackablePose&&(i.trackableNode.setPosition(i.trackablePose.position),i.trackableNode.setRotation(i.trackablePose.rotation))}this._trackableUpdateMap.clear(),this._trackableAddMap.clear(),this._trackableRemoveMap.clear()},t.onEnableTrackable=function(a){a&&this._trackableAddMap.add(a)},t.onUpdateTrackable=function(a){a&&this._trackableUpdateMap.add(a)},t.onDisableTrackable=function(a){a&&this._trackableRemoveMap.add(a)},a}())||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/ar-trackable.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,n,a,c,o,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){c=t.cclegacy,o=t._decorator,p=t.ccenum,l=t.Component}],execute:function(){var s,u,g,y,k,O,T,_,I,b,f,d,h,A;c._RF.push({},"f5316J56b1Aa6KOZnGB/Efa","ar-trackable",void 0);var S=o.ccclass,N=o.property,R=o.help,P=o.menu,D=function(t){return t[t.POSITION_AND_ROTATION=1]="POSITION_AND_ROTATION",t[t.POSITION=2]="POSITION",t[t.ROTATION=3]="ROTATION",t}(D||{});p(D);t("ARTrackable",(s=S("cc.ARTrackable"),u=R("i18n:cc.ARTrackable"),g=P("hidden:XR/AR Tracking/ARTrackable"),y=N({serializable:!0}),k=N({serializable:!0}),O=N({serializable:!0}),T=N({displayOrder:1}),_=N({displayOrder:2}),I=N({type:D,displayOrder:3}),s(b=u(b=g((d=e((f=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_trackingId",d,n(e)),i(e,"_trackingState",h,n(e)),i(e,"_trackingType",A,n(e)),e}return r(e,t),a(e,[{key:"trackingId",get:function(){return this._trackingId},set:function(t){t!==this._trackingId&&(this._trackingId=t)}},{key:"trackingState",get:function(){return this._trackingState},set:function(t){t!==this._trackingState&&(this._trackingState=t)}},{key:"trackingType",get:function(){return this._trackingType},set:function(t){t!==this._trackingType&&(this._trackingType=t)}}]),e}(l)).prototype,"_trackingId",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=e(f.prototype,"_trackingState",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),A=e(f.prototype,"_trackingType",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return D.POSITION_AND_ROTATION}}),e(f.prototype,"trackingId",[T],Object.getOwnPropertyDescriptor(f.prototype,"trackingId"),f.prototype),e(f.prototype,"trackingState",[_],Object.getOwnPropertyDescriptor(f.prototype,"trackingState"),f.prototype),e(f.prototype,"trackingType",[I],Object.getOwnPropertyDescriptor(f.prototype,"trackingType"),f.prototype),b=f))||b)||b)||b));c._RF.pop()}}}));

System.register("chunks:///_virtual/ar-tracking-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./action-base.ts","./factor-base.ts","./ar-enum.ts"],(function(e){var t,i,n,r,a,o,c,s,l,u,f,p,b,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,c=e._decorator,s=e.sys,l=e.Component},function(e){u=e.ARActionBase},function(e){f=e.ARFactorBase},function(e){p=e.FactorType,b=e.ActionType,h=e.ARTrackingType}],execute:function(){var d,g,y,v,k,m,z,_,T,F,w,E,A,N,R,O,B,D,P,C,M,x,I,S,j;o._RF.push({},"87b12ba8NNKb5woTbo83rod","ar-tracking-base",void 0);var L=c.property,H=c.disallowMultiple,K=c.ccclass;e("ARTrackingBase",(d=K("cc.ARTrackingBase"),g=L({serializable:!0}),y=L({serializable:!0}),v=L({serializable:!0,type:f,visible:!1}),k=L({serializable:!0,type:u,visible:!1}),m=L({serializable:!0,type:p,visible:!1}),z=L({serializable:!0,type:b,visible:!1}),_=L({serializable:!0,visible:!1}),T=L({serializable:!0,visible:!1}),F=L({serializable:!0,group:{name:"Factor",displayOrder:1},visible:!1}),w=L({serializable:!0,group:{name:"Factor",displayOrder:2},visible:!1}),E=L({serializable:!0,visible:!1}),d(A=H((R=t((N=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"_trackingType",R,r(t)),n(t,"_trackEvent",O,r(t)),n(t,"factors",B,r(t)),n(t,"actions",D,r(t)),n(t,"menuFactors",P,r(t)),n(t,"menuActions",C,r(t)),n(t,"initialized",M,r(t)),n(t,"dependOnFactorOrAction",x,r(t)),n(t,"factorFlag",I,r(t)),n(t,"actionFlag",S,r(t)),n(t,"_childNodes",j,r(t)),t._trackEvents=new Map,t._startTime=0,t}i(t,e);var o=t.prototype;return o.updateFeature=function(e){},o.addProp=function(e,t){},o.resetProp=function(e,t){},o.removeProp=function(e,t){},o.addTrackEvent=function(e,t){this._trackEvents.set(e,t)},o.removeTrackEvent=function(e){this._trackEvents.has(e)&&this._trackEvents.delete(e)},o.getTrackEvents=function(){return this._trackEvents},o.addFactor=function(e){for(var t=!1,i=0;i<this.factors.length;i++){if(this.factors[i].type===e.type){t=!0;break}}t||this.factors.push(e)},o.removeFactor=function(e){for(var t=0;t<this.factors.length;t++){if(this.factors[t].type===e){this.factors.splice(t,1);break}}},o.addAction=function(e){for(var t=!1,i=0;i<this.actions.length;i++){if(this.actions[i].type===e.type){t=!0;break}}t||this.actions.push(e)},o.removeAction=function(e){for(var t=0;t<this.actions.length;t++){if(this.actions[t].type===e){this.actions.splice(t,1);break}}},o.showChildren=function(){var e=this;this.node.children.forEach((function(t){t.active=e._childNodes.get(t.getSiblingIndex())}))},o.hideChildren=function(){this.node.children.forEach((function(e){e.active=!1}))},o.init=function(){var e=this;this._childNodes.clear(),this.node.children.forEach((function(t){e._childNodes.set(t.getSiblingIndex(),t.active),t.active=!1}))},o.start=function(){this._startTime=s.now()},o.onDestroy=function(){this.updateFeature(!1)},o.onEnable=function(){this.updateFeature(!0)},o.onDisable=function(){this.updateFeature(!1)},o.update=function(){this._trackEvent&&this._trackEvent.judgeTimeout(s.now()-this._startTime)},a(t,[{key:"trackingType",get:function(){return this._trackingType},set:function(e){e!==this._trackingType&&(this._trackingType=e)}}]),t}(l)).prototype,"_trackingType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.None}}),O=t(N.prototype,"_trackEvent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(N.prototype,"factors",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(N.prototype,"actions",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(N.prototype,"menuFactors",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(N.prototype,"menuActions",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=t(N.prototype,"initialized",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=t(N.prototype,"dependOnFactorOrAction",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),I=t(N.prototype,"factorFlag",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),S=t(N.prototype,"actionFlag",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),j=t(N.prototype,"_childNodes",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),A=N))||A)||A));o._RF.pop()}}}));

System.register("chunks:///_virtual/ARFeatureTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-enum.ts","./ar-event.ts","./ar-api.ts"],(function(e){var t,n,a,r,i,o,l,s,c,u,g,h,p,f,T,b,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,l=e._decorator,s=e.Node,c=e.Toggle,u=e.profiler,g=e.RichText,h=e.Component},function(e){p=e.FeatureType},function(e){f=e.ARTrackingType},function(e){T=e.arEvent,b=e.AREventType},function(e){d=e.arApi}],execute:function(){var y,k,v,m,F,S,_,I,E,z,A;o._RF.push({},"ac5dcc6hexIZ7FcKzoWRJEt","ARFeatureTest",void 0);var w=l.ccclass,R=l.property;e("ARFeatureTest",(y=w("ARFeatureTest"),k=R({serializable:!0,type:s}),v=R({serializable:!0,type:c}),m=R({serializable:!0,type:c}),F=R({serializable:!0,type:c}),y((I=t((_=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"session",I,r(t)),a(t,"planeToggle",E,r(t)),a(t,"meshToggle",z,r(t)),a(t,"debugInfoToggle",A,r(t)),t._planeTrackingEnable=!1,t._meshTrackingEnable=!1,t._features=new Set,t}n(t,e);var o=t.prototype;return o.start=function(){this.meshToggle.node.attr({feature:{type:p.SceneMesh,enable:!0}}),this._features.add(this.meshToggle.node),this.planeToggle.node.attr({feature:{type:p.PlaneDetection,enable:!0}}),this._features.add(this.planeToggle.node),this.debugInfoToggle.isChecked=!1,u.hideStats()},o.onEnable=function(){T.on(b.SESSION_INITIALIZED,this.testFeature,this)},o.onDisable=function(){T.off(b.SESSION_INITIALIZED,this.testFeature,this)},o.testFeature=function(){d.enableFeatureTracking(f.Plane,!1),d.enableFeatureTracking(f.WorldMesh,!1);var e=d.getDevice();if(e){var t=e.FeatureSupportMask;console.log("Device feature set: ",t);for(var n,a=i(this._features);!(n=a()).done;){var r=n.value,o=t&r.feature.type;console.log("check:",t,p[r.feature.type],o),r.getComponent(c).interactable=0!==o,o===p.PlaneDetection?r.parent.getComponent(g).string="<color=#00ff00>Plane Tracking : </color>":o===p.SceneMesh&&(r.parent.getComponent(g).string="<color=#00ff00>Meshing : </color>")}}else console.warn("The device does not support AR !")},o.showSession=function(){this.session.active=!this.session.active},o.showInfo=function(){u.isShowingStats()?u.hideStats():u.showStats()},o.planeTrackingStart=function(){this._planeTrackingEnable=!this._planeTrackingEnable,this._planeTrackingEnable?(d.showAllVisualizer(f.Plane),d.enableFeatureTracking(f.Plane,!0)):(d.hideAllVisualizer(f.Plane),d.enableFeatureTracking(f.Plane,!1))},o.meshTrackingStart=function(){this._meshTrackingEnable=!this._meshTrackingEnable,this._meshTrackingEnable?(d.showAllVisualizer(f.WorldMesh),d.enableFeatureTracking(f.WorldMesh,!0)):(d.hideAllVisualizer(f.WorldMesh),d.enableFeatureTracking(f.WorldMesh,!1))},t}(h)).prototype,"session",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(_.prototype,"planeToggle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(_.prototype,"meshToggle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(_.prototype,"debugInfoToggle",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=_))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/axis-constraint.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,s,e;return{setters:[function(t){n=t.extends},function(t){s=t.cclegacy,e=t.BitMask}],execute:function(){s._RF.push({},"4a62bsNISJK6bKhYDCouabI","axis-constraint",void 0);var i=t("AxisFlagType",function(t){return t[t.X=1]="X",t[t.Y=2]="Y",t}({}));t("AxisFlagTypes",(function(){})).BitMask=e(n({},i)),s._RF.pop()}}}));

System.register("chunks:///_virtual/BallShooter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-camera.ts","./ar-enum.ts","./ar-api.ts"],(function(t){var e,n,o,i,r,a,l,s,c,u,p,h,d,f,y,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Prefab,s=t.input,c=t.Input,u=t.director,p=t.instantiate,h=t.RigidBody,d=t.Component},function(t){f=t.ARCameraMgr},function(t){y=t.ARTrackingType},function(t){g=t.arApi}],execute:function(){var v,P,b,m,R;r._RF.push({},"723594uPKdDapchvNh+vhMW","BallShooter",void 0);var S=a.ccclass,A=a.property;t("BallShooter",(v=S("BallShooter"),P=A({serializable:!0,type:l}),v((R=e((m=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"ball",R,i(e)),e}n(e,t);var r=e.prototype;return r.start=function(){s.on(c.EventType.TOUCH_START,this.shoot,this)},r.update=function(t){},r.shoot=function(t){var e=u.getScene().getComponentInChildren(f),n=p(this.ball);n.setParent(u.getScene()),n.setWorldPosition(e.node.getWorldPosition()),n.setWorldRotation(e.node.getWorldRotation()),n.getComponent(h).setLinearVelocity(e.node.forward.multiply3f(2,2,2))},r.showPlane=function(){g.showAllVisualizer(y.Plane)},r.hidePlane=function(){g.hideAllVisualizer(y.Plane)},e}(d)).prototype,"ball",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=m))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/camera-following.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var r,t,o,a,i,n,c,l,s;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.createClass},function(e){n=e.cclegacy,c=e._decorator,l=e.CameraComponent,s=e.Component}],execute:function(){var p,u,m,d,f,g,h,y;n._RF.push({},"419e7jnuRNLjaY0M8wgAL66","camera-following",void 0);var w=c.ccclass,_=c.help,C=c.menu,R=c.property;e("CameraFollowing",(p=w("cc.CameraFollowing"),u=_("i18n:cc.CameraFollowing"),m=C("XR/XRUI/CameraFollowing"),d=R({serializable:!0}),f=R({type:l,displayOrder:1,tooltip:"i18n:xr-plugin.camera_following.camera"}),p(g=u(g=m((y=r((h=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,o(r,"_camera",y,a(r)),r}return t(r,e),r.prototype.update=function(){this._camera&&(this.node.setWorldPosition(this._camera.node.worldPosition),this.node.setWorldRotation(this._camera.node.worldRotation))},i(r,[{key:"camera",get:function(){return this._camera},set:function(e){e!==this._camera&&(this._camera=e)}}]),r}(s)).prototype,"_camera",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r(h.prototype,"camera",[f],Object.getOwnPropertyDescriptor(h.prototype,"camera"),h.prototype),g=h))||g)||g)||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/ChangePlacementPrefab.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-screen-touch-interactor.ts"],(function(e){var t,r,n,i,a,o,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Prefab,l=e.Component},function(e){u=e.ScreenTouchInteractor}],execute:function(){var s,p,f,b,h,P,y,C,g,m,z;a._RF.push({},"06a9ccUd11Pi4J38S7K9N4a","ChangePlacementPrefab",void 0);var d=o.ccclass,v=o.property;e("ChangePlacementPrefab",(s=d("ChangePlacementPrefab"),p=v({serializable:!0,type:c}),f=v({serializable:!0,type:c}),b=v({serializable:!0,type:c}),h=v({serializable:!0,type:u}),s((C=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"Cube",C,i(t)),n(t,"Sphere",g,i(t)),n(t,"Cone",m,i(t)),n(t,"interactor",z,i(t)),t}r(t,e);var a=t.prototype;return a.start=function(){},a.update=function(e){},a.ChangeToCube=function(){this.interactor.setPlacementPrefab(this.Cube)},a.ChangeToSphere=function(){this.interactor.setPlacementPrefab(this.Sphere)},a.ChangeToCone=function(){this.interactor.setPlacementPrefab(this.Cone)},t}(l)).prototype,"Cube",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"Sphere",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(y.prototype,"Cone",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(y.prototype,"interactor",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=y))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/ChangeScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,o,c,t,r;return{setters:[function(e){n=e.inheritsLoose},function(e){o=e.cclegacy,c=e._decorator,t=e.director,r=e.Component}],execute:function(){var s;o._RF.push({},"55673MbnYBG+6b2V0YUIO+f","ChangeScene",void 0);var i=c.ccclass;e("ChangeScene",i("ChangeScene")(s=function(e){function o(){return e.apply(this,arguments)||this}return n(o,e),o.prototype.gotoScene=function(e,n){console.log("go to scene: ",n),t.loadScene(n)},o}(r))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/CheckDevice.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-event.ts","./ar-api.ts"],(function(e){var n,t,i,c,r,o,a,s,l,u,p;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,a=e.Button,s=e.Component},function(e){l=e.arEvent,u=e.AREventType},function(e){p=e.arApi}],execute:function(){var h,v,f,d,b;r._RF.push({},"b928e8y0jRM4JXx/pwXCmsp","CheckDevice",void 0);var y=o.ccclass,k=o.property;e("CheckDevice",(h=y("CheckDevice"),v=k({serializable:!0,type:a}),h((b=n((d=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,i(n,"enterBtn",b,c(n)),n}t(n,e);var r=n.prototype;return r.onEnable=function(){var e=this;p.checkWebXRSessionMode("inline").then((function(n){console.log("check device inline Supported?:",n),e.enterBtn.interactable=n})),l.on(u.SESSION_INITIALIZED,this.checkDevice,this)},r.checkDevice=function(){var e=this;console.log("device cur mode :"+p.getWebXRSessionMode()),p.checkWebXRSessionMode("immersive-ar").then((function(n){console.log("check device immersive-ar Supported?:",n),e.enterBtn.interactable=n}))},n}(s)).prototype,"enterBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/CheckWebXREnv.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./ar-api.ts"],(function(e){var t,n,i,r,a,l,o,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,o=e.Button,c=e.Component},function(e){s=e.XRSessionModeControllerType},function(e){u=e.arApi}],execute:function(){var p,b,h,f,v,y,B,g,d,m,z;a._RF.push({},"0b81d0IU5hKQpfH0zlWebQw","CheckWebXREnv",void 0);var k=l.ccclass,R=l.property;e("CheckWebXREnv",(p=k("CheckWebXREnv"),b=R({serializable:!0,type:o}),h=R({serializable:!0,type:o}),f=R({serializable:!0,type:o}),v=R({serializable:!0,type:o}),p((g=t((B=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"sessionModeBtn",g,r(t)),i(t,"hitTestBtn",d,r(t)),i(t,"trackingBtn",m,r(t)),i(t,"lightEstimateBtn",z,r(t)),t}n(t,e);var a=t.prototype;return a.start=function(){var e=this;u.createDevice().then((function(t){t?u.checkDevice(s.AUTO,t).then((function(t){t||(console.log("Device not support WebXR !"),e.disableAllButtons()),u.removeDevice()})):e.disableAllButtons()}))},a.disableAllButtons=function(){this.sessionModeBtn.interactable=!1,this.hitTestBtn.interactable=!1,this.trackingBtn.interactable=!1,this.lightEstimateBtn.interactable=!1},a.update=function(e){},t}(c)).prototype,"sessionModeBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(B.prototype,"hitTestBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(B.prototype,"trackingBtn",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"lightEstimateBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=B))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/continuous-mover.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-controller.ts","./locomotion-base.ts"],(function(e){var t,o,n,i,r,s,u,c,a,p,l,d,v,f,h,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){s=e.cclegacy,u=e._decorator,c=e.Node,a=e.Vec2,p=e.input,l=e.Input,d=e.EventGamepad,v=e.EventHandle,f=e.Vec3},function(e){h=e.XrInputDeviceType},function(e){_=e.LocomotionBase}],execute:function(){var y,m,S,g,w,E,D,M,b,I,N;s._RF.push({},"42e56uX4t5HspepxO/kP3MN","continuous-mover",void 0);var P=u.ccclass,x=u.help,O=u.menu,H=u.property;e("ContinuousMover",(y=P("cc.ContinuousMover"),m=x("i18n:cc.ContinuousMover"),S=O("XR/Locomotion/ContinuousMover"),g=H({serializable:!0}),w=H({serializable:!0}),E=H({displayOrder:4,tooltip:"i18n:xr-plugin.continuous_mover.moveSpeed"}),D=H({type:c,displayOrder:5,tooltip:"i18n:xr-plugin.continuous_mover.forwardSource"}),y(M=m(M=S((I=t((b=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"_moveSpeed",I,i(t)),n(t,"_forwardSource",N,i(t)),t._isMove=!1,t._xrSessionNode=null,t._move=new a(0,0),t}o(t,e);var s=t.prototype;return s.onEnable=function(){this._findChecker(),p.on(l.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),p.on(l.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},s.onDisable=function(){p.off(l.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),p.off(l.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},s._dispatchEventHandleInput=function(e){var t,o,n;e instanceof d?o=e.gamepad:e instanceof v&&(o=e.handleInputDevice),(n=(null==(t=this.inputDevice)?void 0:t.inputDevice)===h.Left_Hand?o.leftStick.getValue():o.rightStick.getValue()).equals(a.ZERO)?this._MoveOff():this._MoveOn(n)},s._MoveOn=function(e){var t,o=null==(t=this._checker)?void 0:t.XR_Agent;o&&(this._xrSessionNode=o),this._move.set(e.x,e.y),this._isMove=!0},s._MoveOff=function(){this._isMove=!1},s._getDirection=function(e,t,o){var n=new f(e,t,o);return this._forwardSource?f.transformQuat(n,n,this._forwardSource.getWorldRotation()):f.transformQuat(n,n,this.node.getWorldRotation()),n},s.update=function(e){if(this._xrSessionNode&&this._isMove){var t=this._xrSessionNode.getPosition();f.scaleAndAdd(t,t,this._getDirection(this._move.x,0,-this._move.y),this._moveSpeed*e),this._xrSessionNode.setPosition(t)}},r(t,[{key:"moveSpeed",get:function(){return this._moveSpeed},set:function(e){e!==this._moveSpeed&&(this._moveSpeed=e)}},{key:"forwardSource",get:function(){return this._forwardSource},set:function(e){e!==this._forwardSource&&(this._forwardSource=e)}}]),t}(_)).prototype,"_moveSpeed",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=t(b.prototype,"_forwardSource",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(b.prototype,"moveSpeed",[E],Object.getOwnPropertyDescriptor(b.prototype,"moveSpeed"),b.prototype),t(b.prototype,"forwardSource",[D],Object.getOwnPropertyDescriptor(b.prototype,"forwardSource"),b.prototype),M=b))||M)||M)||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/continuous-turner.ts",["./rollupPluginModLoBabelHelpers.js","cc","./locomotion-base.ts","./xr-controller.ts"],(function(t){var e,n,i,r,o,s,u,a,c,p,h,l,d,_,f,v,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,u=t._decorator,a=t.input,c=t.Input,p=t.EventGamepad,h=t.EventHandle,l=t.Vec2,d=t.Quat,_=t.Vec3,f=t.misc},function(t){v=t.LocomotionBase},function(t){T=t.XrInputDeviceType}],execute:function(){var y,g,S,E,O,F,D,I;s._RF.push({},"3714bOXpoZJ+rjXR2eEyugQ","continuous-turner",void 0);var L=u.ccclass,R=u.help,N=u.menu,b=u.property,x=function(t){return t[t.OFF=0]="OFF",t[t.Left=1]="Left",t[t.Right=2]="Right",t}(x||{});t("ContinuousTurner",(y=L("cc.ContinuousTurner"),g=R("i18n:cc.ContinuousTurner"),S=N("XR/Locomotion/ContinuousTurner"),E=b({serializable:!0}),O=b({displayOrder:5,tooltip:"i18n:xr-plugin.continuous_turner.turnSpeed"}),y(F=g(F=S((I=e((D=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,i(e,"_turnSpeed",I,r(e)),e._isTurn=x.OFF,e._xrSessionNode=null,e}n(e,t);var s=e.prototype;return s.onEnable=function(){this._findChecker(),a.on(c.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),a.on(c.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},s.onDisable=function(){a.off(c.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),a.off(c.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},s._dispatchEventHandleInput=function(t){var e,n,i;t instanceof p?n=t.gamepad:t instanceof h&&(n=t.handleInputDevice),(i=(null==(e=this.inputDevice)?void 0:e.inputDevice)===T.Left_Hand?n.leftStick.getValue():n.rightStick.getValue()).equals(l.ZERO)?this._turnOff():this._turnOn(i)},s._turnOn=function(t){var e,n=null==(e=this._checker)?void 0:e.XR_Agent;n&&(this._xrSessionNode=n),t.x<0?this._isTurn=x.Left:t.x>0?this._isTurn=x.Right:this._isTurn=x.OFF},s._turnOff=function(){this._isTurn=x.OFF},s.update=function(t){if(this._xrSessionNode&&this._isTurn!==x.OFF){var e=new d;switch(this._isTurn){case x.Left:d.rotateAroundLocal(e,this._xrSessionNode.rotation,_.UP,f.degreesToRadians(this._turnSpeed*t));break;case x.Right:d.rotateAroundLocal(e,this._xrSessionNode.rotation,_.UP,f.degreesToRadians(-this._turnSpeed*t))}this._xrSessionNode.setRotation(e)}},o(e,[{key:"turnSpeed",get:function(){return this._turnSpeed},set:function(t){t!==this._turnSpeed&&(this._turnSpeed=t)}}]),e}(v)).prototype,"_turnSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),e(D.prototype,"turnSpeed",[O],Object.getOwnPropertyDescriptor(D.prototype,"turnSpeed"),D.prototype),F=D))||F)||F)||F));s._RF.pop()}}}));

System.register("chunks:///_virtual/convert-2dui-to-3dui.ts",["./rollupPluginModLoBabelHelpers.js","cc","./raycast-checker.ts"],(function(e){var o,t,n,r,d,a,i,c,s,u,p,m,l,C,h,g,f,v,y;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,r=e.assetManager,d=e.Canvas,a=e.RenderRoot2D,i=e.Layers,c=e.UIRenderer,s=e.Widget,u=e.Button,p=e.EditBox,m=e.Slider,l=e.ScrollView,C=e.ProgressBar,h=e.Collider,g=e.BoxCollider,f=e.UITransform,v=e.Component},function(e){y=e.RaycastChecker}],execute:function(){var R;t._RF.push({},"bcf86qXrdRMO6A0D8UOU/kZ","convert-2dui-to-3dui",void 0);var _=n.ccclass,D=(n.property,n.executeInEditMode),U=n.menu;e("Convert2DUITo3DUI",_("cc.Convert2DUITo3DUI")(R=U("hidden:XR/XRUI/Convert2DUITo3DUI")(R=D(R=function(e){function t(){for(var o,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(o=e.call.apply(e,[this].concat(n))||this)._material=null,o}o(t,e);var n=t.prototype;return n.onLoad=function(){var e=this;r.loadAny({uuid:"fa235423-e2f5-491b-8972-ec0e98225f5b"},(function(o,t){e._material=t,e._2dTo3d(e.node)})),this.node.getComponent(d)?this.scheduleOnce((function(){e._addRenderRoot2D()})):this._addRenderRoot2D()},n._addRenderRoot2D=function(){this.node.getComponent(a)||this.node.addComponent(a),this.destroy()},n._2dTo3d=function(e){e.layer=i.Enum.UI_3D;var o=e.getComponent(c);o&&(o.customMaterial=this._material);var t=e.getComponent(d);if(t){var n=t.cameraComponent;n&&n.destroy(),t.destroy()}var r=e.getComponent(s);r&&r.destroy();var a=!1,v=e.getComponent(y);v||e.getComponent(u)&&(v=e.addComponent(y),a=!0);v||e.getComponent(p)&&(v=e.addComponent(y),a=!0);v||e.getComponent(m)&&(v=e.addComponent(y),a=!0);v||e.getComponent(l)&&(v=e.addComponent(y),a=!0);v||e.getComponent(C)&&(v=e.addComponent(y),a=!0);if(!e.getComponent(h)&&a){var R=e.addComponent(g),_=e.getComponent(f);_&&(R.center.set(0,0,0),R.size.set(_.width,_.height,.01))}for(var D=e.children,U=0;U<D.length;U++)this._2dTo3d(D[U])},t}(v))||R)||R)||R);t._RF.pop()}}}));

System.register("chunks:///_virtual/CreateSpatialAnchor.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,a,c,l,s,p,u,h,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,l=t.Prefab,s=t.input,p=t.Input,u=t.instantiate,h=t.director,f=t.Component}],execute:function(){var A,y,d,b,g,v,S;o._RF.push({},"8c8185SkG9OSb1+6q2Ielrq","CreateSpatialAnchor",void 0);var z=a.ccclass,C=a.property;t("CreateSpatialAnchor",(A=z("CreateSpatialAnchor"),y=C({serializable:!0,type:c}),d=C({serializable:!0,type:l}),A((v=e((g=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"centerAnchor",v,i(e)),n(e,"spatialAnchor",S,i(e)),e}r(e,t);var o=e.prototype;return o.start=function(){s.on(p.EventType.TOUCH_START,this.createAnchor,this)},o.update=function(t){},o.createAnchor=function(){var t=this.centerAnchor.getWorldPosition(),e=this.centerAnchor.getWorldRotation(),r=u(this.spatialAnchor);r.parent=h.getScene(),r.setWorldPosition(t),r.setWorldRotation(e)},e}(f)).prototype,"centerAnchor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(g.prototype,"spatialAnchor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/customized-tracking.ts",["./rollupPluginModLoBabelHelpers.js","cc","./track-event.ts","./ar-tracking-base.ts","./ar-enum.ts","./ar-defines.ts","./plane-direction.ts","./plane-size.ts","./display-children.ts","./surface-overlay.ts","./ar-event.ts","./plane-semantic.ts","./face-tracking-content.ts"],(function(t){var i,e,n,r,o,c,a,p,s,u,y,l,f,h,d,T,_,g,k,A;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){c=t.cclegacy,a=t._decorator},function(t){p=t.ARTrackEvent},function(t){s=t.ARTrackingBase},function(t){u=t.ARTrackingType,y=t.FactorType,l=t.ActionType},function(t){f=t.ARPlaneDetectionMode},function(t){h=t.ARPlaneDirection},function(t){d=t.ARPlaneSize},function(t){T=t.ARDisplayChildren},function(t){_=t.ARSurfaceOverlay},function(t){g=t.arEvent},function(t){k=t.ARPlaneSemantic},function(t){A=t.ARFaceTrackingContent}],execute:function(){var b,O,E,z,R,N,m,v,w,P,C,D,F,I,L,S,x,j;c._RF.push({},"55412X/2olI4bl1u8GFg8FL","customized-tracking",void 0);var M=a.ccclass,B=a.property,H=a.help,U=a.menu,V=a.executeInEditMode;t("ARCustomizedTracking",(b=M("cc.ARCustomizedTracking"),O=H("i18n:cc.ARCustomizedTracking"),E=U("hidden:XR/AR Tracking/ARCustomizedTracking"),z=B({serializable:!0}),R=B({serializable:!0}),N=B({serializable:!0}),m=B({serializable:!0}),v=B({type:u,displayOrder:1,readonly:!1,tooltip:"i18n:xr-plugin.ar_customized_tracking.trackingType"}),w=B({type:y,displayOrder:2,tooltip:"i18n:xr-plugin.ar_customized_tracking.factorType"}),P=B({displayOrder:3,visible:function(){return this.factorType!==y.NONE},tooltip:"i18n:xr-plugin.ar_customized_tracking.factor"}),C=B({type:l,displayOrder:4,tooltip:"i18n:xr-plugin.ar_customized_tracking.actionType"}),D=B({displayOrder:5,visible:function(){return this._actionType!==l.NONE},tooltip:"i18n:xr-plugin.ar_customized_tracking.action"}),b(F=O(F=E(F=V((L=i((I=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),c=0;c<e;c++)o[c]=arguments[c];return i=t.call.apply(t,[this].concat(o))||this,n(i,"_factorType",L,r(i)),n(i,"_actionType",S,r(i)),n(i,"_factor",x,r(i)),n(i,"_action",j,r(i)),i}e(i,t);var c=i.prototype;return c.onLoad=function(){this.initialized=!0,this.node.children.forEach((function(t){t.active=!1}))},c.updateFeature=function(t){this._actionType!==l.NONE&&this._factorType!==y.NONE||(t=!1);var i=f.All;this._factor&&this._factor.type===y.PLANE_DIRECTION&&(i=this._factor.directionType);var e={ft:this.trackingType,uuid:this.node.uuid,canUse:t,tracking:this,direction:i};g.collectFeature(e)},o(i,[{key:"trackingType",get:function(){return this._trackingType},set:function(t){t!==this._trackingType&&(this._trackingType=t)}},{key:"factorType",get:function(){return this._factorType},set:function(t){t!==this._factorType&&(this._factorType=t,this._factorType===y.PLANE_DIRECTION?this.factor=new h(this.node.uuid):this._factorType===y.PLANE_SIZE?this.factor=new d(this.node.uuid):this._factorType===y.PLANE_SEMANTIC?this.factor=new k(this.node.uuid):this._factorType===y.FACE_CONTENT?this.factor=new A(this.node.uuid):this.factor=null,this.factor&&this.addFactor(this.factor),this.updateFeature(!0))}},{key:"factor",get:function(){return this._factor},set:function(t){t!==this._factor&&(this._factor=t)}},{key:"actionType",get:function(){return this._actionType},set:function(t){t!==this._actionType&&(this._actionType=t,this._actionType===l.DISPLAY_CHILDREN?this.action=new T:this._actionType===l.TRACK_EVENT?this.action=new p:this._actionType===l.SURFACE_OVERLAY?this.action=new _:this.action=null,this.action&&this.addAction(this.action),this.updateFeature(!0))}},{key:"action",get:function(){return this._action},set:function(t){t!==this._action&&(this._action=t)}}]),i}(s)).prototype,"_factorType",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.NONE}}),S=i(I.prototype,"_actionType",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return l.NONE}}),x=i(I.prototype,"_factor",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(I.prototype,"_action",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i(I.prototype,"trackingType",[v],Object.getOwnPropertyDescriptor(I.prototype,"trackingType"),I.prototype),i(I.prototype,"factorType",[w],Object.getOwnPropertyDescriptor(I.prototype,"factorType"),I.prototype),i(I.prototype,"factor",[P],Object.getOwnPropertyDescriptor(I.prototype,"factor"),I.prototype),i(I.prototype,"actionType",[C],Object.getOwnPropertyDescriptor(I.prototype,"actionType"),I.prototype),i(I.prototype,"action",[D],Object.getOwnPropertyDescriptor(I.prototype,"action"),I.prototype),F=I))||F)||F)||F)||F));c._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/direct-interactor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactor.ts","./xr-interactable.ts","./interactor-events.ts"],(function(t){var i,e,r,o,n,l,s,c,h,a,_,d,C;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,s=t.ccenum,c=t.Collider},function(t){h=t.XrInteractor},function(t){a=t.SelectActionTrigger_Type,_=t.XrInteractable,d=t.XrControlEventType},function(t){C=t.InteractorEvents}],execute:function(){var E,u,g,v,f,b,T;n._RF.push({},"fb088tgUYlNQZWyJub1GwiW","direct-interactor",void 0);var m=l.ccclass,p=l.help,y=l.menu,S=l.property;s(a);t("DirectInteractor",(E=m("cc.DirectInteractor"),u=p("i18n:cc.DirectInteractor"),g=y("XR/Interaction/DirectInteractor"),v=S({serializable:!0}),E(f=u(f=g((T=i((b=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return i=t.call.apply(t,[this].concat(n))||this,r(i,"_startingSelectedInteractable",T,o(i)),i._colliderCom=null,i._directHitCollider=null,i}e(i,t);var n=i.prototype;return n.onLoad=function(){this._event.forceGrab=!0,this._colliderCom=this.node.getComponent(c),this._colliderCom||console.error("this node does not have")},n.onEnable=function(){t.prototype.onEnable.call(this),this._colliderCom&&(this._interactorEvents=this.getComponent(C),this._setAttachNode(),this._colliderCom.isTrigger?(this._colliderCom.on("onTriggerEnter",this._onTriggerEnterCb,this),this._colliderCom.on("onTriggerStay",this._onTriggerEnterCb,this),this._colliderCom.on("onTriggerExit",this._onTriggerEnterCb,this)):(this._colliderCom.on("onCollisionEnter",this._onCollisionEnterCb,this),this._colliderCom.on("onCollisionStay",this._onCollisionEnterCb,this),this._colliderCom.on("onCollisionExit",this._onCollisionEnterCb,this)))},n.onDisable=function(){t.prototype.onDisable.call(this),this._colliderCom&&(this._colliderCom.isTrigger?(this._colliderCom.off("onTriggerEnter",this._onTriggerEnterCb,this),this._colliderCom.off("onTriggerStay",this._onTriggerEnterCb,this),this._colliderCom.off("onTriggerExit",this._onTriggerEnterCb,this)):(this._colliderCom.off("onCollisionEnter",this._onCollisionEnterCb,this),this._colliderCom.off("onCollisionStay",this._onCollisionEnterCb,this),this._colliderCom.off("onCollisionExit",this._onCollisionEnterCb,this)))},n._setAttachNode=function(){this._attachTransform?this._event.attachNode=this._attachTransform:this._event.attachNode=this.node},n._judgeHit=function(t){var i;if(!this._directHitCollider)return!1;var e=null==(i=this._directHitCollider)?void 0:i.getComponent(_);return!!e&&(t===d.SELECT_ENTERED?this._collider=this._directHitCollider:t===d.ACTIVATED&&(this._activateCollider=this._directHitCollider),this._beTriggerNode=e,!0)},n._onTriggerEnterCb=function(t){var i,e,r;switch(t.type){case"onTriggerEnter":null==(i=this._interactorEvents)||i.hoverEntered(this._event),this._directHitCollider=t.otherCollider;break;case"onTriggerStay":null==(e=this._interactorEvents)||e.hoverStay(this._event);break;case"onTriggerExit":null==(r=this._interactorEvents)||r.hoverExited(this._event),this._directHitCollider=null}},n._onCollisionEnterCb=function(t){var i,e,r;switch(t.type){case"onCollisionEnter":null==(i=this._interactorEvents)||i.hoverEntered(this._event),this._directHitCollider=t.otherCollider;break;case"onCollisionStay":null==(e=this._interactorEvents)||e.hoverStay(this._event);break;case"onCollisionExit":null==(r=this._interactorEvents)||r.hoverExited(this._event),this._directHitCollider=null}},n.uiPressEnter=function(){var t;null==(t=this._directHitCollider)||t.node.emit(d.UIPRESS_ENTERED,this._event)},n.uiPressExit=function(){var t;null==(t=this._directHitCollider)||t.node.emit(d.UIPRESS_EXITED,this._event)},i}(h)).prototype,"_startingSelectedInteractable",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f)||f)||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/display-children.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-interaction-define.ts","./ar-selectable.ts","./ar-trackable.ts","./ar-tracking-base.ts","./ar-enum.ts","./action-base.ts"],(function(e){var t,i,r,n,o,s,a,c,l,p,d,u,h,y,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,c=e.instantiate},function(e){l=e.TransformModeType},function(e){p=e.Selectable},function(e){d=e.ARTrackable},function(e){u=e.ARTrackingBase},function(e){h=e.ActionType,y=e.ARTrackingType},function(e){g=e.ARActionBase}],execute:function(){var k,f,b,v,N,T,_,C,L,A,m,W;s._RF.push({},"b561fH3HlVFG6z2n9W8LbEQ","display-children",void 0);var R=a.ccclass,D=a.property;e("ARDisplayChildren",(k=R("cc.ARDisplayChildren"),f=D({serializable:!0}),b=D({serializable:!0}),v=D({serializable:!0}),N=D({displayOrder:1,tooltip:"i18n:xr-plugin.action.display.displayChildrenNode"}),T=D({displayOrder:2,tooltip:"i18n:xr-plugin.action.display.stopTracking"}),_=D({displayOrder:3,tooltip:"i18n:xr-plugin.action.display.resetWhenLoss"}),k((A=t((L=function(e){function t(){var t;return t=e.call(this)||this,r(t,"_displayChildrenNode",A,n(t)),r(t,"_stopTracking",m,n(t)),r(t,"_resetWhenLoss",W,n(t)),t.type=h.DISPLAY_CHILDREN,t.priority=2,t}i(t,e);var s=t.prototype;return s.runAction=function(e){if(this._displayChildrenNode&&e.trackingNode&&e.trackableRootNode){var t=e.trackingNode.getComponent(u);if(!this.getActivated(null==t?void 0:t.trackingType)){var i=c(e.trackingNode);i.active=!1,e.trackableRootNode.addChild(i);var r=i.getComponent(d);r||(r=i.addComponent(d)),r&&(r.trackingId=e.id);var n=i.getComponent(u);if(n){n.showChildren();var o=n._trackEvent;o&&(null==t||t.addTrackEvent(i.uuid,o)),n.destroy()}var s=i.getComponent(p);s&&(null==t?void 0:t.trackingType)===y.Plane&&(s.transformMode=l.PLANE),i.active=!0,i.setScale(1,1,1),e.trackablePose={position:e.pose.position.clone(),rotation:e.pose.rotation.clone()},e.closeTracking=this._stopTracking,e.resetWhenLoss=this._resetWhenLoss,e.trackableNode=i,this.setActivated(!0)}}},s.resetAction=function(t){if(e.prototype.resetAction.call(this,t),t.trackableNode&&(t.trackableNode.active=!1,t.trackingNode)){var i=t.trackingNode.getComponent(u);null==i||i.removeTrackEvent(t.trackableNode.uuid)}},s.reset=function(){this.displayChildrenNode=!0,this.resetWhenLoss=!0,this.stopTracking=!1,this.setActivated(!1)},o(t,[{key:"displayChildrenNode",get:function(){return this._displayChildrenNode},set:function(e){e!==this._displayChildrenNode&&(this._displayChildrenNode=e)}},{key:"stopTracking",get:function(){return this._stopTracking},set:function(e){e!==this._stopTracking&&(this._stopTracking=e)}},{key:"resetWhenLoss",get:function(){return this._resetWhenLoss},set:function(e){e!==this._resetWhenLoss&&(this._resetWhenLoss=e)}}]),t}(g)).prototype,"_displayChildrenNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=t(L.prototype,"_stopTracking",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),W=t(L.prototype,"_resetWhenLoss",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(L.prototype,"displayChildrenNode",[N],Object.getOwnPropertyDescriptor(L.prototype,"displayChildrenNode"),L.prototype),t(L.prototype,"stopTracking",[T],Object.getOwnPropertyDescriptor(L.prototype,"stopTracking"),L.prototype),t(L.prototype,"resetWhenLoss",[_],Object.getOwnPropertyDescriptor(L.prototype,"resetWhenLoss"),L.prototype),C=L))||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/face-blend-shapes.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-trackable.ts","./ar-tracking-base.ts","./ar-enum.ts","./ar-event.ts","./action-base.ts"],(function(e){var t,n,i,a,r,s,o,l,p,h,c,d,b,u,f,_,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.createClass,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,l=e.instantiate,p=e.MeshRenderer},function(e){h=e.ARTrackable},function(e){c=e.ARTrackingBase},function(e){d=e.BlendShapeAssetName,b=e.ARFaceBlendShapeType,u=e.ActionType},function(e){f=e.arEvent,_=e.ARInternalEventType},function(e){y=e.ARActionBase}],execute:function(){var g,S,m,v,w,N,A,z,B,k,I,O,x,E,R,T,C,D,F,P,j,M,H,L,W,G,K;s._RF.push({},"8994eKeiCVGYbUeDmp+ZHIM","face-blend-shapes",void 0);var U=o.ccclass,V=o.property,Y=e("ARFaceExpressionItem",(g=U("cc.ARFaceExpressionItem"),S=V({serializable:!0}),m=V({serializable:!0}),v=V({serializable:!0}),w=V({serializable:!0,visible:!1}),N=V({serializable:!0,visible:!1}),A=V({serializable:!0,visible:!1}),z=V({type:d,displayOrder:1}),B=V({displayOrder:2,range:[1,2],slide:!0,step:.1}),k=V({displayOrder:3,range:[0,1],slide:!0,step:.1}),g((x=t((O=function(){function e(){a(this,"_assetName",x,this),a(this,"_scale",E,this),a(this,"_weight",R,this),a(this,"enabled",T,this),a(this,"blendShapeType",C,this),a(this,"assetIdx",D,this)}return n(e,[{key:"asset_Blend_Shape",get:function(){return this._assetName},set:function(e){e!==this._assetName&&(this._assetName=e,this.assetIdx=e)}},{key:"scale",get:function(){return this._scale},set:function(e){if(e!==this._scale){this._scale=e;var t={shapeIndex:this.assetIdx,scale:this.scale,weight:this.weight};f.dispatch(_.FACE_BLEND_SHAPE,t)}}},{key:"weight",get:function(){return this._weight},set:function(e){if(e!==this._weight){this._weight=e;var t={shapeIndex:this.assetIdx,scale:this.scale,weight:this.weight};f.dispatch(_.FACE_BLEND_SHAPE,t)}}}]),e}()).prototype,"_assetName",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return d["<None>"]}}),E=t(O.prototype,"_scale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=t(O.prototype,"_weight",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=t(O.prototype,"enabled",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=t(O.prototype,"blendShapeType",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.None}}),D=t(O.prototype,"assetIdx",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(O.prototype,"asset_Blend_Shape",[z],Object.getOwnPropertyDescriptor(O.prototype,"asset_Blend_Shape"),O.prototype),t(O.prototype,"scale",[B],Object.getOwnPropertyDescriptor(O.prototype,"scale"),O.prototype),t(O.prototype,"weight",[k],Object.getOwnPropertyDescriptor(O.prototype,"weight"),O.prototype),I=O))||I));e("ARFaceBlendShapes",(F=U("cc.ARFaceBlendShapes"),P=V({serializable:!0}),j=V({serializable:!0}),M=V({displayOrder:1}),H=V({type:[Y],displayOrder:1,readonly:!0}),F((G=t((W=function(e){function t(){var t;return t=e.call(this)||this,a(t,"_blendNormals",G,r(t)),a(t,"_blendShapes",K,r(t)),t.type=u.FACE_BLEND_SHAPES,t}i(t,e);var s=t.prototype;return s.addBlendShape=function(e){for(var t=!1,n=0;n<this._blendShapes.length;n++){if(this._blendShapes[n].blendShapeType===e){t=!0;break}}if(!t){var i=new Y;i.blendShapeType=e,this._blendShapes.push(i)}},s.removeBlendShape=function(e){for(var t=0;t<this._blendShapes.length;t++){if(this._blendShapes[t].blendShapeType===e){this._blendShapes.splice(t,1);break}}},s.enableBlendShape=function(e,t){for(var n=0;n<this._blendShapes.length;n++){var i=this._blendShapes[n];if(i.blendShapeType===e){i.enabled=t;break}}},s.clear=function(){this._blendShapes.length=0},s.initAssetName=function(){for(var e=0;e<this._blendShapes.length;e++){var t=this._blendShapes[e];t.asset_Blend_Shape=t.assetIdx}},s.doAction=function(e,t){var n=e.parentNode.getChildByName("__face_model_"+e.id);if(!n){if(!e.trackingNode||!e.parentNode)return;var i=(n=l(e.trackingNode)).getComponent(c);i&&i.destroy(),n.name="__face_model_"+e.id,e.parentNode.addChild(n),n.setWorldPosition(e.center.position),n.setWorldRotation(e.center.rotation),n.addComponent(h).trackingId=e.id,n.children.forEach((function(e){e.active=!0}))}var a=n.getComponentInChildren(p);if(a){var r=a.mesh;if(r){var s=r.struct.morph;if(s)if(0!==s.subMeshMorphs.length)for(var o=0;o<this._blendShapes.length;o++){var d=this._blendShapes[o];d.blendShapeType.toFixed()===t.type.toFixed()&&a&&a.setWeight(t.value*d.scale,0,d.assetIdx)}else console.warn("submesh count is 0");else console.warn("this._morph == null")}else console.warn("mesh == null")}else console.warn("not find MeshRenderer Component")},s.runAction=function(e){for(var t=0;t<e.blendShapes.length;t++){var n=e.blendShapes[t];this.doAction(e,n)}this.setActivated(!0)},s.reset=function(){},n(t,[{key:"blendNormals",get:function(){return this._blendNormals},set:function(e){e!==this._blendNormals&&(this._blendNormals=e)}},{key:"blendShapes",get:function(){return this._blendShapes},set:function(e){e!==this._blendShapes&&(this._blendShapes=e)}}]),t}(y)).prototype,"_blendNormals",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=t(W.prototype,"_blendShapes",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(W.prototype,"blendNormals",[M],Object.getOwnPropertyDescriptor(W.prototype,"blendNormals"),W.prototype),t(W.prototype,"blendShapes",[H],Object.getOwnPropertyDescriptor(W.prototype,"blendShapes"),W.prototype),L=W))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/face-expression-events.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./action-base.ts"],(function(e){var t,n,s,c,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,s=e._decorator},function(e){c=e.ActionType},function(e){o=e.ARActionBase}],execute:function(){var r;n._RF.push({},"9b4eb/ODnVFtrdE9Z6jgTBa","face-expression-events",void 0);var i=s.ccclass;e("ARFaceExpressionEvents",i("cc.ARFaceExpressionEvents")(r=function(e){function n(){var t;return(t=e.call(this)||this).type=c.FACE_EXPRESSION_EVENTS,t}t(n,e);var s=n.prototype;return s.runAction=function(e){this.setActivated(!0)},s.reset=function(){},n}(o))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/face-landmark-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts"],(function(e){var t,r,n,a,o,c,i,l,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){c=e.cclegacy,i=e._decorator,l=e.Component},function(e){s=e.FaceLandMarkType}],execute:function(){var p,u,d,g,y,f,h,k;c._RF.push({},"45e960X1xZGY7IBgMoUmG+z","face-landmark-controller",void 0);var _=i.ccclass,m=i.property,F=i.help,L=i.menu;e("FaceLandMarkController",(p=_("cc.FaceLandMarkController"),u=F("i18n:cc.FaceLandMarkController"),d=L("hidden:AR/FaceLandMarkController"),g=m({serializable:!0}),y=m({type:s,displayOrder:1}),p(f=u(f=d((k=t((h=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return t=e.call.apply(e,[this].concat(o))||this,n(t,"_tag",k,a(t)),t}return r(t,e),o(t,[{key:"tag",get:function(){return this._tag},set:function(e){e!==this._tag&&(this._tag=e)}}]),t}(l)).prototype,"_tag",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.None}}),t(h.prototype,"tag",[y],Object.getOwnPropertyDescriptor(h.prototype,"tag"),h.prototype),f=h))||f)||f)||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/face-landmark.ts",["./rollupPluginModLoBabelHelpers.js","cc","./face-landmark-controller.ts","./ar-enum.ts","./action-base.ts"],(function(t){var e,i,n,a,r,o,s,l,u,p,c,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,l=t.Node},function(t){u=t.FaceLandMarkController},function(t){p=t.ActionType,c=t.FaceLandMarkType},function(t){d=t.ARActionBase}],execute:function(){var f,h,_,L,y,k,g,v,b,M;o._RF.push({},"3adf8/6ohZJq5dkyvNkcOYc","face-landmark",void 0);var m=s.ccclass,A=s.property;t("ARFaceLandMark",(f=m("cc.ARFaceLandMark"),h=A({serializable:!0}),_=A({type:[l],displayOrder:1,readonly:!0}),L=A({serializable:!0,visible:!1}),y=A({serializable:!0,visible:!1}),f((v=e((g=function(t){function e(){var e;return e=t.call(this)||this,n(e,"_pointList",v,a(e)),n(e,"landMarks",b,a(e)),n(e,"rootNode",M,a(e)),e._defaults=[],e.type=p.FACE_LANDMARK,e._defaults.push(c.Chin),e._defaults.push(c.ForeHead),e._defaults.push(c.Left_EyeBrow),e._defaults.push(c.Right_EyeBrow),e._defaults.push(c.Left_Pupil),e._defaults.push(c.Right_Pupil),e._defaults.push(c.Nose_Tip),e._defaults.push(c.Mouth),e}i(e,t);var o=e.prototype;return o.initDefaultUI=function(t){var e=this;this.rootNode=t,this.rootNode&&(this.pointList.length=0,this._defaults.forEach((function(i,n){var a=new l(""+c[i]);null==t||t.addChild(a),a.addComponent(u).tag=e._defaults[n],e._pointList.push(a),e.landMarks.push(e._defaults[n])})))},o.destroyDefaultUI=function(){this._pointList.forEach((function(t,e){t&&t.destroy()})),this.pointList.length=0,this.landMarks.length=0},o.getLandMarkType=function(t){var e=t.getComponent(u);return e?e.tag:c.None},o.removeLandMark=function(t){for(var e=0;e<this.pointList.length;e++){var i=this.pointList[e];if(!i){this._pointList.splice(e,1),this.landMarks.splice(e,1);break}var n=i.getComponent(u);if(n&&n.tag===t){i.destroy(),this._pointList.splice(e,1),this.landMarks.splice(e,1);break}}},o.addLandMark=function(t,e){for(var i=!1,n=0;n<this.landMarks.length;n++){if(this.landMarks[n]===e){i=!0;break}}if(!i){var a=new l(""+c[e]);t.addChild(a),a.addComponent(u).tag=e,this._pointList.push(a),this.landMarks.push(e)}},o.runAction=function(t){this.setActivated(!0)},o.reset=function(){var t=this;this.destroyDefaultUI(),setTimeout((function(){t.initDefaultUI(t.rootNode)}),100)},r(e,[{key:"pointList",get:function(){return this._pointList},set:function(t){t!==this._pointList&&(this._pointList=t)}}]),e}(d)).prototype,"_pointList",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),e(g.prototype,"pointList",[_],Object.getOwnPropertyDescriptor(g.prototype,"pointList"),g.prototype),b=e(g.prototype,"landMarks",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=e(g.prototype,"rootNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=g))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/face-tracking-content.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./factor-base.ts"],(function(e){var t,r,i,o,n,s,a,p,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){s=e.cclegacy,a=e._decorator},function(e){p=e.FactorType},function(e){c=e.ARFactorBase}],execute:function(){var u,l,y,h,f,_,b,g,w,d,k,O,m,j,z,P,D,L,v,F,R,T,x,C;s._RF.push({},"b5213+4PRVKWIbnypXZtN2P","face-tracking-content",void 0);var A=a.ccclass,N=a.property;e("ARFaceTrackingContent",(u=A("cc.ARFaceTrackingContent"),l=N({serializable:!0}),y=N({serializable:!0}),h=N({serializable:!0}),f=N({serializable:!0}),_=N({serializable:!0}),b=N({serializable:!0}),g=N({serializable:!0}),w=N({displayOrder:1,tooltip:"i18n:xr-plugin.ar_face_tracking_content.brows"}),d=N({displayOrder:2,tooltip:"i18n:xr-plugin.ar_face_tracking_content.cheeks"}),k=N({displayOrder:3,tooltip:"i18n:xr-plugin.ar_face_tracking_content.eyes"}),O=N({displayOrder:4,tooltip:"i18n:xr-plugin.ar_face_tracking_content.jaw"}),m=N({displayOrder:5}),j=N({displayOrder:6}),z=N({displayOrder:7}),u((L=t((D=function(e){function t(t){var r;return r=e.call(this)||this,i(r,"_brows",L,o(r)),i(r,"_cheeks",v,o(r)),i(r,"_eyes",F,o(r)),i(r,"_jaw",R,o(r)),i(r,"_lips",T,o(r)),i(r,"_mouth",x,o(r)),i(r,"_face",C,o(r)),r.uuid=t,r.type=p.FACE_CONTENT,r}r(t,e);var s=t.prototype;return s.match=function(e){return!0},s.reset=function(){this.brows=!0,this.cheeks=!0,this.eyes=!0,this.jaw=!0,this.lips=!0,this.mouth=!0,this.face=!0},n(t,[{key:"brows",get:function(){return this._brows},set:function(e){e!==this._brows&&(this._brows=e,this.updateListener(e))}},{key:"cheeks",get:function(){return this._cheeks},set:function(e){e!==this._cheeks&&(this._cheeks=e,this.updateListener(e))}},{key:"eyes",get:function(){return this._eyes},set:function(e){e!==this._eyes&&(this._eyes=e,this.updateListener(e))}},{key:"jaw",get:function(){return this._jaw},set:function(e){e!==this._jaw&&(this._jaw=e,this.updateListener(e))}},{key:"lips",get:function(){return this._lips},set:function(e){e!==this._lips&&(this._lips=e,this.updateListener(e))}},{key:"mouth",get:function(){return this._mouth},set:function(e){e!==this._mouth&&(this._mouth=e,this.updateListener(e))}},{key:"face",get:function(){return this._face},set:function(e){e!==this._face&&(this._face=e,this.updateListener(e))}}]),t}(c)).prototype,"_brows",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),v=t(D.prototype,"_cheeks",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=t(D.prototype,"_eyes",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),R=t(D.prototype,"_jaw",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),T=t(D.prototype,"_lips",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),x=t(D.prototype,"_mouth",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),C=t(D.prototype,"_face",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(D.prototype,"brows",[w],Object.getOwnPropertyDescriptor(D.prototype,"brows"),D.prototype),t(D.prototype,"cheeks",[d],Object.getOwnPropertyDescriptor(D.prototype,"cheeks"),D.prototype),t(D.prototype,"eyes",[k],Object.getOwnPropertyDescriptor(D.prototype,"eyes"),D.prototype),t(D.prototype,"jaw",[O],Object.getOwnPropertyDescriptor(D.prototype,"jaw"),D.prototype),t(D.prototype,"lips",[m],Object.getOwnPropertyDescriptor(D.prototype,"lips"),D.prototype),t(D.prototype,"mouth",[j],Object.getOwnPropertyDescriptor(D.prototype,"mouth"),D.prototype),t(D.prototype,"face",[z],Object.getOwnPropertyDescriptor(D.prototype,"face"),D.prototype),P=D))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/factor-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./factor-event.ts"],(function(e){var t,r,i,n,a,c,o,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,o=e._decorator},function(e){u=e.FactorType},function(e){s=e.ARFactorEvent}],execute:function(){var l,f,p,d,y;c._RF.push({},"8df179ePeNLbbLtD9T2fC8P","factor-base",void 0);var b=o.ccclass,h=o.property;e("ARFactorBase",(l=b("cc.ARFactorBase"),f=h({serializable:!0,visible:!1}),l((y=t((d=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(t=e.call.apply(e,[this].concat(a))||this).type=u.NONE,i(t,"_uuid",y,n(t)),t}return r(t,e),a(t,[{key:"uuid",get:function(){return this._uuid},set:function(e){this._uuid=e}}]),t}(s)).prototype,"_uuid",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=d))||p));c._RF.pop()}}}));

System.register("chunks:///_virtual/factor-event.ts",["cc"],(function(t){var e,n;return{setters:[function(t){e=t.cclegacy,n=t._decorator}],execute:function(){var r;e._RF.push({},"b4078x8E1JHKrxdAcv2iUFr","factor-event",void 0);var c=n.ccclass;t("ARFactorEvent",c("cc.ARFactorEvent")(r=function(){function t(){this.listener=null}var e=t.prototype;return e.addListener=function(t){this.listener=t},e.updateListener=function(t){this.listener&&this.listener(t)},e.removeListener=function(){this.listener=null},t}())||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/feature-anchor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./feature-base.ts"],(function(e){var t,n,r,i,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator},function(e){i=e.FeatureType},function(e){o=e.ARFeatureBase}],execute:function(){var c;n._RF.push({},"3db39PXujlGXZtMutyZ0JhL","feature-anchor",void 0);var s=r.ccclass;e("ARFeatureAnchor",s("cc.ARFeatureAnchor")(c=function(e){function n(){var t;return(t=e.call(this)||this)._config=null,t.type=i.PlaneDetection,t.isShowTrackingList=!0,t.resetConfig(),t}t(n,e);var r=n.prototype;return r.resetConfig=function(){e.prototype.resetConfig.call(this),this._config={type:this.type,enable:!1}},r.getConfig=function(){return this._config={type:this.type,enable:this._enable},this._config},n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/feature-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-tracking-base.ts","./ar-defines.ts"],(function(e){var t,i,n,r,s,a,o,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createClass,n=e.initializerDefineProperty},function(e){r=e.cclegacy,s=e._decorator,a=e.EventHandler},function(e){o=e.ARTrackingBase},function(e){u=e.FeatureType}],execute:function(){var p,c,l,f,h,b,y,g,d,_,v,k,E,L;r._RF.push({},"c46aarFJk1B0LxwbfuJRxn4","feature-base",void 0);var w=s.ccclass,O=s.property;e("ARFeatureBase",(p=w("cc.ARFeatureBase"),c=O({serializable:!0}),l=O({serializable:!0}),f=O({serializable:!0}),h=O({displayOrder:1,readonly:!0,tooltip:"i18n:xr-plugin.feature.enable"}),b=O({type:[o],displayOrder:2,readonly:!0,visible:function(){return this.isShowTrackingList},tooltip:"i18n:xr-plugin.feature.tracking_List"}),y=O({type:[a],displayOrder:10,tooltip:"i18n:xr-plugin.feature.unsupportedEvent"}),g=O({serializable:!0,visible:!1}),p((v=t((_=function(){function e(){n(this,"_enable",v,this),n(this,"_trackingList",k,this),n(this,"_unsupportedEvent",E,this),this.isShowTrackingList=!1,this._features=new Map,this.type=u.None,n(this,"canUse",L,this)}var t=e.prototype;return t.resetConfig=function(){this.tracking_List=[],this.unsupportedEvent=[],this._features.clear(),this.canUse=!1,this.enable=!1},t.updateFeature=function(e){e.canUse?this._features[e.uuid]=e:delete this._features[e.uuid],this.canUse=Object.keys(this._features).length>0,this.enable=this.canUse},t.emitUnsupportedEvent=function(){a.emitEvents(this.unsupportedEvent,this)},i(e,[{key:"enable",get:function(){return this._enable},set:function(e){e!==this._enable&&(this._enable=e)}},{key:"tracking_List",get:function(){return this._trackingList},set:function(e){e!==this._trackingList&&(this._trackingList=e)}},{key:"unsupportedEvent",get:function(){return this._unsupportedEvent},set:function(e){e!==this._unsupportedEvent&&(this._unsupportedEvent=e)}}]),e}()).prototype,"_enable",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=t(_.prototype,"_trackingList",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(_.prototype,"_unsupportedEvent",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(_.prototype,"enable",[h],Object.getOwnPropertyDescriptor(_.prototype,"enable"),_.prototype),t(_.prototype,"tracking_List",[b],Object.getOwnPropertyDescriptor(_.prototype,"tracking_List"),_.prototype),t(_.prototype,"unsupportedEvent",[y],Object.getOwnPropertyDescriptor(_.prototype,"unsupportedEvent"),_.prototype),L=t(_.prototype,"canUse",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=_))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/feature-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./feature-base.ts"],(function(e){var t,a,i,r,s;return{setters:[function(e){t=e.inheritsLoose},function(e){a=e.cclegacy,i=e._decorator},function(e){r=e.FeatureType},function(e){s=e.ARFeatureBase}],execute:function(){var n;a._RF.push({},"a304bWwWCBGb6UCSMukYilQ","feature-camera",void 0);var u=i.ccclass;i.property,e("ARFeatureCamera",u("cc.ARFeatureCamera")(n=function(e){function a(){var t;return(t=e.call(this)||this)._config=null,t._visibility=null,t._arCamera=null,t.type=r.CameraDevice,t.isShowTrackingList=!1,t.resetConfig(),t}t(a,e);var i=a.prototype;return i.resetConfig=function(){e.prototype.resetConfig.call(this),this._config={type:this.type,enable:!1,autoFocus:!0,camera:null,visibility:null}},i.getConfig=function(){return this._config={type:this.type,enable:!!this._arCamera&&this._enable,autoFocus:!!this._arCamera&&this._arCamera.autoFocus,camera:this._arCamera?this._arCamera.Camera:null,visibility:this._visibility},this._config},i.updateFeature=function(t){e.prototype.updateFeature.call(this,t),this._visibility=t.visibility,this._arCamera=t.camera},a}(s))||n);a._RF.pop()}}}));

System.register("chunks:///_virtual/feature-face.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./feature-base.ts"],(function(e){var t,i,r,n,a,c,o,g,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){c=e.cclegacy,o=e._decorator,g=e.ccenum,s=e.Node},function(e){p=e.FeatureType},function(e){u=e.ARFeatureBase}],execute:function(){var f,l,k,d,y,T,_,b,h,m,O,N,M,x,L,z,v,F;c._RF.push({},"e4a08w9zGND+IgEQz+oIGHq","feature-face",void 0);var w=o.ccclass,D=o.property,P=e("FaceTrackingMode",function(e){return e[e.Singleton=0]="Singleton",e[e.Duplication=1]="Duplication",e[e.Ordered_Tracking=2]="Ordered_Tracking",e}({}));g(P);var R=e("FaceTrackingType",function(e){return e[e.Position=0]="Position",e[e.Rotation=1]="Rotation",e[e.Position_And_Rotation=2]="Position_And_Rotation",e}({}));g(R);e("ARFeatureFace",(f=w("cc.ARFeatureFace"),l=D({serializable:!0}),k=D({serializable:!0}),d=D({serializable:!0}),y=D({serializable:!0}),T=D({serializable:!0}),_=D({type:P,displayOrder:2,tooltip:"i18n:xr-plugin.feature.face.trackingMode"}),b=D({type:s,displayOrder:3,visible:function(){return this.trackingMode===P.Singleton},tooltip:"i18n:xr-plugin.feature.face.faceTrackingNode"}),h=D({type:R,displayOrder:4,visible:function(){return this.trackingMode===P.Singleton},tooltip:"i18n:xr-plugin.feature.face.faceTrackingType"}),m=D({displayOrder:5,step:1,visible:function(){return this.trackingMode===P.Duplication},tooltip:"i18n:xr-plugin.feature.face.maxTrackingNumber"}),O=D({type:s,displayOrder:6,visible:function(){return this.trackingMode===P.Ordered_Tracking},tooltip:"i18n:xr-plugin.feature.face.faceTrackingOrderList"}),f((x=t((M=function(e){function t(){var t;return t=e.call(this)||this,r(t,"_trackingMode",x,n(t)),r(t,"_faceTrackingType",L,n(t)),r(t,"_faceTrackingNode",z,n(t)),r(t,"_maxTrackingNumber",v,n(t)),r(t,"_faceTrackingOrderList",F,n(t)),t._config=null,t.type=p.FaceTracking,t.isShowTrackingList=!0,t.resetConfig(),t}i(t,e);var c=t.prototype;return c.resetConfig=function(){e.prototype.resetConfig.call(this),this._config={type:this.type,enable:!1,trackingMode:P.Singleton,maxFaceNumber:1,trackingNodeList:[]}},c.getConfig=function(){var e=[];return this.trackingMode===P.Singleton&&this.faceTrackingNode?e.push(this.faceTrackingNode):this.trackingMode===P.Ordered_Tracking&&(e=this.faceTrackingOrderList.slice(0)),this._config={type:this.type,enable:this.enable,trackingMode:this.trackingMode,maxFaceNumber:this.max_Tracking_Number,trackingNodeList:e},this._config},a(t,[{key:"trackingMode",get:function(){return this._trackingMode},set:function(e){e!==this._trackingMode&&(this._trackingMode=e)}},{key:"faceTrackingNode",get:function(){return this._faceTrackingNode},set:function(e){e!==this._faceTrackingNode&&(this._faceTrackingNode=e)}},{key:"faceTrackingType",get:function(){return this._faceTrackingType},set:function(e){e!==this._faceTrackingType&&(this._faceTrackingType=e)}},{key:"max_Tracking_Number",get:function(){return this._maxTrackingNumber},set:function(e){e!==this._maxTrackingNumber&&(this._maxTrackingNumber=e)}},{key:"faceTrackingOrderList",get:function(){return this._faceTrackingOrderList},set:function(e){e!==this._faceTrackingOrderList&&(this._faceTrackingOrderList=e)}}]),t}(u)).prototype,"_trackingMode",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.Singleton}}),L=t(M.prototype,"_faceTrackingType",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return R.Position_And_Rotation}}),z=t(M.prototype,"_faceTrackingNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(M.prototype,"_maxTrackingNumber",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=t(M.prototype,"_faceTrackingOrderList",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(M.prototype,"trackingMode",[_],Object.getOwnPropertyDescriptor(M.prototype,"trackingMode"),M.prototype),t(M.prototype,"faceTrackingNode",[b],Object.getOwnPropertyDescriptor(M.prototype,"faceTrackingNode"),M.prototype),t(M.prototype,"faceTrackingType",[h],Object.getOwnPropertyDescriptor(M.prototype,"faceTrackingType"),M.prototype),t(M.prototype,"max_Tracking_Number",[m],Object.getOwnPropertyDescriptor(M.prototype,"max_Tracking_Number"),M.prototype),t(M.prototype,"faceTrackingOrderList",[O],Object.getOwnPropertyDescriptor(M.prototype,"faceTrackingOrderList"),M.prototype),N=M))||N));c._RF.pop()}}}));

System.register("chunks:///_virtual/feature-image.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./feature-base.ts"],(function(e){var t,i,a,r,s,n,u,c,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,u=e._decorator},function(e){c=e.FeatureType},function(e){o=e.ARFeatureBase}],execute:function(){var g,m,p,l,f,h,_,b;n._RF.push({},"d6ea2ntUzRLwYwpNdSifFoD","feature-image",void 0);var y=u.ccclass,d=u.property;e("ARFeatureImage",(g=y("cc.ARFeatureImage"),m=d({serializable:!0}),p=d({serializable:!0,visible:!1}),l=d({displayOrder:4,step:1,tooltip:"i18n:xr-plugin.feature.image.maxTrackingNumber"}),g((_=t((h=function(e){function t(){var t;return t=e.call(this)||this,a(t,"_maxTrackingNumber",_,r(t)),a(t,"_imageAssets",b,r(t)),t._imageTrackingSet=new Map,t._config=null,t.type=c.ImageTracking,t.isShowTrackingList=!0,t.resetConfig(),t}i(t,e);var n=t.prototype;return n.resetConfig=function(){e.prototype.resetConfig.call(this),this._config={type:this.type,enable:!1,arLibImages:[],maxTrackingNumber:1}},n.getConfig=function(){return this._config={type:this.type,enable:this.enable,arLibImages:this.getImageAssets(),maxTrackingNumber:this._maxTrackingNumber},this._config},n.getImageAssets=function(){var e=[];return this._imageAssets.forEach((function(t){e.push({assetPath:t.asset.imageAsset.nativeUrl,widthInMeters:t.asset.widthInMeters,heightInMeters:t.asset.heightInMeters,name:t.asset.imageAsset._uuid})})),e},n.getImageAssetsIndex=function(e,t){for(var i=0;i<this._imageAssets.length;i++){var a=this._imageAssets[i];if(a.uuid===e&&a.asset.imageAsset.nativeUrl===t)return i}return-1},n.updateFeature=function(t){var i=this;e.prototype.updateFeature.call(this,t),t.canUse?this._imageTrackingSet.set(t.uuid,t.images):this._imageTrackingSet.delete(t.uuid),this._imageAssets=[],this._imageTrackingSet.forEach((function(e,t,a){e.forEach((function(e){i._imageAssets.push({uuid:t,asset:e})}))}))},s(t,[{key:"max_Tracking_Number",get:function(){return this._maxTrackingNumber},set:function(e){e!==this._maxTrackingNumber&&(this._maxTrackingNumber=e)}}]),t}(o)).prototype,"_maxTrackingNumber",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=t(h.prototype,"_imageAssets",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(h.prototype,"max_Tracking_Number",[l],Object.getOwnPropertyDescriptor(h.prototype,"max_Tracking_Number"),h.prototype),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/feature-lighting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./feature-base.ts"],(function(t){var i,e,n,o,g,a;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){o=t.ARLightingMode,g=t.FeatureType},function(t){a=t.ARFeatureBase}],execute:function(){var r;e._RF.push({},"056dasxRuBPo7OzWtLarlkh","feature-lighting",void 0);var s=n.ccclass;t("ARFeatureLighting",s("cc.ARFeatureLighting")(r=function(t){function e(){var i;return(i=t.call(this)||this)._config=null,i._mainLight=null,i._lightingMode=o.NO_HDR,i.type=g.LightingEstimation,i.isShowTrackingList=!1,i.resetConfig(),i}i(e,t);var n=e.prototype;return n.resetConfig=function(){t.prototype.resetConfig.call(this),this._config={type:this.type,enable:!1,mainLight:null,lightingMode:o.NO_HDR}},n.getConfig=function(){return this._config={type:this.type,enable:this._enable,mainLight:this._mainLight,lightingMode:this._lightingMode},this._config},n.updateFeature=function(i){t.prototype.updateFeature.call(this,i),this._mainLight=i.mainLight,this._lightingMode=i.lightingMode},e}(a))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/feature-plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./feature-base.ts"],(function(e){var t,i,r,n,a,o,l,u,c,p,s,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,u=e.Prefab},function(e){c=e.TrackingQuality,p=e.FeatureType,s=e.ARPlaneDetectionMode},function(e){y=e.ARFeatureBase}],execute:function(){var g,f,h,_,d,b,k,z,P,w,V,C,S,O,Q,T,v;o._RF.push({},"34e9eNR1mlDm4XTUUfgnfO2","feature-plane",void 0);var D=l.ccclass,A=l.property;e("ARFeaturePlane",(g=D("cc.ARFeaturePlane"),f=A({serializable:!0}),h=A({serializable:!0}),_=A({serializable:!0,visible:!1}),d=A({serializable:!0}),b=A({serializable:!0}),k=A({displayOrder:3,readonly:!0,tooltip:"i18n:xr-plugin.feature.plane.direction_Type"}),z=A({type:u,displayOrder:4,tooltip:"i18n:xr-plugin.feature.plane.trackingVisualizer"}),P=A({type:c,displayOrder:5,tooltip:"i18n:xr-plugin.feature.plane.trackingQualityCondition"}),w=A({displayOrder:6,tooltip:"i18n:xr-plugin.feature.plane.usePlaneShape"}),g((S=t((C=function(e){function t(){var t;return t=e.call(this)||this,r(t,"_directionType",S,n(t)),r(t,"_trackingVisualizer",O,n(t)),r(t,"_directionValue",Q,n(t)),r(t,"_trackingQualityCondition",T,n(t)),r(t,"_usePlaneShape",v,n(t)),t._config=null,t.type=p.PlaneDetection,t.isShowTrackingList=!0,t.resetConfig(),t}i(t,e);var o=t.prototype;return o.resetConfig=function(){e.prototype.resetConfig.call(this),this._config={type:this.type,enable:!1,direction:s.All,planePrefab:null,trackingQualityCondition:c.Poor_Quality,usePlaneShape:!0}},o.getConfig=function(){return this._config={type:this.type,enable:this._enable,direction:this._directionValue,planePrefab:this._trackingVisualizer,trackingQualityCondition:this._trackingQualityCondition,usePlaneShape:this._usePlaneShape},this._config},o.updateFeature=function(t){e.prototype.updateFeature.call(this,t);var i=0;for(var r in this._features){if(Object.prototype.hasOwnProperty.call(this._features,r))i|=this._features[r].direction}var n="";(i&s.Horizontal_Upward)===s.Horizontal_Upward&&(n+=s[s.Horizontal_Upward]),(i&s.Horizontal_Downward)===s.Horizontal_Downward&&(n.length>0&&(n+="|"),n+=s[s.Horizontal_Downward]),(i&s.Vertical)===s.Vertical&&(n.length>0&&(n+="|"),n+=s[s.Vertical]),(i&s.All)===s.All&&(n=s[s.All]),this._directionValue=i,this.direction_Type=n,this.canUse||(this._trackingVisualizer=null)},a(t,[{key:"direction_Type",get:function(){return this._directionType},set:function(e){e!==this._directionType&&(this._directionType=e)}},{key:"trackingVisualizer",get:function(){return this._trackingVisualizer},set:function(e){var t=this;e!==this._trackingVisualizer&&(this._trackingVisualizer=e,this._trackingList.forEach((function(e){t._trackingVisualizer?e.createScenePlane(t._trackingVisualizer):e.removeScenePlane()})))}},{key:"trackingQualityCondition",get:function(){return this._trackingQualityCondition},set:function(e){e!==this._trackingQualityCondition&&(this._trackingQualityCondition=e)}},{key:"usePlaneShape",get:function(){return this._usePlaneShape},set:function(e){e!==this._usePlaneShape&&(this._usePlaneShape=e)}}]),t}(y)).prototype,"_directionType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"All"}}),O=t(C.prototype,"_trackingVisualizer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(C.prototype,"_directionValue",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.All}}),T=t(C.prototype,"_trackingQualityCondition",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Poor_Quality}}),v=t(C.prototype,"_usePlaneShape",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(C.prototype,"direction_Type",[k],Object.getOwnPropertyDescriptor(C.prototype,"direction_Type"),C.prototype),t(C.prototype,"trackingVisualizer",[z],Object.getOwnPropertyDescriptor(C.prototype,"trackingVisualizer"),C.prototype),t(C.prototype,"trackingQualityCondition",[P],Object.getOwnPropertyDescriptor(C.prototype,"trackingQualityCondition"),C.prototype),t(C.prototype,"usePlaneShape",[w],Object.getOwnPropertyDescriptor(C.prototype,"usePlaneShape"),C.prototype),V=C))||V));o._RF.pop()}}}));

System.register("chunks:///_virtual/feature-world-mesh.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./feature-base.ts"],(function(e){var t,r,i,n,o,s,a,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator},function(e){l=e.FeatureType},function(e){u=e.ARFeatureBase}],execute:function(){var c,p,f,h,y,g,_,m;s._RF.push({},"57490pOOAZGp7gaN+HXAFzs","feature-world-mesh",void 0);var d=a.ccclass,b=a.property;e("ARFeatureWorldMesh",(c=d("cc.ARFeatureWorldMesh"),p=b({serializable:!0}),f=b({serializable:!0,visible:!1}),h=b({displayOrder:2,readonly:!0,tooltip:"i18n:xr-plugin.feature.world_mesh.normals"}),c((_=t((g=function(e){function t(){var t;return t=e.call(this)||this,i(t,"_normals",_,n(t)),i(t,"_visualizer",m,n(t)),t._config=null,t.type=l.SceneMesh,t.isShowTrackingList=!1,t.resetConfig(),t}r(t,e);var s=t.prototype;return s.resetConfig=function(){e.prototype.resetConfig.call(this),this._config={type:this.type,enable:!1,normals:!0,visualizer:null}},s.getConfig=function(){return this._config={type:this.type,enable:this.enable,normals:this._normals,visualizer:this._visualizer},this._config},s.updateFeature=function(t){e.prototype.updateFeature.call(this,t),this._visualizer=t.visualizer},o(t,[{key:"normals",get:function(){return this._normals},set:function(e){e!==this._normals&&(this._normals=e)}}]),t}(u)).prototype,"_normals",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),m=t(g.prototype,"_visualizer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(g.prototype,"normals",[h],Object.getOwnPropertyDescriptor(g.prototype,"normals"),g.prototype),y=g))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/grab-interactable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactable.ts"],(function(t){var e,i,o,r,n,a,l,s,h,c,u,_,d,g,p,y,m,w,b,f,S,v,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.createClass},function(t){a=t.cclegacy,l=t._decorator,s=t.ccenum,h=t.Node,c=t.CCBoolean,u=t.CurveRange,_=t.Vec3,d=t.Quat,g=t.ERigidBodyType,p=t.Mat4,y=t.sys,m=t.toRadian,w=t.RigidBody,b=t.clamp},function(t){f=t.InteractorTriggerState,S=t.StateType,v=t.InteractorState,C=t.XrInteractable}],execute:function(){var T,O,R,P,V,E,A,D,G,F,N,I,z,W,M,x,k,B,j,L,U,Z,X,q,H,J,K,Q,Y,$,tt,et,it,ot,rt,nt,at,lt,st,ht,ct;a._RF.push({},"6240bEd8vRPJZo0UNedTuIv","grab-interactable",void 0);var ut=l.ccclass,_t=l.help,dt=l.menu,gt=l.property,pt=function(t){return t[t.OnSelectEntered=0]="OnSelectEntered",t[t.OnActivited=1]="OnActivited",t}(pt||{}),yt=function(t){return t[t.Single=0]="Single",t[t.Multiple=1]="Multiple",t}(yt||{}),mt=function(t){return t[t.InheritRigidbody=0]="InheritRigidbody",t[t.CurveComputation=1]="CurveComputation",t}(mt||{});s(pt),s(yt),s(mt);t("GrabInteractable",(T=ut("cc.GrabInteractable"),O=_t("i18n:cc.GrabInteractable"),R=dt("XR/Interaction/GrabInteractable"),P=gt({serializable:!0}),V=gt({serializable:!0}),E=gt({serializable:!0}),A=gt({serializable:!0}),D=gt({serializable:!0}),G=gt({serializable:!0}),F=gt({serializable:!0}),N=gt({serializable:!0}),I=gt({serializable:!0}),z=gt({serializable:!0}),W=gt({serializable:!0}),M=gt({serializable:!0}),x=gt({type:h,displayOrder:1,tooltip:"i18n:xr-plugin.grab_interactable.attachTransform"}),k=gt({displayOrder:2,tooltip:"i18n:xr-plugin.grab_interactable.attachEaseInTime"}),B=gt({type:pt,displayOrder:4,tooltip:"i18n:xr-plugin.grab_interactable.grabTrigger"}),j=gt({type:c,displayOrder:7,tooltip:"i18n:xr-plugin.grab_interactable.hideController"}),L=gt({type:c,displayOrder:10,tooltip:"i18n:xr-plugin.grab_interactable.throwOnDetach"}),U=gt({type:mt,displayOrder:11,visible:function(){return this._throwOnDetach},tooltip:"i18n:xr-plugin.grab_interactable.throwSimulationMode"}),Z=gt({displayOrder:12,visible:function(){return this._throwSimulationMode===mt.CurveComputation},tooltip:"i18n:xr-plugin.grab_interactable.throwSmoothingDuration"}),X=gt({type:u,range:[0,1],displayOrder:13,visible:function(){return this._throwSimulationMode===mt.CurveComputation},tooltip:"i18n:xr-plugin.grab_interactable.throwSmoothingCurve"}),q=gt({displayOrder:14,visible:function(){return this._throwOnDetach},tooltip:"i18n:xr-plugin.grab_interactable.throwVelocityScale"}),H=gt({displayOrder:15,visible:function(){return this._throwOnDetach},tooltip:"i18n:xr-plugin.grab_interactable.throwAngularVelocityScale"}),J=gt({displayOrder:16,tooltip:"i18n:xr-plugin.grab_interactable.noPosition"}),K=gt({displayOrder:17,tooltip:"i18n:xr-plugin.grab_interactable.noRotation"}),T(Q=O(Q=R(($=e((Y=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,o(e,"_attachTransform",$,r(e)),o(e,"_attachEaseInTime",tt,r(e)),o(e,"_grabTrigger",et,r(e)),o(e,"_hideController",it,r(e)),o(e,"_throwOnDetach",ot,r(e)),o(e,"_throwSimulationMode",rt,r(e)),o(e,"_throwSmoothingDuration",nt,r(e)),o(e,"_throwSmoothingCurve",at,r(e)),o(e,"_throwVelocityScale",lt,r(e)),o(e,"_throwAngularVelocityScale",st,r(e)),o(e,"_noPosition",ht,r(e)),o(e,"_noRotation",ct,r(e)),e._model=null,e._forceGrab=!1,e._isGrab=!1,e._hasGrabbed=!1,e._attachNode=null,e._curGrabTime=0,e._curWorldPosition=new _,e._curWorldRotation=new d,e._throwFrameCount=20,e._throwCurrentFrame=0,e._throwFrameTimes=new Array(e._throwFrameCount).fill(0),e._throwVelocityFrames=new Array(e._throwFrameCount).fill(new _),e._throwAngularVelocityFrames=new Array(e._throwFrameCount).fill(new _),e._lastPosition=new _,e._lastRotation=new d,e._rigidBodyType=g.STATIC,e._rigidBodyUseGravity=!1,e}i(e,t);var a=e.prototype;return a.onEnable=function(){this._colliderCom&&(this._grabTrigger===pt.OnSelectEntered?(this._colliderCom.node.on(f.Select_Start,this._selectStart,this),this._colliderCom.node.on(f.Select_End,this._selectEnd,this)):this._grabTrigger===pt.OnActivited&&(this._colliderCom.node.on(f.Activite_Start,this._activiteStart,this),this._colliderCom.node.on(f.Activite_End,this._activiteEnd,this)))},a.onDisable=function(){this._colliderCom&&(this._grabTrigger===pt.OnSelectEntered?(this._colliderCom.node.off(f.Select_Start,this._selectStart,this),this._colliderCom.node.off(f.Select_End,this._selectEnd,this)):this._grabTrigger===pt.OnActivited&&(this._colliderCom.node.off(f.Activite_Start,this._activiteStart,this),this._colliderCom.node.off(f.Activite_End,this._activiteEnd,this)))},a._selectStart=function(t){this._grabEntered(t,S.Select)},a._selectEnd=function(t){this._grabEnd(t,S.Select)},a._activiteStart=function(t){this._grabEntered(t,S.Activite)},a._activiteEnd=function(t){this._grabEnd(t,S.Activite)},a._setRayReticle=function(t){this._rayReticle&&t.hitPoint&&(this._rayReticle.setWorldPosition(t.hitPoint),this._rayReticle.active=!0)},a.convertToNodeSpace=function(t,e){var i=new p;return this.node.getWorldMatrix(i),p.invert(i,i),e||(e=new _),_.transformMat4(e,t,i)},a._getAttachWorldPosition=function(){if(!this._attachNode)return null;var t=new _;if(this._attachTransform){this.convertToNodeSpace(this._attachTransform.worldPosition,t);var e=new _;_.divide(e,this._attachTransform.worldScale,this._attachTransform.scale),_.transformRTS(t,t.negative(),this._attachNode.worldRotation,this._attachNode.worldPosition,e)}else t=this._attachNode.getWorldPosition();return t},a._getAttachWorldRotation=function(){if(!this._attachNode)return null;var t=new d;return this._attachTransform?(d.invert(t,this.node.getWorldRotation()),d.multiply(t,t,this._attachTransform.getWorldRotation()),d.invert(t,t),d.multiply(t,this._attachNode.getWorldRotation(),t)):t=this._attachNode.getWorldRotation(),t},a.update=function(t){if(this._isGrab){if(this._forceGrab){var e=this._getAttachWorldPosition(),i=this._getAttachWorldRotation();if(!e||!i)return;if(this._attachEaseInTime>0&&this._curGrabTime<=this._attachEaseInTime){var o=this._curGrabTime/this._attachEaseInTime;_.lerp(this._curWorldPosition,this.node.worldPosition,e,o),d.slerp(this._curWorldRotation,this.node.worldRotation,i,o),this._noPosition||this.node.setWorldPosition(this._curWorldPosition),this._noRotation||this.node.setWorldRotation(this._curWorldRotation),this._curGrabTime+=t}else this._noPosition||this.node.setWorldPosition(e),this._noRotation||this.node.setWorldRotation(i)}else this._attachNode&&(this._noPosition||this.node.setWorldPosition(this._attachNode.worldPosition),this._noRotation||this.node.setWorldRotation(this._attachNode.worldRotation));if(this._throwOnDetach&&this._throwSimulationMode){var r=this.node.getWorldPosition(),n=this.node.getWorldRotation();this._throwFrameTimes[this._throwCurrentFrame]=y.now()/1e3;var a=new _;this._throwVelocityFrames[this._throwCurrentFrame]=_.subtract(a,r,this._lastPosition).divide3f(t,t,t);var l=new d;d.invert(l,this._lastRotation),d.multiply(l,n,l),d.toEuler(this._throwAngularVelocityFrames[this._throwCurrentFrame],l);var s=this._throwAngularVelocityFrames[this._throwCurrentFrame];s.divide3f(t,t,t),this._throwAngularVelocityFrames[this._throwCurrentFrame].set(m(s.x),m(s.y),m(s.z)),this._throwCurrentFrame=(this._throwCurrentFrame+1)%this._throwFrameCount,this._lastPosition.set(r),this._lastRotation.set(n)}var h=this._getAttachWorldPosition();h&&this.node.worldPosition.equals(h,.01)&&(this._hasGrabbed=!0)}else this._hasGrabbed&&(this._hasGrabbed=!1)},a._grabEntered=function(t,e){var i;if(t&&this._colliderCom){this._unsetRayReticle(),this._isGrab=!0;var o,r=this.node.getComponent(w);if(this._triggerNode&&(r&&(r.type=this._rigidBodyType,r.useGravity=this._rigidBodyUseGravity),this._triggerNode.emit(v.End,e)),this._triggerNode=t.triggerNode,null==(i=this._triggerNode)||i.emit(v.Start,e),this._attachNode=t.attachNode,this._curGrabTime=0,this._forceGrab=t.forceGrab,!this._forceGrab)null==(o=this._attachNode)||o.setWorldPosition(this.node.worldPosition);this._lastPosition.set(this.node.worldPosition),this._lastRotation.set(this.node.worldRotation),this._hideController&&this._model&&(this._model.active=!0),this._hideController&&t.model&&(this._model=t.model,this._model.active=!1),r&&(this._rigidBodyType=r.type,this._rigidBodyUseGravity=r.useGravity,r.type=g.KINEMATIC,r.useGravity=!1)}},a._grabEnd=function(t,e){var i=this.node.getComponent(w);if(this._triggerNode===(null==t?void 0:t.triggerNode)){if(this._isGrab=!1,this._hideController&&this._model&&(this._model.active=!0),i){if(this._curGrabTime<this._attachEaseInTime&&!this._hasGrabbed)return i.setLinearVelocity(_.ZERO),i.setAngularVelocity(_.ZERO),i.type=this._rigidBodyType,i.useGravity=this._rigidBodyUseGravity,this._triggerNode&&this._triggerNode.emit(v.End,e),void(this._triggerNode=null);if(this._throwOnDetach)if(this._throwSimulationMode===mt.CurveComputation)i.setLinearVelocity(this.GetSmoothedVelocityValue(this._throwVelocityFrames).multiplyScalar(this._throwVelocityScale)),i.setAngularVelocity(this.GetSmoothedVelocityValue(this._throwAngularVelocityFrames).multiplyScalar(this._throwAngularVelocityScale));else{var o=new _;i.getLinearVelocity(o),i.setLinearVelocity(o.multiplyScalar(this._throwVelocityScale)),i.getAngularVelocity(o),i.setAngularVelocity(o.multiplyScalar(this._throwAngularVelocityScale))}else i.setLinearVelocity(_.ZERO),i.setAngularVelocity(_.ZERO);i.type=this._rigidBodyType,i.useGravity=this._rigidBodyUseGravity}this._triggerNode&&this._triggerNode.emit(v.End,e),this._triggerNode=null}},a.GetSmoothedVelocityValue=function(t){for(var e=new _,i=0,o=0;o<this._throwFrameCount;++o){var r=((this._throwCurrentFrame-o-1)%this._throwFrameCount+this._throwFrameCount)%this._throwFrameCount;if(0===this._throwFrameTimes[r])break;var n=(y.now()/1e3-this._throwFrameTimes[r])/this._throwSmoothingDuration,a=this._throwSmoothingCurve.evaluate(b(1-n,0,1),0);if(e.add(t[r].multiplyScalar(a)),i+=a,y.now()/1e3-this._throwFrameTimes[r]>this._throwSmoothingDuration)break}return i>0?e.divide3f(i,i,i):(e.set(0,0,0),e)},n(e,[{key:"attachTransform",get:function(){return this._attachTransform},set:function(t){t!==this._attachTransform&&(this._attachTransform=t)}},{key:"attachEaseInTime",get:function(){return this._attachEaseInTime},set:function(t){t!==this._attachEaseInTime&&(this._attachEaseInTime=t)}},{key:"grabTrigger",get:function(){return this._grabTrigger},set:function(t){t!==this._grabTrigger&&(this._grabTrigger=t)}},{key:"hideController",get:function(){return this._hideController},set:function(t){t!==this._hideController&&(this._hideController=t)}},{key:"throwOnDetach",get:function(){return this._throwOnDetach},set:function(t){t!==this._throwOnDetach&&(this._throwOnDetach=t)}},{key:"throwSimulationMode",get:function(){return this._throwSimulationMode},set:function(t){t!==this._throwSimulationMode&&(this._throwSimulationMode=t)}},{key:"throwSmoothingDuration",get:function(){return this._throwSmoothingDuration},set:function(t){t!==this._throwSmoothingDuration&&(this._throwSmoothingDuration=t)}},{key:"throwSmoothingCurve",get:function(){return this._throwSmoothingCurve.mode=u.Mode.Curve,this._throwSmoothingCurve},set:function(t){t!==this._throwSmoothingCurve&&(this._throwSmoothingCurve=t)}},{key:"throwVelocityScale",get:function(){return this._throwVelocityScale},set:function(t){t!==this._throwVelocityScale&&(this._throwVelocityScale=t)}},{key:"throwAngularVelocityScale",get:function(){return this._throwAngularVelocityScale},set:function(t){t!==this._throwAngularVelocityScale&&(this._throwAngularVelocityScale=t)}},{key:"noPosition",get:function(){return this._noPosition},set:function(t){t!==this._noPosition&&(this._noPosition=t)}},{key:"noRotation",get:function(){return this._noRotation},set:function(t){t!==this._noRotation&&(this._noRotation=t)}}]),e}(C)).prototype,"_attachTransform",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Y.prototype,"_attachEaseInTime",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.15}}),et=e(Y.prototype,"_grabTrigger",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pt.OnSelectEntered}}),it=e(Y.prototype,"_hideController",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ot=e(Y.prototype,"_throwOnDetach",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),rt=e(Y.prototype,"_throwSimulationMode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return mt.InheritRigidbody}}),nt=e(Y.prototype,"_throwSmoothingDuration",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.25}}),at=e(Y.prototype,"_throwSmoothingCurve",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),lt=e(Y.prototype,"_throwVelocityScale",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),st=e(Y.prototype,"_throwAngularVelocityScale",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ht=e(Y.prototype,"_noPosition",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ct=e(Y.prototype,"_noRotation",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(Y.prototype,"attachTransform",[x],Object.getOwnPropertyDescriptor(Y.prototype,"attachTransform"),Y.prototype),e(Y.prototype,"attachEaseInTime",[k],Object.getOwnPropertyDescriptor(Y.prototype,"attachEaseInTime"),Y.prototype),e(Y.prototype,"grabTrigger",[B],Object.getOwnPropertyDescriptor(Y.prototype,"grabTrigger"),Y.prototype),e(Y.prototype,"hideController",[j],Object.getOwnPropertyDescriptor(Y.prototype,"hideController"),Y.prototype),e(Y.prototype,"throwOnDetach",[L],Object.getOwnPropertyDescriptor(Y.prototype,"throwOnDetach"),Y.prototype),e(Y.prototype,"throwSimulationMode",[U],Object.getOwnPropertyDescriptor(Y.prototype,"throwSimulationMode"),Y.prototype),e(Y.prototype,"throwSmoothingDuration",[Z],Object.getOwnPropertyDescriptor(Y.prototype,"throwSmoothingDuration"),Y.prototype),e(Y.prototype,"throwSmoothingCurve",[X],Object.getOwnPropertyDescriptor(Y.prototype,"throwSmoothingCurve"),Y.prototype),e(Y.prototype,"throwVelocityScale",[q],Object.getOwnPropertyDescriptor(Y.prototype,"throwVelocityScale"),Y.prototype),e(Y.prototype,"throwAngularVelocityScale",[H],Object.getOwnPropertyDescriptor(Y.prototype,"throwAngularVelocityScale"),Y.prototype),e(Y.prototype,"noPosition",[J],Object.getOwnPropertyDescriptor(Y.prototype,"noPosition"),Y.prototype),e(Y.prototype,"noRotation",[K],Object.getOwnPropertyDescriptor(Y.prototype,"noRotation"),Y.prototype),Q=Y))||Q)||Q)||Q));a._RF.pop()}}}));

System.register("chunks:///_virtual/HitTest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-camera.ts"],(function(e){var t,i,r,n,o,a,s,l,c,u,h,d,f,p,y,g,b,_,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.Prefab,l=e.screen,c=e.Node,u=e.instantiate,h=e.director,d=e.input,f=e.Input,p=e.geometry,y=e.PhysicsSystem,g=e.Vec3,b=e.Quat,_=e.Component},function(e){m=e.ARCameraMgr}],execute:function(){var v,P,w,z,T,R,N,S,W;o._RF.push({},"53cc0WxdANBy6X0L8Rshfo6","HitTest",void 0);var C=a.ccclass,A=a.property;e("HitTest",(v=C("HitTest"),P=A({serializable:!0,type:s}),w=A({serializable:!0,type:s}),z=A({serializable:!0,type:s}),v((N=t((R=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"hitTransform",N,n(t)),r(t,"horiPrefab",S,n(t)),r(t,"vertiPrefab",W,n(t)),t._winSize=l.windowSize,t._hitNode=new c,t}i(t,e);var o=t.prototype;return o.start=function(){this.hitTransform&&(this._hitNode=u(this.hitTransform),this._hitNode.setParent(h.getScene())),d.on(f.EventType.TOUCH_START,this.placeModel,this)},o.update=function(e){var t=h.getScene().getComponentInChildren(m);if(t){var i=new p.Ray;if(t.Camera.screenPointToRay(this._winSize.width/2,this._winSize.height/2,i),y.instance.raycastClosest(i,4294967295,1e7,!1)){var r=y.instance.raycastClosestResult,n=r.collider.node.getWorldRotation(),o=r.hitPoint;this._hitNode&&(this._hitNode.setWorldPosition(o),this._hitNode.setWorldRotation(n))}}},o.equalZero=function(e){return e<1e-6&&e>-1e-6},o.placeModel=function(){var e=this._hitNode.getWorldPosition(),t=this._hitNode.getWorldRotation(),i=null,r=new g;b.toEuler(r,t),(i=this.equalZero(r.x)&&this.equalZero(r.z)?u(this.horiPrefab):u(this.vertiPrefab)).parent=h.getScene(),i.setWorldPosition(e);var n=new g;i.getWorldRotation().getEulerAngles(n),i.setWorldRotationFromEuler(n.x,this._hitNode.eulerAngles.y,n.z)},t}(_)).prototype,"hitTransform",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(R.prototype,"horiPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(R.prototype,"vertiPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=R))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/hmd-ctrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interface.ts","./target-eye.ts"],(function(e){var t,r,a,i,s,n,o,f,l,h,c,_,p,u,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,o=e._decorator,f=e.ccenum,l=e.CCBoolean,h=e.sys,c=e.CameraComponent,_=e.Component},function(e){p=e.xrInterface},function(e){u=e.TargetEye,m=e.TargetEye_Type}],execute:function(){var C,y,g,O,b,d,D,P,I,v,E,M,T,H,w,z,x,S,V;n._RF.push({},"4b5ca+hvnRKvqbmOcVO9MjU","hmd-ctrl",void 0);var A=o.ccclass,F=o.help,L=o.menu,k=o.property,R=function(e){return e[e.SINGLE_PASS=0]="SINGLE_PASS",e[e.MUTLI_PASS=1]="MUTLI_PASS",e[e.OFF=2]="OFF",e}(R||{}),j=function(e){return e[e.None=0]="None",e[e.Low=1]="Low",e[e.Med=2]="Med",e[e.High=3]="High",e[e.Ext=4]="Ext",e}(j||{}),B=function(e){return e[e.Auto=0]="Auto",e[e.Device=1]="Device",e[e.Manual=2]="Manual",e}(B||{}),G=function(e){return e[e.Auto=0]="Auto",e[e.Manual=1]="Manual",e}(G||{}),N=function(e){return e[e.BOTH=0]="BOTH",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e}(N||{});f(R),f(j),f(B),f(G);e("HMDCtrl",(C=A("cc.HMDCtrl"),y=F("i18n:cc.HMDCtrl"),g=L("XR/Device/HMDCtrl"),O=k({serializable:!0}),b=k({serializable:!0}),d=k({serializable:!0}),D=k({serializable:!0}),P=k({serializable:!0}),I=k({type:l,displayOrder:2,tooltip:"i18n:xr-plugin.hmd_ctrl.perEyeCamera"}),v=k({type:l,displayOrder:3,visible:function(){return this._perEyeCamera},tooltip:"i18n:xr-plugin.hmd_ctrl.syncWithMainCamera"}),E=k({type:B,displayOrder:5,tooltip:"i18n:xr-plugin.hmd_ctrl.IPDOffset"}),M=k({displayOrder:6,visible:function(){return this._IPDOffset===B.Manual},tooltip:"i18n:xr-plugin.hmd_ctrl.offsetValue"}),C(T=y(T=g((w=t((H=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,a(t,"_perEyeCamera",w,i(t)),a(t,"_sync",z,i(t)),a(t,"_IPDOffset",x,i(t)),a(t,"_offsetValue",S,i(t)),t._mainCamera=null,t._leftCamera=null,t._rightCamera=null,a(t,"_realIPDOffset",V,i(t)),t}r(t,e);var n=t.prototype;return n._copyCameras=function(e){if(this.perEyeCamera&&(this._getCameras(),this._mainCamera&&this._sync))switch(e){case N.BOTH:this._leftCamera&&this._setCamera(this._leftCamera,this._mainCamera),this._rightCamera&&this._setCamera(this._rightCamera,this._mainCamera);break;case N.LEFT:this._leftCamera&&this._setCamera(this._leftCamera,this._mainCamera);break;case N.RIGHT:this._rightCamera&&this._setCamera(this._rightCamera,this._mainCamera)}},n._setCamera=function(e,t){e&&t&&(e.priority=t.priority,e.visibility=t.visibility,e.clearFlags=t.clearFlags,e.clearColor=t.clearColor,e.clearDepth=t.clearDepth,e.clearStencil=t.clearStencil,e.projection=t.projection,e.fovAxis=t.fovAxis,e.fov=t.fov,e.orthoHeight=t.orthoHeight,e.near=t.near,e.far=t.far,e.aperture=t.aperture,e.shutter=t.shutter,e.iso=t.iso,e.rect=t.rect,e.targetTexture=t.targetTexture)},n._setIpdOffset=function(e){this._IPDOffset===B.Manual&&(this._getCameras(),this._mainCamera&&(this._leftCamera&&this._leftCamera.node.setPosition(-e,this._leftCamera.node.getPosition().y,this._leftCamera.node.getPosition().z),this._rightCamera&&this._rightCamera.node.setPosition(e,this._rightCamera.node.getPosition().y,this._rightCamera.node.getPosition().z),this._setMainOffset(e)))},n.onEnable=function(){h.isXR&&p.setIPDOffset(this._realIPDOffset)},n._setMainOffset=function(e){this._mainCamera&&(this._perEyeCamera?this._realIPDOffset=0:this._realIPDOffset=2*e)},n._getCameras=function(){for(var e=this.getComponentsInChildren(u),t=0;t<e.length;++t)switch(e[t].targetEye){case m.BOTH:this._mainCamera=e[t].getComponent(c);break;case m.LEFT:this._leftCamera=e[t].getComponent(c);break;case m.RIGHT:this._rightCamera=e[t].getComponent(c)}},s(t,[{key:"perEyeCamera",get:function(){return this._perEyeCamera},set:function(e){e!==this._perEyeCamera&&(this._perEyeCamera=e,this._getCameras(),this._copyCameras(N.BOTH),this._IPDOffset===B.Manual&&this._setMainOffset(this._offsetValue/2),this._perEyeCamera?(this._mainCamera&&(this._mainCamera.enabled=!1),this._leftCamera&&(this._leftCamera.node.active=!0),this._rightCamera&&(this._rightCamera.node.active=!0)):(this._mainCamera&&(this._mainCamera.enabled=!0),this._leftCamera&&(this._leftCamera.node.active=!1),this._rightCamera&&(this._rightCamera.node.active=!1)))}},{key:"sync_with_Main_Camera",get:function(){return this._sync},set:function(e){e!==this._sync&&(this._sync=e,this._copyCameras(N.BOTH))}},{key:"IPDOffset",get:function(){return this._IPDOffset},set:function(e){e!==this._IPDOffset&&(this._setIpdOffset(0),this._IPDOffset=e,this._setIpdOffset(this._offsetValue/2))}},{key:"offsetValue",get:function(){return this._offsetValue},set:function(e){e!==this._offsetValue&&(this._offsetValue=e,this._setIpdOffset(this._offsetValue/2))}}]),t}(_)).prototype,"_perEyeCamera",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=t(H.prototype,"_sync",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=t(H.prototype,"_IPDOffset",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.Auto}}),S=t(H.prototype,"_offsetValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.064}}),V=t(H.prototype,"_realIPDOffset",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(H.prototype,"perEyeCamera",[I],Object.getOwnPropertyDescriptor(H.prototype,"perEyeCamera"),H.prototype),t(H.prototype,"sync_with_Main_Camera",[v],Object.getOwnPropertyDescriptor(H.prototype,"sync_with_Main_Camera"),H.prototype),t(H.prototype,"IPDOffset",[E],Object.getOwnPropertyDescriptor(H.prototype,"IPDOffset"),H.prototype),t(H.prototype,"offsetValue",[M],Object.getOwnPropertyDescriptor(H.prototype,"offsetValue"),H.prototype),T=H))||T)||T)||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/image-source.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-session.ts","./ar-enum.ts","./ar-event.ts","./factor-base.ts","./factor-event.ts"],(function(e){var i,t,a,r,s,n,o,c,g,h,u,l,m,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,o=e._decorator,c=e.ImageAsset,g=e.Size,h=e.assetManager},function(e){u=e.ARSession},function(e){l=e.FactorType},null,function(e){m=e.ARFactorBase},function(e){p=e.ARFactorEvent}],execute:function(){var y,S,f,_,z,b,d,P,w,v,I,A,O,R,x,D,L,M,j,E;n._RF.push({},"2199fI7gXtHB5G3dyXBVDGj","image-source",void 0);var k=.15,F=o.ccclass,B=o.property,C=e("ARImageSetItem",(y=F("cc.ARImageSetItem"),S=B({serializable:!0}),f=B({serializable:!0}),_=B({serializable:!0}),z=B({serializable:!0,visible:!1}),b=B({type:c,displayOrder:1,tooltip:"i18n:xr-plugin.factor.image_source.image_set_item.image"}),d=B({displayOrder:2,tooltip:"i18n:xr-plugin.factor.image_source.image_set_item.enablePhysicalSize"}),P=B({type:g,displayOrder:3,visible:function(){return this.enablePhysicalSize},tooltip:"i18n:xr-plugin.factor.image_source.image_set_item.imagePhysicalSize"}),y((I=i((v=function(e){function i(){for(var i,t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return i=e.call.apply(e,[this].concat(s))||this,a(i,"_image",I,r(i)),a(i,"_enablePhysicalSize",A,r(i)),a(i,"_imagePhysicalSize",O,r(i)),a(i,"_imageSize",R,r(i)),i}return t(i,e),s(i,[{key:"image",get:function(){return this._image},set:function(e){if(e!==this._image){if(this._image=e,e){var i=Math.min(e.width,e.height),t=Math.max(e.width,e.height),a=k*(i/t);this._imageSize=e.width>e.height?new g(k,a):new g(a,k),this.imagePhysicalSize=this._imageSize.clone()}else this.imagePhysicalSize=new g(0,0),this._imageSize=null;this.updateListener(e)}}},{key:"enablePhysicalSize",get:function(){return this._enablePhysicalSize},set:function(e){e!==this._enablePhysicalSize&&(this._enablePhysicalSize=e,this.updateListener(e))}},{key:"imagePhysicalSize",get:function(){return this._imagePhysicalSize},set:function(e){if(e!==this._imagePhysicalSize){if(this._imageSize&&this._imageSize.width>0&&e.width!==this._imagePhysicalSize.width){var i=e.width/this._imageSize.width;e.height=i*this._imageSize.height}if(this._imageSize&&this._imageSize.height>0&&e.height!==this._imagePhysicalSize.height){var t=e.height/this._imageSize.height;e.width=t*this._imageSize.width}this._imagePhysicalSize=e,this.updateListener(e)}}}]),i}(p)).prototype,"_image",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(v.prototype,"_enablePhysicalSize",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),O=i(v.prototype,"_imagePhysicalSize",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(0,0)}}),R=i(v.prototype,"_imageSize",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i(v.prototype,"image",[b],Object.getOwnPropertyDescriptor(v.prototype,"image"),v.prototype),i(v.prototype,"enablePhysicalSize",[d],Object.getOwnPropertyDescriptor(v.prototype,"enablePhysicalSize"),v.prototype),i(v.prototype,"imagePhysicalSize",[P],Object.getOwnPropertyDescriptor(v.prototype,"imagePhysicalSize"),v.prototype),w=v))||w));e("ARImageSource",(x=F("cc.ARImageSource"),D=B({serializable:!0}),L=B({type:[C],displayOrder:1,tooltip:"i18n:xr-plugin.factor.image_source.imageSource"}),x((E=i((j=function(e){function i(i){var t;return t=e.call(this)||this,a(t,"_imageSource",E,r(t)),t.uuid=i,t.type=l.IMAGE_SOURCE,t}t(i,e);var n=i.prototype;return n.registerImageAssetsChange=function(){var e=this;this._imageSource.forEach((function(i){i.removeListener(),i.addListener((function(i){e.collectImageAssets()}))}))},n.getImageAssets=function(){var e=[];return this._imageSource&&this._imageSource.forEach((function(i){i&&i.image&&e.push({imageAsset:i.image,widthInMeters:i.enablePhysicalSize?i.imagePhysicalSize.x:0,heightInMeters:i.enablePhysicalSize?i.imagePhysicalSize.y:0})})),e},n.getImageAssetsSize=function(e){if(this._imageSource)for(var i=0;i<this._imageSource.length;i++){var t=this._imageSource[i];if(t&&t.image&&t.image._uuid===e)return t.imagePhysicalSize}return new g(0,0)},n.updateImageAssets=function(e,i){this._imageSource&&this._imageSource.forEach((function(t,a){t&&e===a&&h.loadAny({uuid:i},(function(e,i){t.image=i}))}))},n.collectImageAssets=function(){},n.match=function(e){for(var i=0;i<this._imageSource.length;i++){var t,a,r=this._imageSource[i];if(r.image)if((null==(t=u.getSession())||null==(a=t.manager)?void 0:a.configuration.getImageAssetsIndex(this.uuid,r.image.nativeUrl))===e.libIndex)return!0}return!1},n.reset=function(){this.imageSource=[]},s(i,[{key:"imageSource",get:function(){return this._imageSource},set:function(e){e!==this._imageSource&&(this._imageSource=e,this.registerImageAssetsChange(),this.collectImageAssets(),this.updateListener(e))}}]),i}(m)).prototype,"_imageSource",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i(j.prototype,"imageSource",[L],Object.getOwnPropertyDescriptor(j.prototype,"imageSource"),j.prototype),M=j))||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./spacesxr-handler-camera.ts","./spacesxr-handler-plane.ts","./spacesxr-handler-image.ts","./spacesxr-handler-scene-mesh.ts"],(function(e){var a;return{setters:[function(e){a=e.cclegacy},function(a){e("SpacesXRHandlerCameraDevice",a.SpacesXRHandlerCameraDevice)},function(a){e("SpacesXRHandlerPlaneDetection",a.SpacesXRHandlerPlaneDetection)},function(a){e("SpacesXRHandlerImageTracking",a.SpacesXRHandlerImageTracking)},function(a){e("SpacesXRHandlerSceneMesh",a.SpacesXRHandlerSceneMesh)}],execute:function(){a._RF.push({},"476caMypYVBxK0PVhw0A6ZV","index",void 0),a._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./pose-tracker.ts","./hmd-ctrl.ts","./xr-controller.ts","./target-eye.ts","./tracking-origin.ts","./xr-interactor.ts","./direct-interactor.ts","./ray-interactor.ts","./xr-interactable.ts","./grab-interactable.ts","./teleportable.ts","./interactable-events.ts","./interactor-events.ts","./locomotion-checker.ts","./teleporter.ts","./sharp-turner.ts","./continuous-turner.ts","./continuous-mover.ts","./locomotion-base.ts","./raycast-checker.ts","./camera-following.ts","./xr-key.ts","./xr-keyboard-input-field.ts","./xr-keyboard.ts","./xr-keyboard-input.ts","./xr-switch.ts","./xr-interface.ts","./xr-transition.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){var r={};r.PoseTracker=e.PoseTracker,r.TrackingSource_Type=e.TrackingSource_Type,t(r)},function(e){t("HMDCtrl",e.HMDCtrl)},function(e){var r={};r.InteractorEventType=e.InteractorEventType,r.XRController=e.XRController,r.XrEventActionType=e.XrEventActionType,r.XrEventTypeLeft=e.XrEventTypeLeft,r.XrEventTypeRight=e.XrEventTypeRight,r.XrInputAction=e.XrInputAction,r.XrInputDeviceType=e.XrInputDeviceType,t(r)},function(e){var r={};r.TargetEye=e.TargetEye,r.TargetEye_Type=e.TargetEye_Type,t(r)},function(e){var r={};r.TrackingOrigin=e.TrackingOrigin,r.TrackingOriginMode_Type=e.TrackingOriginMode_Type,t(r)},function(e){t("XrInteractor",e.XrInteractor)},function(e){t("DirectInteractor",e.DirectInteractor)},function(e){t("RayInteractor",e.RayInteractor)},function(e){var r={};r.IXrInteractable=e.IXrInteractable,r.InteractorState=e.InteractorState,r.InteractorTriggerState=e.InteractorTriggerState,r.SelectActionTrigger_Type=e.SelectActionTrigger_Type,r.StateType=e.StateType,r.XrControlEventType=e.XrControlEventType,r.XrEventHandle=e.XrEventHandle,r.XrInteractable=e.XrInteractable,t(r)},function(e){t("GrabInteractable",e.GrabInteractable)},function(e){t("Teleportable",e.Teleportable)},function(e){t("InteractableEvents",e.InteractableEvents)},function(e){t("InteractorEvents",e.InteractorEvents)},function(e){t("LocomotionChecker",e.LocomotionChecker)},function(e){t("Teleporter",e.Teleporter)},function(e){t("SharpTurner",e.SharpTurner)},function(e){t("ContinuousTurner",e.ContinuousTurner)},function(e){t("ContinuousMover",e.ContinuousMover)},function(e){var r={};r.InputControl_Type=e.InputControl_Type,r.LocomotionBase=e.LocomotionBase,t(r)},function(e){t("RaycastChecker",e.RaycastChecker)},function(e){t("CameraFollowing",e.CameraFollowing)},function(e){t("XRKey",e.XRKey)},function(e){t("XRKeyboardInputField",e.XRKeyboardInputField)},function(e){t("XRKeyboard",e.XRKeyboard)},function(e){t("XrKeyboardInput",e.XrKeyboardInput)},function(e){t("XRSwitch",e.XRSwitch)},function(e){var r={};r.XRConfigKey=e.XRConfigKey,r.XRVendor=e.XRVendor,r.xrInterface=e.xrInterface,t(r)},function(e){var r={};r.SlideType=e.SlideType,r.TransitionType=e.TransitionType,r.XRMaskType=e.XRMaskType,r.XRTransition=e.XRTransition,t(r)}],execute:function(){e._RF.push({},"5077cqDhiBA7odbaYyL/PjQ","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc","./ar-system-plane.ts","./ar-system-mesh.ts","./ar-system-image.ts","./ar-system-face.ts","./ar-system-trackable.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("ARSystemPlaneDetection",t.ARSystemPlaneDetection)},function(t){e("ARSystemSceneMesh",t.ARSystemSceneMesh)},function(t){e("ARSystemImageTracking",t.ARSystemImageTracking)},function(t){e("ARSystemFaceTracking",t.ARSystemFaceTracking)},function(t){e("ARSystemTrackable",t.ARSystemTrackable)}],execute:function(){t._RF.push({},"5de1fVDKYxIk7eS9S0Z8UVo","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index4.ts",["cc","./webxr-handler-camera.ts","./webxr-handler-plane.ts","./webxr-handler-anchor.ts","./webxr-handler-image.ts","./webxr-handler-lighting-estimation.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){e("ARWebXRHandlerCameraDevice",n.ARWebXRHandlerCameraDevice)},function(n){e("ARWebXRHandlerPlaneDetection",n.ARWebXRHandlerPlaneDetection)},function(n){e("ARWebXRHandlerAnchor",n.ARWebXRHandlerAnchor)},function(n){e("ARWebXRHandlerImageTracking",n.ARWebXRHandlerImageTracking)},function(n){e("ARWebXRHandlerLightingEstimation",n.ARWebXRHandlerLightingEstimation)}],execute:function(){n._RF.push({},"60b85fnCcJNuprbWfQwxYLh","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index5.ts",["cc","./ar-feature-camera.ts","./ar-feature-lighting-estimation.ts","./ar-feature-plane.ts","./ar-feature-scene-mesh.ts","./ar-feature-image.ts","./ar-feature-object.ts","./ar-feature-face.ts","./ar-feature-anchor.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("ARFeatureCameraDevice",t.ARFeatureCameraDevice)},function(t){e("ARFeatureLightingEstimation",t.ARFeatureLightingEstimation)},function(t){e("ARFeaturePlaneDetection",t.ARFeaturePlaneDetection)},function(t){e("ARFeatureSceneMesh",t.ARFeatureSceneMesh)},function(t){e("ARFeatureImageTracking",t.ARFeatureImageTracking)},function(t){e("ARFeatureObjectTracking",t.ARFeatureObjectTracking)},function(t){e("ARFeatureFaceTracking",t.ARFeatureFaceTracking)},function(t){e("ARFeatureAnchorTracking",t.ARFeatureAnchorTracking)}],execute:function(){t._RF.push({},"aff04SJR/BPtZ6x+B4TfXXM","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index6.ts",["cc","./ar-handler-camera.ts","./ar-handler-lighting-estimation.ts","./ar-handler-plane.ts","./ar-handler-scene-mesh.ts","./ar-handler-image.ts","./ar-handler-object.ts","./ar-handler-face.ts","./ar-handler-anchor.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){e("ARMobileHandlerCameraDevice",n.ARMobileHandlerCameraDevice)},function(n){e("ARMobileHandlerLightingEstimation",n.ARMobileHandlerLightingEstimation)},function(n){e("ARMobileHandlerPlaneDetection",n.ARMobileHandlerPlaneDetection)},function(n){e("ARMobileHandlerSceneMesh",n.ARMobileHandlerSceneMesh)},function(n){e("ARMobileHandlerImageTracking",n.ARMobileHandlerImageTracking)},function(n){e("ARMobileHandlerObjectTracking",n.ARMobileHandlerObjectTracking)},function(n){e("ARMobileHandlerFaceTracking",n.ARMobileHandlerFaceTracking)},function(n){e("ARMobileHandlerAnchor",n.ARMobileHandlerAnchor)}],execute:function(){n._RF.push({},"babacU/opVIlLBiRyYOwcve","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/interactable-events.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactable.ts"],(function(e){var t,i,n,r,s,o,a,l,E,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.EventHandler,l=e.Collider},function(e){E=e.XrControlEventType,c=e.IXrInteractable}],execute:function(){var v,h,u,p,d,b,f,_,y,T,x,S,g,m,z,I,D,A,C,O,R,V,w;s._RF.push({},"d8cb8VQh+9Ae4EaDCs5iYYW","interactable-events",void 0);var L=o.ccclass,H=o.help,Y=o.menu,X=o.property;e("InteractableEvents",(v=L("cc.InteractableEvents"),h=H("i18n:cc.InteractableEvents"),u=Y("XR/Interaction/InteractableEvents"),p=X({serializable:!0,type:[a],displayOrder:1,tooltip:"i18n:xr-plugin.interactable_events.hoverEnterEvents"}),d=X({serializable:!0,type:[a],displayOrder:2,tooltip:"i18n:xr-plugin.interactable_events.hoverStayEvents"}),b=X({serializable:!0,type:[a],displayOrder:3,tooltip:"i18n:xr-plugin.interactable_events.hoverExitEvents"}),f=X({serializable:!0,type:[a],displayOrder:4,tooltip:"i18n:xr-plugin.interactable_events.selectEnterEvents"}),_=X({serializable:!0,type:[a],displayOrder:5,tooltip:"i18n:xr-plugin.interactable_events.selectStayEvents"}),y=X({serializable:!0,type:[a],displayOrder:6,tooltip:"i18n:xr-plugin.interactable_events.selectExitEvents"}),T=X({serializable:!0,type:[a],displayOrder:7,tooltip:"i18n:xr-plugin.interactable_events.activeEnterEvents"}),x=X({serializable:!0,type:[a],displayOrder:8,tooltip:"i18n:xr-plugin.interactable_events.activeStayEvents"}),S=X({serializable:!0,type:[a],displayOrder:9,tooltip:"i18n:xr-plugin.interactable_events.activeExitEvents"}),v(g=h(g=u((z=t((m=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"hoverEnterEvents",z,r(t)),n(t,"hoverStayEvents",I,r(t)),n(t,"hoverExitEvents",D,r(t)),n(t,"selectEnterEvents",A,r(t)),n(t,"selectStayEvents",C,r(t)),n(t,"selectExitEvents",O,r(t)),n(t,"activeEnterEvents",R,r(t)),n(t,"activeStayEvents",V,r(t)),n(t,"activeExitEvents",w,r(t)),t}i(t,e);var s=t.prototype;return s.onLoad=function(){this._colliderCom=this.node.getComponent(l),this._colliderCom||console.error("this node does not have")},s.onEnable=function(){this.node.on(E.HOVER_ENTERED,this._hoverEntered,this),this.node.on(E.HOVER_STAY,this._hoverStay,this),this.node.on(E.HOVER_EXITED,this._hoverExited,this),this.node.on(E.SELECT_ENTERED,this._selectEntered,this),this.node.on(E.SELECT_STAY,this._selectStay,this),this.node.on(E.SELECT_EXITED,this._selectExited,this),this.node.on(E.ACTIVATED,this._activeEntered,this),this.node.on(E.ACTIVATE_STAY,this._activeStay,this),this.node.on(E.DEACTIVITED,this._activeExited,this)},s.onDisable=function(){this.node.off(E.HOVER_ENTERED,this._hoverEntered,this),this.node.off(E.HOVER_STAY,this._hoverEntered,this),this.node.off(E.HOVER_EXITED,this._hoverExited,this),this.node.off(E.SELECT_ENTERED,this._selectEntered,this),this.node.off(E.SELECT_STAY,this._selectEntered,this),this.node.off(E.SELECT_EXITED,this._selectExited,this),this.node.off(E.ACTIVATED,this._activeEntered,this),this.node.off(E.ACTIVATE_STAY,this._activeStay,this),this.node.off(E.DEACTIVITED,this._activeExited,this)},s._hoverEntered=function(e){a.emitEvents(this.hoverEnterEvents,e)},s._hoverStay=function(e){a.emitEvents(this.hoverStayEvents,e)},s._hoverExited=function(e){a.emitEvents(this.hoverExitEvents,e)},s._selectEntered=function(e){a.emitEvents(this.selectEnterEvents,e)},s._selectStay=function(e){a.emitEvents(this.selectStayEvents,e)},s._selectExited=function(e){a.emitEvents(this.selectExitEvents,e)},s._activeEntered=function(e){a.emitEvents(this.activeEnterEvents,e)},s._activeStay=function(e){a.emitEvents(this.activeStayEvents,e)},s._activeExited=function(e){a.emitEvents(this.activeExitEvents,e)},t}(c)).prototype,"hoverEnterEvents",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(m.prototype,"hoverStayEvents",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(m.prototype,"hoverExitEvents",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(m.prototype,"selectEnterEvents",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=t(m.prototype,"selectStayEvents",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(m.prototype,"selectExitEvents",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(m.prototype,"activeEnterEvents",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=t(m.prototype,"activeStayEvents",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(m.prototype,"activeExitEvents",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=m))||g)||g)||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/interaction-mask.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,s;return{setters:[function(t){n=t.extends},function(t){e=t.cclegacy,i=t.BitMask,s=t.PhysicsGroup}],execute:function(){e._RF.push({},"58b95axpoFFFpLYEtAFXXJx","interaction-mask",void 0),t("InteractionMask",(function(){})).BitMask=i(n({},s)),e._RF.pop()}}}));

System.register("chunks:///_virtual/interactor-events.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interface.ts"],(function(e){var t,i,n,o,r,a,l,p,c,s,u,d,y,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createClass,n=e.inheritsLoose,o=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,p=e.CCBoolean,c=e.AudioClip,s=e.EventHandler,u=e.sys,d=e.DeviceType,y=e.Component},function(e){v=e.xrInterface}],execute:function(){var E,S,h,_,H,b,f,x,g,D,O,C,z,w,m,A,k,P,j,N,I,T,R,B,L,F,X,Y,M,W,Z,q,G,J,K,Q,U,V,$,ee,te,ie,ne,oe,re,ae,le,pe,ce,se,ue,de,ye,ve,Ee,Se,he,_e,He,be,fe,xe,ge,De,Oe,Ce,ze,we,me,Ae,ke,Pe,je,Ne,Ie,Te,Re,Be,Le,Fe,Xe,Ye,Me,We,Ze,qe,Ge,Je,Ke,Qe,Ue,Ve,$e,et,tt,it,nt,ot,rt,at,lt,pt,ct,st,ut,dt,yt,vt,Et,St,ht,_t,Ht,bt,ft,xt,gt,Dt,Ot,Ct,zt,wt;a._RF.push({},"94f4b3Y9BtBuYwZ00W4c5re","interactor-events",void 0);var mt=l.ccclass,At=l.help,kt=l.menu,Pt=l.property,jt=function(e){return e[e.Select_Entered=1]="Select_Entered",e[e.Select_Stay=2]="Select_Stay",e[e.Select_Exited=3]="Select_Exited",e[e.Hover_Entered=4]="Hover_Entered",e[e.Hover_Stay=5]="Hover_Stay",e[e.Hover_Exited=6]="Hover_Exited",e}(jt||{}),Nt=(E=mt("cc.AudioEvents"),S=Pt({serializable:!0}),h=Pt({serializable:!0}),_=Pt({serializable:!0}),H=Pt({serializable:!0}),b=Pt({serializable:!0}),f=Pt({serializable:!0}),x=Pt({serializable:!0}),g=Pt({serializable:!0}),D=Pt({serializable:!0}),O=Pt({serializable:!0}),C=Pt({serializable:!0}),z=Pt({serializable:!0}),w=Pt({type:p,displayOrder:1,tooltip:"i18n:xr-plugin.interactor_events.audio_events.onSelectEntered"}),m=Pt({type:c,displayOrder:2,visible:function(){return this._onSelectEntered},displayName:"AudioClip",tooltip:"i18n:xr-plugin.interactor_events.audio_events.onSelectEnteredAudioClip"}),A=Pt({type:p,displayOrder:3,tooltip:"i18n:xr-plugin.interactor_events.audio_events.onSelectStay"}),k=Pt({type:c,displayOrder:4,visible:function(){return this._onSelectStay},displayName:"AudioClip",tooltip:"i18n:xr-plugin.interactor_events.audio_events.onSelectStayAudioClip"}),P=Pt({type:p,displayOrder:5,tooltip:"i18n:xr-plugin.interactor_events.audio_events.onSelectExited"}),j=Pt({type:c,displayOrder:6,visible:function(){return this._onSelectExited},displayName:"AudioClip",tooltip:"i18n:xr-plugin.interactor_events.audio_events.onSelectExitedAudioClip"}),N=Pt({type:p,displayOrder:7,tooltip:"i18n:xr-plugin.interactor_events.audio_events.onHoverEntered"}),I=Pt({type:c,displayOrder:8,visible:function(){return this._onHoverEntered},displayName:"AudioClip",tooltip:"i18n:xr-plugin.interactor_events.audio_events.onHoverEnteredAudioClip"}),T=Pt({type:p,displayOrder:9,tooltip:"i18n:xr-plugin.interactor_events.audio_events.onHoverStay"}),R=Pt({type:c,displayOrder:10,visible:function(){return this._onHoverStay},displayName:"AudioClip",tooltip:"i18n:xr-plugin.interactor_events.audio_events.onHoverStayAudioClip"}),B=Pt({type:p,displayOrder:11,tooltip:"i18n:xr-plugin.interactor_events.audio_events.onHoverExited"}),L=Pt({type:c,displayOrder:12,visible:function(){return this._onHoverExited},displayName:"AudioClip",tooltip:"i18n:xr-plugin.interactor_events.audio_events.onHoverExitedAudioClip"}),E((Y=t((X=function(){function e(){o(this,"_onSelectEntered",Y,this),o(this,"_onSelectEnteredAudioClip",M,this),o(this,"_onSelectStay",W,this),o(this,"_onSelectStayAudioClip",Z,this),o(this,"_onSelectExited",q,this),o(this,"_onSelectExitedAudioClip",G,this),o(this,"_onHoverEntered",J,this),o(this,"_onHoverEnteredAudioClip",K,this),o(this,"_onHoverStay",Q,this),o(this,"_onHoverStayAudioClip",U,this),o(this,"_onHoverExited",V,this),o(this,"_onHoverExitedAudioClip",$,this)}return i(e,[{key:"onSelectEntered",get:function(){return this._onSelectEntered},set:function(e){e!==this._onSelectEntered&&(this._onSelectEntered=e)}},{key:"onSelectEnteredAudioClip",get:function(){return this._onSelectEnteredAudioClip},set:function(e){e!==this._onSelectEnteredAudioClip&&(this._onSelectEnteredAudioClip=e)}},{key:"onSelectStay",get:function(){return this._onSelectStay},set:function(e){e!==this._onSelectStay&&(this._onSelectStay=e)}},{key:"onSelectStayAudioClip",get:function(){return this._onSelectStayAudioClip},set:function(e){e!==this._onSelectStayAudioClip&&(this._onSelectStayAudioClip=e)}},{key:"onSelectExited",get:function(){return this._onSelectExited},set:function(e){e!==this._onSelectExited&&(this._onSelectExited=e)}},{key:"onSelectExitedAudioClip",get:function(){return this._onSelectExitedAudioClip},set:function(e){e!==this._onSelectExitedAudioClip&&(this._onSelectExitedAudioClip=e)}},{key:"onHoverEntered",get:function(){return this._onHoverEntered},set:function(e){e!==this._onHoverEntered&&(this._onHoverEntered=e)}},{key:"onHoverEnteredAudioClip",get:function(){return this._onHoverEnteredAudioClip},set:function(e){e!==this._onHoverEnteredAudioClip&&(this._onHoverEnteredAudioClip=e)}},{key:"onHoverStay",get:function(){return this._onHoverStay},set:function(e){e!==this._onHoverStay&&(this._onHoverStay=e)}},{key:"onHoverStayAudioClip",get:function(){return this._onHoverStayAudioClip},set:function(e){e!==this._onHoverStayAudioClip&&(this._onHoverStayAudioClip=e)}},{key:"onHoverExited",get:function(){return this._onHoverExited},set:function(e){e!==this._onHoverExited&&(this._onHoverExited=e)}},{key:"onHoverExitedAudioClip",get:function(){return this._onHoverExitedAudioClip},set:function(e){e!==this._onHoverExitedAudioClip&&(this._onHoverExitedAudioClip=e)}}]),e}()).prototype,"_onSelectEntered",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),M=t(X.prototype,"_onSelectEnteredAudioClip",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(X.prototype,"_onSelectStay",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=t(X.prototype,"_onSelectStayAudioClip",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(X.prototype,"_onSelectExited",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=t(X.prototype,"_onSelectExitedAudioClip",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(X.prototype,"_onHoverEntered",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),K=t(X.prototype,"_onHoverEnteredAudioClip",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(X.prototype,"_onHoverStay",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=t(X.prototype,"_onHoverStayAudioClip",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(X.prototype,"_onHoverExited",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$=t(X.prototype,"_onHoverExitedAudioClip",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(X.prototype,"onSelectEntered",[w],Object.getOwnPropertyDescriptor(X.prototype,"onSelectEntered"),X.prototype),t(X.prototype,"onSelectEnteredAudioClip",[m],Object.getOwnPropertyDescriptor(X.prototype,"onSelectEnteredAudioClip"),X.prototype),t(X.prototype,"onSelectStay",[A],Object.getOwnPropertyDescriptor(X.prototype,"onSelectStay"),X.prototype),t(X.prototype,"onSelectStayAudioClip",[k],Object.getOwnPropertyDescriptor(X.prototype,"onSelectStayAudioClip"),X.prototype),t(X.prototype,"onSelectExited",[P],Object.getOwnPropertyDescriptor(X.prototype,"onSelectExited"),X.prototype),t(X.prototype,"onSelectExitedAudioClip",[j],Object.getOwnPropertyDescriptor(X.prototype,"onSelectExitedAudioClip"),X.prototype),t(X.prototype,"onHoverEntered",[N],Object.getOwnPropertyDescriptor(X.prototype,"onHoverEntered"),X.prototype),t(X.prototype,"onHoverEnteredAudioClip",[I],Object.getOwnPropertyDescriptor(X.prototype,"onHoverEnteredAudioClip"),X.prototype),t(X.prototype,"onHoverStay",[T],Object.getOwnPropertyDescriptor(X.prototype,"onHoverStay"),X.prototype),t(X.prototype,"onHoverStayAudioClip",[R],Object.getOwnPropertyDescriptor(X.prototype,"onHoverStayAudioClip"),X.prototype),t(X.prototype,"onHoverExited",[B],Object.getOwnPropertyDescriptor(X.prototype,"onHoverExited"),X.prototype),t(X.prototype,"onHoverExitedAudioClip",[L],Object.getOwnPropertyDescriptor(X.prototype,"onHoverExitedAudioClip"),X.prototype),F=X))||F),It=(ee=mt("cc.HapticEvents"),te=Pt({serializable:!0}),ie=Pt({serializable:!0}),ne=Pt({serializable:!0}),oe=Pt({serializable:!0}),re=Pt({serializable:!0}),ae=Pt({serializable:!0}),le=Pt({serializable:!0}),pe=Pt({serializable:!0}),ce=Pt({serializable:!0}),se=Pt({serializable:!0}),ue=Pt({serializable:!0}),de=Pt({serializable:!0}),ye=Pt({serializable:!0}),ve=Pt({serializable:!0}),Ee=Pt({serializable:!0}),Se=Pt({serializable:!0}),he=Pt({serializable:!0}),_e=Pt({serializable:!0}),He=Pt({type:p,displayOrder:1,tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectEntered"}),be=Pt({displayOrder:2,visible:function(){return this._onSelectEntered},slide:!0,range:[0,1,.1],displayName:"Haptic Intensity",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectEnteredHaptic"}),fe=Pt({displayOrder:3,visible:function(){return this._onSelectEntered},min:0,displayName:"Duration",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectEnteredDuration"}),xe=Pt({type:p,displayOrder:4,tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectStay"}),ge=Pt({displayOrder:5,visible:function(){return this._onSelectStay},slide:!0,range:[0,1,.1],displayName:"Haptic Intensity",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectStayHaptic"}),De=Pt({displayOrder:6,visible:function(){return this._onSelectStay},min:0,displayName:"Duration",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectStayDuration"}),Oe=Pt({type:p,displayOrder:7,tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectExited"}),Ce=Pt({displayOrder:8,visible:function(){return this._onSelectExited},slide:!0,range:[0,1,.1],displayName:"Haptic Intensity",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectExitedHaptic"}),ze=Pt({displayOrder:9,visible:function(){return this._onSelectExited},min:0,displayName:"Duration",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onSelectExitedDuration"}),we=Pt({type:p,displayOrder:10,tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverEntered"}),me=Pt({displayOrder:11,visible:function(){return this._onHoverEntered},slide:!0,range:[0,1,.1],displayName:"Haptic Intensity",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverEnteredHaptic"}),Ae=Pt({displayOrder:12,visible:function(){return this._onHoverEntered},min:0,displayName:"Duration",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverEnteredDuration"}),ke=Pt({type:p,displayOrder:13,tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverStay"}),Pe=Pt({displayOrder:14,visible:function(){return this._onHoverStay},slide:!0,range:[0,1,.1],displayName:"Haptic Intensity",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverStayHaptic"}),je=Pt({displayOrder:15,visible:function(){return this._onHoverStay},min:0,displayName:"Duration",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverStayDuration"}),Ne=Pt({type:p,displayOrder:16,tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverExited"}),Ie=Pt({displayOrder:17,visible:function(){return this._onHoverExited},slide:!0,range:[0,1,.1],displayName:"Haptic Intensity",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverExitedHaptic"}),Te=Pt({displayOrder:18,visible:function(){return this._onHoverExited},min:0,displayName:"Duration",tooltip:"i18n:xr-plugin.interactor_events.haptic_events.onHoverExitedDuration"}),ee((Le=t((Be=function(){function e(){o(this,"_onSelectEntered",Le,this),o(this,"_onSelectEnteredHaptic",Fe,this),o(this,"_onSelectEnteredDuration",Xe,this),o(this,"_onSelectStay",Ye,this),o(this,"_onSelectStayHaptic",Me,this),o(this,"_onSelectStayDuration",We,this),o(this,"_onSelectExited",Ze,this),o(this,"_onSelectExitedHaptic",qe,this),o(this,"_onSelectExitedDuration",Ge,this),o(this,"_onHoverEntered",Je,this),o(this,"_onHoverEnteredHaptic",Ke,this),o(this,"_onHoverEnteredDuration",Qe,this),o(this,"_onHoverStay",Ue,this),o(this,"_onHoverStayHaptic",Ve,this),o(this,"_onHoverStayDuration",$e,this),o(this,"_onHoverExited",et,this),o(this,"_onHoverExitedHaptic",tt,this),o(this,"_onHoverExitedDuration",it,this)}return e.prototype.hapticController=function(e,t){if(u.isXR){var i=0;switch(t){case d.Left:i=0;break;case d.Right:i=1}switch(e){case jt.Select_Entered:v.applyHapticController(this._onSelectEnteredHaptic,this._onSelectEnteredDuration,i);break;case jt.Select_Stay:v.applyHapticController(this._onSelectStayHaptic,this._onSelectStayDuration,i);break;case jt.Select_Exited:v.applyHapticController(this._onSelectExitedHaptic,this._onSelectExitedDuration,i);break;case jt.Hover_Entered:v.applyHapticController(this._onHoverEnteredHaptic,this._onHoverEnteredDuration,i);break;case jt.Hover_Stay:v.applyHapticController(this._onHoverStayHaptic,this._onHoverStayDuration,i);break;case jt.Hover_Exited:v.applyHapticController(this._onHoverExitedHaptic,this._onHoverExitedDuration,i)}}},i(e,[{key:"onSelectEntered",get:function(){return this._onSelectEntered},set:function(e){e!==this._onSelectEntered&&(this._onSelectEntered=e)}},{key:"onSelectEnteredHaptic",get:function(){return this._onSelectEnteredHaptic},set:function(e){this._onSelectEnteredHaptic!==e&&(this._onSelectEnteredHaptic=e)}},{key:"onSelectEnteredDuration",get:function(){return this._onSelectEnteredDuration},set:function(e){e!==this._onSelectEnteredDuration&&(this._onSelectEnteredDuration=e)}},{key:"onSelectStay",get:function(){return this._onSelectStay},set:function(e){e!==this._onSelectStay&&(this._onSelectStay=e)}},{key:"onSelectStayHaptic",get:function(){return this._onSelectStayHaptic},set:function(e){this._onSelectStayHaptic!==e&&(this._onSelectStayHaptic=e)}},{key:"onSelectStayDuration",get:function(){return this._onSelectStayDuration},set:function(e){e!==this._onSelectStayDuration&&(this._onSelectStayDuration=e)}},{key:"onSelectExited",get:function(){return this._onSelectExited},set:function(e){e!==this._onSelectExited&&(this._onSelectExited=e)}},{key:"onSelectExitedHaptic",get:function(){return this._onSelectExitedHaptic},set:function(e){this._onSelectExitedHaptic!==e&&(this._onSelectExitedHaptic=e)}},{key:"onSelectExitedDuration",get:function(){return this._onSelectExitedDuration},set:function(e){e!==this._onSelectExitedDuration&&(this._onSelectExitedDuration=e)}},{key:"onHoverEntered",get:function(){return this._onHoverEntered},set:function(e){e!==this._onHoverEntered&&(this._onHoverEntered=e)}},{key:"onHoverEnteredHaptic",get:function(){return this._onHoverEnteredHaptic},set:function(e){this._onHoverEnteredHaptic!==e&&(this._onHoverEnteredHaptic=e)}},{key:"onHoverEnteredDuration",get:function(){return this._onHoverEnteredDuration},set:function(e){e!==this._onHoverEnteredDuration&&(this._onHoverEnteredDuration=e)}},{key:"onHoverStay",get:function(){return this._onHoverStay},set:function(e){e!==this._onHoverStay&&(this._onHoverStay=e)}},{key:"onHoverStayHaptic",get:function(){return this._onHoverStayHaptic},set:function(e){this._onHoverStayHaptic!==e&&(this._onHoverStayHaptic=e)}},{key:"onHoverStayDuration",get:function(){return this._onHoverStayDuration},set:function(e){e!==this._onHoverStayDuration&&(this._onHoverStayDuration=e)}},{key:"onHoverExited",get:function(){return this._onHoverExited},set:function(e){e!==this._onHoverExited&&(this._onHoverExited=e)}},{key:"onHoverExitedHaptic",get:function(){return this._onHoverExitedHaptic},set:function(e){this._onHoverExitedHaptic!==e&&(this._onHoverExitedHaptic=e)}},{key:"onHoverExitedDuration",get:function(){return this._onHoverExitedDuration},set:function(e){e!==this._onHoverExitedDuration&&(this._onHoverExitedDuration=e)}}]),e}()).prototype,"_onSelectEntered",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fe=t(Be.prototype,"_onSelectEnteredHaptic",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Xe=t(Be.prototype,"_onSelectEnteredDuration",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ye=t(Be.prototype,"_onSelectStay",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Me=t(Be.prototype,"_onSelectStayHaptic",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),We=t(Be.prototype,"_onSelectStayDuration",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ze=t(Be.prototype,"_onSelectExited",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qe=t(Be.prototype,"_onSelectExitedHaptic",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Ge=t(Be.prototype,"_onSelectExitedDuration",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Je=t(Be.prototype,"_onHoverEntered",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ke=t(Be.prototype,"_onHoverEnteredHaptic",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Qe=t(Be.prototype,"_onHoverEnteredDuration",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ue=t(Be.prototype,"_onHoverStay",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ve=t(Be.prototype,"_onHoverStayHaptic",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),$e=t(Be.prototype,"_onHoverStayDuration",[Ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),et=t(Be.prototype,"_onHoverExited",[Se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tt=t(Be.prototype,"_onHoverExitedHaptic",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),it=t(Be.prototype,"_onHoverExitedDuration",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(Be.prototype,"onSelectEntered",[He],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectEntered"),Be.prototype),t(Be.prototype,"onSelectEnteredHaptic",[be],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectEnteredHaptic"),Be.prototype),t(Be.prototype,"onSelectEnteredDuration",[fe],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectEnteredDuration"),Be.prototype),t(Be.prototype,"onSelectStay",[xe],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectStay"),Be.prototype),t(Be.prototype,"onSelectStayHaptic",[ge],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectStayHaptic"),Be.prototype),t(Be.prototype,"onSelectStayDuration",[De],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectStayDuration"),Be.prototype),t(Be.prototype,"onSelectExited",[Oe],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectExited"),Be.prototype),t(Be.prototype,"onSelectExitedHaptic",[Ce],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectExitedHaptic"),Be.prototype),t(Be.prototype,"onSelectExitedDuration",[ze],Object.getOwnPropertyDescriptor(Be.prototype,"onSelectExitedDuration"),Be.prototype),t(Be.prototype,"onHoverEntered",[we],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverEntered"),Be.prototype),t(Be.prototype,"onHoverEnteredHaptic",[me],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverEnteredHaptic"),Be.prototype),t(Be.prototype,"onHoverEnteredDuration",[Ae],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverEnteredDuration"),Be.prototype),t(Be.prototype,"onHoverStay",[ke],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverStay"),Be.prototype),t(Be.prototype,"onHoverStayHaptic",[Pe],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverStayHaptic"),Be.prototype),t(Be.prototype,"onHoverStayDuration",[je],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverStayDuration"),Be.prototype),t(Be.prototype,"onHoverExited",[Ne],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverExited"),Be.prototype),t(Be.prototype,"onHoverExitedHaptic",[Ie],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverExitedHaptic"),Be.prototype),t(Be.prototype,"onHoverExitedDuration",[Te],Object.getOwnPropertyDescriptor(Be.prototype,"onHoverExitedDuration"),Be.prototype),Re=Be))||Re),Tt=(nt=mt("cc.SubInteractorEvents"),ot=Pt({serializable:!0,type:[s],displayOrder:1,tooltip:"i18n:xr-plugin.interactor_events.sub_interactor_events.hoverEnterEvents"}),rt=Pt({serializable:!0,type:[s],displayOrder:2,tooltip:"i18n:xr-plugin.interactor_events.sub_interactor_events.hoverStayEvents"}),at=Pt({serializable:!0,type:[s],displayOrder:3,tooltip:"i18n:xr-plugin.interactor_events.sub_interactor_events.hoverExitEvents"}),lt=Pt({serializable:!0,type:[s],displayOrder:4,tooltip:"i18n:xr-plugin.interactor_events.sub_interactor_events.selectEnterEvents"}),pt=Pt({serializable:!0,type:[s],displayOrder:5,tooltip:"i18n:xr-plugin.interactor_events.sub_interactor_events.selectStayEvents"}),ct=Pt({serializable:!0,type:[s],displayOrder:6,tooltip:"i18n:xr-plugin.interactor_events.sub_interactor_events.selectExitEvents"}),nt((dt=t((ut=function(){function e(){o(this,"hoverEnterEvents",dt,this),o(this,"hoverStayEvents",yt,this),o(this,"hoverExitEvents",vt,this),o(this,"selectEnterEvents",Et,this),o(this,"selectStayEvents",St,this),o(this,"selectExitEvents",ht,this)}var t=e.prototype;return t.selectEntered=function(e){s.emitEvents(this.selectEnterEvents,e)},t.selectStay=function(e){s.emitEvents(this.selectStayEvents,e)},t.selectExited=function(e){s.emitEvents(this.selectExitEvents,e)},t.hoverEntered=function(e){s.emitEvents(this.hoverEnterEvents,e)},t.hoverStay=function(e){s.emitEvents(this.hoverStayEvents,e)},t.hoverExited=function(e){s.emitEvents(this.hoverExitEvents,e)},e}()).prototype,"hoverEnterEvents",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yt=t(ut.prototype,"hoverStayEvents",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),vt=t(ut.prototype,"hoverExitEvents",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Et=t(ut.prototype,"selectEnterEvents",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),St=t(ut.prototype,"selectStayEvents",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ht=t(ut.prototype,"selectExitEvents",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),st=ut))||st);e("InteractorEvents",(_t=mt("cc.InteractorEvents"),Ht=At("i18n:cc.InteractorEvents"),bt=kt("XR/Interaction/InteractorEvents"),ft=Pt({serializable:!0,type:Nt,displayOrder:1,tooltip:"i18n:xr-plugin.interactor_events.audioEvents"}),xt=Pt({serializable:!0,type:It,displayOrder:2,tooltip:"i18n:xr-plugin.interactor_events.hapticEvents"}),gt=Pt({serializable:!0,type:Tt,displayOrder:3,tooltip:"i18n:xr-plugin.interactor_events.interactorEvents"}),_t(Dt=Ht(Dt=bt((Ct=t((Ot=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,o(t,"audioEvents",Ct,r(t)),o(t,"hapticEvents",zt,r(t)),o(t,"interactorEvents",wt,r(t)),t}n(t,e);var i=t.prototype;return i.selectEntered=function(e){var t;(this.interactorEvents.selectEntered(e),this.audioEvents.onSelectEntered)&&(null==(t=this.audioEvents.onSelectEnteredAudioClip)||t.play());this.hapticEvents.onSelectEntered&&this.hapticEvents.hapticController(jt.Select_Entered,e.deviceType)},i.selectStay=function(e){var t;(this.interactorEvents.selectStay(e),this.audioEvents.onSelectStay)&&(null==(t=this.audioEvents.onSelectStayAudioClip)||t.play());this.hapticEvents.onSelectStay&&this.hapticEvents.hapticController(jt.Select_Stay,e.deviceType)},i.selectExited=function(e){var t;(this.interactorEvents.selectExited(e),this.audioEvents.onSelectExited)&&(null==(t=this.audioEvents.onSelectExitedAudioClip)||t.play());this.hapticEvents.onSelectExited&&this.hapticEvents.hapticController(jt.Select_Exited,e.deviceType)},i.hoverEntered=function(e){var t;(this.interactorEvents.hoverEntered(e),this.audioEvents.onHoverEntered)&&(null==(t=this.audioEvents.onHoverEnteredAudioClip)||t.play());this.hapticEvents.onHoverEntered&&this.hapticEvents.hapticController(jt.Hover_Entered,e.deviceType)},i.hoverStay=function(e){var t;(this.interactorEvents.hoverStay(e),this.audioEvents.onHoverStay)&&(null==(t=this.audioEvents.onHoverStayAudioClip)||t.play());this.hapticEvents.onHoverStay&&this.hapticEvents.hapticController(jt.Hover_Stay,e.deviceType)},i.hoverExited=function(e){var t;(this.interactorEvents.hoverExited(e),this.audioEvents.onHoverExited)&&(null==(t=this.audioEvents.onHoverExitedAudioClip)||t.play());this.hapticEvents.onHoverExited&&this.hapticEvents.hapticController(jt.Hover_Exited,e.deviceType)},t}(y)).prototype,"audioEvents",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Nt}}),zt=t(Ot.prototype,"hapticEvents",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new It}}),wt=t(Ot.prototype,"interactorEvents",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Tt}}),Dt=Ot))||Dt)||Dt)||Dt));a._RF.pop()}}}));

System.register("chunks:///_virtual/LightEstimateInfo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-api.ts"],(function(e){var i,t,n,r,l,o,a,s,u,c,m,p,b,g,f,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,a=e.Label,s=e.Quat,u=e.Vec3,c=e.director,m=e.sys,p=e.find,b=e.DirectionalLight,g=e.Component},function(e){f=e.FeatureType},function(e){h=e.arApi}],execute:function(){var y,d,v,I,z,C,L,A,D,E,R;l._RF.push({},"8be7ePvsRtAvbQSdTjEV8Rh","LightEstimateInfo",void 0);var S=o.ccclass,w=o.property;e("LightEstimateInfo",(y=S("LightEstimateInfo"),d=w({serializable:!0,type:a}),v=w({serializable:!0,type:a}),I=w({serializable:!0,type:a}),z=w({serializable:!0,type:a}),y((A=i((L=function(e){function i(){for(var i,t=arguments.length,l=new Array(t),o=0;o<t;o++)l[o]=arguments[o];return i=e.call.apply(e,[this].concat(l))||this,n(i,"direction",A,r(i)),n(i,"illuminance",D,r(i)),n(i,"ambientIntensity",E,r(i)),n(i,"ambientColor",R,r(i)),i}t(i,e);var l=i.prototype;return l.start=function(){},l.update=function(e){var i,t=this.node.getWorldRotation(),n=s.toEuler(new u,t);if(this.direction&&(this.direction.string="Direction: "+n),null==(i=c.getScene())?void 0:i.globals.skybox.useHDR){if("IOS"!==m.platform){var r=this.getComponent(b);r&&this.illuminance&&(c.getScene().globals.skybox.useHDR?this.illuminance.string="Illuminance: "+(r.illuminance/38400).toFixed(6):this.illuminance.string="Illuminance: "+r.illuminance.toFixed(6))}}else{var l,o=null==(l=c.getScene())?void 0:l.globals.ambient;if(o)if(this.ambientIntensity.string="Ambient Intensity: "+o.skyIllum,"IOS"!==m.platform){var a=h.getFeature(f.LightingEstimation);if(a){var g=a.getHandler().getAmbientColor();this.ambientColor.string="Ambient Color:  "+g}}else{var y=p("Main Light"),d=null==y?void 0:y.getComponent(b);d&&(this.ambientColor.string="Ambient Color Temperature: "+d.colorTemperature)}}},i}(g)).prototype,"direction",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(L.prototype,"illuminance",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(L.prototype,"ambientIntensity",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(L.prototype,"ambientColor",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=L))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/locomotion-base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-controller.ts","./locomotion-checker.ts"],(function(e){var t,r,i,o,n,c,p,u,l,s,a,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){c=e.cclegacy,p=e._decorator,u=e.ccenum,l=e.director,s=e.Component},function(e){a=e.XRController},function(e){h=e.LocomotionChecker}],execute:function(){var _,y,f,D,k,v,b,g;c._RF.push({},"c23600lnzZM3r+gfDV66xAk","locomotion-base",void 0);var d=p.property,m=p.executeInEditMode,A=e("InputControl_Type",function(e){return e[e.PRIMARY_2D_AXIS=0]="PRIMARY_2D_AXIS",e[e.SECONDARY_2D_AXIS=1]="SECONDARY_2D_AXIS",e}({}));u(A);e("LocomotionBase",(_=d({serializable:!0}),y=d({serializable:!0}),f=d({type:h,displayOrder:1,tooltip:"i18n:xr-plugin.locomotion_base.checker"}),D=d({type:a,displayOrder:2,tooltip:"i18n:xr-plugin.locomotion_base.inputDevice"}),m((b=t((v=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return t=e.call.apply(e,[this].concat(n))||this,i(t,"_checker",b,o(t)),i(t,"_inputDevice",g,o(t)),t}return r(t,e),t.prototype._findChecker=function(){if(!this._checker){var e=l.getScene();if(e){var t=e.getComponentInChildren(h);t&&(this._checker=t)}}},n(t,[{key:"checker",get:function(){return this._checker},set:function(e){e!==this._checker&&(this._checker=e)}},{key:"inputDevice",get:function(){return this._inputDevice},set:function(e){e!==this._inputDevice&&(this._inputDevice=e)}}]),t}(s)).prototype,"_checker",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(v.prototype,"_inputDevice",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(v.prototype,"checker",[f],Object.getOwnPropertyDescriptor(v.prototype,"checker"),v.prototype),t(v.prototype,"inputDevice",[D],Object.getOwnPropertyDescriptor(v.prototype,"inputDevice"),v.prototype),k=v))||k));c._RF.pop()}}}));

System.register("chunks:///_virtual/locomotion-checker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./tracking-origin.ts"],(function(e){var t,o,n,r,i,c,a,l,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){c=e.cclegacy,a=e._decorator,l=e.Node,s=e.director,p=e.Component},function(e){u=e.TrackingOrigin}],execute:function(){var g,h,f,y,_,d,m,x;c._RF.push({},"78ea74Y7fxHarp29Xrvq8DV","locomotion-checker",void 0);var A=a.ccclass,k=a.help,v=a.menu,C=a.property,b=a.executeInEditMode;e("LocomotionChecker",(g=A("cc.LocomotionChecker"),h=k("i18n:cc.LocomotionChecker"),f=v("XR/Locomotion/LocomotionChecker"),y=C({serializable:!0}),_=C({type:l,displayOrder:2,tooltip:"i18n:xr-plugin.locomotion_checker.xrAgent"}),g(d=h(d=f(d=b((x=t((m=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return t=e.call.apply(e,[this].concat(i))||this,n(t,"_xrAgent",x,r(t)),t}o(t,e);var c=t.prototype;return c.onEnable=function(){if(!this._xrAgent){var e=s.getScene();if(e){var t,o=null==(t=e.getComponentInChildren(u))?void 0:t.node;o&&(this._xrAgent=o)}}},c.getSession=function(){return this._xrAgent},i(t,[{key:"XR_Agent",get:function(){return this._xrAgent},set:function(e){e!==this._xrAgent&&(this._xrAgent=e)}}]),t}(p)).prototype,"_xrAgent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(m.prototype,"XR_Agent",[_],Object.getOwnPropertyDescriptor(m.prototype,"XR_Agent"),m.prototype),d=m))||d)||d)||d)||d));c._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./ARFeatureTest.ts","./BallShooter.ts","./ChangePlacementPrefab.ts","./ChangeScene.ts","./CheckDevice.ts","./CheckWebXREnv.ts","./CreateSpatialAnchor.ts","./HitTest.ts","./LightEstimateInfo.ts","./MainScene.ts","./ModelRotator.ts","./TestImageSize.ts","./TrackingEventTrigger.ts","./WebXRModeControl.ts","./ar-camera.ts","./ar-manager.ts","./ar-session.ts","./action-base.ts","./adaptive-scale.ts","./alignment.ts","./display-children.ts","./face-blend-shapes.ts","./face-expression-events.ts","./face-landmark.ts","./surface-overlay.ts","./track-event.ts","./face-tracking-content.ts","./factor-base.ts","./factor-event.ts","./image-source.ts","./plane-direction.ts","./plane-semantic.ts","./plane-size.ts","./ar-configuration.ts","./feature-anchor.ts","./feature-base.ts","./feature-camera.ts","./feature-face.ts","./feature-image.ts","./feature-lighting.ts","./feature-plane.ts","./feature-world-mesh.ts","./ar-system-anchor.ts","./ar-system-base.ts","./ar-system-face.ts","./ar-system-image.ts","./ar-system-mesh.ts","./ar-system-plane.ts","./ar-system-trackable.ts","./index3.ts","./ar-defines.ts","./ar-enum.ts","./ar-event.ts","./ar-interaction-define.ts","./ar-placeable.ts","./ar-screen-touch-gesture.ts","./ar-screen-touch-interactor.ts","./ar-selectable.ts","./axis-constraint.ts","./min-max-scale-constraint.ts","./rotation-axis-constraint.ts","./ar-face-tracking.ts","./ar-image-tracking.ts","./ar-meshing.ts","./ar-plane-tracking.ts","./ar-trackable.ts","./ar-tracking-base.ts","./customized-tracking.ts","./face-landmark-controller.ts","./ar-plane-tracking-visualizer.ts","./ar-device-base.ts","./ar-feature-base.ts","./ar-feature-anchor.ts","./ar-feature-camera.ts","./ar-feature-face.ts","./ar-feature-image.ts","./ar-feature-lighting-estimation.ts","./ar-feature-object.ts","./ar-feature-plane.ts","./ar-feature-scene-mesh.ts","./index5.ts","./ar-handler-base.ts","./ar-device-manager.ts","./ar-handler-anchor.ts","./ar-handler-camera.ts","./ar-handler-face.ts","./ar-handler-image.ts","./ar-handler-lighting-estimation.ts","./ar-handler-object.ts","./ar-handler-plane.ts","./ar-handler-scene-mesh.ts","./index6.ts","./ar-mobile-device.ts","./hmd-ctrl.ts","./pose-tracker.ts","./index.ts","./spacesxr-handler-camera.ts","./spacesxr-handler-image.ts","./spacesxr-handler-plane.ts","./spacesxr-handler-scene-mesh.ts","./spacesxr-device.ts","./target-eye.ts","./tracking-origin.ts","./webxr-session-controller.ts","./index4.ts","./webxr-handler-anchor.ts","./webxr-handler-camera.ts","./webxr-handler-image.ts","./webxr-handler-lighting-estimation.ts","./webxr-handler-plane.ts","./webxr-device.ts","./webxr.ts","./xr-controller.ts","./xr-distortion-correction.ts","./xr-interactive-simulator.ts","./xr-remote-preview.ts","./interactable-events.ts","./interactor-events.ts","./xr-composition-layer.ts","./xr-feature-define.ts","./xr-passthrough-layer.ts","./index2.ts","./direct-interactor.ts","./grab-interactable.ts","./interaction-mask.ts","./ray-interactor.ts","./teleportable.ts","./xr-gaze-interactor.ts","./xr-interactable.ts","./xr-interactor.ts","./ar-api.ts","./xr-extension.ts","./xr-interface.ts","./continuous-mover.ts","./continuous-turner.ts","./locomotion-base.ts","./locomotion-checker.ts","./sharp-turner.ts","./teleporter.ts","./xr-camera-access-manager.ts","./xr-hand-pose-driver.ts","./xr-hand-tracking-manager.ts","./xr-hand.ts","./xr-hit-testing-manager.ts","./xr-raycast-hit-result.ts","./xr-reference-image-asset.ts","./xr-tracked-image-manager.ts","./xr-tracked-image-object.ts","./xr-plane-detection-manager.ts","./xr-plane-mesh-visualizer.ts","./xr-plane-result.ts","./xr-plane.ts","./xr-spatial-anchor-manager.ts","./xr-spatial-anchor.ts","./xr-spaces-feature-manager.ts","./xr-spaces-runtime-manager.ts","./xr-spatial-audio-source.ts","./xr-transition.ts","./xr-permission-helper.ts","./xr-video-caption.ts","./xr-video-controller.ts","./xr-video-player.ts","./xr-webview.ts","./camera-following.ts","./convert-2dui-to-3dui.ts","./raycast-checker.ts","./xr-key.ts","./xr-keyboard-handle.ts","./xr-keyboard-input-field.ts","./xr-keyboard-input.ts","./xr-keyboard.ts","./xr-switch.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-enum.ts","./ar-api.ts"],(function(e){var t,i,n,r,a,l,o,c,u,s,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,o=e._decorator,c=e.Button,u=e.sys,s=e.Component},function(e){p=e.FeatureType},function(e){f=e.XRSessionModeControllerType},function(e){h=e.arApi}],execute:function(){var b,g,y,d,v,m,z,S,D,_,k,w,A,F,M,T,B;l._RF.push({},"0cbd0XSkvFE1Lhx9I94zTtS","MainScene",void 0);var R=o.ccclass,C=o.property;e("MainScene",(b=R("MainScene"),g=C({serializable:!0,type:c}),y=C({serializable:!0,type:c}),d=C({serializable:!0,type:c}),v=C({serializable:!0,type:c}),m=C({serializable:!0,type:c}),z=C({serializable:!0,type:c}),S=C({serializable:!0,type:c}),b((k=t((_=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"anchor",k,r(t)),n(t,"plane",w,r(t)),n(t,"image",A,r(t)),n(t,"meshing",F,r(t)),n(t,"checkSupport",M,r(t)),n(t,"light",T,r(t)),n(t,"interaction",B,r(t)),t._features=new Set,t}i(t,e);var l=t.prototype;return l.start=function(){this.plane.node.attr({feature:{type:p.PlaneDetection,enable:!0}}),this._features.add(this.plane.node),this.image.node.attr({feature:{type:p.ImageTracking,enable:!0}}),this._features.add(this.image.node),this.meshing.node.attr({feature:{type:p.SceneMesh,enable:!0}}),this._features.add(this.meshing.node),this.testFeature()},l.disableAllButtons=function(){this.anchor.interactable=!1,this.plane.interactable=!1,this.image.interactable=!1,this.meshing.interactable=!1,this.checkSupport.interactable=!1,this.light.interactable=!1,this.interaction.interactable=!1},l.testFeature=function(){var e=this,t=[];if(u.isNative)for(var i,n=a(this._features);!(i=n()).done;){var r=i.value;t.push(r.feature)}h.createDevice().then((function(i){i&&h.checkDevice(f.AUTO,i).then((function(n){if(n){var r=i.getCheckSessionMode();h.initDevice(r,i,t).then((function(t){if(t)for(var i,n=a(e._features);!(i=n()).done;){var r=i.value,l=h.checkFeatureEnable(r.feature.type);r.getComponent(c).interactable=l}else console.log("Device not support AR!"),e.disableAllButtons();h.removeDevice()}))}else console.log("Device not support AR!"),e.disableAllButtons()}))}))},t}(s)).prototype,"anchor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(_.prototype,"plane",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(_.prototype,"image",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(_.prototype,"meshing",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(_.prototype,"checkSupport",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(_.prototype,"light",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(_.prototype,"interaction",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=_))||D));l._RF.pop()}}}));

System.register("chunks:///_virtual/min-max-scale-constraint.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,a,r,c,o,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.createClass},function(e){c=e.cclegacy,o=e._decorator,l=e.Component}],execute:function(){var s,p,u,m,S,y,x,f,h,_,g;c._RF.push({},"61651HRfn9Kn4PD4FSwhjgW","min-max-scale-constraint",void 0);var b=o.ccclass,M=o.help,d=o.menu,C=o.property;e("MinMaxScaleConstraint",(s=b("cc.MinMaxScaleConstraint"),p=M("i18n:cc.MinMaxScaleConstraint"),u=d("XR/Constrain/MinMaxScaleConstraint"),m=C({serializable:!0}),S=C({serializable:!0}),y=C({displayOrder:1,tooltip:"i18n:xr-plugin.minMaxScaleConstraint.minScale"}),x=C({displayOrder:2,tooltip:"i18n:xr-plugin.minMaxScaleConstraint.maxScale"}),s(f=p(f=u((_=t((h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"_minScale",_,a(t)),i(t,"_maxScale",g,a(t)),t}return n(t,e),r(t,[{key:"minScale",get:function(){return this._minScale},set:function(e){e!==this._minScale&&(this._minScale=e)}},{key:"maxScale",get:function(){return this._maxScale},set:function(e){e!==this._maxScale&&(this._maxScale=e)}}]),t}(l)).prototype,"_minScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),g=t(h.prototype,"_maxScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),t(h.prototype,"minScale",[y],Object.getOwnPropertyDescriptor(h.prototype,"minScale"),h.prototype),t(h.prototype,"maxScale",[x],Object.getOwnPropertyDescriptor(h.prototype,"maxScale"),h.prototype),f=h))||f)||f)||f));c._RF.pop()}}}));

System.register("chunks:///_virtual/ModelRotator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,r,n,i,a,l,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,a=e._decorator,l=e.Node,c=e.Component}],execute:function(){var s,u,p,d,f;i._RF.push({},"47e3cwnvXBOX5Pnr6bLzIpX","ModelRotator",void 0);var h=a.ccclass,y=a.property;e("ModelRotator",(s=h("ModelRotator"),u=y({serializable:!0,type:l}),s((f=t((d=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=e.call.apply(e,[this].concat(i))||this,r(t,"model",f,n(t)),t._angle=0,t}o(t,e);var i=t.prototype;return i.start=function(){},i.update=function(e){this._angle+=10*e,this.model.setRotationFromEuler(0,this._angle,0)},t}(c)).prototype,"model",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));i._RF.pop()}}}));

System.register("chunks:///_virtual/plane-direction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-enum.ts","./ar-event.ts","./factor-base.ts"],(function(e){var t,i,r,n,o,c,a,p,s,u,l,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){c=e.cclegacy,a=e._decorator},function(e){p=e.ARPlaneDetectionMode},function(e){s=e.FactorType,u=e.ARTrackingType},function(e){l=e.arEvent},function(e){d=e.ARFactorBase}],execute:function(){var y,f,T,h,_,b;c._RF.push({},"b986bWrobxG2ordTxfLjldw","plane-direction",void 0);var v=a.ccclass,g=a.property;e("ARPlaneDirection",(y=v("cc.ARPlaneDirection"),f=g({serializable:!0}),T=g({type:p,displayOrder:1,tooltip:"i18n:xr-plugin.factor.plane_direction.directionType"}),y((b=t((_=function(e){function t(t){var i;return i=e.call(this)||this,r(i,"_directionType",b,n(i)),i.uuid=t,i.type=s.PLANE_DIRECTION,i}i(t,e);var c=t.prototype;return c.match=function(e){return 0!=(this._directionType&e.type)},c.reset=function(){this.directionType=p.All},o(t,[{key:"directionType",get:function(){return this._directionType},set:function(e){if(e!==this._directionType){this._directionType=e,this.updateListener(e);var t={ft:u.Plane,uuid:this.uuid,canUse:!0,direction:this._directionType};l.collectFeature(t)}}}]),t}(d)).prototype,"_directionType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.All}}),t(_.prototype,"directionType",[T],Object.getOwnPropertyDescriptor(_.prototype,"directionType"),_.prototype),h=_))||h));c._RF.pop()}}}));

System.register("chunks:///_virtual/plane-semantic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./factor-base.ts"],(function(e){var t,n,i,r,o,a,c,s,p,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,c=e._decorator,s=e.ccenum},function(e){p=e.FactorType},function(e){u=e.ARFactorBase}],execute:function(){var l,y,m,f,T,d;a._RF.push({},"a712bDfQzRLoJmnFzi79zFB","plane-semantic",void 0);var h=c.ccclass,_=c.property,g=e("SemanticType",function(e){return e[e.None=0]="None",e[e.DeskTop=1]="DeskTop",e[e.Ground=2]="Ground",e[e.Wall=3]="Wall",e[e.Seat=4]="Seat",e[e.Ceiling=5]="Ceiling",e[e.Door=6]="Door",e[e.Window=7]="Window",e[e.Bed=8]="Bed",e}({}));s(g);e("ARPlaneSemantic",(l=h("cc.ARPlaneSemantic"),y=_({serializable:!0}),m=_({type:g,displayOrder:1,tooltip:"i18n:xr-plugin.factor.plane_semantic.semanticType"}),l((d=t((T=function(e){function t(t){var n;return n=e.call(this)||this,i(n,"_semanticType",d,r(n)),n.uuid=t,n.type=p.PLANE_SEMANTIC,n}n(t,e);var a=t.prototype;return a.match=function(e){return!0},a.reset=function(){this.semanticType=g.None},o(t,[{key:"semanticType",get:function(){return this._semanticType},set:function(e){e!==this._semanticType&&(this._semanticType=e,this.updateListener(e))}}]),t}(u)).prototype,"_semanticType",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.None}}),t(T.prototype,"semanticType",[m],Object.getOwnPropertyDescriptor(T.prototype,"semanticType"),T.prototype),f=T))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/plane-size.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./factor-base.ts"],(function(e){var i,t,n,s,r,a,u,o,z,S;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,u=e._decorator,o=e.Vec2},function(e){z=e.FactorType},function(e){S=e.ARFactorBase}],execute:function(){var p,x,h,m,l,c,y,M,f,_,b,g,d,O,w;a._RF.push({},"421b75OfUBHMbladi4RBeY1","plane-size",void 0);var P=u.ccclass,v=u.property;e("ARPlaneSize",(p=P("cc.ARPlaneSize"),x=v({serializable:!0}),h=v({serializable:!0}),m=v({serializable:!0}),l=v({serializable:!0}),c=v({displayOrder:1,group:{name:"Minimum Size"},tooltip:"i18n:xr-plugin.factor.plane_size.useMinSize"}),y=v({displayOrder:2,group:{name:"Minimum Size"},tooltip:"i18n:xr-plugin.factor.plane_size.minSize"}),M=v({displayOrder:3,group:{name:"Maximum Size"},tooltip:"i18n:xr-plugin.factor.plane_size.useMaxSize"}),f=v({displayOrder:4,group:{name:"Maximum Size"},tooltip:"i18n:xr-plugin.factor.plane_size.maxSize"}),p((g=i((b=function(e){function i(i){var t;return t=e.call(this)||this,n(t,"_useMinSize",g,s(t)),n(t,"_useMaxSize",d,s(t)),n(t,"_minSize",O,s(t)),n(t,"_maxSize",w,s(t)),t.uuid=i,t.type=z.PLANE_SIZE,t}t(i,e);var a=i.prototype;return a.match=function(e){return!this.useMinSize&&!this.useMaxSize||(this.useMinSize&&!this.useMaxSize&&e.extent?e.extent.x>this.minSize.x&&e.extent.y>this.minSize.y:!this.useMinSize&&this.useMaxSize&&e.extent?e.extent.x<this.maxSize.x&&e.extent.y<this.maxSize.y:!!(this.useMinSize&&this.useMaxSize&&e.extent)&&(e.extent.x>this.minSize.x&&e.extent.y>this.minSize.y&&e.extent.x<this.maxSize.x&&e.extent.y<this.maxSize.y))},a.reset=function(){this.useMinSize=!0,this.useMaxSize=!1,this.minSize=new o(.5,.5),this.maxSize=new o(1.5,1.5)},r(i,[{key:"useMinSize",get:function(){return this._useMinSize},set:function(e){e!==this._useMinSize&&(this._useMinSize=e,this.updateListener(e))}},{key:"minSize",get:function(){return this._minSize},set:function(e){e!==this._minSize&&(e.x>this.maxSize.x&&(e.x=this.maxSize.x),e.y>this.maxSize.y&&(e.y=this.maxSize.y),this._minSize=e,this.updateListener(e))}},{key:"useMaxSize",get:function(){return this._useMaxSize},set:function(e){e!==this._useMaxSize&&(this._useMaxSize=e,this.updateListener(null))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){e!==this._maxSize&&(e.x<this.minSize.x&&(e.x=this.minSize.x),e.y<this.minSize.y&&(e.y=this.minSize.y),this._maxSize=e,this.updateListener(e))}},{key:"PlaneSize",get:function(){return this.useMinSize&&!this.useMaxSize?[this.minSize.x,this.minSize.y]:!this.useMinSize&&this.useMaxSize?[this.maxSize.x,this.maxSize.y]:this.useMinSize&&this.useMaxSize?[(this.minSize.x+this.maxSize.x)/2,(this.minSize.y+this.maxSize.y)/2]:[0,0]}}]),i}(S)).prototype,"_useMinSize",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=i(b.prototype,"_useMaxSize",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=i(b.prototype,"_minSize",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new o(.5,.5)}}),w=i(b.prototype,"_maxSize",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new o(1.5,1.5)}}),i(b.prototype,"useMinSize",[c],Object.getOwnPropertyDescriptor(b.prototype,"useMinSize"),b.prototype),i(b.prototype,"minSize",[y],Object.getOwnPropertyDescriptor(b.prototype,"minSize"),b.prototype),i(b.prototype,"useMaxSize",[M],Object.getOwnPropertyDescriptor(b.prototype,"useMaxSize"),b.prototype),i(b.prototype,"maxSize",[f],Object.getOwnPropertyDescriptor(b.prototype,"maxSize"),b.prototype),_=b))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/pose-tracker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,s,a,_,r,T,c,E,h,O,I,P,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){a=t.cclegacy,_=t._decorator,r=t.ccenum,T=t.Quat,c=t.Vec3,E=t.CameraComponent,h=t.renderer,O=t.input,I=t.Input,P=t.EventGamepad,u=t.EventHandle,p=t.Component}],execute:function(){var g,N,A,S,V,k,l,D,y,R,d;a._RF.push({},"42802Gifv1E5aGtEbsdZBRs","pose-tracker",void 0);var H=_.ccclass,C=_.help,f=_.menu,v=_.property,L=_.executeInEditMode,m=t("TrackingSource_Type",function(t){return t[t.VIEW_POSE_ACTIVE_LEFT=0]="VIEW_POSE_ACTIVE_LEFT",t[t.VIEW_POSE_ACTIVE_RIGHT=1]="VIEW_POSE_ACTIVE_RIGHT",t[t.VIEW_POSE_ACTIVE_HMD=2]="VIEW_POSE_ACTIVE_HMD",t[t.HAND_POSE_ACTIVE_LEFT=3]="HAND_POSE_ACTIVE_LEFT",t[t.HAND_POSE_ACTIVE_RIGHT=4]="HAND_POSE_ACTIVE_RIGHT",t[t.VIEW_POSE_ACTIVE_HANDHELD=5]="VIEW_POSE_ACTIVE_HANDHELD",t}({})),W=function(t){return t[t.POSITION_AND_ROTATION=1]="POSITION_AND_ROTATION",t[t.POSITION=2]="POSITION",t[t.ROTATION=3]="ROTATION",t}(W||{}),q=function(t){return t[t.UPDATE_AND_BEFORE_RENDER=0]="UPDATE_AND_BEFORE_RENDER",t[t.UPDATE_ONLY=1]="UPDATE_ONLY",t[t.BEFORE_RENDER_ONLY=2]="BEFORE_RENDER_ONLY",t}(q||{});r(m),r(W),r(q);t("PoseTracker",(g=H("cc.PoseTracker"),N=C("i18n:cc.PoseTracker"),A=f("XR/Device/PoseTracker"),S=v({serializable:!0}),V=v({serializable:!0}),k=v({type:m,displayOrder:1,tooltip:"i18n:xr-plugin.pose_tracker.trackingSource"}),l=v({type:W,displayOrder:2,tooltip:"i18n:xr-plugin.pose_tracker.trackingType"}),g(D=N(D=A(D=L((R=e((y=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(e,"_trackingSource",R,o(e)),n(e,"_trackingType",d,o(e)),e._quatPose=new T,e._positionPose=new c,e}i(e,t);var a=e.prototype;return a.setCameraTrackingType=function(t){var e,i=null==(e=this.node)?void 0:e.getComponent(E);if(i)switch(t){case W.POSITION_AND_ROTATION:i.trackingType=h.scene.TrackingType.POSITION_AND_ROTATION;break;case W.POSITION:i.trackingType=h.scene.TrackingType.POSITION;break;case W.ROTATION:i.trackingType=h.scene.TrackingType.ROTATION}},a.setCameraNoTracking=function(){var t,e=null==(t=this.node)?void 0:t.getComponent(E);e&&(e.trackingType=h.scene.TrackingType.NO_TRACKING)},a.onEnable=function(){this.trackingSource===m.VIEW_POSE_ACTIVE_LEFT||this.trackingSource===m.VIEW_POSE_ACTIVE_RIGHT||this.trackingSource===m.VIEW_POSE_ACTIVE_HMD?(this.setCameraTrackingType(this.trackingType),O.on(I.EventType.HMD_POSE_INPUT,this._dispatchEventHMDPose,this)):this.trackingSource===m.HAND_POSE_ACTIVE_LEFT||this.trackingSource===m.HAND_POSE_ACTIVE_RIGHT?(this.setCameraNoTracking(),O.on(I.EventType.HANDLE_POSE_INPUT,this._dispatchEventHandlePose,this)):this.trackingSource===m.VIEW_POSE_ACTIVE_HANDHELD&&O.on(I.EventType.HANDHELD_POSE_INPUT,this._dispatchEventHansetPose,this)},a.onDisable=function(){this.setCameraNoTracking(),this.trackingSource===m.VIEW_POSE_ACTIVE_LEFT||this.trackingSource===m.VIEW_POSE_ACTIVE_RIGHT||this.trackingSource===m.VIEW_POSE_ACTIVE_HMD?O.off(I.EventType.HMD_POSE_INPUT,this._dispatchEventHMDPose,this):this.trackingSource===m.HAND_POSE_ACTIVE_LEFT||this.trackingSource===m.HAND_POSE_ACTIVE_RIGHT?O.off(I.EventType.HANDLE_POSE_INPUT,this._dispatchEventHandlePose,this):this.trackingSource===m.VIEW_POSE_ACTIVE_HANDHELD&&O.off(I.EventType.HANDHELD_POSE_INPUT,this._dispatchEventHansetPose,this)},a._dispatchEventHMDPose=function(t){var e=t.hmdInputDevice;this.trackingSource===m.VIEW_POSE_ACTIVE_LEFT?this._trackingType===W.POSITION_AND_ROTATION?(this._quatPose=e.viewLeftOrientation.getValue(),this._positionPose=e.viewLeftPosition.getValue()):this._trackingType===W.ROTATION?(this._quatPose=e.viewLeftOrientation.getValue(),this._positionPose=c.ZERO):(this._quatPose=T.IDENTITY,this._positionPose=e.viewLeftPosition.getValue()):this.trackingSource===m.VIEW_POSE_ACTIVE_RIGHT?this._trackingType===W.POSITION_AND_ROTATION?(this._quatPose=e.viewRightOrientation.getValue(),this._positionPose=e.viewRightPosition.getValue()):this._trackingType===W.ROTATION?(this._quatPose=e.viewRightOrientation.getValue(),this._positionPose=c.ZERO):(this._quatPose=T.IDENTITY,this._positionPose=e.viewRightPosition.getValue()):this.trackingSource===m.VIEW_POSE_ACTIVE_HMD&&(this._trackingType===W.POSITION_AND_ROTATION?(this._quatPose=e.headMiddleOrientation.getValue(),this._positionPose=e.headMiddlePosition.getValue()):this._trackingType===W.ROTATION?(this._quatPose=e.headMiddleOrientation.getValue(),this._positionPose=c.ZERO):(this._quatPose=T.IDENTITY,this._positionPose=e.headMiddlePosition.getValue())),this.node.setRTS(this._quatPose,this._positionPose,c.ONE)},a._dispatchEventHandlePose=function(t){var e;t instanceof P?e=t.gamepad:t instanceof u&&(e=t.handleInputDevice),this.trackingSource===m.HAND_POSE_ACTIVE_LEFT?this._trackingType===W.POSITION_AND_ROTATION?(this._quatPose=e.aimLeftOrientation.getValue(),this._positionPose=e.aimLeftPosition.getValue()):this._trackingType===W.ROTATION?(this._quatPose=e.aimLeftOrientation.getValue(),this._positionPose=c.ZERO):(this._quatPose=T.IDENTITY,this._positionPose=e.aimLeftPosition.getValue()):this.trackingSource===m.HAND_POSE_ACTIVE_RIGHT&&(this._trackingType===W.POSITION_AND_ROTATION?(this._quatPose=e.aimRightOrientation.getValue(),this._positionPose=e.aimRightPosition.getValue()):this._trackingType===W.ROTATION?(this._quatPose=e.aimRightOrientation.getValue(),this._positionPose=c.ZERO):(this._quatPose=T.IDENTITY,this._positionPose=e.aimRightPosition.getValue())),this.node.setRTS(this._quatPose,this._positionPose,c.ONE)},a._dispatchEventHansetPose=function(t){var e=t.handheldInputDevice;this._quatPose=e.handheldOrientation.getValue(),this._positionPose=e.handheldPosition.getValue(),this.trackingSource===m.VIEW_POSE_ACTIVE_HANDHELD&&(this._trackingType===W.POSITION_AND_ROTATION?(this._quatPose=e.handheldOrientation.getValue(),this._positionPose=e.handheldPosition.getValue()):this._trackingType===W.ROTATION?(this._quatPose=e.handheldOrientation.getValue(),this._positionPose=c.ZERO):(this._quatPose=T.IDENTITY,this._positionPose=e.handheldPosition.getValue())),this.node.setRTS(this._quatPose,this._positionPose,c.ONE)},s(e,[{key:"trackingSource",get:function(){return this._trackingSource},set:function(t){t!==this._trackingSource&&(this._trackingSource=t,this.trackingSource===m.VIEW_POSE_ACTIVE_LEFT||this.trackingSource===m.VIEW_POSE_ACTIVE_RIGHT||this.trackingSource===m.VIEW_POSE_ACTIVE_HMD?this.setCameraTrackingType(this.trackingType):this.setCameraNoTracking())}},{key:"trackingType",get:function(){return this._trackingType},set:function(t){t!==this._trackingType&&(this._trackingType=t,this.trackingSource===m.VIEW_POSE_ACTIVE_LEFT||this.trackingSource===m.VIEW_POSE_ACTIVE_RIGHT||this.trackingSource===m.VIEW_POSE_ACTIVE_HMD?this.setCameraTrackingType(this.trackingType):this.setCameraNoTracking())}}]),e}(p)).prototype,"_trackingSource",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.HAND_POSE_ACTIVE_LEFT}}),d=e(y.prototype,"_trackingType",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return W.POSITION_AND_ROTATION}}),e(y.prototype,"trackingSource",[k],Object.getOwnPropertyDescriptor(y.prototype,"trackingSource"),y.prototype),e(y.prototype,"trackingType",[l],Object.getOwnPropertyDescriptor(y.prototype,"trackingType"),y.prototype),D=y))||D)||D)||D)||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/ray-interactor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./interactor-events.ts","./xr-interactor.ts","./xr-interactable.ts","./raycast-checker.ts","./interaction-mask.ts"],(function(t){var i,e,n,r,o,s,a,l,c,_,h,p,u,y,d,f,g,v,P,b,O,m,C,E,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.ccenum,c=t.CCBoolean,_=t.Node,h=t.Vec3,p=t.Line,u=t.PhysicsSystem,y=t.Mat4,d=t.geometry,f=t.Color},function(t){g=t.InteractorEvents},function(t){v=t.XrInteractor},function(t){P=t.SelectActionTrigger_Type,b=t.XrInteractable,O=t.XrControlEventType,m=t.InteractorTriggerState,C=t.IXrInteractable},function(t){E=t.RaycastChecker},function(t){T=t.InteractionMask}],execute:function(){var S,L,D,w,H,R,I,z,x,N,k,G,j,F,M,A,B,U,q,V,W,X,Y,Z,Q,J,K,$,tt,it,et,nt,rt,ot,st,at,lt,ct,_t,ht,pt,ut,yt,dt,ft,gt,vt,Pt,bt,Ot,mt,Ct,Et;s._RF.push({},"78601ayuslIQr9sP4c1t054","ray-interactor",void 0);var Tt=a.ccclass,St=a.help,Lt=a.menu,Dt=a.property,wt=a.executeInEditMode,Ht=function(t){return t[t.Straight_Line=0]="Straight_Line",t[t.Projectile_Line=1]="Projectile_Line",t[t.Bezier_Line=2]="Bezier_Line",t}(Ht||{}),Rt=function(t){return t[t.EVERYTHING=0]="EVERYTHING",t[t.NOTHING=1]="NOTHING",t[t.IGNORE_RAYCAST=2]="IGNORE_RAYCAST",t[t.GIZMOS=3]="GIZMOS",t[t.EDITOR=4]="EDITOR",t[t.UI_3D=5]="UI_3D",t[t.SCENE_GIZMO=6]="SCENE_GIZMO",t[t.UI_2D=7]="UI_2D",t[t.PROFILER=8]="PROFILER",t[t.DEFAULT=9]="DEFAULT",t}(Rt||{}),It=function(t){return t[t.COLLIDE=0]="COLLIDE",t[t.IGNORE=1]="IGNORE",t[t.USE_GLOBAL=2]="USE_GLOBAL",t}(It||{}),zt=function(t){return t[t.RAY_CAST=0]="RAY_CAST",t[t.SPHERE_CAST=1]="SPHERE_CAST",t}(zt||{});l(Ht),l(Rt),l(It),l(zt),l(P);t("RayInteractor",(S=Tt("cc.RayInteractor"),L=St("i18n:cc.RayInteractor"),D=Lt("XR/Interaction/RayInteractor"),w=Dt({serializable:!0}),H=Dt({serializable:!0}),R=Dt({serializable:!0}),I=Dt({serializable:!0}),z=Dt({serializable:!0}),x=Dt({serializable:!0}),N=Dt({serializable:!0}),k=Dt({serializable:!0}),G=Dt({serializable:!0}),j=Dt({serializable:!0}),F=Dt({serializable:!0}),M=Dt({serializable:!0}),A=Dt({serializable:!0}),B=Dt({serializable:!0}),U=Dt({serializable:!0}),q=Dt({serializable:!0}),V=Dt({type:c,displayOrder:2,tooltip:"i18n:xr-plugin.ray_interactor.forceGrab"}),W=Dt({type:_,displayOrder:4,tooltip:"i18n:xr-plugin.ray_interactor.rayOriginTransform"}),X=Dt({type:_,displayOrder:7,tooltip:"i18n:xr-plugin.ray_interactor.reticle"}),Y=Dt({type:Ht,displayOrder:8,tooltip:"i18n:xr-plugin.ray_interactor.lineType"}),Z=Dt({displayOrder:9,tooltip:"i18n:xr-plugin.ray_interactor.maxRayDistance",visible:function(){return this._lineType===Ht.Straight_Line}}),Q=Dt({type:_,displayOrder:9,visible:function(){return this._lineType===Ht.Projectile_Line||this._lineType===Ht.Bezier_Line},tooltip:"i18n:xr-plugin.ray_interactor.referenceNode"}),J=Dt({displayOrder:10,visible:function(){return this._lineType===Ht.Projectile_Line},tooltip:"i18n:xr-plugin.ray_interactor.velocity"}),K=Dt({displayOrder:11,visible:function(){return this._lineType===Ht.Projectile_Line},tooltip:"i18n:xr-plugin.ray_interactor.acceleration"}),$=Dt({displayOrder:12,visible:function(){return this._lineType===Ht.Projectile_Line},tooltip:"i18n:xr-plugin.ray_interactor.additionalGroundHeight"}),tt=Dt({displayOrder:13,visible:function(){return this._lineType===Ht.Projectile_Line},tooltip:"i18n:xr-plugin.ray_interactor.additionalFlightTime"}),it=Dt({displayOrder:10,visible:function(){return this._lineType===Ht.Bezier_Line},tooltip:"i18n:xr-plugin.ray_interactor.endPointDistance"}),et=Dt({displayOrder:11,visible:function(){return this._lineType===Ht.Bezier_Line},tooltip:"i18n:xr-plugin.ray_interactor.endPointHeight"}),nt=Dt({displayOrder:12,visible:function(){return this._lineType===Ht.Bezier_Line},tooltip:"i18n:xr-plugin.ray_interactor.controlPointDistance"}),rt=Dt({displayOrder:13,visible:function(){return this._lineType===Ht.Bezier_Line},tooltip:"i18n:xr-plugin.ray_interactor.controlPointHeight"}),ot=Dt({displayOrder:14,slide:!0,range:[2,100,1],visible:function(){return this._lineType===Ht.Projectile_Line||this._lineType===Ht.Bezier_Line},tooltip:"i18n:xr-plugin.ray_interactor.sampleFrequency"}),st=Dt({type:T.BitMask,displayOrder:15,tooltip:"i18n:xr-plugin.ray_interactor.rayCastMask"}),S(at=L(at=D(at=wt((ct=i((lt=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o))||this,n(i,"_forceGrab",ct,r(i)),n(i,"_rayOriginTransform",_t,r(i)),n(i,"_reticle",ht,r(i)),n(i,"_lineType",pt,r(i)),n(i,"_maxRayDistance",ut,r(i)),n(i,"_referenceNode",yt,r(i)),n(i,"_velocity",dt,r(i)),n(i,"_acceleration",ft,r(i)),n(i,"_additionalGroundHeight",gt,r(i)),n(i,"_additionalFlightTime",vt,r(i)),n(i,"_endPointDistance",Pt,r(i)),n(i,"_endPointHeight",bt,r(i)),n(i,"_controlPointDistance",Ot,r(i)),n(i,"_controlPointHeight",mt,r(i)),n(i,"_sampleFrequency",Ct,r(i)),n(i,"_rayCastMask",Et,r(i)),i._rayHitCollider=null,i._line=null,i._linePositions=[],i._lineOriColor=void 0,i._pressState=!1,i._orginalScale=new h,i._vec3_0=new h,i._vec3_1=new h,i._linePointsCount=100,i._rayOrigin=void 0,i._isSupportLineStripCast=!1,i}e(i,t);var s=i.prototype;return s.onEnable=function(){var i;if(t.prototype.onEnable.call(this),this.reticle&&this._orginalScale.set(this.reticle.scale),this._setAttachNode(),this._line=this.getComponent(p),this._rayOriginTransform&&this._line){if(!this._isOnlyEditor()){var e=new _("lineNode"),n=e.addComponent(p);this._copyLine(n,this._line),e.parent=this._rayOriginTransform,this._line.destroy(),this._line=n}this._rayOrigin=this._rayOriginTransform}else this._rayOrigin=this.node;this._lineOriColor=null==(i=this._line)?void 0:i.color.color,this._interactorEvents=this.getComponent(g),this._event.forceGrab=this._forceGrab,this._updateLinePos(),this._setReticle(),this._isSupportLineStripCast=void 0!==u.instance.lineStripCastClosest},s.onDisable=function(){t.prototype.onDisable.call(this),this._setLinehover(!1),this._setLinePosition(!1)},s._setAttachNode=function(){if(this.forceGrab)this._attachTransform?this._event.attachNode=this._attachTransform:this._event.attachNode=this.node;else{var t=new _;t.parent=this.node,this._event.attachNode=t}},s._isOnlyEditor=function(){return!1},s._copyLine=function(t,i){t.texture=i.texture,t.worldSpace=i.worldSpace,t.width=i.width,t.tile=i.tile,t.offset=i.offset,t.color=i.color,t.material=i.material},s._calculateProjectile=function(t,i){var e=this._acceleration;0===e&&(e=1e-6),h.multiplyScalar(t,this._rayOrigin.forward,this._velocity);var n=this._referenceNode?this._referenceNode.up:h.UP;h.multiplyScalar(i,n,-e),h.projectOnPlane(this._vec3_0,this._rayOrigin.forward,n);var r=h.angle(this._rayOrigin.forward,this._vec3_0),o=Math.sin(r)*t.y;this._vec3_0=(this._referenceNode?this._referenceNode.worldPosition:h.ZERO).clone(),h.subtract(this._vec3_1,this._vec3_0,this._rayOrigin.worldPosition);var s=h.project(this._vec3_0,this._vec3_1,n).length()+this._additionalGroundHeight,a=0;return a=s<0?this._additionalFlightTime:(o+Math.sqrt(o*o+2*e*s))/e+this._additionalFlightTime,a=Math.max(a,0)},s._calculateBezier=function(t,i,e){var n=this._rayOrigin.forward,r=this._referenceNode?this._referenceNode.up:h.UP;t.set(this._rayOrigin.worldPosition),h.multiplyScalar(this._vec3_0,n,this._controlPointDistance),h.multiplyScalar(this._vec3_1,r,this._controlPointHeight),h.add(i,t,this._vec3_0),i.add(this._vec3_1),h.multiplyScalar(this._vec3_0,n,this._endPointDistance),h.multiplyScalar(this._vec3_1,r,this._endPointHeight),h.add(e,t,this._vec3_0),e.add(this._vec3_1)},s._updateLinePos=function(){var t;if(this._linePositions&&(this._linePositions.length=0),this._line&&this._line.worldSpace&&(this._line.worldSpace=!1),null==(t=this._linePositions)||t.push(h.ZERO),this._isOnlyEditor()||this._isSupportLineStripCast)switch(this._lineType){case Ht.Straight_Line:this._linePositions.push(new h(0,0,-this._maxRayDistance));break;case Ht.Projectile_Line:for(var i=new h,e=new h,n=this._calculateProjectile(i,e),r=this._sampleFrequency,o=n/(r-1),s=1;s<r;++s){var a=s*o;h.multiplyScalar(this._vec3_0,i,a),h.add(this._vec3_0,this._rayOrigin.worldPosition,this._vec3_0),h.multiplyScalar(this._vec3_1,e,.5*a*a),this._vec3_0.add(this._vec3_1),this._rayOrigin.inverseTransformPoint(this._vec3_0,this._vec3_0.clone()),this._linePositions.push(this._vec3_0.clone())}break;case Ht.Bezier_Line:var l=new h,c=new h,_=new h;this._calculateBezier(l,c,_);for(var p=this._sampleFrequency,u=1/(p-1),y=1;y<p;++y){var d=y*u,f=1-d,g=f*f,v=d*d;h.multiplyScalar(this._vec3_0,l,g),h.multiplyScalar(this._vec3_1,c,2*f*d),this._vec3_0.add(this._vec3_1),h.multiplyScalar(this._vec3_1,_,v),this._vec3_0.add(this._vec3_1),this._rayOrigin.inverseTransformPoint(this._vec3_0,this._vec3_0.clone()),this._linePositions.push(this._vec3_0.clone())}}else this._linePositions.push(new h(0,0,-this._maxRayDistance));this._line&&(this._line.positions=this._linePositions)},s._convertToWorldSpace=function(t,i,e){var n=new y;return t.getWorldMatrix(n),e||(e=new h),h.transformMat4(e,i,n)},s.getLineWorldPositions=function(){var t;if(null!=(t=this._line)&&t.worldSpace)return this._linePositions;for(var i=new Array,e=0;e<this._linePositions.length;++e)i.push(this._convertToWorldSpace(this._rayOrigin,this._linePositions[e]));return i},s._rayCast=function(t){var i=!1;if(this._isSupportLineStripCast)i=u.instance.lineStripCastClosest(this.getLineWorldPositions(),t,this.maxRayDistance,!0);else{var e=new h;if(this._line&&2===this._linePositions.length){var n=h.subtract(new h,this._linePositions[1],this._linePositions[0]);h.transformQuat(e,n,this._line.node.getWorldRotation())}var r=this._convertToWorldSpace(this._rayOrigin,this._linePositions[0]),o=new d.Ray(r.x,r.y,r.z,e.x,e.y,e.z);i=u.instance.raycastClosest(o,this._interactionLayerMask,this.maxRayDistance,!0)}return i},s._rayCastClosestResult=function(){return this._isSupportLineStripCast?u.instance.lineStripCastClosestResult:u.instance.raycastClosestResult},s._rayCastId=function(){return this._isSupportLineStripCast?u.instance.lineStripCastClosestResult.id:0},s._judgeHit=function(t){if(!this._line||!this._line.node.active)return!1;if(this._rayCast(this._interactionLayerMask)){var i,e=this._rayCastClosestResult(),n=null==(i=e.collider)?void 0:i.getComponent(b);if(n)return this._beTriggerNode=n,this._event.hitPoint=e.hitPoint,t===O.SELECT_ENTERED||t===O.SELECT_EXITED?(this._collider&&this._collider!==e.collider&&this._collider.node.emit(m.Select_Canceled,this._event),this._collider=e.collider):t!==O.ACTIVATED&&t!==O.DEACTIVITED||(this._activateCollider&&this._activateCollider!==e.collider&&this._activateCollider.node.emit(m.Activite_Canceled,this._event),this._activateCollider=e.collider),!0}return!1},s._judgeUIHit=function(){if(!this._line||!this._line.node.active)return!1;if(this._rayCast(this.interactionLayerMask)){var t,i=this._rayCastClosestResult();if(null==(t=i.collider)?void 0:t.getComponent(E))return this._uiPressCollider=i.collider,!0}return!1},s._handleHoverEnter=function(t){var i,e,n,r;(this._setLinehover(!0),this._rayHitCollider)?this._rayHitCollider!==t.collider?(null==(i=this._interactorEvents)||i.hoverExited(this._event),this._rayHitCollider.node.emit(O.HOVER_EXITED,this._event),this._rayHitCollider=t.collider,null==(e=this._interactorEvents)||e.hoverEntered(this._event),this._rayHitCollider.node.emit(O.HOVER_ENTERED,this._event)):null==(n=this._interactorEvents)||n.hoverStay(this._event):(this._rayHitCollider=t.collider,null==(r=this._interactorEvents)||r.hoverEntered(this._event),this._rayHitCollider.node.emit(O.HOVER_ENTERED,this._event));this._rayHitCollider.node.emit(O.HOVER_STAY,this._event)},s._handleHoverExit=function(){var t;(this._setLinehover(!1),this._setLinePosition(!1),this._rayHitCollider)&&(null==(t=this._interactorEvents)||t.hoverExited(this._event),this._rayHitCollider.node.emit(O.HOVER_EXITED,this._event),this._rayHitCollider=null)},s._interactionHit=function(t){this._handleHoverEnter(t)},s._ui3dHit=function(t){this._handleHoverEnter(t)},s.update=function(){if(!this._isOnlyEditor()&&this._line&&this._line.node.active)if(this._lineType!==Ht.Straight_Line&&this._updateLinePos(),this._rayCast(this._rayCastMask)){var t,i,e=this._rayCastClosestResult();if(this._event.hitPoint=e.hitPoint,this._setLinePosition(!0,this._rayCastId()+1),null==(t=e.collider)?void 0:t.getComponent(C))this._interactionHit(e);else(null==(i=e.collider)?void 0:i.getComponent(E))?this._ui3dHit(e):(this._event.hitPoint=null,this._handleHoverExit())}else this._event.hitPoint=null,this._handleHoverExit()},s._setLinehover=function(t){this._line&&(t?this._line.color.color=f.GREEN.clone():this._lineOriColor&&(this._line.color.color=this._lineOriColor))},s._setLinePosition=function(t,i){if(this._line&&!this._isOnlyEditor()){if(this._line.worldSpace&&(this._line.worldSpace=!1),t&&i&&this._event.hitPoint){var e=(i-1)*Math.ceil(this._linePointsCount/this._sampleFrequency),n=this._linePositions.slice(0,e+1);this._rayOrigin.inverseTransformPoint(this._vec3_0,this._event.hitPoint),n.push(this._vec3_0),this._line.positions=n}else this._line.positions!==this._linePositions&&(this._line.positions=this._linePositions);this._setReticle()}},s._setReticle=function(){var t;if(this._line&&(null==(t=this._line.positions)?void 0:t.length)>1&&!this._isOnlyEditor()){var i,e;null==(i=this.reticle)||i.setWorldPosition(this._convertToWorldSpace(this._rayOrigin,this._line.positions[this._line.positions.length-1]));var n=this._line.positions[this._line.positions.length-1];null==(e=this.reticle)||e.setScale(new h(this._orginalScale).multiplyScalar(h.distance(this._line.positions[0],n)))}},s.uiPressEnter=function(){var t;this._judgeUIHit()&&(null==(t=this._uiPressCollider)||t.node.emit(O.UIPRESS_ENTERED,this._event),this._pressState=!0)},s.uiPressExit=function(){var t;this._pressState&&(null==(t=this._uiPressCollider)||t.node.emit(O.UIPRESS_EXITED,this._event),this._uiPressCollider=null,this._pressState=!1)},o(i,[{key:"forceGrab",get:function(){return this._forceGrab},set:function(t){t!==this._forceGrab&&(this._forceGrab=t)}},{key:"rayOriginTransform",get:function(){return this._rayOriginTransform},set:function(t){t!==this._rayOriginTransform&&(this._rayOriginTransform=t)}},{key:"reticle",get:function(){return this._reticle},set:function(t){t!==this._reticle&&(this._reticle=t)}},{key:"lineType",get:function(){return this._lineType},set:function(t){t!==this._lineType&&(this._lineType=t,this._updateLinePos())}},{key:"maxRayDistance",get:function(){return this._maxRayDistance},set:function(t){t!==this._maxRayDistance&&(this._maxRayDistance=t)}},{key:"referenceNode",get:function(){return this._referenceNode},set:function(t){t!==this._referenceNode&&(this._referenceNode=t,this._updateLinePos())}},{key:"velocity",get:function(){return this._velocity},set:function(t){t!==this._velocity&&(this._velocity=t,this._updateLinePos())}},{key:"acceleration",get:function(){return this._acceleration},set:function(t){t!==this._acceleration&&(this._acceleration=t,this._updateLinePos())}},{key:"additionalGroundHeight",get:function(){return this._additionalGroundHeight},set:function(t){t!==this._additionalGroundHeight&&(this._additionalGroundHeight=t,this._updateLinePos())}},{key:"additionalFlightTime",get:function(){return this._additionalFlightTime},set:function(t){t!==this._additionalFlightTime&&(this._additionalFlightTime=t,this._updateLinePos())}},{key:"endPointDistance",get:function(){return this._endPointDistance},set:function(t){t!==this._endPointDistance&&(this._endPointDistance=t,this._updateLinePos())}},{key:"endPointHeight",get:function(){return this._endPointHeight},set:function(t){t!==this._endPointHeight&&(this._endPointHeight=t,this._updateLinePos())}},{key:"controlPointDistance",get:function(){return this._controlPointDistance},set:function(t){t!==this._controlPointDistance&&(this._controlPointDistance=t,this._updateLinePos())}},{key:"controlPointHeight",get:function(){return this._controlPointHeight},set:function(t){t!==this._controlPointHeight&&(this._controlPointHeight=t,this._updateLinePos())}},{key:"sampleFrequency",get:function(){return this._sampleFrequency},set:function(t){t!==this._sampleFrequency&&(this._sampleFrequency=t,this._updateLinePos())}},{key:"rayCastMask",get:function(){return this._rayCastMask},set:function(t){t!==this._rayCastMask&&(this._rayCastMask=t)}}]),i}(v)).prototype,"_forceGrab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),_t=i(lt.prototype,"_rayOriginTransform",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=i(lt.prototype,"_reticle",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=i(lt.prototype,"_lineType",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ht.Straight_Line}}),ut=i(lt.prototype,"_maxRayDistance",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),yt=i(lt.prototype,"_referenceNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=i(lt.prototype,"_velocity",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),ft=i(lt.prototype,"_acceleration",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 9.8}}),gt=i(lt.prototype,"_additionalGroundHeight",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),vt=i(lt.prototype,"_additionalFlightTime",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Pt=i(lt.prototype,"_endPointDistance",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),bt=i(lt.prototype,"_endPointHeight",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-10}}),Ot=i(lt.prototype,"_controlPointDistance",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),mt=i(lt.prototype,"_controlPointHeight",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),Ct=i(lt.prototype,"_sampleFrequency",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Et=i(lt.prototype,"_rayCastMask",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4294967295}}),i(lt.prototype,"forceGrab",[V],Object.getOwnPropertyDescriptor(lt.prototype,"forceGrab"),lt.prototype),i(lt.prototype,"rayOriginTransform",[W],Object.getOwnPropertyDescriptor(lt.prototype,"rayOriginTransform"),lt.prototype),i(lt.prototype,"reticle",[X],Object.getOwnPropertyDescriptor(lt.prototype,"reticle"),lt.prototype),i(lt.prototype,"lineType",[Y],Object.getOwnPropertyDescriptor(lt.prototype,"lineType"),lt.prototype),i(lt.prototype,"maxRayDistance",[Z],Object.getOwnPropertyDescriptor(lt.prototype,"maxRayDistance"),lt.prototype),i(lt.prototype,"referenceNode",[Q],Object.getOwnPropertyDescriptor(lt.prototype,"referenceNode"),lt.prototype),i(lt.prototype,"velocity",[J],Object.getOwnPropertyDescriptor(lt.prototype,"velocity"),lt.prototype),i(lt.prototype,"acceleration",[K],Object.getOwnPropertyDescriptor(lt.prototype,"acceleration"),lt.prototype),i(lt.prototype,"additionalGroundHeight",[$],Object.getOwnPropertyDescriptor(lt.prototype,"additionalGroundHeight"),lt.prototype),i(lt.prototype,"additionalFlightTime",[tt],Object.getOwnPropertyDescriptor(lt.prototype,"additionalFlightTime"),lt.prototype),i(lt.prototype,"endPointDistance",[it],Object.getOwnPropertyDescriptor(lt.prototype,"endPointDistance"),lt.prototype),i(lt.prototype,"endPointHeight",[et],Object.getOwnPropertyDescriptor(lt.prototype,"endPointHeight"),lt.prototype),i(lt.prototype,"controlPointDistance",[nt],Object.getOwnPropertyDescriptor(lt.prototype,"controlPointDistance"),lt.prototype),i(lt.prototype,"controlPointHeight",[rt],Object.getOwnPropertyDescriptor(lt.prototype,"controlPointHeight"),lt.prototype),i(lt.prototype,"sampleFrequency",[ot],Object.getOwnPropertyDescriptor(lt.prototype,"sampleFrequency"),lt.prototype),i(lt.prototype,"rayCastMask",[st],Object.getOwnPropertyDescriptor(lt.prototype,"rayCastMask"),lt.prototype),at=lt))||at)||at)||at)||at));s._RF.pop()}}}));

System.register("chunks:///_virtual/raycast-checker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactable.ts"],(function(t){var e,i,s,n,o,h,r,_,E,c;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,s=t._decorator,n=t.Collider,o=t.BoxCollider,h=t.UITransform,r=t.XrUIPressEventType,_=t.XrUIPressEvent,E=t.Component},function(t){c=t.XrControlEventType}],execute:function(){var a;i._RF.push({},"aaeefWAZ5BFQrbuxj/FZCHP","raycast-checker",void 0);var v=s.ccclass,d=s.help,l=s.menu,R=s.executeInEditMode;t("RaycastChecker",v("cc.RaycastChecker")(a=d("i18n:cc.RaycastChecker")(a=l("XR/XRUI/RaycastChecker")(a=R(a=function(t){function i(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this)._collider=null,e._event=new _("XrUIPressEvent"),e._hoverState="",e._pressState="",e._hasHoverEnter=!1,e}e(i,t);var s=i.prototype;return s.onLoad=function(){if(this._event.target=this.node,this._event.currentTarget=this.node,!this.node.getComponent(n)){var t=this.node.addComponent(o),e=this.node.getComponent(h);e&&(t.center.set(0,0,0),t.size.set(e.width,e.height,.01))}},s.onEnable=function(){this._collider=this.node.getComponent(n),this._collider&&(this._collider.node.on(c.HOVER_ENTERED,this._hoverEnter,this),this._collider.node.on(c.HOVER_EXITED,this._hoverExit,this),this._collider.node.on(c.HOVER_STAY,this._hoverStay,this),this._collider.node.on(c.UIPRESS_ENTERED,this._uiPressEnter,this),this._collider.node.on(c.UIPRESS_EXITED,this._uiPressExit,this))},s.onDisable=function(){this._collider&&(this._collider.node.off(c.HOVER_ENTERED,this._hoverEnter,this),this._collider.node.off(c.HOVER_EXITED,this._hoverExit,this),this._collider.node.off(c.HOVER_STAY,this._hoverStay,this),this._collider.node.off(c.UIPRESS_ENTERED,this._uiPressEnter,this),this._collider.node.off(c.UIPRESS_EXITED,this._uiPressExit,this)),this._hasHoverEnter=!1,this._hoverState=c.HOVER_EXITED},s._hoverEnter=function(t){this._event.deviceType=t.deviceType,t.hitPoint&&this._event.hitPoint.set(t.hitPoint),this._hoverState=c.HOVER_ENTERED},s._hoverExit=function(){this._hoverState=c.HOVER_EXITED},s._hoverStay=function(t){this._hasHoverEnter&&(this._event.deviceType=t.deviceType,t.hitPoint&&this._event.hitPoint.set(t.hitPoint),this._hoverState=c.HOVER_STAY)},s._uiPressEnter=function(t){this._event.deviceType=t.deviceType,t.hitPoint&&this._event.hitPoint.set(t.hitPoint),this._pressState=c.UIPRESS_ENTERED},s._uiPressExit=function(t){this._event.deviceType=t.deviceType,t.hitPoint&&this._event.hitPoint.set(t.hitPoint),this._pressState=c.UIPRESS_EXITED},s.update=function(){this._hoverState===c.HOVER_ENTERED?(this.node.emit(r.XRUI_HOVER_ENTERED,this._event),this._hasHoverEnter=!0):this._hoverState===c.HOVER_EXITED?(this.node.emit(r.XRUI_HOVER_EXITED,this._event),this._hasHoverEnter=!1):this._hoverState===c.HOVER_STAY&&this.node.emit(r.XRUI_HOVER_STAY,this._event),this._hoverState="",this._pressState===c.UIPRESS_ENTERED?this.node.emit(r.XRUI_CLICK,this._event):this._pressState===c.UIPRESS_EXITED&&this.node.emit(r.XRUI_UNCLICK,this._event.hitPoint),this._pressState=""},i}(E))||a)||a)||a)||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/rotation-axis-constraint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./axis-constraint.ts"],(function(t){var i,e,a,o,n,r,s,c,l,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,o=t.assertThisInitialized,n=t.createClass},function(t){r=t.cclegacy,s=t._decorator,c=t.ccenum,l=t.Component},function(t){p=t.AxisFlagTypes,u=t.AxisFlagType}],execute:function(){var x,y,g,f,h,F,_,b,L,S,d;r._RF.push({},"1bb178TFWxPDqDlMwZKDJMO","rotation-axis-constraint",void 0);var A=s.ccclass,C=s.help,D=s.menu,O=s.property;c(p);t("RotationAxisConstrain",(x=A("cc.RotationAxisConstrain"),y=C("i18n:cc.RotationAxisConstrain"),g=D("XR/Constrain/RotationAxisConstrain"),f=O({serializable:!0}),h=O({serializable:!0}),F=O({type:p.BitMask,displayOrder:1,tooltip:"i18n:xr-plugin.rotationAxisConstrain.axisFlag"}),_=O({displayOrder:2,tooltip:"i18n:xr-plugin.rotationAxisConstrain.useLocalSpace"}),x(b=y(b=g((S=i((L=function(t){function i(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,a(i,"_axisFlag",S,o(i)),a(i,"_useLocalSpace",d,o(i)),i}return e(i,t),n(i,[{key:"axisFlag",get:function(){return this._axisFlag},set:function(t){t!==this._axisFlag&&(this._axisFlag=t)}},{key:"useLocalSpace",get:function(){return this._useLocalSpace},set:function(t){t!==this._useLocalSpace&&(this._useLocalSpace=t)}}]),i}(l)).prototype,"_axisFlag",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.X|u.Y}}),d=i(L.prototype,"_useLocalSpace",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i(L.prototype,"axisFlag",[F],Object.getOwnPropertyDescriptor(L.prototype,"axisFlag"),L.prototype),i(L.prototype,"useLocalSpace",[_],Object.getOwnPropertyDescriptor(L.prototype,"useLocalSpace"),L.prototype),b=L))||b)||b)||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/sharp-turner.ts",["./rollupPluginModLoBabelHelpers.js","cc","./locomotion-base.ts","./xr-controller.ts"],(function(t){var e,n,i,r,o,a,u,s,c,l,p,h,d,_,f,T,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,o=t.createClass},function(t){a=t.cclegacy,u=t._decorator,s=t.ccenum,c=t.input,l=t.Input,p=t.EventGamepad,h=t.EventHandle,d=t.Quat,_=t.Vec3,f=t.misc},function(t){T=t.LocomotionBase},function(t){v=t.XrInputDeviceType}],execute:function(){var g,A,b,y,m,S,E,N,O,x,k,w,D,I;a._RF.push({},"b0a1fF4UZtCRpPJNmMeRz8M","sharp-turner",void 0);var P=u.ccclass,R=u.help,H=u.menu,M=u.property,U=function(t){return t[t.ON=0]="ON",t[t.OFF=1]="OFF",t}(U||{}),z=function(t){return t[t.THUMBSTICK_MOVE=0]="THUMBSTICK_MOVE",t}(z||{});s(U),s(z);t("SharpTurner",(g=P("cc.SharpTurner"),A=R("i18n:cc.SharpTurner"),b=H("XR/Locomotion/SharpTurner"),y=M({serializable:!0}),m=M({serializable:!0}),S=M({serializable:!0}),E=M({displayOrder:4,tooltip:"i18n:xr-plugin.sharp_turner.turnAngle"}),N=M({type:U,displayOrder:5,tooltip:"i18n:xr-plugin.sharp_turner.enableTurnAround"}),O=M({displayOrder:6,tooltip:"i18n:xr-plugin.sharp_turner.activationTimeout"}),g(x=A(x=b((w=e((k=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"_turnAngle",w,r(e)),i(e,"_enableTurnAround",D,r(e)),i(e,"_activationTimeout",I,r(e)),e._waitEnd=!0,e._xrSessionNode=null,e._stickClickState=0,e}n(e,t);var a=e.prototype;return a.onEnable=function(){this._findChecker(),c.on(l.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),c.on(l.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},a.onDisable=function(){c.off(l.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),c.off(l.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},a._dispatchEventHandleInput=function(t){var e,n,i,r;t instanceof p?n=t.gamepad:t instanceof h&&(n=t.handleInputDevice),(null==(e=this.inputDevice)?void 0:e.inputDevice)===v.Left_Hand?(i=n.leftStick.getValue(),this._enableTurnAround===U.ON&&(r=t instanceof p?n.buttonL3.getValue():n.buttonLeftStick.getValue())):(i=n.rightStick.getValue(),this._enableTurnAround===U.ON&&(r=t instanceof p?n.buttonR3.getValue():n.buttonRightStick.getValue())),this._turnMove(i),!this._stickClickState&&r&&this._turnAround(),this._stickClickState=r},a._turnMove=function(t){var e,n=this;if(0!==t.x){var i=null==(e=this._checker)?void 0:e.XR_Agent;if(i&&(this._xrSessionNode=i),this._xrSessionNode&&this._waitEnd){var r=new d;t.x<0?d.rotateAround(r,this._xrSessionNode.rotation,_.UP,f.degreesToRadians(this._turnAngle)):t.x>0&&d.rotateAround(r,this._xrSessionNode.rotation,_.UP,f.degreesToRadians(-this._turnAngle)),this._xrSessionNode.setRotation(r),this._waitEnd=!1,this.scheduleOnce((function(){n._waitTimeout()}),this._activationTimeout)}}},a._turnAround=function(){var t,e=null==(t=this._checker)?void 0:t.XR_Agent;if(e&&(this._xrSessionNode=e),this._xrSessionNode){var n=new d;d.rotateAround(n,this._xrSessionNode.rotation,_.UP,f.degreesToRadians(180)),this._xrSessionNode.setRotation(n)}},a._waitTimeout=function(){this._waitEnd=!0},o(e,[{key:"turnAngle",get:function(){return this._turnAngle},set:function(t){t!==this._turnAngle&&(this._turnAngle=t)}},{key:"enableTurnAround",get:function(){return this._enableTurnAround},set:function(t){t!==this._enableTurnAround&&(this._enableTurnAround=t)}},{key:"activationTimeout",get:function(){return this._activationTimeout},set:function(t){t!==this._activationTimeout&&(this._activationTimeout=t)}}]),e}(T)).prototype,"_turnAngle",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),D=e(k.prototype,"_enableTurnAround",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return U.ON}}),I=e(k.prototype,"_activationTimeout",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),e(k.prototype,"turnAngle",[E],Object.getOwnPropertyDescriptor(k.prototype,"turnAngle"),k.prototype),e(k.prototype,"enableTurnAround",[N],Object.getOwnPropertyDescriptor(k.prototype,"enableTurnAround"),k.prototype),e(k.prototype,"activationTimeout",[O],Object.getOwnPropertyDescriptor(k.prototype,"activationTimeout"),k.prototype),x=k))||x)||x)||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/spacesxr-device.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./xr-interface.ts","./ar-device-base.ts","./index5.ts","./index.ts"],(function(t){var e,i,r,n,s,a,o,c,u,l,f,h,p,d,T;return{setters:[function(t){e=t.inheritsLoose,i=t.createForOfIteratorHelperLoose,r=t.createClass},function(t){n=t.cclegacy,s=t.sys,a=t.Vec3,o=t.Quat},function(t){c=t.ARAPI,u=t.ARTrackingState,l=t.FeatureType},function(t){f=t.xrInterface,h=t.XRConfigKey},function(t){p=t.ARDevice},function(t){d=t},function(t){T=t}],execute:function(){n._RF.push({},"e6bb3hsMD1FLpTHUmiAxglD","spacesxr-device",void 0);var g=function(){function t(){this.targetId=0,this.position=new a,this.rotation=new o,this.surfaceNormal=new a,this.isValid=!1}return t.prototype.parseData=function(t){if(this.isValid=!1,t&&t.length>0){var e=t.split("|");e.length>0&&(this.targetId=parseInt(e[0]),this.position.x=parseFloat(e[1]),this.position.y=parseFloat(e[2]),this.position.z=parseFloat(e[3]),this.surfaceNormal.x=parseFloat(e[4]),this.surfaceNormal.y=parseFloat(e[5]),this.surfaceNormal.z=parseFloat(e[6]),o.fromViewUp(this.rotation,a.UNIT_Z,this.surfaceNormal),this.isValid=!0)}},t}();t("SpacesXRDevice",function(t){function n(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))||this)._hitResult=new g,e._isHitTestingStarted=!1,e._hitTestingTrackingState=u.PAUSED,e}e(n,t);var a=n.prototype;return a.getAPIState=function(){return c.SpacesXR},a.screenHitTest=function(t,e){return Promise.reject(new Error("mobile device Ray hit test is not supported "))},a.worldHitTest=function(t,e){var i=this;return new Promise((function(t,r){if(e){if(i._hitTestingTrackingState===u.STOPPED)return void r(u.STOPPED);if(!i._isHitTestingStarted)return f.setIntConfig(h.HIT_TESTING,1),i._isHitTestingStarted=!0,void r(u.STARTING);if(s.isXR&&i._hitResult.isValid){var n={id:i._hitResult.targetId,pose:{position:i._hitResult.position.clone(),rotation:i._hitResult.rotation.clone()}};n.trackingState=u.TRACKING,t(n)}else r(u.STARTED)}}))},a.checkHandlerAvailable=function(t){return!!T[t]},a.createHandler=function(t){var e=this.HandlerPrefix+l[t.featureId];return this.checkHandlerAvailable(e)?new T[e](this,t):(console.error("SpacesXRDevice.createHandler."+e+" failed !!!"),null)},a.checkFeatureAvailable=function(t){return!!d[t]},a.createFeature=function(t){return new d[t](this)},a.init=function(t,e){for(var r,n=i(e);!(r=n()).done;){var s=r.value;console.log("SpacesXRDevice ARFeatureData."+s.type+","+s.enable)}return this.createFeatures(e),this.createHandlers(),this.initFeatures(e),Promise.resolve(!0)},a.start=function(){this._featuresMap.forEach((function(t,e){t.start()}))},a.stop=function(){this._featuresMap.forEach((function(t){t.stop()})),this._isHitTestingStarted&&(f.setIntConfig(h.HIT_TESTING,0),this._isHitTestingStarted=!1,this._hitTestingTrackingState=u.STOPPED)},a.update=function(){if(this.updateHandlers(),this._isHitTestingStarted&&s.isXR){var t=f.getStringConfig(h.HIT_TESTING_DATA);t.length>0&&this._hitResult.parseData(t)}},r(n,[{key:"HandlerPrefix",get:function(){return"SpacesXRHandler"}}]),n}(p));n._RF.pop()}}}));

System.register("chunks:///_virtual/spacesxr-handler-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var t,a,n,r,u,c;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){n=e.cclegacy,r=e.Vec3,u=e.Quat},function(e){c=e.ARHandlerCameraDevice}],execute:function(){n._RF.push({},"b9116YLbYBM6ZjlyDVZTpFT","spacesxr-handler-camera",void 0);e("SpacesXRHandlerCameraDevice",function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var c=n.prototype;return c.enableCameraAutoFocus=function(e){},c.getCameraPose=function(){return{position:new r,rotation:new u}},c.getCameraFov=function(){return 45},c.update=function(){var e;this._feature&&null!=(e=this._feature.config)&&e.enable&&this._feature.update()},a(n,[{key:"Camera",set:function(e){this._camera=e}}]),n}(c));n._RF.pop()}}}));

System.register("chunks:///_virtual/spacesxr-handler-image.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./xr-interface.ts","./ar-handler-base.ts"],(function(e){var a,t,i,n,r,s,o,I,g,h,m;return{setters:[function(e){a=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,n=e.sys,r=e.Size,s=e.Vec3,o=e.Quat},function(e){I=e.ARTrackingState},function(e){g=e.xrInterface,h=e.XRConfigKey},function(e){m=e.ARHandlerImageTracking}],execute:function(){i._RF.push({},"41c5eFqpRFEIqM+J/HjWAAf","spacesxr-handler-image",void 0);var p=function(){function e(){this.id=0,this.name="",this.arImage={id:0,libIndex:0,trackingState:I.STOPPED,extent:new r(1,1),pose:{position:new s,rotation:new o}},e._internalId++}var a=e.prototype;return a.parseData=function(a){if(this.arImage.trackingState=I.STOPPED,a){this.id=e._internalId;var t=a.split("|");this.name=t[0],this.arImage.id=parseInt(this.name.split("_")[1]),this.arImage.libIndex=0,this.arImage.trackingState=I.TRACKING,this.arImage.pose.position.x=parseFloat(t[1]),this.arImage.pose.position.y=parseFloat(t[2]),this.arImage.pose.position.z=parseFloat(t[3]),this.arImage.pose.rotation.x=parseFloat(t[4]),this.arImage.pose.rotation.y=parseFloat(t[5]),this.arImage.pose.rotation.z=parseFloat(t[6]),this.arImage.pose.rotation.w=parseFloat(t[7]),this.arImage.extent&&(this.arImage.extent.x=1,this.arImage.extent.y=1)}},a.cloneFrom=function(e){this.id=e.id,this.name=e.name,this.arImage.libIndex=e.arImage.libIndex,this.arImage.trackingState=e.arImage.trackingState,this.arImage.extent&&e.arImage.extent&&(this.arImage.extent.x=e.arImage.extent.x,this.arImage.extent.y=e.arImage.extent.y),this.arImage.pose.position.x=e.arImage.pose.position.x,this.arImage.pose.position.y=e.arImage.pose.position.y,this.arImage.pose.position.z=e.arImage.pose.position.z,this.arImage.pose.rotation.x=e.arImage.pose.rotation.x,this.arImage.pose.rotation.y=e.arImage.pose.rotation.y,this.arImage.pose.rotation.z=e.arImage.pose.rotation.z,this.arImage.pose.rotation.w=e.arImage.pose.rotation.w},e}();p._internalId=0;var d=function(e,a,t,i){this.name=void 0,this.assetPath=void 0,this.widthInMeters=void 0,this.heightInMeters=void 0,this.name=e,this.assetPath=a,this.widthInMeters=t,this.heightInMeters=i};e("SpacesXRHandlerImageTracking",function(e){function i(){for(var a,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(a=e.call.apply(e,[this].concat(i))||this)._referenceImageAssets=new Map,a._trackingImageInfo=new Map,a._previousTrackingImageInfo=new Map,a._addedImageInfos=[],a._updatedImageInfos=[],a._removedImageInfos=[],a._imageNameLibIndex=new Map,a}a(i,e);var r=i.prototype;return r.enableImageTracking=function(e){g.setIntConfig(h.IMAGE_TRACKING,e?1:0)},r.addImagesToLib=function(e){if(e&&e.length>0)for(var a,i=100,n=0,r=t(e);!(a=r()).done;){var s=a.value,o="ImageName_"+i;if(i++,!this._referenceImageAssets.has(o)){console.log("SpacesXRHandlerImageTracking.addImagesToLib."+o+","+s.widthInMeters+"x"+s.heightInMeters+","+s.assetPath);var I=o+"|@assets/"+s.assetPath+"|"+s.widthInMeters+"|"+s.heightInMeters;g.setStringConfig(h.IMAGE_TRACKING_CANDIDATEIMAGE,I),this._referenceImageAssets.set(o,new d(o,s.assetPath,s.widthInMeters,s.heightInMeters)),this._imageNameLibIndex.set(o,n),n++}}},r.setImageMaxTrackingNumber=function(e){console.log("SpacesXRHandlerImageTracking::setImageMaxTrackingNumber:"+e)},r.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable&&n.isXR){var a=g.getStringConfig(h.IMAGE_TRACKING_DATA);this._addedImageInfos=[],this._updatedImageInfos=[],this._removedImageInfos=[],this._trackingImageInfo.clear();var i=[];a.length>0&&(i=a.split("&"));for(var r,s=t(i);!(r=s()).done;){var o=r.value;if(o.length>0){var m=new p;m.parseData(o);var d=this._referenceImageAssets.get(m.name);m.arImage.extent&&d&&(m.arImage.extent.x=d.widthInMeters,m.arImage.extent.y=d.heightInMeters),m.arImage.trackingState=I.TRACKING;var f=this._imageNameLibIndex.get(m.name);m.arImage.libIndex=f||0,this._trackingImageInfo.set(m.name,m)}}for(var c,l=t(this._previousTrackingImageInfo);!(c=l()).done;){var u=c.value,v=u[0],_=u[1];this._trackingImageInfo.has(v)||(_.arImage.trackingState=I.PAUSED,this._removedImageInfos.push(_))}for(var x,k=t(this._trackingImageInfo);!(x=k()).done;){var T=x.value,A=T[0],M=T[1];this._previousTrackingImageInfo.has(A)?(M.arImage.trackingState=I.TRACKING,this._updatedImageInfos.push(M)):(M.arImage.trackingState=I.TRACKING,this._addedImageInfos.push(M))}this._previousTrackingImageInfo.clear();for(var S,w=t(this._trackingImageInfo);!(S=w()).done;){var y=S.value,R=y[0],b=y[1];this._previousTrackingImageInfo.set(R,b)}if(this._addedImageInfos.length>0){for(var N,F=[],C=t(this._addedImageInfos);!(N=C()).done;){var G=N.value;F.push(G.arImage)}this._feature.onAddTracking(F)}if(this._updatedImageInfos.length>0){for(var E,P=[],D=t(this._updatedImageInfos);!(E=D()).done;){var K=E.value;P.push(K.arImage)}this._feature.onUpdateTracking(P)}if(this._removedImageInfos.length>0){for(var L,z=[],H=t(this._removedImageInfos);!(L=H()).done;){var X=L.value;z.push(X.arImage)}this._feature.onRemoveTracking(z)}}},i}(m)).IMAGE_INFO_SIZE=12,i._RF.pop()}}}));

System.register("chunks:///_virtual/spacesxr-handler-plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./xr-interface.ts","./ar-handler-base.ts"],(function(e){var t,a,n,r,i,s,o,l,p,h,P,f;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,r=e.sys,i=e.Vec2,s=e.Size,o=e.Vec3,l=e.Quat},function(e){p=e.ARTrackingState},function(e){h=e.xrInterface,P=e.XRConfigKey},function(e){f=e.ARHandlerPlaneDetection}],execute:function(){n._RF.push({},"ec84f2jdcBHR5u5Oc/0fQNc","spacesxr-handler-plane",void 0);var d=function(){function e(){this.vertexs=[],this.confidence=0,this.externSizeWidth=new i,this.externSizeHeight=new i,this.arPlane={id:0,type:1,trackingState:p.STOPPED,extent:new s(1,1),pose:{position:new o,rotation:new l}}}return e.prototype.cloneFrom=function(e){this.arPlane.id=e.arPlane.id,this.arPlane.type=e.arPlane.type,this.arPlane.extent&&e.arPlane.extent&&(this.arPlane.extent.x=e.arPlane.extent.x,this.arPlane.extent.y=e.arPlane.extent.y),this.arPlane.pose.position.x=e.arPlane.pose.position.x,this.arPlane.pose.position.y=e.arPlane.pose.position.y,this.arPlane.pose.position.z=e.arPlane.pose.position.z,this.arPlane.pose.rotation.x=e.arPlane.pose.rotation.x,this.arPlane.pose.rotation.y=e.arPlane.pose.rotation.y,this.arPlane.pose.rotation.z=e.arPlane.pose.rotation.z,this.arPlane.pose.rotation.w=e.arPlane.pose.rotation.w,this.arPlane.trackingState=e.arPlane.trackingState,this.externSizeWidth.x=e.externSizeWidth.x,this.externSizeWidth.y=e.externSizeWidth.y,this.externSizeHeight.x=e.externSizeHeight.x,this.externSizeHeight.y=e.externSizeHeight.y,this.confidence=e.confidence,this.vertexs=[];for(var t,n=a(e.vertexs);!(t=n()).done;){var r=t.value;this.vertexs.push(r)}},e}(),c=function(){function e(){this.planeDatas=new Array}return e.prototype.parseData=function(e){if(this.planeDatas=[],e&&e.length>0){var t=e.split("&");if(t.length>0)for(var n,r=a(t);!(n=r()).done;){var s=n.value;if(s.length>0){var o=s.split("|"),l=new d;l.vertexs=[],l.arPlane.id=parseInt(o[0]),l.confidence=parseFloat(o[1]),l.arPlane.type=1<<parseInt(o[2]),l.externSizeWidth.x=parseFloat(o[3]),l.externSizeWidth.y=parseFloat(o[4]),l.externSizeHeight.x=parseFloat(o[5]),l.externSizeHeight.y=parseFloat(o[6]),l.arPlane.extent&&(l.arPlane.extent.x=l.externSizeWidth.y-l.externSizeWidth.x,l.arPlane.extent.y=l.externSizeHeight.y-l.externSizeHeight.x),l.arPlane.pose.position.x=parseFloat(o[7]),l.arPlane.pose.position.y=parseFloat(o[8]),l.arPlane.pose.position.z=parseFloat(o[9]),l.arPlane.pose.rotation.x=parseFloat(o[10]),l.arPlane.pose.rotation.y=parseFloat(o[11]),l.arPlane.pose.rotation.z=parseFloat(o[12]),l.arPlane.pose.rotation.w=parseFloat(o[13]);for(var p=parseInt(o[14]),h=0;h<p;h++){var P=new i;P.x=parseFloat(o[15+2*h]),P.y=parseFloat(o[15+2*h+1]),l.vertexs.push(P)}this.planeDatas.push(l)}}}},e}();e("SpacesXRHandlerPlaneDetection",function(e){function n(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._planeDetectionResult=new c,t._planesMap=new Map,t._previousPlanesInfo=new Map,t._addedPlaneInfos=[],t._updatedPlaneInfos=[],t._removedPlaneInfos=[],t}t(n,e);var i=n.prototype;return i.enablePlane=function(e){h.setIntConfig(P.PLANE_DETECTION,e?1:0)},i.setPlaneDetectionMode=function(e){console.log("SpacesXRHandlerPlaneDetection.setPlaneDetectionMode."+e)},i.getPlanePolygon=function(e){return this._planesMap.has(e)?this._planesMap.get(e).vertexs:new Array},i.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable&&r.isXR){var t=h.getStringConfig(P.PLANE_DETECTION_DATA);if(t.length>0&&(this._addedPlaneInfos=[],this._removedPlaneInfos=[],this._updatedPlaneInfos=[],this._planeDetectionResult.parseData(t),this._planeDetectionResult.planeDatas.length>0)){for(var n,i=a(this._planeDetectionResult.planeDatas);!(n=i()).done;){var s=n.value;s.arPlane.trackingState=p.TRACKING,this._planesMap.has(s.arPlane.id)?this._planesMap.get(s.arPlane.id).cloneFrom(s):(this._planesMap.set(s.arPlane.id,s),this._addedPlaneInfos.push(s))}for(var o,l=a(this._previousPlanesInfo);!(o=l()).done;){var f=o.value,d=f[0],c=f[1];this._planesMap.has(d)?this._updatedPlaneInfos.push(c):(c.arPlane.trackingState=p.PAUSED,this._removedPlaneInfos.push(c))}this._previousPlanesInfo.clear();for(var u,x=a(this._planesMap);!(u=x()).done;){var v=u.value,_=v[0],g=v[1];this._previousPlanesInfo.set(_,g)}}if(this._addedPlaneInfos.length>0){for(var y,S=[],I=a(this._addedPlaneInfos);!(y=I()).done;){var z=y.value;S.push(z.arPlane)}this._feature.onAddTracking(S)}if(this._updatedPlaneInfos.length>0){for(var D,F=[],w=a(this._updatedPlaneInfos);!(D=w()).done;){var H=D.value;F.push(H.arPlane)}this._feature.onUpdateTracking(F)}if(this._removedPlaneInfos.length>0){for(var R,A=[],M=a(this._removedPlaneInfos);!(R=M()).done;){var T=R.value;A.push(T.arPlane)}this._feature.onRemoveTracking(A)}}},n}(f)).PLANE_INFO_SIZE=12,n._RF.pop()}}}));

System.register("chunks:///_virtual/spacesxr-handler-scene-mesh.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./xr-extension.ts","./xr-interface.ts","./ar-handler-base.ts"],(function(e){var n,t,r,i,a,s,o,c,u,h,d;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,r=e.Vec3,i=e.Quat},function(e){a=e.ARTrackingState},function(e){s=e.xrExtension,o=e.XrExtensionKey,c=e.XrBufferOperationType},function(e){u=e.xrInterface,h=e.XRConfigKey},function(e){d=e.ARHandlerSceneMesh}],execute:function(){t._RF.push({},"fdd488DqLdLDoGdP/kvSGuC","spacesxr-handler-scene-mesh",void 0);var f=function(){function e(){this.meshId=0,this.vertexCount=0,this.indexCount=0}return e.prototype.print=function(e){console.log(e+" | MeshInfo: id."+this.meshId+",V."+this.vertexCount+",I."+this.indexCount)},e}();e("SpacesXRHandlerSceneMesh",function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var d=t.prototype;return d.enableSceneMesh=function(e){console.log("SpacesXRHandlerSceneMesh.enableSceneMesh."+e),u.setIntConfig(h.SPATIAL_MESHING,e?1:0)},d.update=function(){var e;if(this._feature&&null!=(e=this._feature.config)&&e.enable){var n=s.getUInt32Data(o.XEK_SPACES_MESH_INFO),t=0,u=n[t];t++;var h=[];h.length=0;for(var d=0;d<u;d++){var S=new f;S.meshId=n[t+3*d],S.vertexCount=n[t+3*d+1],S.indexCount=n[t+3*d+2];var l=new Float32Array(3*S.vertexCount),v=new Uint32Array(S.indexCount);s.syncSharedBufferWithNative_Float32(o.XEK_SPACES_MESH_VERTICES,c.XBOT_GET,l,S.meshId),s.syncSharedBufferWithNative_UINT32(o.XEK_SPACES_MESH_INDICES,c.XBOT_GET,v,S.meshId);var I={id:S.meshId,pose:{position:r.ZERO,rotation:i.IDENTITY},vertices:[],indices:[],verticesArray:l,indicesArray:v};I.trackingState=a.TRACKING,h.push(I)}h.length>0&&(console.log("onAddTracking"),this._feature.onAddTracking(h));var _=n[t=3*u+1];t++,h.length=0;for(var p=0;p<_;p++){var E=new f;E.meshId=n[t+3*p],E.vertexCount=n[t+3*p+1],E.indexCount=n[t+3*p+2];var C=new Float32Array(3*E.vertexCount),g=new Uint32Array(E.indexCount);s.syncSharedBufferWithNative_Float32(o.XEK_SPACES_MESH_VERTICES,c.XBOT_GET,C,E.meshId),s.syncSharedBufferWithNative_UINT32(o.XEK_SPACES_MESH_INDICES,c.XBOT_GET,g,E.meshId);var x={id:E.meshId,pose:{position:new r(0,0,0),rotation:new i(0,0,0,1)},vertices:[],indices:[],verticesArray:C,indicesArray:g};x.trackingState=a.TRACKING,h.push(x)}h.length>0&&this._feature.onUpdateTracking(h);var T=n[t=1+3*u+1+3*_];t++,h.length=0;for(var A=0;A<T;A++){var y=new f;y.meshId=n[t+3*A],y.vertexCount=n[t+3*A+1],y.indexCount=n[t+3*A+2];var m={id:y.meshId,pose:{position:new r(0,0,0),rotation:new i(0,0,0,1)},vertices:[],indices:[]};m.trackingState=a.PAUSED,h.push(m)}h.length>0&&this._feature.onRemoveTracking(h)}else console.error("SpacesXRHandlerSceneMesh.update failed, feature disabled !!!")},t}(d));t._RF.pop()}}}));

System.register("chunks:///_virtual/surface-overlay.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-tracking-base.ts","./ar-enum.ts","./action-base.ts"],(function(e){var t,r,i,a,s,o,n,c,u,l,f,p,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,s=e.createClass},function(e){o=e.cclegacy,n=e._decorator,c=e.Vec3,u=e.Prefab,l=e.Mat4},function(e){f=e.ARTrackingBase},function(e){p=e.ActionType},function(e){y=e.ARActionUpdateBase}],execute:function(){var d,_,h,O,v,b,g,z,A;o._RF.push({},"1ac8buaUPtETLcA61wKTMQ8","surface-overlay",void 0);var V=n.ccclass,k=n.property;e("ARSurfaceOverlay",(d=V("cc.ARSurfaceOverlay"),_=k({serializable:!0}),h=k({serializable:!0}),O=k({type:c,displayOrder:1,tooltip:"i18n:xr-plugin.action.surface_overlay.surfaceOffset"}),v=k({type:u,displayOrder:2,tooltip:"i18n:xr-plugin.action.surface_overlay.replaceVisualizer"}),d((z=t((g=function(e){function t(){var t;return t=e.call(this)||this,i(t,"_surfaceOffset",z,a(t)),i(t,"_replaceVisualizer",A,a(t)),t.type=p.SURFACE_OVERLAY,t.priority=1,t}r(t,e);var o=t.prototype;return o.runAction=function(e){if(e.trackingNode){var t=e.trackingNode.getComponent(f);this.getActivated(null==t?void 0:t.trackingType)||(e.replaceVisualizer=this._replaceVisualizer,this._updateAction(e),this.setActivated(!0))}},o._addOffset=function(e,t){var r=new l;l.fromRT(r,e,t);var i=new c;return c.transformMat4(i,this._surfaceOffset,r),i},o._updateAction=function(e){e.pose.position.set(this._addOffset(e.pose.rotation,e.pose.position)),e.trackablePose&&e.trackablePose.position.set(this._addOffset(e.trackablePose.rotation,e.trackablePose.position))},o.updateAction=function(e){e.closeTracking||this._updateAction(e)},o.reset=function(){this.setActivated(!1),this.surfaceOffset=new c(0,0,0),this.replaceVisualizer=null},s(t,[{key:"surfaceOffset",get:function(){return this._surfaceOffset},set:function(e){e!==this._surfaceOffset&&(this._surfaceOffset=e)}},{key:"replaceVisualizer",get:function(){return this._replaceVisualizer},set:function(e){e!==this._replaceVisualizer&&(this._replaceVisualizer=e)}}]),t}(y)).prototype,"_surfaceOffset",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,0,0)}}),A=t(g.prototype,"_replaceVisualizer",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(g.prototype,"surfaceOffset",[O],Object.getOwnPropertyDescriptor(g.prototype,"surfaceOffset"),g.prototype),t(g.prototype,"replaceVisualizer",[v],Object.getOwnPropertyDescriptor(g.prototype,"replaceVisualizer"),g.prototype),b=g))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/target-eye.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,a,n,i,o,c,p,y,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,i=e.createClass},function(e){o=e.cclegacy,c=e._decorator,p=e.ccenum,y=e.CameraComponent,s=e.renderer,u=e.Component}],execute:function(){var l,T,g,E,m,f,h,d;o._RF.push({},"8909cpyL+hIQrKUBvDwkdo8","target-eye",void 0);var C=c.ccclass,_=c.help,v=c.menu,b=c.property,I=c.executeInEditMode,H=e("TargetEye_Type",function(e){return e[e.BOTH=0]="BOTH",e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e}({}));p(H);e("TargetEye",(l=C("cc.TargetEye"),T=_("i18n:cc.TargetEye"),g=v("XR/Device/TargetEye"),E=b({serializable:!0}),m=b({type:H,displayOrder:1,tooltip:"i18n:xr-plugin.target_eye.targetEye"}),l(f=T(f=g(f=I((d=t((h=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"_targetEye",d,n(t)),t}r(t,e);var o=t.prototype;return o.setCameraType=function(){var e,t=null==(e=this.node)?void 0:e.getComponent(y);if(t)switch(this._targetEye){case H.LEFT:t.cameraType=s.scene.CameraType.LEFT_EYE;break;case H.RIGHT:t.cameraType=s.scene.CameraType.RIGHT_EYE;break;default:t.cameraType=s.scene.CameraType.MAIN}},o.resetCameraType=function(){var e,t=null==(e=this.node)?void 0:e.getComponent(y);t&&(t.cameraType=s.scene.CameraType.MAIN)},o.onEnable=function(){this.setCameraType()},o.onDisable=function(){this.resetCameraType()},i(t,[{key:"targetEye",get:function(){return this._targetEye},set:function(e){e!==this._targetEye&&(this._targetEye=e,this.setCameraType())}}]),t}(u)).prototype,"_targetEye",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.BOTH}}),t(h.prototype,"targetEye",[m],Object.getOwnPropertyDescriptor(h.prototype,"targetEye"),h.prototype),f=h))||f)||f)||f)||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/teleportable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactable.ts","./teleporter.ts"],(function(e){var t,i,r,o,l,n,c,s,p,a,h,d,_,g,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createClass},function(e){n=e.cclegacy,c=e._decorator,s=e.ccenum,p=e.Node},function(e){a=e.InteractorTriggerState,h=e.XrControlEventType,d=e.InteractorState,_=e.StateType,g=e.XrInteractable},function(e){u=e.Teleporter}],execute:function(){var y,f,b,A,v,T,C,O,N,S,m,E,R,P,x,D,k;n._RF.push({},"a79bdCgK/pB3b5BznAEWwas","teleportable",void 0);var w=c.ccclass,z=c.help,W=c.menu,I=c.property,X=function(e){return e[e.Area=0]="Area",e[e.Anchor=1]="Anchor",e}(X||{}),j=function(e){return e[e.OnSelectExited=0]="OnSelectExited",e[e.OnSelectEntered=1]="OnSelectEntered",e[e.OnActivated=2]="OnActivated",e[e.OnDeactivited=3]="OnDeactivited",e}(j||{});s(X),s(j);e("Teleportable",(y=w("cc.Teleportable"),f=z("i18n:cc.Teleportable"),b=W("XR/Interaction/Teleportable"),A=I({serializable:!0}),v=I({serializable:!0}),T=I({serializable:!0}),C=I({serializable:!0}),O=I({type:X,displayOrder:1,tooltip:"i18n:xr-plugin.teleportable.teleportableType"}),N=I({type:p,displayOrder:2,visible:function(){return this._teleportableType===X.Anchor},tooltip:"i18n:xr-plugin.teleportable.teleportAnchorNode"}),S=I({type:j,displayOrder:5,tooltip:"i18n:xr-plugin.teleportable.teleportTrigger"}),m=I({type:u,displayOrder:6,tooltip:"i18n:xr-plugin.teleportable.teleporter"}),y(E=f(E=b((P=t((R=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),n=0;n<i;n++)l[n]=arguments[n];return t=e.call.apply(e,[this].concat(l))||this,r(t,"_teleportableType",P,o(t)),r(t,"_teleportAnchorNode",x,o(t)),r(t,"_teleportTrigger",D,o(t)),r(t,"_teleporter",k,o(t)),t._teleportIsCanceled=!1,t}i(t,e);var n=t.prototype;return n.onEnable=function(){if(this._colliderCom){switch(this._teleportTrigger){case j.OnSelectExited:case j.OnSelectEntered:this._colliderCom.node.on(a.Select_Start,this._selectEntered,this),this._colliderCom.node.on(a.Select_End,this._selectExited,this),this._colliderCom.node.on(a.Select_Canceled,this._selectCanceled,this);break;case j.OnActivated:case j.OnDeactivited:this._colliderCom.node.on(a.Activite_Start,this._activited,this),this._colliderCom.node.on(a.Activite_End,this._deactivited,this),this._colliderCom.node.on(a.Activite_Canceled,this._activitetCanceled,this)}this.teleportableType===X.Area&&this._colliderCom.node.on(h.HOVER_STAY,this._setRayReticle,this)}},n.onDisable=function(){if(this._colliderCom){switch(this._teleportTrigger){case j.OnSelectExited:case j.OnSelectEntered:this._colliderCom.node.off(a.Select_Start,this._selectEntered,this),this._colliderCom.node.off(a.Select_End,this._selectExited,this),this._colliderCom.node.off(a.Select_Canceled,this._selectCanceled,this);break;case j.OnActivated:case j.OnDeactivited:this._colliderCom.node.off(a.Activite_Start,this._activited,this),this._colliderCom.node.off(a.Activite_End,this._deactivited,this),this._colliderCom.node.off(a.Activite_Canceled,this._activitetCanceled,this)}this.teleportableType===X.Area&&this._colliderCom.node.off(h.HOVER_STAY,this._setRayReticle,this)}},n._selectEntered=function(e){var t;this._triggerNode=e.triggerNode,this._teleportTrigger===j.OnSelectEntered&&this._teleportAction(e),null==(t=this._triggerNode)||t.emit(d.Start,_.Select)},n._selectExited=function(e){var t;this._triggerNode&&(this._teleportTrigger===j.OnSelectExited&&this._teleportAction(e),null==(t=this._triggerNode)||t.emit(d.End,_.Select),this._triggerNode=null)},n._selectCanceled=function(e){var t;null==(t=this._triggerNode)||t.emit(d.Cancel,_.Select),this._teleportIsCanceled=!0,this._triggerNode=null},n._activited=function(e){var t;this._triggerNode=e.triggerNode,this._teleportTrigger===j.OnActivated&&this._teleportAction(e),null==(t=this._triggerNode)||t.emit(d.Start,_.Activite)},n._deactivited=function(e){var t;this._triggerNode&&(this._teleportTrigger===j.OnDeactivited&&this._teleportAction(e),null==(t=this._triggerNode)||t.emit(d.End,_.Activite),this._triggerNode=null)},n._activitetCanceled=function(e){var t;null==(t=this._triggerNode)||t.emit(d.Cancel,_.Activite),this._teleportIsCanceled=!0,this._triggerNode=null},n._setRayReticle=function(e){this._rayReticle&&(this._teleportableType===X.Anchor?this._teleportAnchorNode?this._rayReticle.setWorldPosition(this._teleportAnchorNode.getWorldPosition()):e.attachNode&&this._rayReticle.setWorldPosition(this.node.getWorldPosition()):e.hitPoint&&this._rayReticle.setWorldPosition(e.hitPoint),this._rayReticle.active=!0)},n._teleportToModel=function(e){var t,i,r,o;(this._rayReticle&&(this._rayReticle.active=!1),this._teleportableType===X.Anchor)?null!=(r=this._teleporter)&&null!=(o=r.checker)&&o.XR_Agent&&(this._teleportAnchorNode?this._teleporter.checker.XR_Agent.setWorldPosition(this._teleportAnchorNode.getWorldPosition()):e.attachNode&&this._teleporter.checker.XR_Agent.setWorldPosition(this.node.getWorldPosition())):null!=(t=this._teleporter)&&null!=(i=t.checker)&&i.XR_Agent&&e.hitPoint&&this._teleporter.checker.XR_Agent.setWorldPosition(e.hitPoint)},n._teleportAction=function(e){e&&this._colliderCom&&e.hitPoint&&this._teleportToModel(e)},l(t,[{key:"teleportableType",get:function(){return this._teleportableType},set:function(e){e!==this._teleportableType&&(this._teleportableType=e)}},{key:"teleportAnchorNode",get:function(){return this._teleportAnchorNode},set:function(e){e!==this._teleportAnchorNode&&(this._teleportAnchorNode=e)}},{key:"teleportTrigger",get:function(){return this._teleportTrigger},set:function(e){e!==this._teleportTrigger&&(this._teleportTrigger=e)}},{key:"teleporter",get:function(){return this._teleporter},set:function(e){e!==this._teleporter&&(this._teleporter=e)}}]),t}(g)).prototype,"_teleportableType",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.Area}}),x=t(R.prototype,"_teleportAnchorNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"_teleportTrigger",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.OnSelectExited}}),k=t(R.prototype,"_teleporter",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(R.prototype,"teleportableType",[O],Object.getOwnPropertyDescriptor(R.prototype,"teleportableType"),R.prototype),t(R.prototype,"teleportAnchorNode",[N],Object.getOwnPropertyDescriptor(R.prototype,"teleportAnchorNode"),R.prototype),t(R.prototype,"teleportTrigger",[S],Object.getOwnPropertyDescriptor(R.prototype,"teleportTrigger"),R.prototype),t(R.prototype,"teleporter",[m],Object.getOwnPropertyDescriptor(R.prototype,"teleporter"),R.prototype),E=R))||E)||E)||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/teleporter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./locomotion-checker.ts"],(function(e){var t,r,c,o,n,i,l,p,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,c=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){i=e.cclegacy,l=e._decorator,p=e.director,s=e.Component},function(e){a=e.LocomotionChecker}],execute:function(){var u,h,f,y,k,d,_,g;i._RF.push({},"e7e92lZGvtDz47cctobtX/d","teleporter",void 0);var v=l.ccclass,b=l.help,m=l.menu,z=l.property,C=l.executeInEditMode;e("Teleporter",(u=v("cc.Teleporter"),h=b("i18n:cc.Teleporter"),f=m("XR/Locomotion/Teleporter"),y=z({serializable:!0}),k=z({type:a,displayOrder:1,tooltip:"i18n:xr-plugin.teleporter.checker"}),u(d=h(d=f(d=C((g=t((_=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,c(t,"_checker",g,o(t)),t}return r(t,e),t.prototype.onEnable=function(){if(!this._checker){var e=p.getScene();if(e){var t=e.getComponentInChildren(a);t&&(this._checker=t)}}},n(t,[{key:"checker",get:function(){return this._checker},set:function(e){e!==this._checker&&(this._checker=e)}}]),t}(s)).prototype,"_checker",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(_.prototype,"checker",[k],Object.getOwnPropertyDescriptor(_.prototype,"checker"),_.prototype),d=_))||d)||d)||d)||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/TestImageSize.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Label,r=t.Component}],execute:function(){var s;n._RF.push({},"84dc6XspghA0pHGq9KBvavV","TestImageSize",void 0);var c=i.ccclass;i.property,t("TestImageSize",c("TestImageSize")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.start=function(){},i.onTrackSuccess=function(t){if(t){var e=this.getComponent(o);e&&(e.string="width: "+t.extent.width.toFixed(3)+" height: "+t.extent.height.toFixed(3));var n=this.node.parent;n&&n.setScale(t.extent.width,t.extent.height)}},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/track-event.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-tracking-base.ts","./ar-defines.ts","./ar-enum.ts","./action-base.ts"],(function(e){var t,n,i,r,a,c,s,o,u,l,p,v,k,f,g,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){c=e.cclegacy,s=e._decorator,o=e.EventHandler},function(e){u=e.ARTrackingBase},function(e){l=e.MeshTrackEvent,p=e.ImageTrackEvent,v=e.PlaneTrackEvent,k=e.ARTrackingState},function(e){f=e.ActionType,g=e.ARTrackingType},function(e){T=e.ARActionUpdateBase}],execute:function(){var d,h,E,m,b,y,S,A,R,x,z,L,w,_,I,O,P,D;c._RF.push({},"39e9125gDlDd7P2KqGmxqbC","track-event",void 0);var N=s.ccclass,C=s.property,K=function(e){return e[e.Success=0]="Success",e[e.Loss=1]="Loss",e[e.Refresh=2]="Refresh",e[e.TimeOut=3]="TimeOut",e}(K||{}),M=(d=N("cc.ARTimeoutEvent"),h=C({serializable:!0,displayOrder:1,tooltip:"i18n:xr-plugin.action.trackEvent.timeout.time"}),E=C({serializable:!0,type:[o],displayOrder:2,tooltip:"i18n:xr-plugin.action.trackEvent.timeout.event"}),d((y=t((b=function(){function e(){i(this,"timeout",y,this),i(this,"event",S,this),this._isEmited=!1}return e.prototype.handleEvent=function(e){!this._isEmited&&e>1e3*this.timeout&&(o.emitEvents(this.event,null),this._isEmited=!0)},e}()).prototype,"timeout",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),S=t(b.prototype,"event",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=b))||m);e("ARTrackEvent",(A=N("cc.ARTrackEvent"),R=C({serializable:!0,type:[o],displayOrder:1,tooltip:"i18n:xr-plugin.action.trackEvent.onTrackSuccess"}),x=C({serializable:!0,type:[o],displayOrder:2,tooltip:"i18n:xr-plugin.action.trackEvent.onTrackRefresh"}),z=C({serializable:!0,type:[o],displayOrder:3,tooltip:"i18n:xr-plugin.action.trackEvent.onTrackLoss"}),L=C({serializable:!0,type:[M],displayOrder:4,tooltip:"i18n:xr-plugin.action.trackEvent.onTrackTimeout"}),A((I=t((_=function(e){function t(){var t;return t=e.call(this)||this,i(t,"onTrackSuccess",I,r(t)),i(t,"onTrackRefresh",O,r(t)),i(t,"onTrackLoss",P,r(t)),i(t,"onTrackTimeout",D,r(t)),t._isSuccess=!1,t.type=f.TRACK_EVENT,t}n(t,e);var c=t.prototype;return c.getTrackingEvent=function(e){if(!e.trackingNode)return null;var t=e.trackingNode.getComponent(u);switch(null==t?void 0:t.trackingType){case g.Plane:if(e){var n=e,i=new v("PlaneTrackEvent");return i.id=n.id,i.anchorType=n.type,i.pose=n.pose,i.trackingState=n.trackingState,i.extent=n.extent,i}break;case g.Image:if(e){var r=e,a=new p("ImageTrackEvent");return a.id=r.id,a.pose=r.pose,a.trackingState=r.trackingState,a.extent=r.extent,a.libIndex=r.libIndex,a}break;case g.WorldMesh:if(e){var c=e,s=new l("MeshTrackEvent");return s.id=c.id,s.pose=c.pose,s.trackingState=c.trackingState,s.vertices=c.vertices,s.indices=c.indices,s}}return null},c.getEvents=function(e,t){var n=[];if(!e.trackingNode)return n;var i=e.trackingNode.getComponent(u),r=null==i?void 0:i.getTrackEvents();switch(t){case K.Success:for(var c,s=a(r.values());!(c=s()).done;){var o=c.value;n=n.concat(o.onTrackSuccess.slice(0))}break;case K.Loss:for(var l,p=a(r.values());!(l=p()).done;){var v=l.value;n=n.concat(v.onTrackLoss.slice(0))}break;case K.Refresh:for(var k,f=a(r.values());!(k=f()).done;){var g=k.value;n=n.concat(g.onTrackRefresh.slice(0))}}return n},c.runAction=function(e){var t=[],n=this.getTrackingEvent(e);t=e.trackingState===k.TRACKING||e.trackingState===k.PAUSED?this.getEvents(e,K.Success):this.getEvents(e,K.Loss),o.emitEvents(t,n),this._isSuccess=!0,this.setActivated(!0)},c.updateAction=function(e){if(!e.closeTracking){var t=this.getTrackingEvent(e),n=[];n=e.trackingState===k.TRACKING||e.trackingState===k.PAUSED?this.getEvents(e,K.Refresh):this.getEvents(e,K.Loss),o.emitEvents(n,t)}},c.resetAction=function(t){e.prototype.resetAction.call(this,t),this.updateAction(t)},c.judgeTimeout=function(e){this._isSuccess||this.onTrackTimeout.forEach((function(t){t.handleEvent(e)}))},c.reset=function(){this.onTrackSuccess=[],this.onTrackRefresh=[],this.onTrackLoss=[],this.onTrackTimeout=[],this.setActivated(!1)},t}(T)).prototype,"onTrackSuccess",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(_.prototype,"onTrackRefresh",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(_.prototype,"onTrackLoss",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=t(_.prototype,"onTrackTimeout",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=_))||w));c._RF.pop()}}}));

System.register("chunks:///_virtual/tracking-origin.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interface.ts"],(function(t){var e,i,r,n,o,s,c,f,a,l,p,g,O;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,c=t._decorator,f=t.ccenum,a=t.Node,l=t.Vec3,p=t.sys,g=t.Component},function(t){O=t.xrInterface}],execute:function(){var u,y,_,b,h,d,k,j,M,V,v,w,z,D;s._RF.push({},"2bae89OKg1Ht5AEap6sVgok","tracking-origin",void 0);var T=c.ccclass,m=c.help,x=c.menu,F=c.property,Y=t("TrackingOriginMode_Type",function(t){return t[t.Unbond=0]="Unbond",t[t.Device=1]="Device",t[t.Floor=2]="Floor",t}({}));f(Y);t("TrackingOrigin",(u=T("cc.TrackingOrigin"),y=m("i18n:cc.TrackingOrigin"),_=x("XR/Device/TrackingOrigin"),b=F({serializable:!0}),h=F({serializable:!0}),d=F({serializable:!0}),k=F({type:a,displayOrder:1,tooltip:"i18n:xr-plugin.tracking_origin.offsetObject"}),j=F({type:Y,displayOrder:2,tooltip:"i18n:xr-plugin.tracking_origin.trackingOriginMode"}),M=F({displayOrder:3,visible:function(){return this._trackingOriginMode!==Y.Floor},tooltip:"i18n:xr-plugin.tracking_origin.trackingOriginMode"}),u(V=y(V=_((w=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o))||this,r(e,"_offsetObject",w,n(e)),r(e,"_trackingOriginMode",z,n(e)),r(e,"_yOffsetValue",D,n(e)),e}i(e,t);var s=e.prototype;return s._setYOffset=function(t){this._offsetObject&&this._offsetObject.position.set(this._offsetObject.position.x,t,this._offsetObject.position.z)},s.resetOffset=function(){this._yOffsetValue=0,this._offsetObject&&(this._offsetObject.position=new l(0,0,0),this._offsetObject.eulerAngles=new l(0,0,0),this._offsetObject.scale=new l(1,1,1))},s.onEnable=function(){p.isXR&&O.setBaseSpaceType(this.trackingOriginMode)},o(e,[{key:"offsetObject",get:function(){return this._offsetObject},set:function(t){t!==this._offsetObject&&(this._setYOffset(0),this._offsetObject=t,this._setYOffset(this._yOffsetValue))}},{key:"trackingOriginMode",get:function(){return this._trackingOriginMode},set:function(t){t!==this._trackingOriginMode&&(this._trackingOriginMode=t,this._trackingOriginMode===Y.Floor?this._setYOffset(0):this._setYOffset(this._yOffsetValue))}},{key:"yOffsetValue",get:function(){return this._yOffsetValue},set:function(t){t!==this._yOffsetValue&&(this._yOffsetValue=t,this._setYOffset(this._yOffsetValue))}}]),e}(g)).prototype,"_offsetObject",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(v.prototype,"_trackingOriginMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Y.Unbond}}),D=e(v.prototype,"_yOffsetValue",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.36144}}),e(v.prototype,"offsetObject",[k],Object.getOwnPropertyDescriptor(v.prototype,"offsetObject"),v.prototype),e(v.prototype,"trackingOriginMode",[j],Object.getOwnPropertyDescriptor(v.prototype,"trackingOriginMode"),v.prototype),e(v.prototype,"yOffsetValue",[M],Object.getOwnPropertyDescriptor(v.prototype,"yOffsetValue"),v.prototype),V=v))||V)||V)||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/TrackingEventTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,c,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,c=t._decorator,a=t.RichText,l=t.Component}],execute:function(){var s,u,p,g,f;o._RF.push({},"23d763mFYlGy7jt6XpDogDe","TrackingEventTrigger",void 0);var v=c.ccclass,y=c.property;t("TrackingEventTrigger",(s=v("TrackingEventTrigger"),u=y({serializable:!0,type:a}),s((f=e((g=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,n(e,"text",f,i(e)),e}r(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.setString=function(t,e){this.text.string=e},e}(l)).prototype,"text",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));o._RF.pop()}}}));

System.register("chunks:///_virtual/webxr-device.ts",["./rollupPluginModLoBabelHelpers.js","cc","./webxr.ts","./ar-device-base.ts","./index5.ts","./index4.ts","./ar-defines.ts","./ar-enum.ts","./hmd-ctrl.ts","./ar-event.ts"],(function(e){var n,i,t,r,o,a,l,s,u,d,c,f,b,_,w,R,h,v,g,p,m;return{setters:[function(e){n=e.inheritsLoose,i=e.createClass},function(e){t=e.cclegacy,r=e.director,o=e.Vec2,a=e.game,l=e.sys,s=e.gfx,u=e.Mat4,d=e.Vec3},function(e){c=e.WebXR},function(e){f=e.ARDevice},function(e){b=e},function(e){_=e},function(e){w=e.FeatureType,R=e.ARAPI,h=e.ARRayCastMode},function(e){v=e.XRSessionModeControllerType},function(e){g=e.HMDCtrl},function(e){p=e.arEvent,m=e.AREventType}],execute:function(){t._RF.push({},"48d70Y5jQRGF7YhbBsSDlQy","webxr-device",void 0);var X=e("WebXREngineData",(function(){}));X.mainWindowViewport=null,X.initFramebuffer=void 0;e("WebXRDevice",function(e){function t(){for(var n,i=arguments.length,t=new Array(i),r=0;r<i;r++)t[r]=arguments[r];return(n=e.call.apply(e,[this].concat(t))||this)._webXR=null,n._lastTime=0,n._xrWindowSetFlag=!1,n._projectionMatrixSetFlag=!1,n._oldCameraFlag=-1,n._oldInlinePosition=null,n._oldInlineRotation=null,n}n(t,e);var f=t.prototype;return f.create=function(){if(!this._webXR){this._webXR=new c,p.on(m.SESSION_UNEXPECTED_ENDED,this._onUnexpectedEnd);var e=null==r?void 0:r.root;if(!X.mainWindowViewport&&null!=e&&e.mainWindow&&(X.mainWindowViewport=new o(e.mainWindow.width,e.mainWindow.height)),void 0===X.initFramebuffer){var n,i=null==e||null==(n=e.mainWindow)?void 0:n.framebuffer;X.initFramebuffer=null==i?void 0:i.gpuFramebuffer.glFramebuffer}}},f._onUnexpectedEnd=function(){var e,n,i=null==r?void 0:r.root,t=null==i||null==(e=i.mainWindow)?void 0:e.framebuffer;(t&&(t.gpuFramebuffer.glFramebuffer=X.initFramebuffer),X.mainWindowViewport)&&(null==i||null==(n=i.mainWindow)||n.resize(X.mainWindowViewport.x,X.mainWindowViewport.y));a.resume();a.restart()},f.checkSupported=function(e){var n=this;return new Promise((function(e,i){var t;null==(t=n._webXR)||t.isWebXRSupportedAsync().then((function(n){n?e(!0):(console.warn("sorry, your browser does not support WebXR."),i(new Error("sorry, your browser does not support WebXR.")))}))})).then((function(i){var t,r="inline";return(e&v.IMMERSIVE_AR)===v.IMMERSIVE_AR?r="immersive-ar":(e&v.IMMERSIVE_VR)===v.IMMERSIVE_VR?r="immersive-vr":(e&v.AUTO)===v.AUTO&&(r="inline",l.isMobile?r="immersive-ar":l.isBrowser&&(r="immersive-vr")),null==(t=n._webXR)?void 0:t.isSessionSupportedAsync(r)})).then((function(i){if(!i){var t;if((e&v.AUTO)===v.AUTO)return null==(t=n._webXR)?void 0:t.isSessionSupportedAsync("inline");throw new Error("not support "+n.getSessionMode()+" mode")}return!0})).then((function(e){if(!e)throw new Error("not support inline mode !");return!0})).catch((function(){return!1}))},f.init=function(e,n){var i,t=this;return this._xrWindowSetFlag=!1,this._featuresDataset=n,null==(i=this._webXR)||i.setSessionMode(e),globalThis.__globalXR.isWebXR=!0,globalThis.__globalXR.isWebXRInline="inline"===e,new Promise((function(e,i){var r;"immersive-ar"===(null==(r=t._webXR)?void 0:r.getSessionMode())&&(t.createFeatures(n),t.createHandlers(),t.initFeatures(n)),e(!0)})).then((function(e){return t.attachFeatureSessionInit()})).then((function(e){var n,i;return null==(n=t._webXR)||n.frameLoop((function(e,n){var i=e-t._lastTime;t.initXRWindow(),a.pause(),r.tick(i/1e3),t._updateProjectionMatrix(),t._featuresMap.forEach((function(e){var i=e.getHandler();t._webXR&&i&&i.process(n,t._webXR.getImmersiveRefSpace())})),t._lastTime=e})),null==(i=t._webXR)?void 0:i.initializeSession(t._featureConfigMask)})).then((function(e){var n;if(!e)throw new Error("webxr init session failed !");return"immersive-ar"===(null==(n=t._webXR)?void 0:n.getSessionMode())?(t.checkFeaturesSupport(t._webXR.getSupportMask()),globalThis.__globalXR.ar=t):globalThis.__globalXR.ar=null,t.initRenderState(),!0})).catch((function(){return!1}))},f.attachFeatureSessionInit=function(){var e=this,n=[];return this._featuresMap.forEach((function(e){var i=e.getHandler();i&&n.push(i.attachFeatureSessionInit())})),Promise.all(n).then((function(n){for(var i,t,r=0;r<n.length;r++){var o=n[r];if(o.optionalFeatures&&o.optionalFeatures.length>0){t=o;break}}return t.requiredFeatures=["local"],null==(i=e._webXR)||i.setXRSessionInit(t),!0})).catch((function(){return Promise.resolve(!1)}))},f.initRenderState=function(){var e,n=null==r?void 0:r.root,i=(null==n?void 0:n.pipeline).device.gl;null==(e=this._webXR)||e.updateRenderState(i)},f.initXRWindow=function(){var e;if(!this._xrWindowSetFlag){var n=null==r?void 0:r.root;if("inline"===(null==(e=this._webXR)?void 0:e.getSessionMode())){var i;if(X.mainWindowViewport)null==n||null==(i=n.mainWindow)||i.resize(X.mainWindowViewport.x,X.mainWindowViewport.y);var t=null==n?void 0:n.cameraList;null==t||t.forEach((function(e){e.changeTargetWindow(null==n?void 0:n.mainWindow)}))}else{var o,a,l,u,d,c,f=null==(o=this._webXR)?void 0:o.getXRLayerFrameBuffer(),b=null==(a=this._webXR)?void 0:a.getViewportLength();if(!f||!b)return;for(var _=0,w=0,R=0;b&&R<b;R++){var h,v=null==(h=this._webXR)?void 0:h.getViewportbyIndex(R);if(!v)return;_+=null==v?void 0:v.width,w=null==v?void 0:v.height}null==n||null==(l=n.mainWindow)||l.resize(_,w);var p=null==n||null==(u=n.mainWindow)?void 0:u.framebuffer;if(p&&(p.gpuFramebuffer.glFramebuffer=f),"immersive-ar"===(null==(d=this._webXR)?void 0:d.getSessionMode())){if(this._webXR&&this._webXR.Camera){var m=this._webXR.Camera.camera;this._oldCameraFlag=m.clearFlag,m.clearFlag=s.ClearFlagBit.NONE}}else if("immersive-vr"===(null==(c=this._webXR)?void 0:c.getSessionMode())){var S,y=null==(S=r.getScene())?void 0:S.getComponentInChildren(g);y&&(globalThis.__globalXR.isWebXRPerEyeCamera=y.perEyeCamera)}}this._xrWindowSetFlag=!0}},f._updateProjectionMatrix=function(){var e;if(globalThis.__globalXR.updateViewport&&globalThis.__globalXR.webXRMatProjs&&1===globalThis.__globalXR.webXRMatProjs.length&&(globalThis.__globalXR.updateViewport=!1),!this._projectionMatrixSetFlag){var n=null==(e=this._webXR)?void 0:e.getViewports();if(n){for(var i=new Array(n.length),t=0;t<n.length;t++){var r=n[t].projectionMatrix,o=new u;o.set(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15]),i[t]=o}globalThis.__globalXR.webXRMatProjs=i}else globalThis.__globalXR.webXRMatProjs=null;globalThis.__globalXR.updateViewport=!0,this._projectionMatrixSetFlag=!0}},f.start=function(){this._featuresMap.forEach((function(e){e.start()}))},f.stop=function(){var e;this._featuresMap.forEach((function(e){e.stop()})),this._xrWindowSetFlag=!1,this._projectionMatrixSetFlag=!1,null==(e=this._webXR)||e.endSession(),a.resume(),globalThis.__globalXR.isWebXR=!1,globalThis.__globalXR.webxrHmdPoseInfos=void 0,globalThis.__globalXR.webxrHandlePoseInfos=void 0,globalThis.__globalXR.webxrGamepadMap=void 0},f.update=function(){this._webXR&&this.updateHandlers()},f.getAPIState=function(){return this._webXR?this._webXR.getAPIState():-1},f.checkSessionMode=function(e){var n=this;return new Promise((function(e,i){var t;null==(t=n._webXR)||t.isWebXRSupportedAsync().then((function(n){n?e(!0):(console.warn("sorry, your browser does not support WebXR."),i(new Error("sorry, your browser does not support WebXR.")))}))})).then((function(i){var t;return!!n._webXR&&(null==(t=n._webXR)?void 0:t.isSessionSupportedAsync(e))})).catch((function(){return!1}))},f.setSessionMode=function(e){var n=this;return new Promise((function(e,i){var t;null==(t=n._webXR)||t.isWebXRSupportedAsync().then((function(n){n?e(!0):(console.warn("sorry, your browser does not support WebXR."),i(new Error("sorry, your browser does not support WebXR.")))}))})).then((function(i){if(n._webXR){var t,o;if(n.stop(),"immersive-vr"===(null==(t=n._webXR)?void 0:t.getSessionMode())&&"immersive-vr"!==e&&n._webXR.stopSession(),"inline"===(null==(o=n._webXR)?void 0:o.getSessionMode())){var a,l,s=null==(a=r.getScene())||null==(l=a.getComponentInChildren(g))?void 0:l.node;s&&(n._oldInlinePosition=s.position.clone(),n._oldInlineRotation=s.eulerAngles.clone())}if("inline"===e)if(n._webXR.Camera)-1!==n._oldCameraFlag&&(n._webXR.Camera.camera.clearFlag=n._oldCameraFlag),n._webXR.Camera.node.position=d.ZERO,n._webXR.Camera.node.eulerAngles=d.ZERO;else{var u,c,f=null==(u=r.getScene())||null==(c=u.getComponentInChildren(g))?void 0:c.node;f&&(n._oldInlinePosition&&(f.position=n._oldInlinePosition),n._oldInlineRotation&&(f.eulerAngles=n._oldInlineRotation))}return n.clearHandlers(),n.init(e,n._featuresDataset)}return!1})).then((function(e){return n.start(),!0})).catch((function(){return!1}))},f.getSessionMode=function(){return this._webXR?this._webXR.getSessionMode():"inline"},f.getCheckSessionMode=function(){return this._webXR?this._webXR.getCheckSessionMode():"inline"},f.checkFeatureAvailable=function(e){return!!b[e]},f.createFeature=function(e){return new b[e](this)},f.checkHandlerAvailable=function(e){return!!_[e]},f.createHandler=function(e){var n=this.HandlerPrefix+w[e.featureId];return this.checkHandlerAvailable(n)?new _[n](this,e):null},f.isWebXR=function(){return this.getAPIState()===R.WebXR},f.screenHitTest=function(e,n){if((e&h.RAYCAST_ANCHOR)===h.RAYCAST_ANCHOR){var i,t,r=this.tryGetFeatureByType(w.Anchor);if(r&&this._webXR)return r.getHandler().tryHitTest(null==(i=this._webXR)||null==(t=i._targetRayPose)?void 0:t.transform)}if((e&h.RAYCAST_PLANE_EXTENT)===h.RAYCAST_PLANE_EXTENT||(e&h.RAYCAST_PLANE_POLYGON)===h.RAYCAST_PLANE_POLYGON){var o,a,l=this.tryGetFeatureByType(w.PlaneDetection);if(l&&this._webXR)return l.getHandler().tryHitTest(null==(o=this._webXR)||null==(a=o._targetRayPose)?void 0:a.transform)}return Promise.resolve(null)},f.worldHitTest=function(e,n){return Promise.reject(new Error("mobile device Ray hit test is not supported "))},i(t,[{key:"WebXRObj",get:function(){return this._webXR}},{key:"HandlerPrefix",get:function(){return"ARWebXRHandler"}},{key:"CameraId",get:function(){var e,n;return null==(e=this._webXR)||null==(n=e.Camera)?void 0:n.node.uuid}}]),t}(f));t._RF.pop()}}}));

System.register("chunks:///_virtual/webxr-handler-anchor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts","./ar-defines.ts"],(function(e){var r,n,t,o,a,c;return{setters:[function(e){r=e.inheritsLoose},function(e){n=e.cclegacy,t=e.Vec3,o=e.Quat},function(e){a=e.ARHandlerAnchor},function(e){c=e.ARTrackingState}],execute:function(){n._RF.push({},"e35a9IoDuNK/6PHHlKKc8cC","webxr-handler-anchor",void 0);e("ARWebXRHandlerAnchor",function(e){function n(){for(var r,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return(r=e.call.apply(e,[this].concat(t))||this)._featureName="anchors",r._enable=!0,r._anchorId=1,r._detectedAnchors=[],r._lastFrameDetected=new Set,r._futureAnchors=[],r._immersiveRefSpace=null,r}r(n,e);var a=n.prototype;return a.enableAnchor=function(e){this._enable=e},a.attachFeatureSessionInit=function(){return Promise.resolve({optionalFeatures:[this._featureName]})},a.process=function(e,r){var n,t=this;if(this._feature&&null!=(n=this._feature.config)&&n.enable&&e){this._immersiveRefSpace=r;var o=e.trackedAnchors,a=[],i=[],s=[];if(o){for(var h=0;h<this._detectedAnchors.length;h++){var u=this._detectedAnchors[h];if(!o.has(u.xrAnchor)){this._detectedAnchors.splice(h--,1),console.debug("anchor was removed, id="+u.id);var d=this._updateAnchorWithXRAnchor(u);d.trackingState=c.STOPPED,a.push(d)}}o.forEach((function(n){if(t._lastFrameDetected.has(n)){var o=t._findIndexInAnchorArray(n),a=t._detectedAnchors[o];if(a){var c=e.getPose(n.anchorSpace,r);a.anchorPose=c;var h=t._updateAnchorWithXRAnchor(a);s.push(h)}}else{var u=e.getPose(n.anchorSpace,r),d={id:t._anchorId,anchorPose:u,xrAnchor:n,remove:function(){return n.delete()}};t._detectedAnchors.push(d);var f=t._updateAnchorWithXRAnchor(d);console.debug("New plane detected, id="+d.id),i.push(f);var l=t._futureAnchors.filter((function(e){return e.nativeAnchor===n}))[0];l&&(l.resolve(f),l.resolved=!0),t._anchorId++}})),this._lastFrameDetected=o,a.length>0&&this._feature.onRemoveTracking(a),i.length>0&&this._feature.onAddTracking(i),s.length>0&&this._feature.onUpdateTracking(s)}this._futureAnchors.forEach((function(r){var n;r.resolved||r.submitted||!r.xrTransformation||(null==(n=t._createAnchorByTransformation(r.xrTransformation,e))||n.then((function(e){r.nativeAnchor=e}),(function(e){r.resolved=!0,r.reject(e)})),r.submitted=!0)}))}},a._findIndexInAnchorArray=function(e){for(var r=0;r<this._detectedAnchors.length;++r)if(this._detectedAnchors[r].xrAnchor===e)return r;return-1},a._updateAnchorWithXRAnchor=function(e){var r,n,a,i,s,h,u;return{id:e.id,pose:{position:new t(null==(r=e.anchorPose)?void 0:r.transform.position.x,null==(n=e.anchorPose)?void 0:n.transform.position.y,null==(a=e.anchorPose)?void 0:a.transform.position.z),rotation:new o(null==(i=e.anchorPose)?void 0:i.transform.orientation.x,null==(s=e.anchorPose)?void 0:s.transform.orientation.y,null==(h=e.anchorPose)?void 0:h.transform.orientation.z,null==(u=e.anchorPose)?void 0:u.transform.orientation.w)},trackingState:c.TRACKING}},a._createAnchorByTransformation=function(e,r){if(!r.createAnchor||!this._immersiveRefSpace)throw new Error("createAnchor are not enabled !");try{return r.createAnchor(e,this._immersiveRefSpace)}catch(e){throw new Error(e)}},a.tryHitTest=function(e){var r=this;return new Promise((function(n,t){r._futureAnchors.push({nativeAnchor:void 0,resolved:!1,submitted:!1,xrTransformation:e,resolve:n,reject:t})}))},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/webxr-handler-camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts"],(function(e){var t,n,r,a,i,o;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){r=e.cclegacy,a=e.Vec3,i=e.Quat},function(e){o=e.ARHandlerCameraDevice}],execute:function(){r._RF.push({},"c2a9fnNYU1KJJh8wyulu7J5","webxr-handler-camera",void 0);e("ARWebXRHandlerCameraDevice",function(e){function r(){return e.apply(this,arguments)||this}t(r,e);var o=r.prototype;return o.enableCameraAutoFocus=function(e){},o.attachFeatureSessionInit=function(){return Promise.resolve({})},o.getCameraPose=function(){var e;if(!this._device.WebXRObj)return{position:new a(0,0,0),rotation:new i(0,0,0,1)};var t=null==(e=this._device.WebXRObj)?void 0:e.getCameraPose();return t?{position:new a(t[0],t[1],t[2]),rotation:new i(t[3],t[4],t[5],t[6])}:{position:new a(0,0,0),rotation:new i(0,0,0,1)}},o.getCameraFov=function(){var e;if("immersive-vr"===this._device.getSessionMode())return 0;var t=null==(e=this._device.WebXRObj)?void 0:e.getCameraProjectionMatrix();return t?2*Math.atan(1/t[5])*180/Math.PI:0},o.update=function(){var e;this._feature&&null!=(e=this._feature.config)&&e.enable&&this._feature.update()},n(r,[{key:"Camera",set:function(e){this._camera=e,this._device.WebXRObj.Camera=e}}]),r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/webxr-handler-image.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts","./ar-defines.ts"],(function(e){var t,r,a,i,n,o,c,s;return{setters:[function(e){t=e.inheritsLoose,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,i=e.Vec3,n=e.Quat,o=e.Size},function(e){c=e.ARHandlerImageTracking},function(e){s=e.ARTrackingState}],execute:function(){a._RF.push({},"6e338lxyxJBnr7CrUDKDBcT","webxr-handler-image",void 0);var u=function(e){return e[e.None=0]="None",e[e.Added=1]="Added",e[e.Updated=2]="Updated",e[e.Removed=3]="Removed",e}(u||{}),g=function(e){return e[e.NotReceived=0]="NotReceived",e[e.Waiting=1]="Waiting",e[e.Received=2]="Received",e}(g||{});e("ARWebXRHandlerImageTracking",function(e){function a(){for(var t,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this)._featureName="image-tracking",t._enable=!0,t._imageLibs=[],t._originalTrackingRequest=[],t._trackedImages=[],t._trackableScoreStatus=g.NotReceived,t._maxTrackingNum=0,t._curTrackingNum=0,t}t(a,e);var c=a.prototype;return c.enableImageTracking=function(e){this._enable=e},c.addImagesToLib=function(e){this._imageLibs=e},c.setImageMaxTrackingNumber=function(e){this._maxTrackingNum=e,this._curTrackingNum=0},c.createImageBitmapFromSource=function(e,t){var r=this;return new Promise((function(a,i){var n=new Image;n.onload=function(){n.decode().then((function(){r.createImageBitmap(n,t).then((function(e){console.log(e),a(e)}))}))},n.onerror=function(e){i(new Error("Error loading image "+n.src))},n.src=e}))},c.createImageBitmap=function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return createImageBitmap(e,t)})),c.attachFeatureSessionInit=function(){var e=this;if(this._imageLibs.length<=0)return Promise.resolve({});var t=this._imageLibs.map((function(t){return e.createImageBitmapFromSource(t.assetPath)}));return Promise.all(t).then((function(t){return e._originalTrackingRequest=t.map((function(t,r){return{image:t,widthInMeters:0===e._imageLibs[r].widthInMeters?.15:e._imageLibs[r].widthInMeters}})),{optionalFeatures:[e._featureName],trackedImages:e._originalTrackingRequest}})).catch((function(){return Promise.resolve({})}))},c.process=function(e,t){var a,i=this;if(this._feature&&null!=(a=this._feature.config)&&a.enable&&e&&e.getImageTrackingResults){if(this._trackableScoreStatus===g.NotReceived){if(!e.session.getTrackedImageScores||this._trackableScoreStatus!==g.NotReceived)return;this._trackableScoreStatus=g.Waiting;e.session.getTrackedImageScores().then((function(e){if(e&&0!==e.length){for(var t=0;t<e.length;++t){var r=i._originalTrackingRequest[t].image,a={id:t,ratio:r.width/r.height,score:e[t],curState:u.None,realWorldWidth:r.width};i._trackedImages[t]=a}i._trackableScoreStatus=e.length>0?g.Received:g.NotReceived}else i._trackableScoreStatus=g.NotReceived}))}for(var n,o=[],c=[],s=[],d=e.getImageTrackingResults(),l=r(d);!(n=l()).done;){var m=n.value,h=m.index,f=this._trackedImages[h];if(f&&"untrackable"!==f.score){f.trackingState=m.trackingState,f.realWorldWidth=m.measuredWidthInMeters;var p=e.getPose(m.imageSpace,t);p&&(f.pose=p);var k=this._updateImageWithXRImage(f);if("emulated"===f.trackingState?f.curState!==u.None&&(f.curState=u.Removed):f.curState===u.None?f.curState=u.Added:f.curState=u.Updated,f.curState===u.Added){if(this._curTrackingNum>=this._maxTrackingNum){console.warn("The number of tracks reached the upper limit : ",this._curTrackingNum,this._maxTrackingNum);continue}c.push(k),this._curTrackingNum++}else f.curState===u.Removed?(f.curState=u.None,o.push(k),this._curTrackingNum=Math.max(0,--this._curTrackingNum)):f.curState===u.Updated&&s.push(k)}else console.warn("image not trackable:",f.id)}o.length>0&&this._feature.onRemoveTracking(o),c.length>0&&this._feature.onAddTracking(c),s.length>0&&this._feature.onUpdateTracking(s)}},c._updateImageWithXRImage=function(e){var t,r,a,c,u,g,d;return{id:e.id,pose:{position:new i(null==(t=e.pose)?void 0:t.transform.position.x,null==(r=e.pose)?void 0:r.transform.position.y,null==(a=e.pose)?void 0:a.transform.position.z),rotation:new n(null==(c=e.pose)?void 0:c.transform.orientation.x,null==(u=e.pose)?void 0:u.transform.orientation.y,null==(g=e.pose)?void 0:g.transform.orientation.z,null==(d=e.pose)?void 0:d.transform.orientation.w)},libIndex:e.id,trackingState:s.TRACKING,extent:new o(e.realWorldWidth,e.realWorldWidth*e.ratio)}},a}(c));a._RF.pop()}}}));

System.register("chunks:///_virtual/webxr-handler-lighting-estimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-handler-base.ts","./ar-defines.ts"],(function(t){var i,e,n,r,s,h,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t.Vec4,r=t.Quat,s=t.Vec3},function(t){h=t.ARHandlerLightingEstimation},function(t){o=t.ARLightingMode}],execute:function(){e._RF.push({},"c6c23lS1tFL+Ir/ASNQAKJy","webxr-handler-lighting-estimation",void 0);t("ARWebXRHandlerLightingEstimation",function(t){function e(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this)._featureName="light-estimation",i._lightingMode=null,i._xrLightEstimate=null,i._xrLightProbe=null,i._isRequestLightProbe=!1,i._lightDirection=new s,i._intensity=1,i}i(e,t);var h=e.prototype;return h.enableLightingEstimation=function(t){this._feature&&(this._feature.enable=t)},h.setLightingMode=function(t){this._lightingMode=t},h.getAmbientIntensity=function(){return 0},h.getAmbientColorTemperature=function(){return 0},h.getAmbientColor=function(){return n.ZERO},h.getSphericalHarmonics=function(){return[]},h.getMainLightDirection=function(){return this._lightDirection},h.getMainLightIntensity=function(){return this._intensity},h.attachFeatureSessionInit=function(){return Promise.resolve({optionalFeatures:[this._featureName]})},h.process=function(t,i){var e,n=this;if(this._feature&&null!=(e=this._feature.config)&&e.enable&&t&&this._lightingMode!==o.NO_HDR)if(this._xrLightProbe)this._xrLightEstimate=t.getLightEstimate(this._xrLightProbe),this._xrLightEstimate&&(this._intensity=Math.max(this._xrLightEstimate.primaryLightIntensity.x,this._xrLightEstimate.primaryLightIntensity.y,this._xrLightEstimate.primaryLightIntensity.z),r.toEuler(this._lightDirection,this._xrLightEstimate.primaryLightDirection));else if(!this._isRequestLightProbe){this._isRequestLightProbe=!0;var s=this._lightingMode===o.HDR?"rgba16f":"srgba8";t.session.requestLightProbe({reflectionFormat:s}).then((function(t){n._xrLightProbe=t}))}},h.update=function(){var t;this._feature&&null!=(t=this._feature.config)&&t.enable&&this._feature.update()},e}(h));e._RF.pop()}}}));

System.register("chunks:///_virtual/webxr-handler-plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-handler-base.ts"],(function(e){var t,n,r,i,a,o,l,s,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e.Vec2,i=e.Vec3,a=e.Quat,o=e.Size,l=e.Mat4},function(e){s=e.ARTrackingState},function(e){u=e.ARHandlerPlaneDetection}],execute:function(){n._RF.push({},"362f6wGhRBNfa2LzXmoSOx+","webxr-handler-plane",void 0);var c=function(e,t){return 1===e.w&&1===t.w||1===e.w&&0===t.w||0===e.w&&0===t.w||console.error("only point - point, point - line or line - line subtraction is allowed"),{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z,w:e.w-t.w}},d=function(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t,w:e.w}},f=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},h=function(e){return Math.sqrt(f(e,e))},p=function(e){var t=h(e);return d(e,1/t)};e("ARWebXRHandlerPlaneDetection",function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._featureName="plane-detection",t._enable=!0,t._detectionMode=0,t._planeId=1,t._detectedPlanes=[],t._lastFrameDetected=new Set,t._hitResult=null,t}t(n,e);var u=n.prototype;return u.enablePlane=function(e){this._enable=e},u.setPlaneDetectionMode=function(e){this._detectionMode=e},u.getPlanePolygon=function(e){for(var t=new Array,n=0;n<this._detectedPlanes.length;n++){var i=this._detectedPlanes[n];if(i.id===e)for(var a=i.xrPlane.polygon,o=0;o<a.length;++o)t.push(new r(a[o].x,a[o].z))}return t},u.attachFeatureSessionInit=function(){return Promise.resolve({optionalFeatures:[this._featureName]})},u.process=function(e,t){var n,r,i=this;if(this._feature&&null!=(n=this._feature.config)&&n.enable&&e){var a=e.detectedPlanes||(null==(r=e.worldInformation)?void 0:r.detectedPlanes),o=[],l=[],u=[];if(a){for(var c=0;c<this._detectedPlanes.length;c++){var d=this._detectedPlanes[c];if(!a.has(d.xrPlane)){this._detectedPlanes.splice(c--,1),console.debug("plane was removed, id="+d.id);var f=this._updatePlaneWithXRPlane(d);f.trackingState=s.STOPPED,o.push(f)}}a.forEach((function(n){if(i._lastFrameDetected.has(n)){var r=i._findIndexInPlaneArray(n),a=i._detectedPlanes[r];if(a){var o=e.getPose(n.planeSpace,t);a.planePose=o,a.xrPlane=n;var c=i._updatePlaneWithXRPlane(a);c.trackingState=s.TRACKING,u.push(c)}}else if(i.checkPlaneOrientation(n.orientation)){var d=e.getPose(n.planeSpace,t),f={id:i._planeId++,xrPlane:n,planePose:d};i._detectedPlanes.push(f);var h=i._updatePlaneWithXRPlane(f);h.trackingState=s.TRACKING,console.debug("New plane detected, id="+f.id),l.push(h)}})),this._lastFrameDetected=a,o.length>0&&this._feature.onRemoveTracking(o),l.length>0&&this._feature.onAddTracking(l),u.length>0&&this._feature.onUpdateTracking(u)}}},u._findIndexInPlaneArray=function(e){for(var t=0;t<this._detectedPlanes.length;++t)if(this._detectedPlanes[t].xrPlane===e)return t;return-1},u._updatePlaneWithXRPlane=function(e){var t,n,r,o,l,s,u;return{id:e.id,type:"Horizontal"===e.xrPlane.orientation?3:4,extent:this.calPolygonSize(e.xrPlane.polygon),pose:{position:new i(null==(t=e.planePose)?void 0:t.transform.position.x,null==(n=e.planePose)?void 0:n.transform.position.y,null==(r=e.planePose)?void 0:r.transform.position.z),rotation:new a(null==(o=e.planePose)?void 0:o.transform.orientation.x,null==(l=e.planePose)?void 0:l.transform.orientation.y,null==(s=e.planePose)?void 0:s.transform.orientation.z,null==(u=e.planePose)?void 0:u.transform.orientation.w)}}},u.checkPlaneOrientation=function(e){return!!(3&this._detectionMode&&"Horizontal"===e||4===this._detectionMode&&"Vertical"===e||7===this._detectionMode)},u.calPolygonSize=function(e){for(var t=[],n=[],r=0;r<e.length;++r)t.push(e[r].x),n.push(e[r].z);t.sort((function(e,t){return e-t})),n.sort((function(e,t){return e-t}));var i=t[0]>t[t.length-1]?t[0]-t[t.length-1]:t[t.length-1]-t[0],a=n[0]>n[n.length-1]?n[0]-n[n.length-1]:n[n.length-1]-n[0];return new o(i,a)},u.transform_point_by_matrix=function(e,t){return{x:e[0]*t.x+e[4]*t.y+e[8]*t.z+e[12]*t.w,y:e[1]*t.x+e[5]*t.y+e[9]*t.z+e[13]*t.w,z:e[2]*t.x+e[6]*t.y+e[10]*t.z+e[14]*t.w,w:e[3]*t.x+e[7]*t.y+e[11]*t.z+e[15]*t.w}},u.calculateHitMatrix=function(e,t,n){var r,i,a,o=c(e,d(t,f(e,t))),l=t,s=p({x:-(r=o).x,y:-r.y,z:-r.z,w:r.w}),u=p((a=s,{x:(i=l).y*a.z-i.z*a.y,y:i.z*a.x-i.x*a.z,z:i.x*a.y-i.y*a.x,w:0})),h=new Float32Array(16);return h[0]=u.x,h[1]=u.y,h[2]=u.z,h[3]=0,h[4]=l.x,h[5]=l.y,h[6]=l.z,h[7]=0,h[8]=s.x,h[9]=s.y,h[10]=s.z,h[11]=0,h[12]=n.x,h[13]=n.y,h[14]=n.z,h[15]=1,h},u.hitTest=function(e){for(var t=[],n=0;n<this._detectedPlanes.length;n++){var r=this._detectedPlanes[n],i=this.hitTestPlane(e,r.xrPlane,r.planePose);i&&(i.id=r.id,t.push(i))}var a=t.filter((function(e){return void 0!==e.point}));return a.sort((function(e,t){return e.distance-t.distance})),a},u.hitTestPlane=function(e,t,n){if(!n)return null;var r=this.transform_point_by_matrix(n.transform.matrix,{x:0,y:1,z:0,w:0}),i=function(e){return 0===e.w||1===e.w?{x:e.x,y:e.y,z:e.z,w:e.w}:{x:e.x/e.w,y:e.y/e.w,z:e.z/e.w,w:1}}(this.transform_point_by_matrix(n.transform.matrix,{x:0,y:0,z:0,w:1})),a=e.origin,o=e.direction,l=f(c(i,a),r),s=f(o,r);if(s<1e-4&&s>-1e-4)return l<1e-4&&l>-1e-4?(console.debug("Ray contained in the plane",t),null):(console.debug("No hit",t),null);var u=l/s;if(u<0)return console.debug("No hit",u,t),null;var h,p,x=(h=a,p=d(o,u),0===h.w&&1===p.w||1===h.w&&0===p.w||console.error("only line + point or point + line addition is allowed"),{x:h.x+p.x,y:h.y+p.y,z:h.z+p.z,w:h.w+p.w}),y=this.transform_point_by_matrix(n.transform.inverse.matrix,x);return console.assert(Math.abs(y.y)<1e-4,"Incorrect Y coordinate of mapped point"),{id:0,distance:u,plane:t,ray:e,point:x,point_on_plane:y,hitMatrix:this.calculateHitMatrix(o,r,x),pose_matrix:n.transform.matrix}},u.simplifyPolygon=function(e){for(var t=[],n=e[e.length-1],r=0;r<e.length;++r){var i=e[r],a=c(i,n);h(a)<.001||(t.push(i),n=i)}return t},u.filterHitTestResults=function(e,t){var n=this;return void 0===t&&(t=!1),e.filter((function(e){for(var r,i,a=t?n.simplifyPolygon(e.plane.polygon):e.plane.polygon,o=e.point_on_plane,l=0,s=a[a.length-1],u=0;u<a.length;++u){var d=a[u],f=c(d,s),h=p(f),x=c(o,d),y=p(x),P=(i=y,(r=h).x*i.z-r.z*i.x);if(0===l)l=P>0?1:2;else{if(P>0&&2===l)return!1;if(P<0&&1===l)return!1}s=d}return!0}))},u.tryHitTest=function(e){var t=this;return new Promise((function(n,r){var o=new XRRay(e),s=t.hitTest(o),u=t.filterHitTestResults(s);if(u&&u.length>0){t._hitResult=u[0];var c=t._hitResult.hitMatrix,d=new l(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9],c[10],c[11],c[12],c[13],c[14],c[15]);n({id:t._hitResult.id,pose:{position:d.getTranslation(new i),rotation:d.getRotation(new a)}})}else n(null)}))},n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/webxr-session-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts"],(function(e){var o,t,n,r,s,i,l,c,a;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){i=e.cclegacy,l=e._decorator,c=e.Component},function(e){a=e.XRSessionModeControllerType}],execute:function(){var u,p,d,f,y,S,b,M;i._RF.push({},"81a68d1y95GsKT1zcnEtncc","webxr-session-controller",void 0);var h=l.ccclass,R=l.property,_=l.help,g=l.menu,C=l.disallowMultiple;e("WebXRSessionController",(u=h("cc.WebXRSessionController"),p=_("i18n:cc.WebXRSessionController"),d=g("XR/Device/WebXRSessionController"),f=R({serializable:!0}),y=R({type:a,displayOrder:1,tooltip:"i18n:xr-plugin.webXRSessionController.defaultSessionMode"}),u(S=p(S=d(S=C((M=o((b=function(e){function o(){for(var o,t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return o=e.call.apply(e,[this].concat(s))||this,n(o,"_defaultSessionMode",M,r(o)),o}return t(o,e),s(o,[{key:"defaultSessionMode",get:function(){return this._defaultSessionMode},set:function(e){e!==this._defaultSessionMode&&(this._defaultSessionMode=e)}}]),o}(c)).prototype,"_defaultSessionMode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return a.AUTO}}),o(b.prototype,"defaultSessionMode",[y],Object.getOwnPropertyDescriptor(b.prototype,"defaultSessionMode"),b.prototype),S=b))||S)||S)||S)||S));i._RF.pop()}}}));

System.register("chunks:///_virtual/webxr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-defines.ts","./ar-event.ts","./tracking-origin.ts"],(function(e){var s,n,i,t,o,r,a,c,l,u;return{setters:[function(e){s=e.createForOfIteratorHelperLoose,n=e.createClass},function(e){i=e.cclegacy,t=e.Vec3,o=e.find},function(e){r=e.FeatureType,a=e.ARAPI},function(e){c=e.arEvent},function(e){l=e.TrackingOrigin,u=e.TrackingOriginMode_Type}],execute:function(){i._RF.push({},"7b747DE/6RGYqEGk7X1jBKk","webxr",void 0);var h=navigator.xr,_=null;e("WebXR",function(){function e(){this._mode="inline",this._checkMode="inline",this._featureMask=0,this._xrSessionInit={requiredFeatures:["viewer","local","local-floor"],optionalFeatures:[]},this._session=null,this._immersiveRefSpace=null,this._cameraPose=void 0,this._framebuffer=void 0,this._baseLayer=void 0,this._viewport=void 0,this._gl=null,this._inputSource=null,this._targetRayPose=void 0,this._onXRFrame=null,this._endSessionFlag=!1,this._camera=null}var i=e.prototype;return i.getSessionMode=function(){return this._mode},i.getCheckSessionMode=function(){return this._checkMode},i.setSessionMode=function(e){this._mode=e,console.log("mode:",this._mode)},i.isVRMode=function(){return"immersive-vr"===this._mode},i.setXRSessionInit=function(e){this._xrSessionInit=e},i.isWebXRSupportedAsync=function(){return"xr"in navigator?Promise.resolve(!0):Promise.resolve(!1)},i.isSessionSupportedAsync=function(e){return h?(this._checkMode=e,h.isSessionSupported(e).then((function(e){var s=void 0===e||e;return Promise.resolve(s)})).catch((function(e){return console.warn(e),Promise.resolve(!1)}))):Promise.resolve(!1)},i._handleHMD=function(e){if(this._cameraPose){globalThis.__globalXR.webxrHmdPoseInfos=[];for(var n,i=globalThis.__globalXR.webxrHmdPoseInfos,o=null,r=null,a=s(this._cameraPose.views);!(n=a()).done;){var c=n.value,l={};switch(l.position=c.transform.position,l.orientation=c.transform.orientation,c.eye){case"left":l.code=0,o=new t(l.position.x,l.position.y,l.position.z);break;case"right":l.code=3,r=new t(l.position.x,l.position.y,l.position.z);break;case"none":l.code=6}i.push(l)}if(2===this._cameraPose.views.length&&o&&r){var u=t.add(new t,o,r).multiplyScalar(.5),h={code:6};h.position=new DOMPointReadOnly(u.x,u.y,u.z),h.orientation=i[0].orientation,i.push(h)}}},i._handleHand=function(e){if(this._immersiveRefSpace){globalThis.__globalXR.webxrHandlePoseInfos=[];for(var n,i=globalThis.__globalXR.webxrHandlePoseInfos,t=s(e.session.inputSources);!(n=t()).done;){var o=n.value;if(o.targetRaySpace){var r=e.getPose(o.targetRaySpace,this._immersiveRefSpace);if(r){var a={};switch(a.position=r.transform.position,a.orientation=r.transform.orientation,o.handedness){case"left":a.code=2;break;case"right":a.code=5}i.push(a)}}if(o.gripSpace){var c=e.getPose(o.gripSpace,this._immersiveRefSpace);if(c){var l={};switch(l.position=c.transform.position,l.orientation=c.transform.orientation,o.handedness){case"left":l.code=1;break;case"right":l.code=4}i.push(l)}}}}},i._handControl=function(e){var n=new Map;globalThis.__globalXR.webxrGamepadMap=n;for(var i,t=s(e.session.inputSources);!(i=t()).done;){var o=i.value;if(o.gripSpace){var r=o.gamepad;r&&n.set(o.handedness,r)}}},i.frameLoop=function(e){var s=this;this._onXRFrame=function(n,i){var t,o=i.session;if(s._baseLayer=o.renderState.baseLayer,s._onXRFrame&&o.requestAnimationFrame(s._onXRFrame),s._framebuffer=null==(t=i.session.renderState.baseLayer)?void 0:t.framebuffer,globalThis.__globalXR.webxrHmdPoseInfos=void 0,globalThis.__globalXR.webxrHandlePoseInfos=void 0,globalThis.__globalXR.webxrGamepadMap=void 0,s._immersiveRefSpace)if(s._cameraPose=i.getViewerPose(s._immersiveRefSpace),"immersive-vr"===s._mode)s._handleHMD(i),s._handleHand(i),s._handControl(i);else if("immersive-ar"===s._mode&&s._inputSource){var r=i.getPose(s._inputSource.targetRaySpace,s._immersiveRefSpace);if(r){var a;s._targetRayPose=r;var c=s.getTouchInit(null==r?void 0:r.transform.position);null==(a=s._gl)||a.canvas.dispatchEvent(new TouchEvent("touchmove",c))}}e(n,i)}},i.getSupportMask=function(){return this._featureMask},i.initializeSession=function(e){var s=this;this._featureMask=e;var n=[],i=this.initializeSessionAsync().then((function(n){n||(0!=(e&r.PlaneDetection)&&(s._featureMask&=~r.PlaneDetection),0!=(e&r.ImageTracking)&&(s._featureMask&=~r.ImageTracking))}));return n.push(i),Promise.all(n).then((function(){return Promise.resolve(!0)})).catch((function(){return Promise.resolve(!1)}))},i.initializeSessionAsync=function(){var e=this;return _&&"immersive-vr"===this._mode?(this._session=_,this.setReferenceSpaceTypeAsync(),new Promise((function(e,s){e(!0)}))):("inline"===this._mode&&(this._xrSessionInit.requiredFeatures=["viewer"]),new Promise((function(s,n){console.log(e._xrSessionInit),null==h||h.requestSession(e._mode,e._xrSessionInit).then((function(n){_=e._session=n,e.setReferenceSpaceTypeAsync(),console.log("session request success !"),s(!0)})).catch((function(e){console.warn("requestSession err:",e),n(e)}))})))},i.setReferenceSpaceTypeAsync=function(){var e,s=this,n="local";if("immersive-vr"===this._mode){var i,t=null==(i=o("XR Agent"))?void 0:i.getComponent(l);(null==t?void 0:t.trackingOriginMode)===u.Floor&&(n="local-floor")}else"inline"===this._mode&&(n="viewer");null==(e=this._session)||e.requestReferenceSpace(n).then((function(e){var n;(s._immersiveRefSpace=e,s._onXRFrame)&&(null==(n=s._session)||n.requestAnimationFrame(s._onXRFrame));s.attachController()}))},i.endSession=function(){this._endSessionFlag=!0,"immersive-vr"!==this._mode?this.stopSession():this._onXRFrame=function(e,s){}},i.stopSession=function(){var e;this._session&&(null==(e=this._session)||e.end(),this._session=null,_=null)},i.getImmersiveRefSpace=function(){return this._immersiveRefSpace},i.attachController=function(){var e,s,n,i,t,o,r,a,l=this,u=function(e){if("inline"!==l._mode)switch(e.inputSource.targetRayMode){case"tracked-pointer":l.attachTrackedPointerRayMode(e);break;case"gaze":l.attachGazeMode(e);break;case"screen":l.attachScreenRayMode(e)}},h=function(e){};null==(e=this._session)||e.addEventListener("select",u),null==(s=this._session)||s.addEventListener("selectstart",u),null==(n=this._session)||n.addEventListener("selectend",u),null==(i=this._session)||i.addEventListener("squeeze",u),null==(t=this._session)||t.addEventListener("squeezestart",u),null==(o=this._session)||o.addEventListener("squeezeend",u),null==(r=this._session)||r.addEventListener("end",(function e(s){var n,i,t,o,r,a,f,d;null==(n=l._session)||n.removeEventListener("select",u),null==(i=l._session)||i.removeEventListener("selectstart",u),null==(t=l._session)||t.removeEventListener("selectend",u),null==(o=l._session)||o.removeEventListener("squeeze",u),null==(r=l._session)||r.removeEventListener("squeezestart",u),null==(a=l._session)||a.removeEventListener("squeezeend",u),null==(f=l._session)||f.removeEventListener("end",e),null==(d=l._session)||d.removeEventListener("inputsourceschange",h),l._endSessionFlag||(c.dispatchSessionUnexpectedEnded(),l._session=null,_=null),l._endSessionFlag=!1})),null==(a=this._session)||a.addEventListener("inputsourceschange",h)},i.getTouchInit=function(e){var s,n,i=new t;null==(s=this._camera)||s.worldToScreen(e,i);var o={identifier:0,target:null==(n=this._gl)?void 0:n.canvas,clientX:i.x,clientY:i.y,pageX:i.x,pageY:i.y,screenX:i.x,screenY:i.y,force:1,radiusX:1,radiusY:1},r=[new Touch(o)];return{touches:r,targetTouches:r,changedTouches:r}},i.attachScreenRayMode=function(e){var s,n,i=e.inputSource;if(this._immersiveRefSpace){var t=e.frame.getPose(i.targetRaySpace,this._immersiveRefSpace);if(t){this._inputSource=i,this._targetRayPose=t;var o=this.getTouchInit(t.transform.position);switch(e.type){case"selectstart":null==(s=this._gl)||s.canvas.dispatchEvent(new TouchEvent("touchstart",o));break;case"selectend":null==(n=this._gl)||n.canvas.dispatchEvent(new TouchEvent("touchend",o)),this._inputSource=null}}}},i.attachGazeMode=function(e){},i.attachTrackedPointerRayMode=function(e){},i.getAPIState=function(){return this._session?a.WebXR:-1},i.getCameraPose=function(){var e=[0,0,0,0,0,0,1];if(this._cameraPose){var s=this._cameraPose.transform.position,n=this._cameraPose.transform.orientation;e=[s.x,s.y,s.z,n.x,n.y,n.z,n.w]}return e},i.getCameraViewMatrix=function(){},i.getCameraProjectionMatrix=function(){return this._cameraPose?this._cameraPose.views[0].projectionMatrix:null},i.getViewport=function(){return this._cameraPose&&this._baseLayer&&(this._viewport=this._baseLayer.getViewport(this._cameraPose.views[0])),this._viewport},i.getViewports=function(){return this._cameraPose&&this._baseLayer?this._cameraPose.views:null},i.getViewportLength=function(){return this._cameraPose&&this._baseLayer?this._cameraPose.views.length:0},i.getViewportbyIndex=function(e){return this._cameraPose&&this._baseLayer?this._baseLayer.getViewport(this._cameraPose.views[e]):null},i.getView=function(e){if(this._cameraPose)for(var n,i=s(this._cameraPose.views);!(n=i()).done;){var t=n.value;if(t.eye===e)return t}return null},i.getXRLayerFrameBuffer=function(){return this._framebuffer},i.updateRenderState=function(e){if(this._gl=e,this._session){var s,n=new XRWebGLLayer(this._session,e,{alpha:!0,antialias:!1,depth:!0,framebufferScaleFactor:1,ignoreDepthValues:!1,stencil:!0});void 0!==n.fixedFoveation&&(n.fixedFoveation=1),null==(s=this._session)||s.updateRenderState({baseLayer:n})}},n(e,[{key:"Camera",get:function(){return this._camera},set:function(e){this._camera=e}}]),e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/WebXRModeControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ar-enum.ts","./webxr-session-controller.ts","./ar-api.ts"],(function(e){var n,o,t,i,s,r,l,a,u,c,d,h,p,b,g,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,l=e.Node,a=e.Label,u=e.find,c=e.input,d=e.Input,h=e.Vec3,p=e.Component},function(e){b=e.XRSessionModeControllerType},function(e){g=e.WebXRSessionController},function(e){f=e.arApi}],execute:function(){var v,M,S,y,R,N,x;s._RF.push({},"83889gnaktLWJmx+MfBQBca","WebXRModeControl",void 0);var X=r.ccclass,m=r.property;e("WebXRModeControl",(v=X("WebXRModeControl"),M=m({serializable:!0,type:l}),S=m({serializable:!0,type:a}),v((N=n((R=function(e){function n(){for(var n,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return n=e.call.apply(e,[this].concat(s))||this,t(n,"xrSessionNode",N,i(n)),t(n,"changeButtonLabel",x,i(n)),n._speed=.03,n}o(n,e);var s=n.prototype;return s.onEnable=function(){var e,n=null==(e=u("XR Agent"))?void 0:e.getComponent(g);(this.xrSessionNode||n.defaultSessionMode===b.INLINE)&&c.on(d.EventType.TOUCH_MOVE,this._onTouchMoved,this)},s.onDisable=function(){var e,n=null==(e=u("XR Agent"))?void 0:e.getComponent(g);(this.xrSessionNode||n.defaultSessionMode===b.INLINE)&&c.off(d.EventType.TOUCH_MOVE,this._onTouchMoved,this)},s.changeSessionMode=function(e){var n=f.getWebXRSessionMode();"inline"===n?(f.setWebXRSessionMode("immersive-ar"),this.changeButtonLabel&&(this.changeButtonLabel.string="Enter Inline")):"immersive-ar"===n&&(f.setWebXRSessionMode("inline"),this.changeButtonLabel&&(this.changeButtonLabel.string="Enter AR"))},s._onTouchMoved=function(e){if(this.xrSessionNode&&"inline"===f.getWebXRSessionMode()){var n=this.xrSessionNode.eulerAngles.x-this._speed*e.getDeltaY(),o=this.xrSessionNode.eulerAngles.y+this._speed*e.getDeltaX();this.xrSessionNode.eulerAngles=new h(n,o,this.xrSessionNode.eulerAngles.z)}},n}(p)).prototype,"xrSessionNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(R.prototype,"changeButtonLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=R))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-camera-access-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-extension.ts","./xr-interface.ts","./xr-spaces-feature-manager.ts"],(function(e){var t,r,i,n,a,s,o,u,c,h,f,m,l,_;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){i=e.cclegacy,n=e._decorator,a=e.sys,s=e.Texture2D,o=e.Vec2},function(e){u=e.xrExtension,c=e.XrExtensionKey,h=e.XrBufferOperationType},function(e){f=e.xrInterface,m=e.XRConfigKey},function(e){l=e.XRSpacesFeatureType,_=e.XRSpacesFeatureManager}],execute:function(){var p;i._RF.push({},"4c922VouAxBFaKixzBzHpMQ","xr-camera-access-manager",void 0);var C=n.ccclass,g=n.menu,y=e("XRCameraConfiguration",function(){function e(e){this.minFps=30,this.maxFps=30,this.format=0,this.resolutionWidth=1280,this.resolutionHeight=720,this.bufferCount=0,this.isValid=!1,this.resolutionWidth=e[0],this.resolutionHeight=e[1],this.format=e[2],this.minFps=e[3],this.maxFps=e[4],this.bufferCount=this.resolutionWidth*this.resolutionHeight*4,this.isValid=!0}return e.prototype.toString=function(){return"Camera Configuration: size:"+this.resolutionWidth+"x"+this.resolutionHeight+", format:"+this.format+",fps:"+this.minFps+"~"+this.maxFps},e}()),A=e("XRCameraIntrinsics",function(){function e(){this.focalLength=new o,this.principalPoint=new o,this.resolution=new o(1280,720),this.isValid=!1}var t=e.prototype;return t.parseData=function(e){this.focalLength.x=e[0],this.focalLength.y=e[1],this.principalPoint.x=e[2],this.principalPoint.y=e[3],this.resolution.x=e[4],this.resolution.y=e[5],this.isValid=!0},t.toString=function(){return"Camera Intrinsics: size:"+this.resolution.x+"x"+this.resolution.y+", focalLength:"+this.focalLength.x+","+this.focalLength.y+",principalPoint:"+this.principalPoint.x+","+this.principalPoint.y},e}());e("XRCameraAccessManager",C("cc.spaces.XRCameraAccessManager")(p=g("hidden:XR/Spaces/XRCameraAccessManager")(p=function(e){function i(){for(var t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(t=e.call.apply(e,[this].concat(i))||this)._frameTime=0,t._currentFrameTime=0,t._cameraBufferArray=null,t._cameraConfiguration=null,t._cameraIntrinsicsArray=new Float32Array(6),t._cameraIntrinsics=null,t._feedPaused=!1,t._previewTexture=null,t._internalCreateTexture=!1,t}t(i,e);var n=i.prototype;return n.releaseTexture=function(){var e;null==(e=this._previewTexture)||e.destroy(),this._previewTexture=null},n.onStart=function(){if(a.isXR){f.setIntConfig(m.CAMERA_ACCESS,1);var e=u.getUInt32Data(c.XEK_SPACES_CAMERA_CONFIGURATION);this._cameraConfiguration=new y(e),this._cameraBufferArray=new Uint8Array(this._cameraConfiguration.bufferCount),this._cameraBufferArray.fill(255),this._cameraIntrinsics=new A,this._frameTime=1/this._cameraConfiguration.minFps,this._currentFrameTime=this._frameTime,this._internalCreateTexture&&(this._previewTexture=new s,this._previewTexture.create(this._cameraConfiguration.resolutionWidth,this._cameraConfiguration.resolutionHeight,35))}},n.onStop=function(){a.isXR&&f.setIntConfig(m.CAMERA_ACCESS,0)},n.getFeatureType=function(){return l.CAMERA_ACCESS},n.pauseCameraFrameFeed=function(){this._feedPaused=!0},n.resumeCameraFrameFeed=function(){this._feedPaused=!1},n.onRetrieveChanges=function(e){if(a.isXR){if(this._feedPaused)return;var t;if(this._currentFrameTime-=e,this._currentFrameTime<=0)if(this._currentFrameTime=this._frameTime,this._cameraConfiguration&&this._cameraBufferArray)u.syncSharedBufferWithNative_UINT8(c.XEK_SPACES_CAMERA_FRAME_DATA,h.XBOT_GET,this._cameraBufferArray,this._cameraBufferArray.length),u.syncSharedBufferWithNative_Float32(c.XEK_SPACES_CAMERA_INTRINSICS,h.XBOT_GET,this._cameraIntrinsicsArray,this._cameraIntrinsicsArray.length),null==(t=this.cameraIntrinsics)||t.parseData(this._cameraIntrinsicsArray),this.internalCreateTexture&&this._previewTexture&&this._previewTexture.uploadData(this._cameraBufferArray)}},r(i,[{key:"cameraBufferArray",get:function(){return this._cameraBufferArray}},{key:"cameraIntrinsics",get:function(){return this._cameraIntrinsics}},{key:"cameraConfiguration",get:function(){return this._cameraConfiguration}},{key:"internalCreateTexture",get:function(){return this._internalCreateTexture},set:function(e){this._internalCreateTexture=e}},{key:"cameraPreviewTexture",get:function(){return this._previewTexture}}]),i}(_))||p)||p);i._RF.pop()}}}));

System.register("chunks:///_virtual/xr-composition-layer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-extension.ts","./xr-feature-define.ts","./xr-interface.ts"],(function(e){var t,r,i,a,n,s,o,l,y,p,u,h,c,d,g,m,T,f,x,_,I,A,S,C,v,w,b,O;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createClass},function(e){s=e.cclegacy,o=e._decorator,l=e.Camera,y=e.ImageAsset,p=e.CCFloat,u=e.director,h=e.Director,c=e.sys,d=e.gfx,g=e.RenderTexture,m=e.VERSION,T=e.Component,f=e.Quat,x=e.Vec3},function(e){_=e.xrExtension,I=e.XrExtensionKey,A=e.XrBufferOperationType},function(e){S=e.CxrTextureType,C=e.CxrLayerType,v=e.CxrShapeType,w=e.CxrLockType},function(e){b=e.xrInterface,O=e.XRConfigKey}],execute:function(){var D,E,R,N,L,P,X,B,z,F,M,U,k,W,K,G,Y,H,V,j,Q,J,q,Z,$,ee,te,re;s._RF.push({},"5519cCG5VxKPJvFOdIIANN1","xr-composition-layer",void 0);var ie=o.ccclass,ae=o.property,ne=o.menu,se=function(){function e(){this.textureType=S.Static,this.layerType=C.Overlay,this.shapeType=v.Quad,this.lockType=w.WorldLock,this.layerDepth=0,this.layerId=0,this.width=0,this.height=0,this.sizeXInMeters=1,this.sizeYInMeters=1,this.orientation=new f,this.position=new x,this.cylinderRadius=1,this.cylinderCentralAngle=30}var t=e.prototype;return t.toBufferArray=function(){var e=new Float32Array(19);return e[0]=this.layerType,e[1]=this.shapeType,e[2]=this.lockType,e[3]=this.layerDepth,e[4]=this.layerId,e[5]=this.width,e[6]=this.height,e[7]=this.sizeXInMeters,e[8]=this.sizeYInMeters,e[9]=this.orientation.x,e[10]=this.orientation.y,e[11]=this.orientation.z,e[12]=this.orientation.w,e[13]=this.position.x,e[14]=this.position.y,e[15]=this.position.z,e[16]=this.cylinderRadius,e[17]=this.cylinderCentralAngle,e[18]=this.textureType,e},t.toTickBufferArray=function(){var e=new Float32Array(9);return e[0]=this.layerId,e[1]=0,e[2]=this.orientation.x,e[3]=this.orientation.y,e[4]=this.orientation.z,e[5]=this.orientation.w,e[6]=this.position.x,e[7]=this.position.y,e[8]=this.position.z,e},e}();e("XRCompositionLayer",(D=ie("cc.XRCompositionLayer"),E=ne("XR/Extra/XRCompositionLayer"),R=ae({group:{name:"Texture Settings",displayOrder:99,id:"2"},displayName:"Texture Type",type:S,tooltip:"i18n:xr-plugin.compositionLayer.texturetype",visible:function(){return this.isSupportStaticTexture()}}),N=ae({group:{name:"Texture Settings",displayOrder:100,id:"2"},type:l,displayName:"Camera",displayOrder:0,tooltip:"i18n:xr-plugin.compositionLayer.rtcamera",visible:function(){return this.textureType===S.Dynamic}}),L=ae({group:{name:"Texture Settings",displayOrder:101,id:"2"},displayName:"Width",displayOrder:1,tooltip:"i18n:xr-plugin.compositionLayer.rtwidth",visible:function(){return this.textureType===S.Dynamic}}),P=ae({group:{name:"Texture Settings",displayOrder:102,id:"2"},displayName:"Height",displayOrder:2,tooltip:"i18n:xr-plugin.compositionLayer.rtheight",visible:function(){return this.textureType===S.Dynamic}}),X=ae({group:{name:"Texture Settings",displayOrder:103,id:"2"},displayName:"Static Texture",displayOrder:3,type:y,tooltip:"i18n:xr-plugin.compositionLayer.rtheight",visible:function(){return this.textureType===S.Static}}),B=ae({group:{name:"Layer Settings",displayOrder:10},displayName:"Type",type:C,tooltip:"i18n:xr-plugin.compositionLayer.layertype"}),z=ae({group:{name:"Layer Settings",displayOrder:20},displayName:"Shape",type:v,tooltip:"i18n:xr-plugin.compositionLayer.shapetype"}),F=ae({group:{name:"Layer Settings",displayOrder:40},displayName:"Depth",tooltip:"i18n:xr-plugin.compositionLayer.depth"}),M=ae({group:{name:"Layer Settings",displayOrder:50},tooltip:"i18n:xr-plugin.compositionLayer.cylinderradius",displayName:"Radius",range:[.1,1e6],visible:function(){return this.shapeType===v.Cylinder}}),U=ae({group:{name:"Layer Settings",displayOrder:60},tooltip:"i18n:xr-plugin.compositionLayer.cylindercentralangle",displayName:"CentralAngle",range:[1,360],visible:function(){return this.shapeType===v.Cylinder}}),k=ae(p),W=ae(p),K=ae({type:S}),D(G=E(((re=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(t,"renderTextureCamera",H,a(t)),i(t,"renderTextureWidth",V,a(t)),i(t,"renderTextureHeight",j,a(t)),i(t,"staticImage",Q,a(t)),i(t,"layerType",J,a(t)),i(t,"shapeType",q,a(t)),t.lockType=w.WorldLock,i(t,"layerDepth",Z,a(t)),i(t,"_cylinderRadius",$,a(t)),i(t,"_cylinderCentralAngleInDeg",ee,a(t)),i(t,"_textureType",te,a(t)),t._layerParam=new se,t._layerId=0,t._swapchainImagesCount=0,t._rendetexturesArray=null,t.staticImageData=null,t.staticImageDataUploaded=!1,t}r(t,e);var s=t.prototype;return s.start=function(){this.isSupportStaticTexture()||this.textureType!==S.Static||(console.warn("Currently cocos engine version is not support static texture type !!!"),this.staticImage=null),t.layerIdCount++,this._layerId=t.layerIdCount,this._layerParam.textureType=this.textureType,this._layerParam.layerType=this.layerType,this._layerParam.shapeType=this.shapeType,this._layerParam.lockType=this.lockType,this._layerParam.layerDepth=this.layerDepth,this._layerParam.layerId=this._layerId,this._layerParam.sizeXInMeters=this.node.scale.x,this._layerParam.sizeYInMeters=this.node.scale.y,this._layerParam.position=this.node.worldPosition.clone(),this._layerParam.orientation=this.node.worldRotation.clone(),this._layerParam.cylinderRadius=this._cylinderRadius,this._layerParam.cylinderCentralAngle=this._cylinderCentralAngleInDeg;var e=this.textureType===S.Static&&this.staticImage?this.staticImage.width:this.renderTextureWidth,r=this.textureType===S.Static&&this.staticImage?this.staticImage.height:this.renderTextureHeight;if(this._layerParam.width=e,this._layerParam.height=r,u.on(h.EVENT_BEFORE_DRAW,this.beforeDraw,this),u.on(h.EVENT_BEFORE_RENDER,this.beforeFrameRender,this),c.isXR&&c.isNative){var i=this._layerParam.toBufferArray();_.syncSharedBufferWithNative_Float32(I.XEK_COMPOSITION_LAYER_CREATE,A.XBOT_SET,i,i.length),this.textureType===S.Static&&this.staticImage&&b.setStringConfig(O.ASYNC_LOAD_ASSETS_IMAGE,"@assets/"+this.staticImage.nativeUrl);var a=new Uint32Array(24);if(a[0]=this._layerId,_.syncSharedBufferWithNative_UINT32(I.XEK_COMPOSITION_LAYER_SWAPCHAIN_IMAGES,A.XBOT_GET,a,a.length),this._swapchainImagesCount=a[1],this._swapchainImagesCount>0){this._rendetexturesArray=[];for(var n=0;n<this._swapchainImagesCount;n++){var s=a[2+2*n],o=a[2+2*n+1];console.log("[XRCompositionLayer] texture id."+s+"|"+o+", index."+n);var l=new d.ColorAttachment;l.format=d.Format.RGBA8;var y=new d.DepthStencilAttachment;y.format=d.Format.DEPTH_STENCIL;var p=new d.RenderPassInfo([l],y),m=new g;m.reset({width:e,height:r,passInfo:p,externalResLow:s,externalResHigh:o,externalFlag:d.TextureFlagBit.EXTERNAL_NORMAL}),this._rendetexturesArray.push(m)}}else this.renderTextureCamera&&(this.renderTextureCamera.node.active=!1)}},s.update=function(e){if(c.isXR&&c.isNative){this._layerParam.position=this.node.worldPosition.clone(),this._layerParam.orientation=this.node.worldRotation.clone();var t=this._layerParam.toTickBufferArray();if(_.syncSharedBufferWithNative_Float32(I.XEK_COMPOSITION_LAYER_TICK,A.XBOT_SET,t,t.length),this.textureType===S.Dynamic){var r=t[1];this.renderTextureCamera&&this._rendetexturesArray&&(this.renderTextureCamera.targetTexture=this._rendetexturesArray[r])}else if(this.textureType===S.Static&&this.staticImage&&!this.staticImageDataUploaded){if(!this.staticImageData){var i=this.stringToUint8Array("@assets/"+this.staticImage.nativeUrl),a=_.syncSharedBufferWithNative_UINT8(I.XEK_ASSETS_IMAGE_DATA,A.XBOT_SET,i,i.length);a>0&&(this.staticImageData=new Uint8Array(a))}if(this.staticImageData){var n=this.stringToUint8Array("@assets/"+this.staticImage.nativeUrl);if(this.staticImageData.fill(0),this.staticImageData.set(n,0),_.syncSharedBufferWithNative_UINT8(I.XEK_ASSETS_IMAGE_DATA,A.XBOT_GET,this.staticImageData,n.length)>0&&this._rendetexturesArray){var s=[new d.BufferTextureCopy],o=s[0];o.texExtent.width=this._rendetexturesArray[0].width,o.texExtent.height=this._rendetexturesArray[0].height,o.texSubres.mipLevel=0,o.texSubres.baseArrayLayer=0;var l=this._rendetexturesArray[0].getGFXTexture();l&&d.deviceManager.gfxDevice.copyBuffersToTexture([this.staticImageData],l,s),this.staticImageDataUploaded=!0}}}}},s.beforeDraw=function(){},s.beforeFrameRender=function(){},s.onDestroy=function(){if(c.isXR&&c.isNative){var e=new Uint8Array(1);e[0]=this._layerId,_.syncSharedBufferWithNative_UINT8(I.XEK_COMPOSITION_LAYER_DESTROY,A.XBOT_SET,e,e.length)}},s.stringToUint8Array=function(e){for(var t=[],r=0,i=e.length;r<i;++r)t.push(e.charCodeAt(r));return new Uint8Array(t)},s.isSupportStaticTexture=function(){var e=m.split("."),t=parseInt(e[0]),r=parseInt(e[1]),i=parseInt(e[2]);return t>3||3===t&&r>7||3===t&&7===r&&i>3},n(t,[{key:"textureType",get:function(){return this._textureType},set:function(e){this._textureType=e,this.isSupportStaticTexture()||this.textureType!==S.Static||(console.warn("Currently cocos engine version is not support static texture type !!!"),this.staticImage=null)}},{key:"cylinderRadius",get:function(){return this._cylinderRadius},set:function(e){this._cylinderRadius=e}},{key:"cylinderCentralAngle",get:function(){return this._cylinderCentralAngleInDeg},set:function(e){this._cylinderCentralAngleInDeg=e}}]),t}(T)).layerIdCount=0,t((Y=re).prototype,"textureType",[R],Object.getOwnPropertyDescriptor(Y.prototype,"textureType"),Y.prototype),H=t(Y.prototype,"renderTextureCamera",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(Y.prototype,"renderTextureWidth",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1280}}),j=t(Y.prototype,"renderTextureHeight",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 720}}),Q=t(Y.prototype,"staticImage",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(Y.prototype,"layerType",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return C.Overlay}}),q=t(Y.prototype,"shapeType",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.Quad}}),Z=t(Y.prototype,"layerDepth",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(Y.prototype,"cylinderRadius",[M],Object.getOwnPropertyDescriptor(Y.prototype,"cylinderRadius"),Y.prototype),t(Y.prototype,"cylinderCentralAngle",[U],Object.getOwnPropertyDescriptor(Y.prototype,"cylinderCentralAngle"),Y.prototype),$=t(Y.prototype,"_cylinderRadius",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),ee=t(Y.prototype,"_cylinderCentralAngleInDeg",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),te=t(Y.prototype,"_textureType",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.Dynamic}}),G=Y))||G)||G));s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactable.ts","./xr-interactor.ts"],(function(t){var e,i,n,a,r,s,o,c,l,h,_,p,u,T,v,d,E,I,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){o=t.cclegacy,c=t._decorator,l=t.ccenum,h=t.CCFloat,_=t.Node,p=t.input,u=t.Input,T=t.DeviceType,v=t.EventGamepad,d=t.EventHandle,E=t.Component},function(t){I=t.XrEventHandle},function(t){g=t.XrInteractor}],execute:function(){var f,R,y,A,H,b,G,P,U,L,O,N,S,x,D,m,k,B,C,w,V,M,K,F,z,Y,X,W,j,Q,Z,q;o._RF.push({},"1e92bOQQApPabAbOLV6ZwkG","xr-controller",void 0);var J=c.ccclass,$=c.help,tt=c.menu,et=c.property,it=c.executeInEditMode,nt=t("XrEventTypeLeft",function(t){return t[t.BUTTON_X=0]="BUTTON_X",t[t.BUTTON_Y=2]="BUTTON_Y",t[t.TRIGGER_LEFT=4]="TRIGGER_LEFT",t[t.GRIP_LEFT=6]="GRIP_LEFT",t[t.THUMBSTICK_LEFT=8]="THUMBSTICK_LEFT",t[t.TRIGGER_BTN_LEFT=10]="TRIGGER_BTN_LEFT",t}({})),at=t("XrEventTypeRight",function(t){return t[t.BUTTON_A=1]="BUTTON_A",t[t.BUTTON_B=3]="BUTTON_B",t[t.TRIGGER_RIGHT=5]="TRIGGER_RIGHT",t[t.GRIP_RIGHT=7]="GRIP_RIGHT",t[t.THUMBSTICK_RIGHT=9]="THUMBSTICK_RIGHT",t[t.TRIGGER_BTN_RIGHT=11]="TRIGGER_BTN_RIGHT",t}({})),rt=t("XrInputDeviceType",function(t){return t[t.Left_Hand=0]="Left_Hand",t[t.Right_Hand=1]="Right_Hand",t}({})),st=function(t){return t[t.Start=0]="Start",t[t.Stay=1]="Stay",t[t.End=2]="End",t}(st||{});l(nt),l(at),l(rt);var ot=t("InteractorEventType",function(t){return t[t.Select=0]="Select",t[t.Activate=1]="Activate",t[t.UIPress=2]="UIPress",t}({})),ct=t("XrEventActionType",function(t){return t[t.KEY_DOWN=0]="KEY_DOWN",t[t.KEY_UP=1]="KEY_UP",t[t.KEY_PRESSING=2]="KEY_PRESSING",t[t.TOUCH_DOWN=3]="TOUCH_DOWN",t[t.TOUCH_UP=4]="TOUCH_UP",t[t.TOUCHING=5]="TOUCHING",t}({})),lt=t("XrInputAction",(function(t){this.inputSourceType=null,this.eventType=null,this.keyEventActionType=null,this.touchEventActionType=null,this.eventValue=0,this.isEventChanged=!1,this.inputSourceType=t}));t("XRController",(f=J("cc.XRController"),R=$("i18n:cc.XRController"),y=tt("XR/Device/XRController"),A=et({serializable:!0}),H=et({serializable:!0}),b=et({serializable:!0}),G=et({serializable:!0}),P=et({serializable:!0}),U=et({serializable:!0}),L=et({serializable:!0}),O=et({serializable:!0}),N=et({serializable:!0}),S=et({type:rt,displayOrder:1,tooltip:"i18n:xr-plugin.xr_controller.inputDevice"}),x=et({type:nt,displayName:"SelectAction",visible:function(){return this._inputDevice===rt.Left_Hand},displayOrder:2,tooltip:"i18n:xr-plugin.xr_controller.selectActionLeft"}),D=et({type:nt,displayName:"ActivateAction",visible:function(){return this._inputDevice===rt.Left_Hand},displayOrder:3,tooltip:"i18n:xr-plugin.xr_controller.activateActionLeft"}),m=et({type:nt,displayName:"UIPressAction",visible:function(){return this._inputDevice===rt.Left_Hand},displayOrder:4,tooltip:"i18n:xr-plugin.xr_controller.UIPressActionLeft"}),k=et({type:at,displayName:"SelectAction",visible:function(){return this._inputDevice===rt.Right_Hand},displayOrder:2,tooltip:"i18n:xr-plugin.xr_controller.selectActionRight"}),B=et({type:at,displayName:"ActivateAction",visible:function(){return this._inputDevice===rt.Right_Hand},displayOrder:3,tooltip:"i18n:xr-plugin.xr_controller.activateActionRight"}),C=et({type:at,displayName:"UIPressAction",visible:function(){return this._inputDevice===rt.Right_Hand},displayOrder:4,tooltip:"i18n:xr-plugin.xr_controller.UIPressActionRight"}),w=et({type:h,displayOrder:5,tooltip:"i18n:xr-plugin.xr_controller.axisToPressThreshold"}),V=et({type:_,displayOrder:6,tooltip:"i18n:xr-plugin.xr_controller.model"}),f(M=R(M=y(M=it((F=e((K=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"_inputDevice",F,a(e)),n(e,"_selectActionLeft",z,a(e)),n(e,"_selectActionRight",Y,a(e)),n(e,"_activateActionLeft",X,a(e)),n(e,"_activateActionRight",W,a(e)),n(e,"_UIPressActionLeft",j,a(e)),n(e,"_UIPressActionRight",Q,a(e)),n(e,"_axisToPressThreshold",Z,a(e)),n(e,"_model",q,a(e)),e._xrEventHandle=new I("xrEventHandle"),e._xrInteractor=null,e._selectState=st.End,e._activateState=st.End,e._uiPressState=st.End,e._leftInputActionMap=new Map,e._rightInputActionMap=new Map,e._isSimulateKeyInput=!1,e}i(e,t);var o=e.prototype;return o.onLoad=function(){if(this._leftInputActionMap.set(nt.BUTTON_X,new lt(rt.Left_Hand)),this._leftInputActionMap.set(nt.BUTTON_Y,new lt(rt.Left_Hand)),this._leftInputActionMap.set(nt.TRIGGER_LEFT,new lt(rt.Left_Hand)),this._leftInputActionMap.set(nt.GRIP_LEFT,new lt(rt.Left_Hand)),this._leftInputActionMap.set(nt.THUMBSTICK_LEFT,new lt(rt.Left_Hand)),this._leftInputActionMap.set(nt.TRIGGER_BTN_LEFT,new lt(rt.Left_Hand)),this._rightInputActionMap.set(at.BUTTON_A,new lt(rt.Right_Hand)),this._rightInputActionMap.set(at.BUTTON_B,new lt(rt.Right_Hand)),this._rightInputActionMap.set(at.TRIGGER_RIGHT,new lt(rt.Right_Hand)),this._rightInputActionMap.set(at.GRIP_RIGHT,new lt(rt.Right_Hand)),this._rightInputActionMap.set(at.THUMBSTICK_RIGHT,new lt(rt.Right_Hand)),this._rightInputActionMap.set(at.TRIGGER_BTN_RIGHT,new lt(rt.Right_Hand)),this.model){var t=this.model.position,e=this.model.rotation,i=this.model.scale;this.node.addChild(this.model),this.model.setPosition(t),this.model.setRotation(e),this.model.setScale(i),this._xrEventHandle.model=this.model}},o.onEnable=function(){this._isSimulateKeyInput=!1,p.on(u.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),p.on(u.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this),this._xrInteractor=this.getComponent(g),this._inputDevice===rt.Left_Hand?(this._xrEventHandle.deviceType=T.Left,this._xrInteractor&&(this._xrInteractor.event.deviceType=T.Left)):this._inputDevice===rt.Right_Hand&&(this._xrEventHandle.deviceType=T.Right,this._xrInteractor&&(this._xrInteractor.event.deviceType=T.Right))},o.onDisable=function(){p.off(u.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),p.off(u.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this)},o._dispatchEventHandleInput=function(t){var e=null,i=!1;t instanceof v?(i=!0,e=t.gamepad,this._inputDevice===rt.Left_Hand?(this._handleEventGamepad(ot.Select,this.selectActionLeft,e),this._handleEventGamepad(ot.Activate,this.activateActionLeft,e),this._handleEventGamepad(ot.UIPress,this.UIPressActionLeft,e)):this._inputDevice===rt.Right_Hand&&(this._handleEventGamepad(ot.Select,this.selectActionRight,e),this._handleEventGamepad(ot.Activate,this.activateActionRight,e),this._handleEventGamepad(ot.UIPress,this.UIPressActionRight,e))):t instanceof d&&(i=!1,e=t.handleInputDevice,this._inputDevice===rt.Left_Hand?(this._handleEventHandle(ot.Select,this.selectActionLeft,e),this._handleEventHandle(ot.Activate,this.activateActionLeft,e),this._handleEventHandle(ot.UIPress,this.UIPressActionLeft,e)):this._inputDevice===rt.Right_Hand&&(this._handleEventHandle(ot.Select,this.selectActionRight,e),this._handleEventHandle(ot.Activate,this.activateActionRight,e),this._handleEventHandle(ot.UIPress,this.UIPressActionRight,e))),e&&this._notifyControllerEvent(e,i)},o._notifyControllerEvent=function(t,e){var i;this._inputDevice===rt.Left_Hand?i=this._leftInputActionMap:this._inputDevice===rt.Right_Hand&&(i=this._rightInputActionMap);for(var n,a=r(i);!(n=a()).done;){var s=n.value,o=s[0],c=s[1],l=0;l=e?this._getGamepadEventValue(o,t):this._getHandleEventValue(o,t),c.isEventChanged=!1,c.eventValue=l,c.eventType=o,l>.1?(null===c.keyEventActionType||c.keyEventActionType===ct.KEY_UP?(c.keyEventActionType=ct.KEY_DOWN,c.isEventChanged=!0):c.keyEventActionType===ct.KEY_DOWN&&(c.keyEventActionType=ct.KEY_PRESSING,c.isEventChanged=!0),null===c.touchEventActionType||c.touchEventActionType===ct.TOUCH_UP?(c.touchEventActionType=ct.TOUCH_DOWN,c.isEventChanged=!0):c.touchEventActionType===ct.TOUCH_DOWN&&(c.touchEventActionType=ct.TOUCHING,c.isEventChanged=!0)):(c.keyEventActionType!==ct.KEY_DOWN&&c.keyEventActionType!==ct.KEY_PRESSING||(c.keyEventActionType=ct.KEY_UP,c.isEventChanged=!0),c.touchEventActionType!==ct.TOUCH_DOWN&&c.touchEventActionType!==ct.TOUCHING||(c.touchEventActionType=ct.TOUCH_UP,c.isEventChanged=!0)),c.isEventChanged&&(this.node.emit(u.EventType.HANDLE_INPUT,c),c.isEventChanged=!1)}},o._getHandleEventValue=function(t,e){var i=0;switch(t){case at.BUTTON_A:i=e.buttonSouth.getValue();break;case at.BUTTON_B:i=e.buttonEast.getValue();break;case nt.BUTTON_X:i=e.buttonWest.getValue();break;case nt.BUTTON_Y:i=e.buttonNorth.getValue();break;case nt.TRIGGER_LEFT:i=e.triggerLeft.getValue();break;case at.TRIGGER_RIGHT:i=e.triggerRight.getValue();break;case nt.GRIP_LEFT:i=e.gripLeft.getValue();break;case at.GRIP_RIGHT:i=e.gripRight.getValue();break;case nt.THUMBSTICK_LEFT:i=e.buttonLeftStick.getValue();break;case at.THUMBSTICK_RIGHT:i=e.buttonRightStick.getValue();break;case nt.TRIGGER_BTN_LEFT:i=e.buttonTriggerLeft.getValue();break;case at.TRIGGER_BTN_RIGHT:i=e.buttonTriggerRight.getValue()}return i},o._getGamepadEventValue=function(t,e){var i=0;switch(t){case at.BUTTON_A:i=e.buttonSouth.getValue();break;case at.BUTTON_B:i=e.buttonEast.getValue();break;case nt.BUTTON_X:i=e.buttonWest.getValue();break;case nt.BUTTON_Y:i=e.buttonNorth.getValue();break;case nt.TRIGGER_LEFT:i=e.buttonL2.getValue();break;case at.TRIGGER_RIGHT:i=e.buttonR2.getValue();break;case nt.GRIP_LEFT:i=e.gripLeft.getValue();break;case at.GRIP_RIGHT:i=e.gripRight.getValue();break;case nt.THUMBSTICK_LEFT:i=e.buttonL3.getValue();break;case at.THUMBSTICK_RIGHT:i=e.buttonR3.getValue();break;case nt.TRIGGER_BTN_LEFT:i=e.buttonL2.getValue();break;case at.TRIGGER_BTN_RIGHT:i=e.buttonR2.getValue()}return i},o._handleEventHandle=function(t,e,i){this._handleEvent(t,this._getHandleEventValue(e,i))},o._handleEventGamepad=function(t,e,i){this._handleEvent(t,this._getGamepadEventValue(e,i))},o._handleEvent=function(t,e){switch(t){case ot.Select:this._selectState=this._handleState(t,this._selectState,e);break;case ot.Activate:this._activateState=this._handleState(t,this._activateState,e);break;case ot.UIPress:this._uiPressState=this._handleState(t,this._uiPressState,e)}},o._handleState=function(t,e,i){var n,a,r,s,o,c,l,h,_;if(this._xrEventHandle.eventHandle=i,i>.1)if(e===st.End){switch(t){case ot.Select:null==(n=this._xrInteractor)||n.selectStart(this._xrEventHandle);break;case ot.Activate:null==(a=this._xrInteractor)||a.activateStart(this._xrEventHandle);break;case ot.UIPress:null==(r=this._xrInteractor)||r.uiPressEnter(this._xrEventHandle)}e=st.Start}else{switch(t){case ot.Select:null==(s=this._xrInteractor)||s.selectStay(this._xrEventHandle);break;case ot.Activate:null==(o=this._xrInteractor)||o.activateStay(this._xrEventHandle);break;case ot.UIPress:null==(c=this._xrInteractor)||c.uiPressStay(this._xrEventHandle)}e=st.Stay}else if(e!==st.End){switch(t){case ot.Select:null==(l=this._xrInteractor)||l.selectEnd(this._xrEventHandle);break;case ot.Activate:null==(h=this._xrInteractor)||h.activateEnd(this._xrEventHandle);break;case ot.UIPress:null==(_=this._xrInteractor)||_.uiPressExit(this._xrEventHandle)}e=st.End}return e},o.simulateKeyInput=function(t,e){this._isSimulateKeyInput||(this._isSimulateKeyInput=!0,p.off(u.EventType.HANDLE_INPUT,this._dispatchEventHandleInput,this),p.off(u.EventType.GAMEPAD_INPUT,this._dispatchEventHandleInput,this));var i=e===ct.KEY_UP?0:1;this._inputDevice===rt.Left_Hand?(this._handleEvent(ot.Select,this.selectActionLeft===t?i:0),this._handleEvent(ot.Activate,this.activateActionLeft===t?i:0),this._handleEvent(ot.UIPress,this.UIPressActionLeft===t?i:0)):this._inputDevice===rt.Right_Hand&&(this._handleEvent(ot.Select,this.selectActionRight===t?i:0),this._handleEvent(ot.Activate,this.activateActionRight===t?i:0),this._handleEvent(ot.UIPress,this.UIPressActionRight===t?i:0));var n=new lt(this._inputDevice);n.eventType=t,n.eventValue=i,n.keyEventActionType=e,this.node.emit(u.EventType.HANDLE_INPUT,n)},s(e,[{key:"inputDevice",get:function(){return this._inputDevice},set:function(t){t!==this._inputDevice&&(this._inputDevice=t)}},{key:"selectActionLeft",get:function(){return this._selectActionLeft},set:function(t){t!==this._selectActionLeft&&(this._selectActionLeft=t)}},{key:"activateActionLeft",get:function(){return this._activateActionLeft},set:function(t){t!==this._activateActionLeft&&(this._activateActionLeft=t)}},{key:"UIPressActionLeft",get:function(){return this._UIPressActionLeft},set:function(t){t!==this._UIPressActionLeft&&(this._UIPressActionLeft=t)}},{key:"selectActionRight",get:function(){return this._selectActionRight},set:function(t){t!==this._selectActionRight&&(this._selectActionRight=t)}},{key:"activateActionRight",get:function(){return this._activateActionRight},set:function(t){t!==this._activateActionRight&&(this._activateActionRight=t)}},{key:"UIPressActionRight",get:function(){return this._UIPressActionRight},set:function(t){t!==this._UIPressActionRight&&(this._UIPressActionRight=t)}},{key:"axisToPressThreshold",get:function(){return this._axisToPressThreshold},set:function(t){t!==this._axisToPressThreshold&&(this._axisToPressThreshold=t)}},{key:"model",get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t)}}]),e}(E)).prototype,"_inputDevice",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return rt.Left_Hand}}),z=e(K.prototype,"_selectActionLeft",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nt.GRIP_LEFT}}),Y=e(K.prototype,"_selectActionRight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return at.GRIP_RIGHT}}),X=e(K.prototype,"_activateActionLeft",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nt.TRIGGER_LEFT}}),W=e(K.prototype,"_activateActionRight",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return at.TRIGGER_RIGHT}}),j=e(K.prototype,"_UIPressActionLeft",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return nt.TRIGGER_LEFT}}),Q=e(K.prototype,"_UIPressActionRight",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return at.TRIGGER_RIGHT}}),Z=e(K.prototype,"_axisToPressThreshold",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),q=e(K.prototype,"_model",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(K.prototype,"inputDevice",[S],Object.getOwnPropertyDescriptor(K.prototype,"inputDevice"),K.prototype),e(K.prototype,"selectActionLeft",[x],Object.getOwnPropertyDescriptor(K.prototype,"selectActionLeft"),K.prototype),e(K.prototype,"activateActionLeft",[D],Object.getOwnPropertyDescriptor(K.prototype,"activateActionLeft"),K.prototype),e(K.prototype,"UIPressActionLeft",[m],Object.getOwnPropertyDescriptor(K.prototype,"UIPressActionLeft"),K.prototype),e(K.prototype,"selectActionRight",[k],Object.getOwnPropertyDescriptor(K.prototype,"selectActionRight"),K.prototype),e(K.prototype,"activateActionRight",[B],Object.getOwnPropertyDescriptor(K.prototype,"activateActionRight"),K.prototype),e(K.prototype,"UIPressActionRight",[C],Object.getOwnPropertyDescriptor(K.prototype,"UIPressActionRight"),K.prototype),e(K.prototype,"axisToPressThreshold",[w],Object.getOwnPropertyDescriptor(K.prototype,"axisToPressThreshold"),K.prototype),e(K.prototype,"model",[V],Object.getOwnPropertyDescriptor(K.prototype,"model"),K.prototype),M=K))||M)||M)||M)||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/xr-distortion-correction.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactive-simulator.ts"],(function(e){var t,o,i,r,s,n,a,h,l,d,y,c,_,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.createClass},function(e){r=e.cclegacy,s=e._decorator,n=e.sys,a=e.Camera,h=e.assetManager,l=e.RenderTexture,d=e.Vec3,y=e.MeshRenderer,c=e.utils,_=e.Component},function(e){u=e.DistortionMode,g=e.globalInteractiveManager}],execute:function(){var M,m,p,f,E,P;r._RF.push({},"fe760GdnFNGOpMrzWpDQpwy","xr-distortion-correction",void 0);var N=s.ccclass,C=s.property,v=s.menu;e("XRLensDistortionCorrection",(M=N("cc.XRLensDistortionCorrection"),m=v("XR/Device/XRLensDistortionCorrection"),p=C({step:.01,visible:function(){return this._curDistortionMode===u.BARREL}}),f=C({step:.01,visible:function(){return this._curDistortionMode===u.BARREL}}),M(E=m((t((P=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._gLensPolyK0=1,t._gLensPolyK1=-.0193,t._gLensPolyK2=.2073,t._gLensPolyK3=.1755,t._gLensPolyK4=.0239,t._gLensPolyK5=-.6065,t._gLensPolyK6=.6264,t._leftEyeMeshNode=null,t._rightEyeMeshNode=null,t._distortionCamera=null,t._reloadDistortionMesh=!1,t._dualEyeCameraRenderTexture=null,t._singleEyeCameraRenderTexture_L=null,t._singleEyeCameraRenderTexture_R=null,t._camerAspect=0,t._curDistortionMode=u.NONE,t}o(t,e);var r=t.prototype;return r.start=function(){var e,t=this;n.isBrowser&&!n.isNative&&(this._leftEyeMeshNode=this.node.getChildByName("LeftEyeMesh"),this._rightEyeMeshNode=this.node.getChildByName("RightEyeMesh"),this._distortionCamera=null==(e=this.node.getChildByName("DistortionCamera"))?void 0:e.getComponent(a),this._distortionCamera&&(this._distortionCamera.priority=4),this._curDistortionMode=g.distortionMode,h.loadAny({uuid:"303d6a3a-d09c-485f-a751-05a4c61b6d73",type:l},(function(e,o){e?console.log("XRLensDistortionCorrection load rt error."+e):t._dualEyeCameraRenderTexture=o})),h.loadAny({uuid:"d4332383-07f6-4eb3-9026-2a872245ab8d",type:l},(function(e,o){e?console.log("XRInteractiveSimulator load left rt error."+e):t._singleEyeCameraRenderTexture_L=o})),h.loadAny({uuid:"52d33d78-2b86-410a-997d-ffc9a2a9dadc",type:l},(function(e,o){e?console.log("XRInteractiveSimulator load right rt error."+e):t._singleEyeCameraRenderTexture_R=o})))},r.update=function(e){var t;n.isBrowser&&!n.isNative&&(g.distortionMode!==this._curDistortionMode&&(this._curDistortionMode=g.distortionMode,this._curDistortionMode===u.NONE?(this._leftEyeMeshNode&&(this._leftEyeMeshNode.active=!1),this._rightEyeMeshNode&&(this._rightEyeMeshNode.active=!1),this._distortionCamera&&(this._distortionCamera.node.active=!1)):(this._leftEyeMeshNode&&(this._leftEyeMeshNode.active=!0),this._rightEyeMeshNode&&(this._rightEyeMeshNode.active=!0),this._distortionCamera&&(this._distortionCamera.node.active=!0),this._reloadDistortionMesh=!0)),g.isDistortionParameterChanged&&(g.isDistortionParameterChanged=!1,g.distortionParameterK0!==this._gLensPolyK0&&(this.lensPolyK0=g.distortionParameterK0),g.distortionParameterK1!==this._gLensPolyK1&&(this.lensPolyK1=g.distortionParameterK1)),this._curDistortionMode!==u.NONE&&(null!=(t=this._distortionCamera)&&t.camera&&this._distortionCamera.camera.aspect!==this._camerAspect&&(this._camerAspect=this._distortionCamera.camera.aspect,this._leftEyeMeshNode&&(this._leftEyeMeshNode.setWorldScale(new d(this._leftEyeMeshNode.worldScale.y*this._camerAspect*.5,this._leftEyeMeshNode.worldScale.y,this._leftEyeMeshNode.worldScale.z)),this._leftEyeMeshNode.setWorldPosition(new d(-1*this._leftEyeMeshNode.worldScale.x,this._leftEyeMeshNode.worldPosition.y,this._leftEyeMeshNode.worldPosition.z))),this._rightEyeMeshNode&&(this._rightEyeMeshNode.setWorldScale(new d(this._rightEyeMeshNode.worldScale.y*this._camerAspect*.5,this._rightEyeMeshNode.worldScale.y,this._rightEyeMeshNode.worldScale.z)),this._rightEyeMeshNode.setWorldPosition(new d(this._rightEyeMeshNode.worldScale.x,this._rightEyeMeshNode.worldPosition.y,this._rightEyeMeshNode.worldPosition.z)))),this._reloadDistortionMesh&&(this._reloadDistortionMesh=!1,this.updateEyeDistortionMesh())))},r.updateEyeDistortionMesh=function(){var e,t=this._curDistortionMode===u.CIRCULAR?240:50,o=this._curDistortionMode===u.CIRCULAR?240:50,i=this.generateGeometry(t,o),r=null==(e=this._leftEyeMeshNode)?void 0:e.getComponent(y);if(r){var s,n;if(r.mesh=c.MeshUtils.createMesh(i),this._singleEyeCameraRenderTexture_L)null==(n=r.material)||n.setProperty("mainTexture",this._singleEyeCameraRenderTexture_L.getGFXTexture());null==(s=r.material)||s.setProperty("eye",2)}var a,h=null==(a=this._rightEyeMeshNode)?void 0:a.getComponent(y);if(h){var l,d;if(h.mesh=c.MeshUtils.createMesh(i),this._singleEyeCameraRenderTexture_R)null==(d=h.material)||d.setProperty("mainTexture",this._singleEyeCameraRenderTexture_R.getGFXTexture());null==(l=h.material)||l.setProperty("eye",2)}},r.generateGeometry=function(e,t){void 0===e&&(e=50),void 0===t&&(t=50);for(var o=[],i=[],r=[],s=new d(-1,-1,0),n=new d(1,1,0),a=Math.sqrt(2),h=0;h<=t;h++)for(var l=0;l<=e;l++){var y=2*l/e,c=2*h/t,_=s.x+y,g=s.y+c;o.push(_,g,0);var M=_,m=g,p=M*M+m*m,f=Math.sqrt(p),E=f*f,P=E*f,N=P*f,C=N*f,v=C*f,R=0;if(R+=this._gLensPolyK0,R+=this._gLensPolyK1*f,R+=this._gLensPolyK2*E,R+=this._gLensPolyK3*P,R+=this._gLensPolyK4*N,R+=this._gLensPolyK5*C,y=(M*(R+=this._gLensPolyK6*v)+1)/2,c=(m*R+1)/2,this._curDistortionMode===u.CIRCULAR&&Math.sqrt(_*_+g*g)>.8&&(y=-1,c=2),i.push(y,1-c),l<e&&h<t){var L=e+1,D=l+h*L,K=l+(h+1)*L,w=l+1+(h+1)*L,x=l+1+h*L;r.push(D,x,K),r.push(x,w,K)}}var A={positions:o,indices:r,minPos:s,maxPos:n,boundingRadius:a},T=(t+1)*(e+1),S=new Array(3*T);A.normals=S;for(var b=0;b<T;++b)S[3*b+0]=0,S[3*b+1]=1,S[3*b+2]=0;return A.uvs=i,A},i(t,[{key:"lensPolyK0",get:function(){return this._gLensPolyK0},set:function(e){this._gLensPolyK0=e,this._reloadDistortionMesh=!0}},{key:"lensPolyK1",get:function(){return this._gLensPolyK1},set:function(e){this._gLensPolyK1=e,this._reloadDistortionMesh=!0}}]),t}(_)).prototype,"lensPolyK0",[p],Object.getOwnPropertyDescriptor(P.prototype,"lensPolyK0"),P.prototype),t(P.prototype,"lensPolyK1",[f],Object.getOwnPropertyDescriptor(P.prototype,"lensPolyK1"),P.prototype),E=P))||E)||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/xr-extension.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"98ec8fWBX9G6bT872RkTa2M","xr-extension",void 0);t("XrExtensionKey",function(t){return t[t.XEK_DEFAULT=0]="XEK_DEFAULT",t[t.XEK_SPACES_CAMERA_FRAME_DATA=1]="XEK_SPACES_CAMERA_FRAME_DATA",t[t.XEK_SPACES_CAMERA_CONFIGURATION=2]="XEK_SPACES_CAMERA_CONFIGURATION",t[t.XEK_SPACES_CAMERA_INTRINSICS=3]="XEK_SPACES_CAMERA_INTRINSICS",t[t.XEK_SPACES_MESH_INFO=4]="XEK_SPACES_MESH_INFO",t[t.XEK_SPACES_MESH_VERTICES=5]="XEK_SPACES_MESH_VERTICES",t[t.XEK_SPACES_MESH_INDICES=6]="XEK_SPACES_MESH_INDICES",t[t.XEK_COMPOSITION_LAYER_CREATE=7]="XEK_COMPOSITION_LAYER_CREATE",t[t.XEK_COMPOSITION_LAYER_SWAPCHAIN_IMAGES=8]="XEK_COMPOSITION_LAYER_SWAPCHAIN_IMAGES",t[t.XEK_COMPOSITION_LAYER_TICK=9]="XEK_COMPOSITION_LAYER_TICK",t[t.XEK_COMPOSITION_LAYER_DESTROY=10]="XEK_COMPOSITION_LAYER_DESTROY",t[t.XEK_PASSTHROUGH_LAYER_TICK=11]="XEK_PASSTHROUGH_LAYER_TICK",t[t.XEK_ASSETS_IMAGE_DATA=12]="XEK_ASSETS_IMAGE_DATA",t}({})),t("XrBufferOperationType",function(t){return t[t.XBOT_SET=0]="XBOT_SET",t[t.XBOT_GET=1]="XBOT_GET",t}({})),t("xrExtension",{getInt8Data:function(t){return xr.XrExtension.getInstance().getInt8Data(t)},getUInt8Data:function(t){return xr.XrExtension.getInstance().getUInt8Data(t)},getInt32Data:function(t){return xr.XrExtension.getInstance().getInt32Data(t)},getUInt32Data:function(t){return xr.XrExtension.getInstance().getUInt32Data(t)},getFloat32Data:function(t){return xr.XrExtension.getInstance().getFloat32Data(t)},getStringData:function(t){return xr.XrExtension.getInstance().getStringData(t)},syncSharedBufferWithNative_INT8:function(t,n,e,E){return xr.XrExtension.getInstance().syncSharedBufferWithNative_INT8(t,n,e,E)},syncSharedBufferWithNative_UINT8:function(t,n,e,E){return xr.XrExtension.getInstance().syncSharedBufferWithNative_UINT8(t,n,e,E)},syncSharedBufferWithNative_INT32:function(t,n,e,E){return xr.XrExtension.getInstance().syncSharedBufferWithNative_INT32(t,n,e,E)},syncSharedBufferWithNative_UINT32:function(t,n,e,E){return xr.XrExtension.getInstance().syncSharedBufferWithNative_UINT32(t,n,e,E)},syncSharedBufferWithNative_Float32:function(t,n,e,E){return xr.XrExtension.getInstance().syncSharedBufferWithNative_Float32(t,n,e,E)},querySharedBufferLength:function(t){return xr.XrExtension.getInstance().querySharedBufferLength(t)},setXrEventCallback:function(t){xr.XrExtension.getInstance().setXrEventCallback(t)},notifyXrEvent:function(t,n,e,E){xr.XrExtension.getInstance().notifyXrEvent(t,n,e,E)}});n._RF.pop()}}}));

System.register("chunks:///_virtual/xr-feature-define.ts",["cc"],(function(e){var r,n;return{setters:[function(e){r=e.cclegacy,n=e.ccenum}],execute:function(){r._RF.push({},"c0e7chUoB1O75knp0T4vbTS","xr-feature-define",void 0);var c=e("CxrLayerType",function(e){return e[e.Underlay=0]="Underlay",e[e.Overlay=1]="Overlay",e}({}));n(c);var t=e("CxrShapeType",function(e){return e[e.Quad=0]="Quad",e[e.Cylinder=1]="Cylinder",e}({}));n(t);var a=e("CxrLockType",function(e){return e[e.WorldLock=0]="WorldLock",e[e.HeadLock=1]="HeadLock",e}({}));n(a);var u=e("CxrTextureType",function(e){return e[e.Static=0]="Static",e[e.Dynamic=1]="Dynamic",e}({}));n(u),r._RF.pop()}}}));

System.register("chunks:///_virtual/xr-gaze-interactor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./pose-tracker.ts","./raycast-checker.ts","./xr-interactable.ts","./xr-interactor.ts"],(function(t){var e,i,r,n,a,o,s,l,c,h,u,d,_,g,y,p,m,f,v,R,E,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose,o=t.createClass},function(t){s=t.cclegacy,l=t._decorator,c=t.Sprite,h=t.Node,u=t.Vec3,d=t.geometry,_=t.find,g=t.PhysicsSystem,y=t.DeviceType},function(t){p=t.PoseTracker,m=t.TrackingSource_Type},function(t){f=t.RaycastChecker},function(t){v=t.XrInteractable,R=t.XrControlEventType,E=t.IXrInteractable},function(t){T=t.XrInteractor}],execute:function(){var z,C,D,P,S,x,H,O,b,I,k,A,N,w;s._RF.push({},"545881MpgRHcJvx/HWYsWAk","xr-gaze-interactor",void 0);var X=l.ccclass,V=l.menu,G=l.property;t("XRGazeInteractor",(z=X("cc.XRGazeInteractor"),C=V("XR/Interaction/GazeInteractor"),D=G({range:[1,100,.1],tooltip:"i18n:xr-plugin.gaze_interactor.gazeDefaultDistance"}),P=G({tooltip:"i18n:xr-plugin.gaze_interactor.gazeTimerDuration"}),S=G({type:c,tooltip:"i18n:xr-plugin.gaze_interactor.gazeReticleOuterRing"}),x=G({visible:!0,displayOrder:6,range:[30,1e6,.1],tooltip:"i18n:xr-plugin.ray_interactor.maxRayDistance"}),H=G({override:!0,visible:!1}),O=G({type:h,override:!0,visible:!1}),z(b=C((k=e((I=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"gazeDefaultDistance",k,n(e)),r(e,"gazeTimerDuration",A,n(e)),r(e,"gazeReticleOuterRing",N,n(e)),r(e,"_maxRayDistance",w,n(e)),e._clickStatus=-1,e.defaultWorldScale=new u(.01,.01,.01),e._hmdRay=void 0,e._xrAgent=null,e._hmdNode=null,e._rayHitCollider=null,e._pressState=!1,e._gazeTimerCurrent=0,e}i(e,t);var s=e.prototype;return s.getRay=function(){return this._hmdRay},s.start=function(){if(this._hmdRay=new d.Ray,this._xrAgent||(this._xrAgent=_("XR Agent")),this._xrAgent)for(var t,e=this._xrAgent.getComponentsInChildren(p),i=a(e);!(t=i()).done;){var r=t.value;r.trackingSource===m.VIEW_POSE_ACTIVE_HMD&&(this._hmdNode=r.node)}this._hmdNode||console.error("XRGazeInteractor start failed not find hmd node !!!"),console.log("[XRGazeInteractor] Ray Max Distance is "+this.maxRayDistance)},s._judgeHit=function(t){if(g.instance.raycastClosest(this._hmdRay,4294967295,this.maxRayDistance,!0)){var e,i=g.instance.raycastClosestResult;if(!i)return!1;var r=null==(e=i.collider)?void 0:e.getComponent(v);if(r)return this._beTriggerNode=r,this._event.hitPoint=i.hitPoint,t===R.SELECT_ENTERED?this._collider=i.collider:t===R.ACTIVATED&&(this._activateCollider=i.collider),!0}return!1},s._judgeUIHit=function(){if(g.instance.raycastClosest(this._hmdRay,this._interactionLayerMask,this.maxRayDistance,!0)){var t,e=g.instance.raycastClosestResult;if(!e)return!1;if(null==(t=e.collider)?void 0:t.getComponent(f))return this._uiPressCollider=e.collider,!0}return!1},s.update=function(t){if(this._hmdNode&&(this._hmdRay.o=this._hmdNode.worldPosition,this._hmdRay.d=this._hmdNode.forward.normalize()),this._clickStatus>=0)return this._clickStatus+=t,this.uiPressStay(),void(this._clickStatus>=.1&&(this.uiPressExit(),this._clickStatus=-1,this._gazeTimerCurrent=0));this.raycastUI(t)},s.raycastUI=function(t){if(g.instance.raycastClosest(this._hmdRay,this._interactionLayerMask,this.maxRayDistance,!0)){var e=g.instance.raycastClosestResult;if(e&&e.collider){var i;this._event.hitPoint=e.hitPoint;var r,n=null==(i=e.collider)?void 0:i.getComponent(E);if(n)this._beTriggerNode=n,this._handleHoverEnter(e);else(null==(r=e.collider)?void 0:r.getComponent(f))?this._handleHoverEnter(e):(this._event.hitPoint=u.ZERO.clone(),this._handleHoverExit());this._rayHitCollider&&this._gazeTimerCurrent<=this.gazeTimerDuration&&(this._gazeTimerCurrent+=t,this.gazeReticleOuterRing&&(this.gazeReticleOuterRing.fillRange=this._gazeTimerCurrent/this.gazeTimerDuration*-1,this.gazeReticleOuterRing.fillRange<=-1&&(this.uiPressEnter(),this._clickStatus=0,this.gazeReticleOuterRing.fillRange=0)))}}else this._event.hitPoint=u.ZERO.clone(),this._handleHoverExit()},s.setGazePointerPosition=function(t,e){if(this.node.worldPosition=t.clone().add(e.clone().multiplyScalar(.1)),this.node.lookAt(t.clone().add(e.clone().multiplyScalar(-2))),this._hmdNode){var i=this.node.worldPosition.clone().subtract(this._hmdNode.worldPosition).length();this.node.worldScale=this.defaultWorldScale.clone().multiplyScalar(Math.max(i/4,.001))}},s.resetPointerPosition=function(){if(this._hmdNode){var t=this._hmdNode.forward.normalize().clone().multiplyScalar(this.gazeDefaultDistance),e=this._hmdNode.worldPosition.clone().add(t);this.setGazePointerPosition(e,this._hmdNode.forward.normalize().clone().multiplyScalar(-1)),this.gazeReticleOuterRing&&(this.gazeReticleOuterRing.fillRange=0)}},s.onEnable=function(){},s.onDisable=function(){},s._handleHoverEnter=function(t){var e,i,r,n;(this._clickStatus=-1,this._rayHitCollider)?this._rayHitCollider!==t.collider?(null==(e=this._interactorEvents)||e.hoverExited(this._event),this._rayHitCollider.node.emit(R.HOVER_EXITED,this._event),this._rayHitCollider=t.collider,null==(i=this._interactorEvents)||i.hoverEntered(this._event),this._rayHitCollider.node.emit(R.HOVER_ENTERED,this._event),this._gazeTimerCurrent=0):null==(r=this._interactorEvents)||r.hoverStay(this._event):(this._rayHitCollider=t.collider,null==(n=this._interactorEvents)||n.hoverEntered(this._event),this._rayHitCollider.node.emit(R.HOVER_ENTERED,this._event),this._gazeTimerCurrent=0);this._rayHitCollider&&this._rayHitCollider.node.emit(R.HOVER_STAY,this._event),this.setGazePointerPosition(t.hitPoint,t.hitNormal)},s._handleHoverExit=function(){var t;this._rayHitCollider&&(null==(t=this._interactorEvents)||t.hoverExited(this._event),this._rayHitCollider.node.emit(R.HOVER_EXITED,this._event),this._rayHitCollider=null);this.resetPointerPosition()},s.uiPressEnter=function(){var t;this._judgeUIHit()&&(this._event.deviceType=y.Other,null==(t=this._uiPressCollider)||t.node.emit(R.UIPRESS_ENTERED,this._event),this._pressState=!0)},s.uiPressStay=function(){var t;this._pressState&&(this._event.deviceType=y.Other,null==(t=this._uiPressCollider)||t.node.emit(R.UIPRESS_STAY,this._event))},s.uiPressExit=function(){var t;this._pressState&&(this._event.deviceType=y.Other,null==(t=this._uiPressCollider)||t.node.emit(R.UIPRESS_EXITED,this._event),this._uiPressCollider=null,this._pressState=!1)},o(e,[{key:"maxRayDistance",get:function(){return this._maxRayDistance},set:function(t){t!==this._maxRayDistance&&(this._maxRayDistance=t)}},{key:"selectActionTrigger",get:function(){return this._selectActionTrigger},set:function(t){t!==this._selectActionTrigger&&(this._selectActionTrigger=t)}},{key:"attachTransform",get:function(){return this._attachTransform},set:function(t){t!==this._attachTransform&&(this._attachTransform=t)}}]),e}(T)).prototype,"gazeDefaultDistance",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),A=e(I.prototype,"gazeTimerDuration",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),N=e(I.prototype,"gazeReticleOuterRing",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(I.prototype,"_maxRayDistance",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),e(I.prototype,"maxRayDistance",[x],Object.getOwnPropertyDescriptor(I.prototype,"maxRayDistance"),I.prototype),e(I.prototype,"selectActionTrigger",[H],Object.getOwnPropertyDescriptor(I.prototype,"selectActionTrigger"),I.prototype),e(I.prototype,"attachTransform",[O],Object.getOwnPropertyDescriptor(I.prototype,"attachTransform"),I.prototype),b=I))||b)||b));s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-hand-pose-driver.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-spaces-runtime-manager.ts","./xr-hand.ts"],(function(i){var e,n,t,r,a,l,o,u,_,p,s,T;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){a=i.cclegacy,l=i._decorator,o=i.Node,u=i.Quat,_=i.Component},function(i){p=i.XRSpacesRuntimeManager},function(i){s=i.XRHandType,T=i.XRHandJoint}],execute:function(){var h,d,c,b,I,m,D,N,f,X,g,M,E,A,R,y,J,H,P,L,x,O,w,z,k,v,S,G,B,C,U,F,Y,j,Q,q,Z,K,V,W,$,ii,ei,ni,ti,ri,ai,li,oi,ui,_i,pi;a._RF.push({},"be2f2A9I0NGbq7rSa2PgZyx","xr-hand-pose-driver",void 0);var si=l.ccclass,Ti=l.menu,hi=l.property;i("XRHandPoseDriver",(h=si("cc.spaces.XRHandPoseDriver"),d=Ti("hidden:XR/Spaces/XRHandPoseDriver"),c=hi({type:s}),b=hi(o),I=hi(o),m=hi(o),D=hi(o),N=hi(o),f=hi(o),X=hi(o),g=hi(o),M=hi(o),E=hi(o),A=hi(o),R=hi(o),y=hi(o),J=hi(o),H=hi(o),P=hi(o),L=hi(o),x=hi(o),O=hi(o),w=hi(o),z=hi(o),k=hi(o),v=hi(o),h(S=d((B=e((G=function(i){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=i.call.apply(i,[this].concat(a))||this,t(e,"handType",B,r(e)),t(e,"handModel",C,r(e)),t(e,"rootPart",U,r(e)),t(e,"thumbMetacarpal",F,r(e)),t(e,"thumbProximal",Y,r(e)),t(e,"thumbDistal",j,r(e)),t(e,"thumbTip",Q,r(e)),t(e,"indexProximal",q,r(e)),t(e,"indexIntermediate",Z,r(e)),t(e,"indexDistal",K,r(e)),t(e,"indexTip",V,r(e)),t(e,"middleProximal",W,r(e)),t(e,"middleIntermediate",$,r(e)),t(e,"middleDistal",ii,r(e)),t(e,"middleTip",ei,r(e)),t(e,"ringProximal",ni,r(e)),t(e,"ringIntermediate",ti,r(e)),t(e,"ringDistal",ri,r(e)),t(e,"ringTip",ai,r(e)),t(e,"pinkyMetacarpal",li,r(e)),t(e,"pinkyProximal",oi,r(e)),t(e,"pinkyIntermediate",ui,r(e)),t(e,"pinkyDistal",_i,r(e)),t(e,"pinkyTip",pi,r(e)),e._handTrackingManager=null,e._handJointMap=new Map,e._tempQuat=new u,e.printLog=!0,e.eulerYDegrees=0,e}n(e,i);var a=e.prototype;return a.start=function(){this._handTrackingManager=p.instance.getHandTrackingManager(),this._handJointMap.set(T.XR_HAND_JOINT_THUMB_METACARPAL_EXT,this.thumbMetacarpal),this._handJointMap.set(T.XR_HAND_JOINT_THUMB_PROXIMAL_EXT,this.thumbProximal),this._handJointMap.set(T.XR_HAND_JOINT_THUMB_DISTAL_EXT,this.thumbDistal),this._handJointMap.set(T.XR_HAND_JOINT_THUMB_TIP_EXT,this.thumbTip),this._handJointMap.set(T.XR_HAND_JOINT_INDEX_PROXIMAL_EXT,this.indexProximal),this._handJointMap.set(T.XR_HAND_JOINT_INDEX_INTERMEDIATE_EXT,this.indexIntermediate),this._handJointMap.set(T.XR_HAND_JOINT_INDEX_DISTAL_EXT,this.indexDistal),this._handJointMap.set(T.XR_HAND_JOINT_INDEX_TIP_EXT,this.indexTip),this._handJointMap.set(T.XR_HAND_JOINT_MIDDLE_PROXIMAL_EXT,this.middleProximal),this._handJointMap.set(T.XR_HAND_JOINT_MIDDLE_INTERMEDIATE_EXT,this.middleIntermediate),this._handJointMap.set(T.XR_HAND_JOINT_MIDDLE_DISTAL_EXT,this.middleDistal),this._handJointMap.set(T.XR_HAND_JOINT_MIDDLE_TIP_EXT,this.middleTip),this._handJointMap.set(T.XR_HAND_JOINT_RING_PROXIMAL_EXT,this.ringProximal),this._handJointMap.set(T.XR_HAND_JOINT_RING_INTERMEDIATE_EXT,this.ringIntermediate),this._handJointMap.set(T.XR_HAND_JOINT_RING_DISTAL_EXT,this.ringDistal),this._handJointMap.set(T.XR_HAND_JOINT_RING_TIP_EXT,this.ringTip),this._handJointMap.set(T.XR_HAND_JOINT_LITTLE_METACARPAL_EXT,this.pinkyMetacarpal),this._handJointMap.set(T.XR_HAND_JOINT_LITTLE_PROXIMAL_EXT,this.pinkyProximal),this._handJointMap.set(T.XR_HAND_JOINT_LITTLE_INTERMEDIATE_EXT,this.pinkyIntermediate),this._handJointMap.set(T.XR_HAND_JOINT_LITTLE_DISTAL_EXT,this.pinkyDistal),this._handJointMap.set(T.XR_HAND_JOINT_LITTLE_TIP_EXT,this.pinkyTip)},a.lateUpdate=function(i){var e=this;if(this._handTrackingManager&&this._handTrackingManager.isRunning){var n=null;this.handType===s.HAND_LEFT?n=this._handTrackingManager.leftHandData:this.handType===s.HAND_RIGHT&&(n=this._handTrackingManager.rightHandData),this._handJointMap.forEach((function(t,r){n.joints[r].orientation.clone().clone();if(r>=T.XR_HAND_JOINT_MIDDLE_METACARPAL_EXT&&T.XR_HAND_JOINT_MIDDLE_TIP_EXT,r>=T.XR_HAND_JOINT_RING_METACARPAL_EXT&&r<=T.XR_HAND_JOINT_RING_TIP_EXT){e.eulerYDegrees+=2*i,t.rotation=u.fromEuler(new u,e.eulerYDegrees,0,0);new u}}))}},e}(_)).prototype,"handType",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.HAND_LEFT}}),C=e(G.prototype,"handModel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(G.prototype,"rootPart",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(G.prototype,"thumbMetacarpal",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(G.prototype,"thumbProximal",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(G.prototype,"thumbDistal",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(G.prototype,"thumbTip",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(G.prototype,"indexProximal",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(G.prototype,"indexIntermediate",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(G.prototype,"indexDistal",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(G.prototype,"indexTip",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(G.prototype,"middleProximal",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(G.prototype,"middleIntermediate",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ii=e(G.prototype,"middleDistal",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ei=e(G.prototype,"middleTip",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ni=e(G.prototype,"ringProximal",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ti=e(G.prototype,"ringIntermediate",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ri=e(G.prototype,"ringDistal",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ai=e(G.prototype,"ringTip",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),li=e(G.prototype,"pinkyMetacarpal",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oi=e(G.prototype,"pinkyProximal",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=e(G.prototype,"pinkyIntermediate",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_i=e(G.prototype,"pinkyDistal",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pi=e(G.prototype,"pinkyTip",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=G))||S)||S));a._RF.pop()}}}));

System.register("chunks:///_virtual/xr-hand-tracking-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-spaces-feature-manager.ts","./xr-hand.ts"],(function(a){var n,t,e,r,i,s,o,c,g;return{setters:[function(a){n=a.inheritsLoose,t=a.createClass},function(a){e=a.cclegacy,r=a._decorator,i=a.sys},function(a){s=a.XRSpacesConfigKey,o=a.XRSpacesFeatureType,c=a.XRSpacesFeatureManager},function(a){g=a.XRHandData}],execute:function(){var d;e._RF.push({},"115ac+MSwdHF7PLUhydqPTw","xr-hand-tracking-manager",void 0);var h=r.ccclass,u=r.menu,l=r.executionOrder;r.property,a("XRHandTrackingManager",h("cc.spaces.XRHandTrackingManager")(d=l(-1)(d=u("hidden:XR/Spaces/XRHandTrackingManager")(d=function(a){function e(){for(var n,t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return(n=a.call.apply(a,[this].concat(e))||this)._leftHandData=new g,n._rightHandData=new g,n._onHandChanged=null,n}n(e,a);var r=e.prototype;return r.onStart=function(){i.isXR&&(this._leftHandData.internalIndex=0,this._rightHandData.internalIndex=1,xr.entry.setXRIntConfig(s.HAND_TRACKING,1),console.log("[XRHandTrackingManager] onStart"))},r.onStop=function(){i.isXR&&(xr.entry.setXRIntConfig(s.HAND_TRACKING,0),console.log("[XRHandTrackingManager] onStop"))},r.getFeatureType=function(){return o.HAND_TRACKING},r.onRetrieveChanges=function(a){if(i.isXR){var n=xr.entry.getXRStringConfig(s.HAND_TRACKING_DATA);if(n.length>0){var t=n.split("&");t.length>0&&(this._leftHandData.praseData(t[0]),this._rightHandData.praseData(t[1]),this._leftHandData.gestureData.praseData(t[2]),this._rightHandData.gestureData.praseData(t[3]),this._onHandChanged&&(this._onHandChanged(this._leftHandData),this._onHandChanged(this._rightHandData)))}}},r.setHandChangedCallback=function(a){this._onHandChanged=a},t(e,[{key:"leftHandData",get:function(){return this._leftHandData}},{key:"rightHandData",get:function(){return this._rightHandData}}]),e}(c))||d)||d)||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/xr-hand.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-controller.ts"],(function(t){var _,i,n,s,e,o,T,a,E,R,N,r,I;return{setters:[function(t){_=t.inheritsLoose,i=t.createClass},function(t){n=t.cclegacy,s=t._decorator,e=t.ccenum,o=t.Vec3,T=t.Quat,a=t.Component},function(t){E=t.XRController,R=t.XrInputDeviceType,N=t.XrEventTypeLeft,r=t.XrEventTypeRight,I=t.XrEventActionType}],execute:function(){var h;n._RF.push({},"7ca0dbR+odGKoa6Qph05j+V","xr-hand",void 0);var A=s.ccclass,X=(s.property,s.menu),D=t("XRHandType",function(t){return t[t.HAND_LEFT=0]="HAND_LEFT",t[t.HAND_RIGHT=1]="HAND_RIGHT",t}({}));e(D);var H=t("XRHandGestureType",function(t){return t[t.XR_HAND_GESTURE_TYPE_UNKNOWN=-1]="XR_HAND_GESTURE_TYPE_UNKNOWN",t[t.XR_HAND_GESTURE_TYPE_OPEN_HAND=0]="XR_HAND_GESTURE_TYPE_OPEN_HAND",t[t.XR_HAND_GESTURE_TYPE_GRAB=2]="XR_HAND_GESTURE_TYPE_GRAB",t[t.XR_HAND_GESTURE_TYPE_PINCH=7]="XR_HAND_GESTURE_TYPE_PINCH",t[t.XR_HAND_GESTURE_TYPE_POINT=8]="XR_HAND_GESTURE_TYPE_POINT",t[t.XR_HAND_GESTURE_TYPE_VICTORY=9]="XR_HAND_GESTURE_TYPE_VICTORY",t[t.XR_HAND_GESTURE_TYPE_METAL=11]="XR_HAND_GESTURE_TYPE_METAL",t[t.XR_HAND_GESTURE_TYPE_MAX_ENUM=2147483647]="XR_HAND_GESTURE_TYPE_MAX_ENUM",t}({}));e(H);var d=t("XRHandJoint",function(t){return t[t.XR_HAND_JOINT_PALM_EXT=0]="XR_HAND_JOINT_PALM_EXT",t[t.XR_HAND_JOINT_WRIST_EXT=1]="XR_HAND_JOINT_WRIST_EXT",t[t.XR_HAND_JOINT_THUMB_METACARPAL_EXT=2]="XR_HAND_JOINT_THUMB_METACARPAL_EXT",t[t.XR_HAND_JOINT_THUMB_PROXIMAL_EXT=3]="XR_HAND_JOINT_THUMB_PROXIMAL_EXT",t[t.XR_HAND_JOINT_THUMB_DISTAL_EXT=4]="XR_HAND_JOINT_THUMB_DISTAL_EXT",t[t.XR_HAND_JOINT_THUMB_TIP_EXT=5]="XR_HAND_JOINT_THUMB_TIP_EXT",t[t.XR_HAND_JOINT_INDEX_METACARPAL_EXT=6]="XR_HAND_JOINT_INDEX_METACARPAL_EXT",t[t.XR_HAND_JOINT_INDEX_PROXIMAL_EXT=7]="XR_HAND_JOINT_INDEX_PROXIMAL_EXT",t[t.XR_HAND_JOINT_INDEX_INTERMEDIATE_EXT=8]="XR_HAND_JOINT_INDEX_INTERMEDIATE_EXT",t[t.XR_HAND_JOINT_INDEX_DISTAL_EXT=9]="XR_HAND_JOINT_INDEX_DISTAL_EXT",t[t.XR_HAND_JOINT_INDEX_TIP_EXT=10]="XR_HAND_JOINT_INDEX_TIP_EXT",t[t.XR_HAND_JOINT_MIDDLE_METACARPAL_EXT=11]="XR_HAND_JOINT_MIDDLE_METACARPAL_EXT",t[t.XR_HAND_JOINT_MIDDLE_PROXIMAL_EXT=12]="XR_HAND_JOINT_MIDDLE_PROXIMAL_EXT",t[t.XR_HAND_JOINT_MIDDLE_INTERMEDIATE_EXT=13]="XR_HAND_JOINT_MIDDLE_INTERMEDIATE_EXT",t[t.XR_HAND_JOINT_MIDDLE_DISTAL_EXT=14]="XR_HAND_JOINT_MIDDLE_DISTAL_EXT",t[t.XR_HAND_JOINT_MIDDLE_TIP_EXT=15]="XR_HAND_JOINT_MIDDLE_TIP_EXT",t[t.XR_HAND_JOINT_RING_METACARPAL_EXT=16]="XR_HAND_JOINT_RING_METACARPAL_EXT",t[t.XR_HAND_JOINT_RING_PROXIMAL_EXT=17]="XR_HAND_JOINT_RING_PROXIMAL_EXT",t[t.XR_HAND_JOINT_RING_INTERMEDIATE_EXT=18]="XR_HAND_JOINT_RING_INTERMEDIATE_EXT",t[t.XR_HAND_JOINT_RING_DISTAL_EXT=19]="XR_HAND_JOINT_RING_DISTAL_EXT",t[t.XR_HAND_JOINT_RING_TIP_EXT=20]="XR_HAND_JOINT_RING_TIP_EXT",t[t.XR_HAND_JOINT_LITTLE_METACARPAL_EXT=21]="XR_HAND_JOINT_LITTLE_METACARPAL_EXT",t[t.XR_HAND_JOINT_LITTLE_PROXIMAL_EXT=22]="XR_HAND_JOINT_LITTLE_PROXIMAL_EXT",t[t.XR_HAND_JOINT_LITTLE_INTERMEDIATE_EXT=23]="XR_HAND_JOINT_LITTLE_INTERMEDIATE_EXT",t[t.XR_HAND_JOINT_LITTLE_DISTAL_EXT=24]="XR_HAND_JOINT_LITTLE_DISTAL_EXT",t[t.XR_HAND_JOINT_LITTLE_TIP_EXT=25]="XR_HAND_JOINT_LITTLE_TIP_EXT",t[t.XR_HAND_JOINT_MAX_ENUM_EXT=2147483647]="XR_HAND_JOINT_MAX_ENUM_EXT",t}({}));e(d);var G=t("XR_HAND_JOINT_COUNT_EXT",26),c=(t("XRStickKeyCode",function(t){return t[t.UNDEFINE=0]="UNDEFINE",t[t.A=1]="A",t[t.B=2]="B",t[t.X=3]="X",t[t.Y=4]="Y",t[t.L1=5]="L1",t[t.R1=6]="R1",t[t.MINUS=7]="MINUS",t[t.PLUS=8]="PLUS",t[t.L3=9]="L3",t[t.R3=10]="R3",t[t.MENU=11]="MENU",t[t.START=12]="START",t[t.TRIGGER_LEFT=13]="TRIGGER_LEFT",t[t.TRIGGER_RIGHT=14]="TRIGGER_RIGHT",t}({})),t("XRHandJointData",(function(){this.radius=.001,this.position=new o,this.orientation=new T}))),p=t("XRHandData",function(){function t(){this.internalIndex=0,this.index=-1,this.isTracked=!1,this.joints=new Array(G),this.gestureData=new l;for(var t=0;t<G;t++)this.joints[t]=new c}var _=t.prototype;return _.praseData=function(t){this.isTracked=!1;var _=t.split("|");if(_.length>0&&(this.index=parseInt(_[0]),this.isTracked=1===parseInt(_[1]),this.isTracked))for(var i=0;i<G;i++)this.joints[i].radius=parseFloat(_[8*i+2]),this.joints[i].orientation.x=parseFloat(_[8*i+2+1]),this.joints[i].orientation.y=parseFloat(_[8*i+2+2]),this.joints[i].orientation.z=parseFloat(_[8*i+2+3]),this.joints[i].orientation.w=parseFloat(_[8*i+2+4]),this.joints[i].position.x=parseFloat(_[8*i+2+5]),this.joints[i].position.y=parseFloat(_[8*i+2+6]),this.joints[i].position.z=parseFloat(_[8*i+2+7]);this.internalIndex!==this.index&&console.log("hand data is wrong index:"+this.internalIndex+" vs "+this.index+", data is "+t)},_.useTestData=function(){this.joints[0].orientation=new T(.213157,.102828,.17805,.955138),this.joints[0].position=new o(-.258312,-.374638,-.246169),this.joints[1].orientation=new T(.213157,.102828,.17805,.955138),this.joints[1].position=new o(-.250743,-.393424,-.206),this.joints[2].orientation=new T(.250127,-.201926,-.664479,.674633),this.joints[2].position=new o(-.22991,-.387109,-.214811),this.joints[3].orientation=new T(.155899,-.131241,-.688012,.696499),this.joints[3].position=new o(-.198802,-.381066,-.2452),this.joints[4].orientation=new T(-.217012,.239091,-.658697,.679602),this.joints[4].position=new o(-.182284,-.378855,-.279767),this.joints[5].orientation=new T(-.217012,.239091,-.658697,.679602),this.joints[5].position=new o(-.201258,-.376728,-.306215),this.joints[6].orientation=new T(.229839,-.071738,.140619,.960341),this.joints[6].position=new o(-.243421,-.383055,-.221714),this.joints[7].orientation=new T(.191338,-.071805,.138991,.968976),this.joints[7].position=new o(-.240488,-.350418,-.281764),this.joints[8].orientation=new T(.009076,-.113485,.119733,.986257),this.joints[8].position=new o(-.236334,-.336878,-.310704),this.joints[9].orientation=new T(-.156303,-.136165,.098918,.973264),this.joints[9].position=new o(-.230623,-.335254,-.332099),this.joints[10].orientation=new T(-.156303,-.136165,.098918,.973264),this.joints[10].position=new o(-.223325,-.341018,-.35288),this.joints[11].orientation=new T(.213157,.102828,.17805,.955138),this.joints[11].position=new o(-.25448,-.386926,-.220835),this.joints[12].orientation=new T(.124714,.141994,.197572,.961899),this.joints[12].position=new o(-.269915,-.359395,-.279411),this.joints[13].orientation=new T(-.422948,-.006784,.24097,.8735),this.joints[13].position=new o(-.280696,-.350843,-.314754),this.joints[14].orientation=new T(-.532957,-.05154,.243881,.808593),this.joints[14].position=new o(-.275005,-.369566,-.331972),this.joints[15].orientation=new T(-.532957,-.05154,.243881,.808593),this.joints[15].position=new o(-.266641,-.390274,-.343055),this.joints[16].orientation=new T(.18125,.196187,.198637,.942975),this.joints[16].position=new o(-.262173,-.390989,-.219298),this.joints[17].orientation=new T(-.11793,.196263,.259871,.938105),this.joints[17].position=new o(-.282512,-.369334,-.273773),this.joints[18].orientation=new T(-.657787,-.014139,.327278,.678237),this.joints[18].position=new o(-.291776,-.378566,-.303697),this.joints[19].orientation=new T(-.872536,-.157342,.303024,.349431),this.joints[19].position=new o(-.28038,-.402146,-.307686),this.joints[20].orientation=new T(-.872536,-.157342,.303024,.349431),this.joints[20].position=new o(-.266231,-.415082,-.294219),this.joints[21].orientation=new T(.147963,.307598,.218139,.914279),this.joints[21].position=new o(-.269653,-.39525,-.216716),this.joints[22].orientation=new T(-.10817,.24345,.294744,.917691),this.joints[22].position=new o(-.294045,-.380262,-.262911),this.joints[23].orientation=new T(-.445758,.135228,.361694,.807584),this.joints[23].position=new o(-.303866,-.388428,-.286889),this.joints[24].orientation=new T(-.600167,.033119,.393704,.695485),this.joints[24].position=new o(-.301999,-.40309,-.297729),this.joints[25].orientation=new T(-.600167,.033119,.393704,.695485),this.joints[25].position=new o(-.293078,-.421732,-.304075)},t}()),l=t("XRHandGestureData",function(){function t(){this.index=0,this.isTracked=!1,this.gestureType=H.XR_HAND_GESTURE_TYPE_UNKNOWN,this.gestureRadio=0,this.gestureFlipRadio=0}return t.prototype.praseData=function(t){this.isTracked=!1;var _=t.split("|");_.length>0&&(this.index=parseInt(_[0]),this.isTracked=1===parseInt(_[1]),this.gestureType=parseInt(_[2]),this.gestureRadio=parseFloat(_[3]),this.gestureFlipRadio=parseFloat(_[4]))},t}()),P=t("HandEventType",function(t){return t.GESTURE_CHANGE="hand-gesture",t.TRACK_STATE_CHANGE="hand-track-state",t}({}));t("XRHand",A("cc.spaces.XRHand")(h=X("hidden:XR/Spaces/XRHand")(h=function(t){function n(){for(var _,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(_=t.call.apply(t,[this].concat(n))||this)._handData=new p,_._lastGestureType=H.XR_HAND_GESTURE_TYPE_UNKNOWN,_._isTracked=!1,_._controller=null,_._isPinched=!1,_._isGrabed=!1,_}_(n,t);var s=n.prototype;return s.syncData=function(t){this._handData=t},s.start=function(){if(this._controller=this.node.getComponent(E),!this._controller||!this._controller.enabled){var t=this.node.getChildByName("Joint_0");this._controller=t.getComponent(E)}},s.update=function(t){this._isTracked!==this._handData.isTracked&&(this.node.emit(P.TRACK_STATE_CHANGE,this,this._isTracked,this._handData.isTracked),this._isTracked=this._handData.isTracked,this._controller&&(this._controller.inputDevice=0===this._handData.index?R.Left_Hand:R.Right_Hand,0===this._handData.index?(this._controller.inputDevice=R.Left_Hand,this._controller.selectActionLeft=N.GRIP_LEFT,this._controller.activateActionLeft=N.BUTTON_X,this._controller.UIPressActionLeft=N.TRIGGER_LEFT):(this._controller.inputDevice=R.Right_Hand,this._controller.selectActionRight=r.GRIP_RIGHT,this._controller.activateActionRight=r.BUTTON_A,this._controller.UIPressActionRight=r.TRIGGER_RIGHT)));for(var _=0;_<G;_++){var i=this.node.getChildByName("Joint_"+_);i.setRotation(this._handData.joints[_].orientation),i.setPosition(this._handData.joints[_].position),i.active=this._isTracked}var n=this.node.getChildByName("Joint_Ray");if(n.position=this._handData.joints[d.XR_HAND_JOINT_WRIST_EXT].position,n.rotation=this._handData.joints[d.XR_HAND_JOINT_WRIST_EXT].orientation,this._handData.gestureData.gestureRadio>=.5&&this._handData.gestureData.gestureType>H.XR_HAND_GESTURE_TYPE_UNKNOWN){var s=this._handData.gestureData.gestureType;s===H.XR_HAND_GESTURE_TYPE_PINCH&&this._lastGestureType!==H.XR_HAND_GESTURE_TYPE_PINCH?(this._controller.simulateKeyInput(0===this._handData.index?N.TRIGGER_LEFT:r.TRIGGER_RIGHT,I.KEY_DOWN),this._isPinched=!0):this._isPinched&&this._lastGestureType===s&&s===H.XR_HAND_GESTURE_TYPE_PINCH?this._controller.simulateKeyInput(0===this._handData.index?N.TRIGGER_LEFT:r.TRIGGER_RIGHT,I.KEY_PRESSING):this._isPinched&&this._lastGestureType!==s&&this._lastGestureType===H.XR_HAND_GESTURE_TYPE_PINCH&&(this._controller.simulateKeyInput(0===this._handData.index?N.TRIGGER_LEFT:r.TRIGGER_RIGHT,I.KEY_UP),this._isPinched=!1),s===H.XR_HAND_GESTURE_TYPE_GRAB&&this._lastGestureType!==H.XR_HAND_GESTURE_TYPE_GRAB?(this._controller.simulateKeyInput(0===this._handData.index?N.GRIP_LEFT:r.GRIP_RIGHT,I.KEY_DOWN),this._isGrabed=!0):this._isGrabed&&s!==H.XR_HAND_GESTURE_TYPE_OPEN_HAND?this._controller.simulateKeyInput(0===this._handData.index?N.GRIP_LEFT:r.GRIP_RIGHT,I.KEY_PRESSING):this._isGrabed&&s===H.XR_HAND_GESTURE_TYPE_OPEN_HAND&&(this._controller.simulateKeyInput(0===this._handData.index?N.GRIP_LEFT:r.GRIP_RIGHT,I.KEY_UP),this._isGrabed=!1),this._lastGestureType!==s&&(this.node.emit(P.GESTURE_CHANGE,this,this._lastGestureType,s),this._lastGestureType=s)}},i(n,[{key:"HandData",get:function(){return this._handData}}]),n}(a))||h)||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/xr-hit-testing-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-spaces-feature-manager.ts","./xr-raycast-hit-result.ts"],(function(t){var e,n,r,a,s,i,o,c,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){r=t.cclegacy,a=t._decorator,s=t.sys},function(t){i=t.XRSpacesConfigKey,o=t.XRSpacesFeatureType,c=t.XRSpacesFeatureManager},function(t){u=t.XRRaycastHitResult}],execute:function(){var g;r._RF.push({},"86137CjPEBNKJfXUEtOLSnE","xr-hit-testing-manager",void 0);var R=a.ccclass,l=a.menu;t("XRHitTestingManager",R("cc.spaces.XRHitTestingManager")(g=l("hidden:XR/Spaces/XRHitTestingManager")(g=function(t){function r(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._hitResult=new u,e}e(r,t);var a=r.prototype;return a.onStart=function(){s.isXR&&(xr.entry.setXRIntConfig(i.HIT_TESTING,1),console.log("[XRHitTestingManager] onStart"))},a.onStop=function(){s.isXR&&(xr.entry.setXRIntConfig(i.HIT_TESTING,0),console.log("[XRHitTestingManager] onStop"))},a.getFeatureType=function(){return o.HIT_TESTING},a.onRetrieveChanges=function(t){if(s.isXR){var e=xr.entry.getXRStringConfig(i.HIT_TESTING_DATA);e.length>0&&this._hitResult.parseData(e)}},n(r,[{key:"RaycastHitResult",get:function(){return this._hitResult}}]),r}(c))||g)||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/xr-interactable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./interaction-mask.ts"],(function(e){var t,i,r,n,a,c,o,l,s,_,y,u,d;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass,r=e.applyDecoratedDescriptor,n=e.wrapNativeSuper,a=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,s=e.Node,_=e.DeviceType,y=e.Component,u=e.Collider},function(e){d=e.InteractionMask}],execute:function(){var E,p,h,R,f,S,g;o._RF.push({},"a5263I5+t9Lr6IFhlKzAOOo","xr-interactable",void 0);var C=l.property,T=(e("XrEventHandle",function(e){function i(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).deviceType=_.Other,t.triggerType=v.State_Change,t.hitPoint=null,t.model=null,t.eventHandle=0,t.triggerNode=null,t.attachNode=null,t.forceGrab=!0,t}return t(i,e),i}(n(Event))),e("XrControlEventType",function(e){return e.SELECT_ENTERED="select-entered",e.SELECT_EXITED="select-exited",e.SELECT_STAY="select-stay",e.SELECT_CANCELED="select-canceled",e.ACTIVATED="OnActivited",e.DEACTIVITED="Deactivited",e.ACTIVATE_STAY="activite-stay",e.ACTIVATE_CANCELED="activate-canceled",e.UIPRESS_ENTERED="UI-press-entered",e.UIPRESS_EXITED="UI-press-exited",e.UIPRESS_STAY="UI-press-stay",e.UIPRESS_CANCELED="UI-press-canceled",e.HOVER_ENTERED="hover-entered",e.HOVER_EXITED="hover-exited",e.HOVER_STAY="hover-stay",e.HOVER_CANCELED="hover-canceled",e}({}))),v=(e("StateType",function(e){return e.Select="select",e.Activite="activite",e}({})),e("InteractorState",function(e){return e.Start="interactor_start",e.Stay="interactor_stay",e.End="interactor_end",e.Cancel="interactor_cancel",e}({})),e("InteractorTriggerState",function(e){return e.Select_Start="select_start",e.Select_Stay="select_stay",e.Select_End="select_end",e.Select_Canceled="select_canceled",e.Activite_Start="activite_start",e.Activite_Stay="activite_stay",e.Activite_End="activite_end",e.Activite_Canceled="activite_canceled",e}({})),e("SelectActionTrigger_Type",function(e){return e[e.State=0]="State",e[e.State_Change=1]="State_Change",e[e.Toggle=2]="Toggle",e[e.Sticky=3]="Sticky",e}({}))),A=e("IXrInteractable",function(e){function r(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this)._colliderCom=null,t._triggerNode=null,t}return t(r,e),i(r,[{key:"triggerNode",get:function(){return this._triggerNode},set:function(e){e!==this._triggerNode&&(this._triggerNode=e)}}]),r}(y));e("XrInteractable",(E=C({serializable:!0}),p=C({serializable:!0}),h=C({type:d.BitMask,displayOrder:1,tooltip:"i18n:xr-plugin.xr_interactable.interactionLayerMask"}),R=C({type:s,displayOrder:5,tooltip:"i18n:xr-plugin.xr_interactable.rayReticle"}),S=r((f=function(e){function r(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return t=e.call.apply(e,[this].concat(r))||this,a(t,"_rayReticle",S,c(t)),a(t,"_interactionLayerMask",g,c(t)),t}t(r,e);var n=r.prototype;return n.onLoad=function(){var e;this._colliderCom=this.node.getComponent(u),null!=(e=this._colliderCom)&&e.node&&(this._colliderCom.node.on(T.HOVER_ENTERED,this._setRayReticle,this),this._colliderCom.node.on(T.HOVER_STAY,this._setRayReticle,this),this._colliderCom.node.on(T.HOVER_EXITED,this._unsetRayReticle,this))},n.onDestroy=function(){var e;null!=(e=this._colliderCom)&&e.node&&(this._colliderCom.node.off(T.HOVER_ENTERED,this._setRayReticle,this),this._colliderCom.node.off(T.HOVER_STAY,this._setRayReticle,this),this._colliderCom.node.off(T.HOVER_EXITED,this._unsetRayReticle,this))},n.start=function(){this._colliderCom&&this._colliderCom.setGroup(this._interactionLayerMask)},n._setRayReticle=function(e){},n._unsetRayReticle=function(){this._rayReticle&&(this._rayReticle.active=!1)},i(r,[{key:"interactionLayerMask",get:function(){return this._interactionLayerMask},set:function(e){e!==this._interactionLayerMask&&(this._interactionLayerMask=e)}},{key:"rayReticle",get:function(){return this._rayReticle},set:function(e){e!==this._rayReticle&&(this._rayReticle=e)}}]),r}(A)).prototype,"_rayReticle",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=r(f.prototype,"_interactionLayerMask",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4294967295}}),r(f.prototype,"interactionLayerMask",[h],Object.getOwnPropertyDescriptor(f.prototype,"interactionLayerMask"),f.prototype),r(f.prototype,"rayReticle",[R],Object.getOwnPropertyDescriptor(f.prototype,"rayReticle"),f.prototype),f));o._RF.pop()}}}));

System.register("chunks:///_virtual/xr-interactive-simulator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./xr-interactable.ts","./xr-interactor.ts","./hmd-ctrl.ts","./target-eye.ts","./xr-controller.ts","./xr-remote-preview.ts"],(function(e){var t,i,o,n,r,a,s,l,h,d,g,_,c,C,u,p,v,m,T,y,E,f,N,R,S,D,P,I,L,w,x,O,M,b,A,H,B,k,K,Y,U,G,X;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose,a=e.createClass},function(e){s=e.cclegacy,l=e._decorator,h=e.ccenum,d=e.Node,g=e.Vec3,_=e.Quat,c=e.Vec2,C=e.sys,u=e.find,p=e.Camera,v=e.Rect,m=e.Toggle,T=e.Slider,y=e.assetManager,E=e.RenderTexture,f=e.director,N=e.KeyCode,R=e.input,S=e.Input,D=e.clamp,P=e.DeviceType,I=e.ProgressBar,L=e.Button,w=e.Component},function(e){x=e.EDITOR},function(e){O=e.XrEventHandle},function(e){M=e.XrInteractor},function(e){b=e.HMDCtrl},function(e){A=e.TargetEye,H=e.TargetEye_Type},function(e){B=e.XRController,k=e.XrInputDeviceType,K=e.XrInputAction,Y=e.XrEventTypeRight,U=e.XrEventActionType,G=e.XrEventTypeLeft},function(e){X=e.XRRemotePreView}],execute:function(){var F,W,z,V,j,Q,q,J,Z,$,ee,te,ie,oe,ne;s._RF.push({},"2dad3FAQq1EI7EXODhj9eIx","xr-interactive-simulator",void 0);var re=l.ccclass,ae=l.property,se=l.menu,le=e("InteractiveSimulateType",function(e){return e[e.HMD=0]="HMD",e[e.LEFT_CONTROLLER=1]="LEFT_CONTROLLER",e[e.RIGHT_CONTROLLER=2]="RIGHT_CONTROLLER",e}({}));h(le);var he=e("DeviceSimulateType",function(e){return e[e.LOCAL=0]="LOCAL",e[e.REMOTE=1]="REMOTE",e}({}));h(he);var de=e("DeviceConnetcType",function(e){return e[e.WIFI=1]="WIFI",e}({}));h(de);var ge=e("DistortionMode",function(e){return e[e.NONE=0]="NONE",e[e.BARREL=1]="BARREL",e[e.CIRCULAR=2]="CIRCULAR",e}({}));h(ge);var _e=e("globalInteractiveManager",{distortionMode:ge.NONE,isDistortionParameterChanged:!1,distortionParameterK0:1,distortionParameterK1:0});e("XRInteractiveSimulator",(F=re("cc.XRInteractiveSimulator"),W=se("XR/Device/XRInteractiveSimulator"),z=ae({serializable:!0}),V=ae({type:d,displayName:"XR Agent",tooltip:"i18n:xr-plugin.xr_interactive_simulator.xrAgent"}),j=ae({displayName:"XR Device Ip",tooltip:"i18n:xr-plugin.xr_interactive_simulator.deviceIp"}),Q=ae({type:he,displayName:"XR Preview Type",tooltip:"i18n:xr-plugin.xr_interactive_simulator.previewType"}),q=ae({type:de,displayName:"XR Connect Type",tooltip:"i18n:xr-plugin.xr_interactive_simulator.connectType"}),J=ae({displayName:"XR Device Ip",tooltip:"i18n:xr-plugin.xr_interactive_simulator.deviceIp",visible:function(){return this.xrDeviceSimulateType===he.REMOTE&&this._xrDeviceConnectType===de.WIFI}}),Z=ae({type:de,displayName:"XR Connect Type",tooltip:"i18n:xr-plugin.xr_interactive_simulator.connectType",visible:function(){return this.xrDeviceSimulateType===he.REMOTE}}),F($=W((te=t((ee=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"_xrAgent",te,n(t)),o(t,"_xrDeivceIpAddress",ie,n(t)),o(t,"xrDeviceSimulateType",oe,n(t)),o(t,"_xrDeviceConnectType",ne,n(t)),t._dualEyeCameraRenderTexture=null,t._singleEyeCameraRenderTexture_L=null,t._singleEyeCameraRenderTexture_R=null,t._leftEyeCamera=null,t._rightEyeCamera=null,t._mainCamera=null,t._leftControllerNode=null,t._rightControllerNode=null,t._targetControlledNode=null,t._rotationYawDeg=0,t._rotationPitchDeg=0,t._keyPressingCount=0,t._moveSpeedFactor=1,t._isTriggerMoveEvent=!1,t._nodeTargetPostion=new g,t._nodeMovingPostion=new g,t._nodeTargetRotation=new _,t._touchDeltaXY=new c,t._nodeTempYawRotation=new _,t._nodeTempPitchRotation=new _,t._curInteractiveSimulateType=le.HMD,t._xrEventHandle=new O("xrEventHandle"),t._guideContentNode=null,t._guideContentLastShowTime=0,t._topToggleHmd=null,t._topToggleLeftCtrl=null,t._topToggleRightCtrl=null,t._topToggleSetting=null,t._distortionParameterK0=null,t._distortionSettingPanel=null,t._distortionSettingShowTime=3,t._guideMaskContentNode=null,t._guideStayShownTime=0,t.CONFIG_GUIDE_SHOWTIME=1,t._leftControllerInitPosition=new g,t._rightControllerInitPosition=new g,t._xrRemotePreview=null,t}i(t,e);var s=t.prototype;return s.start=function(){var e=this;if(!C.isBrowser||C.isNative||globalThis.__globalXR.webxrCompatible)this.node.active=!1,console.log("XRInteractiveSimulator is not supported!");else{var t,i,o,n,a;this._xrAgent||(this._xrAgent=u("XR Agent"));var s=null==(t=this._xrAgent)?void 0:t.getComponentsInChildren(A);if(s)for(var l,h=r(s);!(l=h()).done;){var d=l.value;d.targetEye===H.BOTH?(this._mainCamera=d.node.getComponent(p),this._targetControlledNode=d.node):d.targetEye===H.LEFT?this._leftEyeCamera=d.node.getComponent(p):d.targetEye===H.RIGHT&&(this._rightEyeCamera=d.node.getComponent(p))}if(this._leftEyeCamera&&(this._leftEyeCamera.enabled=!0,this._leftEyeCamera.priority=1,this._leftEyeCamera.rect=new v(0,0,.5,1)),this._rightEyeCamera&&(this._rightEyeCamera.enabled=!0,this._rightEyeCamera.priority=2,this._rightEyeCamera.rect=new v(.5,0,.5,1)),this._mainCamera){this._mainCamera.enabled=!1;var g=this._mainCamera.getComponent(b);g&&(g.perEyeCamera=!0)}var _=null==(i=this._xrAgent)?void 0:i.getComponentsInChildren(B);if(_)for(var c,f=r(_);!(c=f()).done;){var N=c.value;N.inputDevice===k.Left_Hand?this._leftControllerNode=N.node:N.inputDevice===k.Right_Hand&&(this._rightControllerNode=N.node)}this._leftControllerNode&&(this._leftControllerInitPosition=this._leftControllerNode.position.clone()),this._rightControllerNode&&(this._rightControllerInitPosition=this._rightControllerNode.position.clone());var R,S=this.node.getChildByName("Canvas");if(S&&(S.active=!0),this._guideContentNode=this.node.getChildByPath("Canvas/GuideContent"),this._guideContentNode&&(this._guideContentNode.active=!0),this._guideMaskContentNode=this.node.getChildByPath("Canvas/GuideContent/Mask/Content"),this._guideContentLastShowTime=this.CONFIG_GUIDE_SHOWTIME,this._topToggleHmd=null==(o=this.node.getChildByPath("Canvas/ToggleHmd"))?void 0:o.getComponent(m),this._topToggleLeftCtrl=null==(n=this.node.getChildByPath("Canvas/ToggleLeftCtrl"))?void 0:n.getComponent(m),this._topToggleRightCtrl=null==(a=this.node.getChildByPath("Canvas/ToggleRightCtrl"))?void 0:a.getComponent(m),this.node.getChildByPath("Canvas/ToggleSetting"))this._topToggleSetting=null==(R=this.node.getChildByPath("Canvas/ToggleSetting"))?void 0:R.getComponent(m);this.xrDeviceSimulateType===he.LOCAL?(this._topToggleHmd&&(this._topToggleHmd.interactable=!0),this._topToggleLeftCtrl&&(this._topToggleLeftCtrl.interactable=!0),this._topToggleRightCtrl&&(this._topToggleRightCtrl.interactable=!0)):this.xrDeviceSimulateType===he.REMOTE&&(this._topToggleHmd&&(this._topToggleHmd.interactable=!1),this._topToggleLeftCtrl&&(this._topToggleLeftCtrl.interactable=!1),this._topToggleRightCtrl&&(this._topToggleRightCtrl.interactable=!1),this.node.on("sync-pose",this.syncDevicePose,this),this.node.on("sync-device-info",this.syncDeviceInfo,this),this._xrRemotePreview=this.node.addComponent(X),this._xrRemotePreview.connect(this.xrDeivceIpAddress));var D=this.node.getChildByPath("Canvas/SettingPanel/DistortionK0");D&&(this._distortionParameterK0=D.getComponent(T),this._distortionParameterK0&&(this._distortionParameterK0.node.on("slide",this.onDistortionParameterChanged,this),this._distortionParameterK0.progress=1-_e.distortionParameterK0,this._distortionParameterK0.enabled=_e.distortionMode!==ge.NONE)),this._distortionSettingPanel=this.node.getChildByPath("Canvas/SettingPanel"),this._distortionSettingPanel&&(this._distortionSettingPanel.active=!1),y.loadAny({uuid:"303d6a3a-d09c-485f-a751-05a4c61b6d73",type:E},(function(t,i){t?console.log("XRInteractiveSimulator load rt error."+t):e._dualEyeCameraRenderTexture=i})),y.loadAny({uuid:"d4332383-07f6-4eb3-9026-2a872245ab8d",type:E},(function(t,i){t?console.log("XRInteractiveSimulator load left rt error."+t):e._singleEyeCameraRenderTexture_L=i})),y.loadAny({uuid:"52d33d78-2b86-410a-997d-ffc9a2a9dadc",type:E},(function(t,i){t?console.log("XRInteractiveSimulator load right rt error."+t):e._singleEyeCameraRenderTexture_R=i})),console.log("XRInteractiveSimulator is supported!")}},s.syncDeviceInfo=function(e){this._leftEyeCamera&&(this._leftEyeCamera.fov=Math.abs(e.leftEyeFov.z)+Math.abs(e.leftEyeFov.w)),this._rightEyeCamera&&(this._rightEyeCamera.fov=Math.abs(e.rightEyeFov.z)+Math.abs(e.rightEyeFov.w))},s.syncDevicePose=function(e){var t;null==(t=this._mainCamera)||t.node.setRTS(e.hmdOrientation,e.hmdPosition,g.ONE),this._leftControllerNode&&this._leftControllerNode.setRTS(e.leftControllerOrientation,e.leftControllerPosition,g.ONE),this._rightControllerNode&&this._rightControllerNode.setRTS(e.rightControllerOrientation,e.rightControllerPosition,g.ONE)},s.update=function(e){var t,i,o;!C.isBrowser||C.isNative||globalThis.__globalXR.webxrCompatible||(this.xrDeviceSimulateType===he.LOCAL&&this._isTriggerMoveEvent&&this._targetControlledNode&&(g.lerp(this._nodeMovingPostion,this._targetControlledNode.position,this._nodeTargetPostion,e),this._targetControlledNode.setPosition(this._nodeMovingPostion)),this._guideContentNode&&this._guideContentNode.active&&(this._guideStayShownTime+=e,this._guideStayShownTime>1&&(this._guideMaskContentNode&&this._guideContentLastShowTime>0?this._guideMaskContentNode.position.x<=-410?this._guideContentLastShowTime-=e:this._guideMaskContentNode.position=this._guideMaskContentNode.position.subtract3f(2,0,0):this._guideContentLastShowTime<0&&(this._guideContentNode.active=!1,this._guideContentLastShowTime=0))),this._distortionSettingPanel&&this._distortionSettingPanel.active&&this._distortionSettingShowTime<=0?(this._distortionSettingPanel.active=!1,this._topToggleSetting&&(this._topToggleSetting.isChecked=!1),this.resetDistortionButtonInteractable(this._distortionSettingPanel,!1),this.disableDistortionSelectedBackground(this._distortionSettingPanel)):null!=(o=this._distortionSettingPanel)&&o.active&&(this._distortionSettingShowTime-=e));if(C.isBrowser&&x&&null!=(t=this._leftEyeCamera)&&t.camera&&this._leftEyeCamera.camera.window!==(null==(i=f.root)?void 0:i.mainWindow)){var n,r,a,s,l,h;if(_e.distortionMode===ge.NONE)this._leftEyeCamera.camera.changeTargetWindow(null==(s=f.root)?void 0:s.mainWindow),null==(l=this._rightEyeCamera)||l.camera.changeTargetWindow(null==(h=f.root)?void 0:h.mainWindow);null==(n=this.node.getChildByPath("Canvas/Camera"))||null==(r=n.getComponent(p))||r.camera.changeTargetWindow(null==(a=f.root)?void 0:a.mainWindow)}},s.moveNode=function(e){var t,i,o,n=2.618*this._moveSpeedFactor,r=new g,a=null==(t=this._targetControlledNode)?void 0:t.right,s=null==(i=this._targetControlledNode)?void 0:i.forward,l=null==(o=this._targetControlledNode)?void 0:o.up;switch(this._curInteractiveSimulateType!==le.HMD&&(s=g.FORWARD.clone(),a=g.RIGHT.clone(),l=g.UP.clone()),e.keyCode){case N.KEY_W:s&&(r=s.multiplyScalar(n));break;case N.KEY_A:a&&(r=a.multiplyScalar(-1*n));break;case N.KEY_S:s&&(r=s.multiplyScalar(-1*n));break;case N.KEY_D:a&&(r=a.multiplyScalar(n));break;case N.KEY_Q:l&&(r=l.multiplyScalar(-1*n));break;case N.KEY_E:l&&(r=l.multiplyScalar(n))}this._isTriggerMoveEvent=!0,this._targetControlledNode&&(this._nodeTargetPostion.x=this._targetControlledNode.position.x,this._nodeTargetPostion.y=this._targetControlledNode.position.y,this._nodeTargetPostion.z=this._targetControlledNode.position.z),this._nodeTargetPostion.add(r)},s.onEnable=function(){C.isBrowser&&this.xrDeviceSimulateType===he.LOCAL&&(R.on(S.EventType.TOUCH_START,this.onTouchStart,this),R.on(S.EventType.TOUCH_MOVE,this.onTouchMove,this),R.on(S.EventType.TOUCH_END,this.onTouchEnd,this),R.on(S.EventType.KEY_DOWN,this.onKeyDown,this),R.on(S.EventType.KEY_UP,this.onKeyUp,this),R.on(S.EventType.KEY_PRESSING,this.onKeyPressing,this))},s.onDisable=function(){C.isBrowser&&this.xrDeviceSimulateType===he.LOCAL&&(R.off(S.EventType.TOUCH_START,this.onTouchStart,this),R.off(S.EventType.TOUCH_MOVE,this.onTouchMove,this),R.off(S.EventType.TOUCH_END,this.onTouchEnd,this),R.off(S.EventType.KEY_DOWN,this.onKeyDown,this),R.off(S.EventType.KEY_UP,this.onKeyUp,this),R.off(S.EventType.KEY_PRESSING,this.onKeyPressing,this))},s.isMoveKey=function(e){return e.keyCode===N.KEY_W||e.keyCode===N.KEY_A||e.keyCode===N.KEY_S||e.keyCode===N.KEY_D||e.keyCode===N.KEY_Q||e.keyCode===N.KEY_E},s.onKeyDown=function(e){this.isMoveKey(e)&&this.moveNode(e),e.keyCode===N.NUM_1||e.keyCode===N.DIGIT_1?this.refreshInteractiveSimulateTypeStatus(le.HMD,!0):e.keyCode===N.NUM_2||e.keyCode===N.DIGIT_2?this.refreshInteractiveSimulateTypeStatus(le.LEFT_CONTROLLER,!0):e.keyCode===N.NUM_3||e.keyCode===N.DIGIT_3?this.refreshInteractiveSimulateTypeStatus(le.RIGHT_CONTROLLER,!0):e.keyCode!==N.SPACE&&e.keyCode!==N.ENTER||this.simulateUIPressEvent(!0)},s.onKeyPressing=function(e){this.isMoveKey(e)&&(this.moveNode(e),this._keyPressingCount++,this._keyPressingCount%5==0&&(this._moveSpeedFactor=.2*Math.ceil(this._keyPressingCount/5)+1)),e.keyCode===N.KEY_B&&this.resetControllerPosition()},s.onKeyUp=function(e){this.isMoveKey(e)&&(this.moveNode(e),this._keyPressingCount=0,this._moveSpeedFactor=1,this._isTriggerMoveEvent=!1),e.keyCode!==N.SPACE&&e.keyCode!==N.ENTER||this.simulateUIPressEvent(!1)},s.onTouchStart=function(e){this._targetControlledNode&&(this._rotationYawDeg=this._targetControlledNode.eulerAngles.y,this._rotationPitchDeg=this._targetControlledNode.eulerAngles.x)},s.onTouchMove=function(e){var t;e.getDelta(this._touchDeltaXY),this._rotationYawDeg+=-1*this._touchDeltaXY.x*.1,this._rotationPitchDeg+=.1*this._touchDeltaXY.y,this._rotationPitchDeg=D(this._rotationPitchDeg,-89,89),_.rotateAround(this._nodeTempYawRotation,_.IDENTITY,g.UP,this._rotationYawDeg*Math.PI/180),_.rotateAround(this._nodeTempPitchRotation,_.IDENTITY,g.RIGHT,this._rotationPitchDeg*Math.PI/180),_.multiply(this._nodeTargetRotation,this._nodeTempYawRotation,this._nodeTempPitchRotation),null==(t=this._targetControlledNode)||t.setRotation(this._nodeTargetRotation)},s.onTouchEnd=function(e){},s.refreshInteractiveSimulateTypeStatus=function(e,t){switch(this._curInteractiveSimulateType=e,this._curInteractiveSimulateType){case le.HMD:t&&this._topToggleHmd&&(this._topToggleHmd.isChecked=!0),this._topToggleLeftCtrl&&(this._topToggleLeftCtrl.isChecked=!1),this._topToggleRightCtrl&&(this._topToggleRightCtrl.isChecked=!1),this._mainCamera&&(this._targetControlledNode=this._mainCamera.node);break;case le.LEFT_CONTROLLER:this._topToggleHmd&&(this._topToggleHmd.isChecked=!1),t&&this._topToggleLeftCtrl&&(this._topToggleLeftCtrl.isChecked=!0),this._topToggleRightCtrl&&(this._topToggleRightCtrl.isChecked=!1),this._leftControllerNode&&(this._targetControlledNode=this._leftControllerNode);break;case le.RIGHT_CONTROLLER:this._topToggleHmd&&(this._topToggleHmd.isChecked=!1),this._topToggleLeftCtrl&&(this._topToggleLeftCtrl.isChecked=!1),t&&this._topToggleRightCtrl&&(this._topToggleRightCtrl.isChecked=!0),this._rightControllerNode&&(this._targetControlledNode=this._rightControllerNode)}},s.simulateUIPressEvent=function(e){switch(this._curInteractiveSimulateType){case le.LEFT_CONTROLLER:if(this._xrEventHandle.deviceType=P.Left,e&&this._leftControllerNode){var t;null==(t=this._leftControllerNode.getComponent(M))||t.uiPressEnter(this._xrEventHandle);var i=new K(k.Left_Hand);i.eventType=G.TRIGGER_BTN_LEFT,i.eventValue=0,i.keyEventActionType=U.KEY_DOWN,this._leftControllerNode.emit(S.EventType.HANDLE_INPUT,i)}else if(this._leftControllerNode){var o;null==(o=this._leftControllerNode.getComponent(M))||o.uiPressExit(this._xrEventHandle);var n=new K(k.Left_Hand);n.eventType=G.TRIGGER_BTN_LEFT,n.eventValue=1,n.keyEventActionType=U.KEY_UP,this._leftControllerNode.emit(S.EventType.HANDLE_INPUT,n)}break;case le.RIGHT_CONTROLLER:if(this._xrEventHandle.deviceType=P.Right,e&&this._rightControllerNode){var r;null==(r=this._rightControllerNode.getComponent(M))||r.uiPressEnter(this._xrEventHandle);var a=new K(k.Right_Hand);a.eventType=Y.TRIGGER_BTN_RIGHT,a.eventValue=0,a.keyEventActionType=U.KEY_DOWN,this._rightControllerNode.emit(S.EventType.HANDLE_INPUT,a)}else if(this._rightControllerNode){var s;null==(s=this._rightControllerNode.getComponent(M))||s.uiPressExit(this._xrEventHandle);var l=new K(k.Right_Hand);l.eventType=Y.TRIGGER_BTN_RIGHT,l.eventValue=0,l.keyEventActionType=U.KEY_UP,this._rightControllerNode.emit(S.EventType.HANDLE_INPUT,l)}}},s.showGuideUI=function(e,t){var i;this._guideContentNode&&(this._guideContentNode.active=!this._guideContentNode.active),null!=(i=this._guideContentNode)&&i.active?(this._guideContentLastShowTime=this.CONFIG_GUIDE_SHOWTIME,this._guideMaskContentNode&&(this._guideMaskContentNode.position=new g(15,0,0)),this._guideStayShownTime=0):this._guideContentLastShowTime=0},s.onToggleChanged=function(e){var t=e.target;"ToggleHmd"===t.name?this.refreshInteractiveSimulateTypeStatus(le.HMD,!1):"ToggleLeftCtrl"===t.name?this.refreshInteractiveSimulateTypeStatus(le.LEFT_CONTROLLER,!1):"ToggleRightCtrl"===t.name?this.refreshInteractiveSimulateTypeStatus(le.RIGHT_CONTROLLER,!1):"ToggleSetting"===t.name&&(this._distortionSettingPanel&&(this._distortionSettingPanel.active=!this._distortionSettingPanel.active,this._distortionSettingPanel.active&&this.resetDistortionButtonInteractable(this._distortionSettingPanel,!0)),this._distortionSettingShowTime=3)},s.resetControllerPosition=function(){this._leftControllerNode&&(this._leftControllerNode.position=this._leftControllerInitPosition.clone()),this._rightControllerNode&&(this._rightControllerNode.position=this._rightControllerInitPosition.clone())},s.enableDistortion=function(e){_e.distortionMode=ge.BARREL,"BARREL"===e?_e.distortionMode=ge.BARREL:"CIRCULAR"===e&&(_e.distortionMode=ge.CIRCULAR),this._leftEyeCamera&&(this._leftEyeCamera.targetTexture=this._singleEyeCameraRenderTexture_L),this._rightEyeCamera&&(this._rightEyeCamera.targetTexture=this._singleEyeCameraRenderTexture_R),this._leftEyeCamera&&(this._leftEyeCamera.rect=new v(0,0,1,1)),this._rightEyeCamera&&(this._rightEyeCamera.rect=new v(0,0,1,1)),this._distortionParameterK0&&(this._distortionParameterK0.enabled=!0),this._distortionSettingShowTime=3},s.disableDistortion=function(){var e,t,i,o;(_e.distortionMode=ge.NONE,this._leftEyeCamera&&(this._leftEyeCamera.targetTexture=null),this._rightEyeCamera&&(this._rightEyeCamera.targetTexture=null),this._leftEyeCamera&&(this._leftEyeCamera.rect=new v(0,0,.5,1)),this._rightEyeCamera&&(this._rightEyeCamera.rect=new v(.5,0,.5,1)),C.isBrowser&&x)&&(null==(e=this._leftEyeCamera)||e.camera.changeTargetWindow(null==(t=f.root)?void 0:t.mainWindow),null==(i=this._rightEyeCamera)||i.camera.changeTargetWindow(null==(o=f.root)?void 0:o.mainWindow));this._distortionParameterK0&&(this._distortionParameterK0.enabled=!1),this._distortionSettingShowTime=3},s.onDistortionParameterChanged=function(e){if(_e.distortionMode!==ge.NONE&&(this._distortionSettingShowTime=3,e===this._distortionParameterK0)){var t;_e.distortionParameterK0=1-.8*e.progress,_e.isDistortionParameterChanged=!0;var i=null==(t=e.node.getChildByName("ProgressBar"))?void 0:t.getComponent(I);i&&(i.progress=e.progress)}},s.disableDistortionSelectedBackground=function(e){var t,i,o,n=null==(t=e.getChildByName("DistortionModeNone"))?void 0:t.getChildByName("Selected");n&&(n.active=!1);var r=null==(i=e.getChildByName("DistortionModeBarrel"))?void 0:i.getChildByName("Selected");r&&(r.active=!1);var a=null==(o=e.getChildByName("DistortionModeCircular"))?void 0:o.getChildByName("Selected");a&&(a.active=!1)},s.resetDistortionButtonInteractable=function(e,t){var i,o,n,r,a,s,l=null==(i=e.getChildByName("DistortionModeNone"))||null==(o=i.getChildByName("NormalHover"))?void 0:o.getComponent(L);l&&(l.interactable=t);var h=null==(n=e.getChildByName("DistortionModeBarrel"))||null==(r=n.getChildByName("NormalHover"))?void 0:r.getComponent(L);h&&(h.interactable=t);var d=null==(a=e.getChildByName("DistortionModeCircular"))||null==(s=a.getChildByName("NormalHover"))?void 0:s.getComponent(L);if(d&&(d.interactable=t),_e.distortionMode===ge.BARREL){var g,_=null==(g=e.getChildByName("DistortionModeBarrel"))?void 0:g.getChildByName("Selected");_&&(_.active=!0)}else if(_e.distortionMode===ge.CIRCULAR){var c,C=null==(c=e.getChildByName("DistortionModeCircular"))?void 0:c.getChildByName("Selected");C&&(C.active=!0)}else if(_e.distortionMode===ge.NONE){var u,p=null==(u=e.getChildByName("DistortionModeNone"))?void 0:u.getChildByName("Selected");p&&(p.active=!0)}},s.onDistortionModeButtonClick=function(e,t){var i=e.target;t?this.enableDistortion(t):this.disableDistortion();var o=i.parent;if(o){o.parent&&this.disableDistortionSelectedBackground(o.parent);var n=o.getChildByName("Selected");n&&(n.active=!0)}},a(t,[{key:"xrAgent",get:function(){return this._xrAgent},set:function(e){this._xrAgent=e}},{key:"xrDeivceIpAddress",get:function(){return this._xrDeivceIpAddress},set:function(e){e!==this._xrDeivceIpAddress&&(this._xrDeivceIpAddress=e)}},{key:"xrDeviceConnectType",get:function(){return this._xrDeviceConnectType},set:function(e){e!==this._xrDeviceConnectType&&(this._xrDeviceConnectType=e)}}]),t}(w)).prototype,"_xrAgent",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(ee.prototype,"xrAgent",[V],Object.getOwnPropertyDescriptor(ee.prototype,"xrAgent"),ee.prototype),ie=t(ee.prototype,"_xrDeivceIpAddress",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),oe=t(ee.prototype,"xrDeviceSimulateType",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return he.LOCAL}}),ne=t(ee.prototype,"_xrDeviceConnectType",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return de.WIFI}}),t(ee.prototype,"xrDeivceIpAddress",[J],Object.getOwnPropertyDescriptor(ee.prototype,"xrDeivceIpAddress"),ee.prototype),t(ee.prototype,"xrDeviceConnectType",[Z],Object.getOwnPropertyDescriptor(ee.prototype,"xrDeviceConnectType"),ee.prototype),$=ee))||$)||$));s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-interactor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interactable.ts","./interaction-mask.ts"],(function(t){var e,i,r,n,a,c,s,o,l,_,h,S,d,v,u,E,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){c=t.cclegacy,s=t._decorator,o=t.ccenum,l=t.Node,_=t.Component},function(t){h=t.SelectActionTrigger_Type,S=t.InteractorState,d=t.XrEventHandle,v=t.StateType,u=t.XrControlEventType,E=t.InteractorTriggerState},function(t){g=t.InteractionMask}],execute:function(){var T,y,p,f,I,m,A,C,D,b;c._RF.push({},"2537bF15JJFKodVmnW710uk","xr-interactor",void 0);var k=s.property;o(h);t("XrInteractor",(T=k({serializable:!0}),y=k({serializable:!0}),p=k({serializable:!0}),f=k({type:g.BitMask,displayOrder:1,tooltip:"i18n:xr-plugin.xr_interactor.interactionLayerMask"}),I=k({type:l,displayOrder:1,tooltip:"i18n:xr-plugin.xr_interactor.attachTransform"}),m=k({type:h,displayOrder:8,tooltip:"i18n:xr-plugin.xr_interactor.selectActionTrigger"}),C=e((A=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,r(e,"_interactionLayerMask",C,n(e)),r(e,"_attachTransform",D,n(e)),r(e,"_selectActionTrigger",b,n(e)),e._selectInteractorState=S.End,e._activateInteractorState=S.End,e._selectValue=0,e._activateValue=0,e._triggerState=!1,e._triggerToggleState=!1,e._triggerStickyState=!1,e._activateTriggerState=!1,e._activateTriggerToggleState=!1,e._activateTriggerStickyState=!1,e._selectState=!1,e._activateState=!1,e._interactorEvents=null,e._event=new d("XrInteractor"),e._collider=null,e._activateCollider=null,e._uiPressCollider=null,e._accupyLine=!1,e._beTriggerNode=null,e}i(e,t);var c=e.prototype;return c.onEnable=function(){this.node.on(S.Start,this._stateStart,this),this.node.on(S.Stay,this._stateStay,this),this.node.on(S.End,this._stateEnd,this),this.node.on(S.Cancel,this._stateCancel,this),this._event.triggerNode=this.node,this._event.triggerType=this._selectActionTrigger},c.onDisable=function(){this.node.off(S.Start,this._stateStart,this),this.node.off(S.Stay,this._stateStay,this),this.node.off(S.End,this._stateEnd,this),this.node.off(S.Cancel,this._stateCancel,this)},c._stateStart=function(t){t===v.Select?this._selectInteractorState=S.Start:this._activateInteractorState=S.Start},c._stateStay=function(t){t===v.Select?this._selectInteractorState=S.Stay:this._activateInteractorState=S.Stay},c._stateEnd=function(t){t===v.Select?(this._selectInteractorState=S.End,this._selectState=!1):(this._activateInteractorState=S.End,this._activateState=!1)},c._stateCancel=function(t){t===v.Select?this._selectInteractorState=S.Cancel:this._activateInteractorState=S.Cancel},c._judgeHit=function(t){return!1},c._judgeTrigger=function(){return!!this._beTriggerNode&&this._beTriggerNode.triggerNode===this.node},c._emitSelectEntered=function(t){var e;if(t===u.SELECT_ENTERED)null==(e=this._collider)||e.node.emit(E.Select_Start,this._event);else if(t===u.ACTIVATED){var i;null==(i=this._activateCollider)||i.node.emit(E.Activite_Start,this._event)}},c._emitSelectEnd=function(t){var e;if(t===u.SELECT_EXITED)null==(e=this._collider)||e.node.emit(E.Select_End,this._event),this._collider=null;else if(t===u.DEACTIVITED){var i;null==(i=this._activateCollider)||i.node.emit(E.Activite_End,this._event),this._activateCollider=null}},c._interactorStart=function(t,e,i,r){switch(this._event.model=t.model,this._event.eventHandle=t.eventHandle,this._selectActionTrigger){case h.State:case h.State_Change:(this._selectInteractorState===S.End&&r===v.Select||this._activateInteractorState===S.End&&r===v.Activite)&&this._judgeHit(i)&&this._emitSelectEntered(i);break;case h.Toggle:this._selectInteractorState===S.End&&r===v.Select||this._activateInteractorState===S.End&&r===v.Activite?this._judgeHit(i)&&this._emitSelectEntered(i):(this._selectInteractorState===S.Start&&r===v.Select||this._activateInteractorState===S.Start&&r===v.Activite&&e)&&(this._judgeHit(i),r===v.Select?this._emitSelectEnd(u.SELECT_EXITED):this._emitSelectEnd(u.DEACTIVITED),e=!1,this._stateEnd(r));break;case h.Sticky:(this._selectInteractorState===S.End&&r===v.Select||this._activateInteractorState===S.End&&r===v.Activite)&&this._judgeHit(i)&&this._emitSelectEntered(i)}return e},c._interactorStay=function(t,e,i){this._selectActionTrigger===h.State&&(this._event.model=t.model,this._event.eventHandle=t.eventHandle,(this._selectInteractorState===S.End&&i===v.Select||this._activateInteractorState===S.End&&i===v.Activite)&&this._judgeHit(e)&&this._emitSelectEntered(e))},c._interactorEnd=function(t,e,i){var r;switch(this._event.model=t.model,this._event.eventHandle=t.eventHandle,r=i===v.Select?u.SELECT_EXITED:u.DEACTIVITED,this._selectActionTrigger){case h.State:case h.State_Change:(this._selectInteractorState===S.Start&&i===v.Select||this._activateInteractorState===S.Start&&i===v.Activite)&&this._emitSelectEnd(r);break;case h.Toggle:(this._selectInteractorState===S.Start&&i===v.Select||this._activateInteractorState===S.Start&&i===v.Activite)&&(e=!0);break;case h.Sticky:(this._selectInteractorState===S.Start&&i===v.Select||this._activateInteractorState===S.Start&&i===v.Activite)&&(e?(r===u.SELECT_EXITED&&this._collider||r===u.DEACTIVITED&&this._activateCollider)&&(this._judgeHit(r),this._emitSelectEnd(r),e=!1,this._stateEnd(i)):e=!0)}return e},c.selectStart=function(t){var e,i;null==(e=this._interactorEvents)||e.selectEntered(this._event),this._selectState=this._interactorStart(t,this._selectState,u.SELECT_ENTERED,v.Select),null==(i=this._collider)||i.node.emit(u.SELECT_ENTERED,this._event)},c.selectStay=function(t){var e,i;null==(e=this._interactorEvents)||e.selectStay(this._event),this._interactorStay(t,u.SELECT_ENTERED,v.Select),null==(i=this._collider)||i.node.emit(u.SELECT_STAY,this._event)},c.selectEnd=function(t){var e,i;null==(e=this._interactorEvents)||e.selectExited(this._event),null==(i=this._collider)||i.node.emit(u.SELECT_EXITED,this._event),this._selectState=this._interactorEnd(t,this._selectState,v.Select)},c.activateStart=function(t){var e;this._activateState=this._interactorStart(t,this._activateState,u.ACTIVATED,v.Activite),null==(e=this._activateCollider)||e.node.emit(u.ACTIVATED,this._event)},c.activateStay=function(t){var e;this._interactorStay(t,u.ACTIVATED,v.Activite),null==(e=this._activateCollider)||e.node.emit(u.ACTIVATE_STAY,this._event)},c.activateEnd=function(t){var e;null==(e=this._activateCollider)||e.node.emit(u.DEACTIVITED,this._event),this._activateState=this._interactorEnd(t,this._activateState,v.Activite)},c.uiPressEnter=function(t){var e;this._event.deviceType=t.deviceType,null==(e=this._uiPressCollider)||e.node.emit(u.UIPRESS_ENTERED,this._event)},c.uiPressStay=function(t){var e;this._event.deviceType=t.deviceType,null==(e=this._uiPressCollider)||e.node.emit(u.UIPRESS_STAY,this._event)},c.uiPressExit=function(t){var e;this._event.deviceType=t.deviceType,null==(e=this._uiPressCollider)||e.node.emit(u.UIPRESS_EXITED,this._event)},a(e,[{key:"interactionLayerMask",get:function(){return this._interactionLayerMask},set:function(t){t!==this._interactionLayerMask&&(this._interactionLayerMask=t)}},{key:"attachTransform",get:function(){return this._attachTransform},set:function(t){t!==this._attachTransform&&(this._attachTransform=t)}},{key:"selectActionTrigger",get:function(){return this._selectActionTrigger},set:function(t){t!==this._selectActionTrigger&&(this._selectActionTrigger=t)}},{key:"event",get:function(){return this._event},set:function(t){t!==this._event&&(this._event=t)}}]),e}(_)).prototype,"_interactionLayerMask",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),D=e(A.prototype,"_attachTransform",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(A.prototype,"_selectActionTrigger",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.State}}),e(A.prototype,"interactionLayerMask",[f],Object.getOwnPropertyDescriptor(A.prototype,"interactionLayerMask"),A.prototype),e(A.prototype,"attachTransform",[I],Object.getOwnPropertyDescriptor(A.prototype,"attachTransform"),A.prototype),e(A.prototype,"selectActionTrigger",[m],Object.getOwnPropertyDescriptor(A.prototype,"selectActionTrigger"),A.prototype),A));c._RF.pop()}}}));

System.register("chunks:///_virtual/xr-interface.ts",["cc"],(function(A){var E;return{setters:[function(A){E=A.cclegacy}],execute:function(){E._RF.push({},"a9656kJrMFNCZ0uvch71WSX","xr-interface",void 0);var T=A("XRConfigKey",function(A){return A[A.DEVICE_VENDOR=13]="DEVICE_VENDOR",A[A.RUNTIME_VERSION=14]="RUNTIME_VERSION",A[A.RENDER_EYE_FRAME_LEFT=16]="RENDER_EYE_FRAME_LEFT",A[A.RENDER_EYE_FRAME_RIGHT=17]="RENDER_EYE_FRAME_RIGHT",A[A.FEATURE_PASSTHROUGH=18]="FEATURE_PASSTHROUGH",A[A.IMAGE_TRACKING=19]="IMAGE_TRACKING",A[A.IMAGE_TRACKING_CANDIDATEIMAGE=20]="IMAGE_TRACKING_CANDIDATEIMAGE",A[A.IMAGE_TRACKING_DATA=21]="IMAGE_TRACKING_DATA",A[A.IMAGE_TRACKING_SUPPORT_STATUS=22]="IMAGE_TRACKING_SUPPORT_STATUS",A[A.HIT_TESTING=23]="HIT_TESTING",A[A.HIT_TESTING_DATA=24]="HIT_TESTING_DATA",A[A.HIT_TESTING_SUPPORT_STATUS=25]="HIT_TESTING_SUPPORT_STATUS",A[A.PLANE_DETECTION=26]="PLANE_DETECTION",A[A.PLANE_DETECTION_DATA=27]="PLANE_DETECTION_DATA",A[A.PLANE_DETECTION_SUPPORT_STATUS=28]="PLANE_DETECTION_SUPPORT_STATUS",A[A.SPATIAL_ANCHOR=29]="SPATIAL_ANCHOR",A[A.SPATIAL_ANCHOR_DATA=30]="SPATIAL_ANCHOR_DATA",A[A.SPATIAL_ANCHOR_SUPPORT_STATUS=31]="SPATIAL_ANCHOR_SUPPORT_STATUS",A[A.HAND_TRACKING=32]="HAND_TRACKING",A[A.HAND_TRACKING_DATA=33]="HAND_TRACKING_DATA",A[A.HAND_TRACKING_SUPPORT_STATUS=34]="HAND_TRACKING_SUPPORT_STATUS",A[A.APPLY_HAPTIC_CONTROLLER=35]="APPLY_HAPTIC_CONTROLLER",A[A.STOP_HAPTIC_CONTROLLER=36]="STOP_HAPTIC_CONTROLLER",A[A.DEVICE_IPD=37]="DEVICE_IPD",A[A.APP_COMMAND=38]="APP_COMMAND",A[A.ADB_COMMAND=39]="ADB_COMMAND",A[A.ACTIVITY_LIFECYCLE=40]="ACTIVITY_LIFECYCLE",A[A.NATIVE_WINDOW=41]="NATIVE_WINDOW",A[A.SPLIT_AR_GLASSES=42]="SPLIT_AR_GLASSES",A[A.ENGINE_VERSION=43]="ENGINE_VERSION",A[A.RECENTER_HMD=44]="RECENTER_HMD",A[A.RECENTER_CONTROLLER=45]="RECENTER_CONTROLLER",A[A.FOVEATION_LEVEL=46]="FOVEATION_LEVEL",A[A.DISPLAY_REFRESH_RATE=47]="DISPLAY_REFRESH_RATE",A[A.CAMERA_ACCESS=48]="CAMERA_ACCESS",A[A.CAMERA_ACCESS_DATA=49]="CAMERA_ACCESS_DATA",A[A.CAMERA_ACCESS_SUPPORT_STATUS=50]="CAMERA_ACCESS_SUPPORT_STATUS",A[A.SPATIAL_MESHING=51]="SPATIAL_MESHING",A[A.SPATIAL_MESHING_DATA=52]="SPATIAL_MESHING_DATA",A[A.SPATIAL_MESHING_SUPPORT_STATUS=53]="SPATIAL_MESHING_SUPPORT_STATUS",A[A.EYE_RENDER_JS_CALLBACK=54]="EYE_RENDER_JS_CALLBACK",A[A.ASYNC_LOAD_ASSETS_IMAGE=55]="ASYNC_LOAD_ASSETS_IMAGE",A}({}));A("XRVendor",function(A){return A[A.MONADO=0]="MONADO",A[A.META=1]="META",A[A.HUAWEIVR=2]="HUAWEIVR",A[A.PICO=3]="PICO",A[A.ROKID=4]="ROKID",A[A.SEED=5]="SEED",A[A.SPACESXR=6]="SPACESXR",A[A.GSXR=7]="GSXR",A[A.YVR=8]="YVR",A[A.HTC=9]="HTC",A[A.IQIYI=10]="IQIYI",A[A.SKYWORTH=11]="SKYWORTH",A[A.FFALCON=12]="FFALCON",A[A.NREAL=13]="NREAL",A[A.INMO=14]="INMO",A[A.LENOVO=15]="LENOVO",A}({})),A("xrInterface",{getVendor:function(){return xr.entry.getXRIntConfig(T.DEVICE_VENDOR)},setIPDOffset:function(A){xr.entry.setIPDOffset(A)},setBaseSpaceType:function(A){xr.entry.setBaseSpaceType(A)},applyHapticController:function(A,E,_){var R=A+"+"+E+"+"+_;xr.entry.setXRStringConfig(T.APPLY_HAPTIC_CONTROLLER,R)},stopHapticController:function(A){xr.entry.setXRIntConfig(T.STOP_HAPTIC_CONTROLLER,A)},setIntConfig:function(A,E){xr.entry.setXRIntConfig(A,E)},getIntConfig:function(A){return xr.entry.getXRIntConfig(A)},setBoolConfig:function(A,E){xr.entry.setXRBoolConfig(A,E)},getBoolConfig:function(A){return xr.entry.getXRBoolConfig(A)},setStringConfig:function(A,E){xr.entry.setXRStringConfig(A,E)},getStringConfig:function(A){return xr.entry.getXRStringConfig(A)},setEyeRenderCallback:function(A,E,T){jsb.onXREyeRenderBegin=function(E){T&&A.call(T,E)},jsb.onXREyeRenderEnd=function(A){T&&E.call(T,A)}}});E._RF.pop()}}}));

System.register("chunks:///_virtual/xr-key.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-keyboard-handle.ts","./xr-keyboard-input.ts"],(function(t){var e,i,o,n,s,r,_,a,c,h,p,l,y,u,d,k;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,_=t._decorator,a=t.ccenum,c=t.Button,h=t.XrUIPressEventType,p=t.XrKeyboardEventType,l=t.Input,y=t.Component},function(t){u=t.XrKeyCode,d=t.xrKeyboardEventInput},function(t){k=t.XrKeyboardInput}],execute:function(){var C,f,I,N,K,L,b,x;r._RF.push({},"10086NyavFKjI7lLnSFQSoj","xr-key",void 0);var O=_.ccclass,v=_.help,R=_.menu,X=_.property;a(u);t("XRKey",(C=O("cc.XRKey"),f=v("i18n:cc.XRKey"),I=R("XR/XRUI/XRKey"),N=X({serializable:!0}),K=X({type:u,displayOrder:1,tooltip:"i18n:xr-plugin.xr_key.key"}),C(L=f(L=I((x=e((b=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"_key",x,n(e)),e._lowerNode=null,e._capitalNode=null,e._button=null,e._capsLock=!1,e._xrKeyboardInput=null,e}i(e,t);var r=e.prototype;return r.onLoad=function(){this._button=this.node.getComponent(c),this._key===u.NONE&&(this._xrKeyboardInput||(this._xrKeyboardInput=this.node.addComponent(k)))},r.onEnable=function(){this._lowerNode=this.node.getChildByName("lower"),this._capitalNode=this.node.getChildByName("capital"),this.node.on(h.XRUI_CLICK,this._xrUIClick,this),this.node.on(h.XRUI_UNCLICK,this._xrUIUnClick,this),d.on(p.XR_KEYBOARD_INIT,this._init,this),d.on(p.XR_CAPS_LOCK,this._xrCapsLock,this)},r.onDisable=function(){this.node.off(h.XRUI_CLICK,this._xrUIClick,this),this.node.off(h.XRUI_UNCLICK,this._xrUIUnClick,this),d.off(p.XR_KEYBOARD_INIT,this._init,this),d.off(p.XR_CAPS_LOCK,this._xrCapsLock,this)},r._xrUIClick=function(){this._key!==u.NONE&&d.emit(l.EventType.KEY_DOWN,this._key)},r._xrUIUnClick=function(t){var e;this._key===u.NONE?null==(e=this._xrKeyboardInput)||e.moveCursor(t):this._key===u.F1?d.emit(p.TO_SYMBOL,p.TO_SYMBOL):this._key===u.F2?d.emit(p.TO_LATIN,p.TO_LATIN):(d.emit(l.EventType.KEY_UP,this._key),this._key===u.CAPS_LOCK&&d.emit(p.XR_CAPS_LOCK,this._key))},r._init=function(){this._capsLock&&this._xrCapsLock()},r._xrCapsLock=function(){if(this._button){if(this._key===u.CAPS_LOCK){var t=this._button.normalSprite;this._button.normalSprite=this._button.pressedSprite,this._button.pressedSprite=t}else this._key>64&&this._key<91&&(this._capsLock?(this._lowerNode&&(this._lowerNode.active=!0),this._capitalNode&&(this._capitalNode.active=!1)):(this._lowerNode&&(this._lowerNode.active=!1),this._capitalNode&&(this._capitalNode.active=!0)));this._capsLock=!this._capsLock}},s(e,[{key:"key",get:function(){return this._key},set:function(t){t!==this._key&&(this._key=t)}}]),e}(y)).prototype,"_key",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.NONE}}),e(b.prototype,"key",[K],Object.getOwnPropertyDescriptor(b.prototype,"key"),b.prototype),L=b))||L)||L)||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/xr-keyboard-handle.ts",["cc"],(function(E){var _,T;return{setters:[function(E){_=E.cclegacy,T=E.EventTarget}],execute:function(){_._RF.push({},"cac42QswJ5ETJqpPj9y04xF","xr-keyboard-handle",void 0);E("XrKeyCode",function(E){return E[E.NONE=0]="NONE",E[E.MOBILE_BACK=6]="MOBILE_BACK",E[E.BACKSPACE=8]="BACKSPACE",E[E.TAB=9]="TAB",E[E.ENTER=13]="ENTER",E[E.SHIFT_LEFT=16]="SHIFT_LEFT",E[E.CTRL_LEFT=17]="CTRL_LEFT",E[E.ALT_LEFT=18]="ALT_LEFT",E[E.PAUSE=19]="PAUSE",E[E.CAPS_LOCK=20]="CAPS_LOCK",E[E.ESCAPE=27]="ESCAPE",E[E.SPACE=32]="SPACE",E[E.EXCLAMATION=33]="EXCLAMATION",E[E.DOUBLE_QUOTES=34]="DOUBLE_QUOTES",E[E.HASH_KEY=35]="HASH_KEY",E[E.DOLLOR=36]="DOLLOR",E[E.PERCENT=37]="PERCENT",E[E.AND=38]="AND",E[E.SINGLE_QUOTES=39]="SINGLE_QUOTES",E[E.PARENTHESES_LEFT=40]="PARENTHESES_LEFT",E[E.PARENTHESES_RIGHT=41]="PARENTHESES_RIGHT",E[E.ASTERISK=42]="ASTERISK",E[E.PLUS=43]="PLUS",E[E.MINUS=45]="MINUS",E[E.DELETE=46]="DELETE",E[E.SLASH=47]="SLASH",E[E.DIGIT_0=48]="DIGIT_0",E[E.DIGIT_1=49]="DIGIT_1",E[E.DIGIT_2=50]="DIGIT_2",E[E.DIGIT_3=51]="DIGIT_3",E[E.DIGIT_4=52]="DIGIT_4",E[E.DIGIT_5=53]="DIGIT_5",E[E.DIGIT_6=54]="DIGIT_6",E[E.DIGIT_7=55]="DIGIT_7",E[E.DIGIT_8=56]="DIGIT_8",E[E.DIGIT_9=57]="DIGIT_9",E[E.COLON=58]="COLON",E[E.SEMICOLON=59]="SEMICOLON",E[E.ANGLE_BRACKET_LEFT=60]="ANGLE_BRACKET_LEFT",E[E.EQUAL=61]="EQUAL",E[E.ANGLE_BRACKET_RIGHT=62]="ANGLE_BRACKET_RIGHT",E[E.QUESTION=63]="QUESTION",E[E.AT=64]="AT",E[E.KEY_A=65]="KEY_A",E[E.KEY_B=66]="KEY_B",E[E.KEY_C=67]="KEY_C",E[E.KEY_D=68]="KEY_D",E[E.KEY_E=69]="KEY_E",E[E.KEY_F=70]="KEY_F",E[E.KEY_G=71]="KEY_G",E[E.KEY_H=72]="KEY_H",E[E.KEY_I=73]="KEY_I",E[E.KEY_J=74]="KEY_J",E[E.KEY_K=75]="KEY_K",E[E.KEY_L=76]="KEY_L",E[E.KEY_M=77]="KEY_M",E[E.KEY_N=78]="KEY_N",E[E.KEY_O=79]="KEY_O",E[E.KEY_P=80]="KEY_P",E[E.KEY_Q=81]="KEY_Q",E[E.KEY_R=82]="KEY_R",E[E.KEY_S=83]="KEY_S",E[E.KEY_T=84]="KEY_T",E[E.KEY_U=85]="KEY_U",E[E.KEY_V=86]="KEY_V",E[E.KEY_W=87]="KEY_W",E[E.KEY_X=88]="KEY_X",E[E.KEY_Y=89]="KEY_Y",E[E.KEY_Z=90]="KEY_Z",E[E.SQUARE_BRACKET_LEFT=91]="SQUARE_BRACKET_LEFT",E[E.BACKSLASH=92]="BACKSLASH",E[E.SQUARE_BRACKET_RIGHT=93]="SQUARE_BRACKET_RIGHT",E[E.FACTORIAL=94]="FACTORIAL",E[E.TRANSVERSE_BOTTOM=95]="TRANSVERSE_BOTTOM",E[E.NUM_0=96]="NUM_0",E[E.NUM_1=97]="NUM_1",E[E.NUM_2=98]="NUM_2",E[E.NUM_3=99]="NUM_3",E[E.NUM_4=100]="NUM_4",E[E.NUM_5=101]="NUM_5",E[E.NUM_6=102]="NUM_6",E[E.NUM_7=103]="NUM_7",E[E.NUM_8=104]="NUM_8",E[E.NUM_9=105]="NUM_9",E[E.NUM_MULTIPLY=106]="NUM_MULTIPLY",E[E.NUM_PLUS=107]="NUM_PLUS",E[E.NUM_SUBTRACT=109]="NUM_SUBTRACT",E[E.NUM_DECIMAL=110]="NUM_DECIMAL",E[E.NUM_DIVIDE=111]="NUM_DIVIDE",E[E.F1=112]="F1",E[E.F2=113]="F2",E[E.F3=114]="F3",E[E.F4=115]="F4",E[E.F5=116]="F5",E[E.F6=117]="F6",E[E.F7=118]="F7",E[E.F8=119]="F8",E[E.F9=120]="F9",E[E.F10=121]="F10",E[E.F11=122]="F11",E[E.BRACE_LEFT=123]="BRACE_LEFT",E[E.VERTICAL_BAR=124]="VERTICAL_BAR",E[E.BRACE_RIGHT=125]="BRACE_RIGHT",E[E.TILDE=126]="TILDE",E[E.NUM_LOCK=144]="NUM_LOCK",E[E.SCROLL_LOCK=145]="SCROLL_LOCK",E[E.COMMA=188]="COMMA",E[E.DASH=189]="DASH",E[E.PERIOD=190]="PERIOD",E[E.BACK_QUOTE=192]="BACK_QUOTE",E[E.BRACKET_LEFT=219]="BRACKET_LEFT",E[E.BRACKET_RIGHT=221]="BRACKET_RIGHT",E[E.QUOTE=222]="QUOTE",E[E.SHIFT_RIGHT=2e3]="SHIFT_RIGHT",E[E.CTRL_RIGHT=2001]="CTRL_RIGHT",E[E.ALT_RIGHT=2002]="ALT_RIGHT",E[E.NUM_ENTER=2003]="NUM_ENTER",E[E.HIDE=2004]="HIDE",E}({}));var I=E("XrKeyboardInputSource",function(){function E(){this._eventTarget=new T}var _=E.prototype;return _.on=function(E,_,T){this._eventTarget.on(E,_,T)},_.off=function(E,_,T){this._eventTarget.off(E,_,T)},_.emit=function(E,_){this._eventTarget.emit(E,_)},E}());E("xrKeyboardEventInput",new I);_._RF.pop()}}}));

System.register("chunks:///_virtual/xr-keyboard-input-field.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-keyboard.ts","./xr-keyboard-handle.ts","./xr-keyboard-input.ts"],(function(e){var r,t,o,i,n,d,a,s,y,p,u,h,_,b,l;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){d=e.cclegacy,a=e._decorator,s=e.Node,y=e.XrKeyboardEventType,p=e.Input,u=e.Component},function(e){h=e.XRKeyboard},function(e){_=e.xrKeyboardEventInput,b=e.XrKeyCode},function(e){l=e.XrKeyboardInput}],execute:function(){var c,K,x,f,I,g,m,R,T,k,v;d._RF.push({},"97d70qCGBBBU4k5AUqwd5Gb","xr-keyboard-input-field",void 0);var B=a.ccclass,X=a.help,E=a.menu,N=a.property;e("XRKeyboardInputField",(c=B("cc.XRKeyboardInputField"),K=X("i18n:cc.XRKeyboardInputField"),x=E("XR/XRUI/XRKeyboardInputField"),f=N({serializable:!0}),I=N({serializable:!0}),g=N({type:s,displayOrder:1,tooltip:"i18n:xr-plugin.xr_keyboard_input_field.suspendTransform"}),m=N({type:h,displayOrder:2,tooltip:"i18n:xr-plugin.xr_keyboard_input_field.xRKeyboard"}),c(R=K(R=x((k=r((T=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),d=0;d<t;d++)n[d]=arguments[d];return r=e.call.apply(e,[this].concat(n))||this,o(r,"_suspendTransform",k,i(r)),o(r,"_xrKeyboard",v,i(r)),r._keyboardNode=null,r._xrKeyboardInput=null,r._hideFlag=!1,r}t(r,e);var d=r.prototype;return d.onEnable=function(){this._xrKeyboard&&(this._xrKeyboard.node.active=!1),this.node.on("xr-editing-did-began",this._show,this)},d.onDisable=function(){this.node.off("xr-editing-did-began",this._show,this),this._hide()},d._show=function(e,r){if(this._xrKeyboard&&this._suspendTransform){if(this._keyboardNode)return;if(this._keyboardNode=this._xrKeyboard.getXRKeyboardNode(),!this._keyboardNode)return;this._suspendTransform.addChild(this._keyboardNode),this._xrKeyboard.occupy=!0,this._xrKeyboard.node.active=!0;var t=this._xrKeyboard.node.getChildByName("input");t&&(this._xrKeyboardInput=t.getComponentInChildren(l),this._xrKeyboardInput&&(this._xrKeyboardInput.maxContextLength=e,this._xrKeyboardInput.string=r,this._xrKeyboardInput.node.on(y.XR_KEYBOARD_INPUT,this._xrKeyBoardInput,this))),this._xrKeyboard.showKeyboard()}_.on(p.EventType.KEY_UP,this._xrKeyBoardUp,this),_.emit(y.XR_KEYBOARD_INIT)},d._xrKeyBoardUp=function(e){e===b.ENTER?(this._xrKeyboard&&this._xrKeyboard.commitText(),this._hideFlag=!0):e===b.HIDE&&(this._hideFlag=!0)},d.update=function(){this._hideFlag&&(this._hide(),this._hideFlag=!1)},d._hide=function(){this._xrKeyboard&&(this._xrKeyboard.occupy=!1,this._xrKeyboard.node.active=!1,this._xrKeyboard.hideKeyboard(),this._keyboardNode=null),this._xrKeyboardInput&&(this._xrKeyboardInput.node.off(y.XR_KEYBOARD_INPUT,this._xrKeyBoardInput,this),this._xrKeyboardInput.clear()),_.off(p.EventType.KEY_UP,this._xrKeyBoardUp,this)},d._xrKeyBoardInput=function(e){this.node.emit(y.XR_KEYBOARD_INPUT,e)},n(r,[{key:"suspendTransform",get:function(){return this._suspendTransform},set:function(e){e!==this._suspendTransform&&(this._suspendTransform=e)}},{key:"xRKeyboard",get:function(){return this._xrKeyboard},set:function(e){e!==this._xrKeyboard&&(this._xrKeyboard=e)}}]),r}(u)).prototype,"_suspendTransform",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(T.prototype,"_xrKeyboard",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),r(T.prototype,"suspendTransform",[g],Object.getOwnPropertyDescriptor(T.prototype,"suspendTransform"),T.prototype),r(T.prototype,"xRKeyboard",[m],Object.getOwnPropertyDescriptor(T.prototype,"xRKeyboard"),T.prototype),R=T))||R)||R)||R));d._RF.pop()}}}));

System.register("chunks:///_virtual/xr-keyboard-input.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-keyboard-handle.ts"],(function(t){var i,s,n,h,r,o,e,_,l,d,a,g;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){n=t.cclegacy,h=t.Label,r=t.Graphics,o=t.Input,e=t.XrKeyboardEventType,_=t.Vec3,l=t.Node,d=t.Component},function(t){a=t.xrKeyboardEventInput,g=t.XrKeyCode}],execute:function(){n._RF.push({},"3fc447obqBFHpRJLZw1a69C","xr-keyboard-input",void 0);var c=2048,u=function(t){return t[t.INIT=0]="INIT",t[t.DELETE=1]="DELETE",t[t.ADD=2]="ADD",t}(u||{});t("XrKeyboardInput",function(t){function n(){for(var i,s=arguments.length,n=new Array(s),h=0;h<s;h++)n[h]=arguments[h];return(i=t.call.apply(t,[this].concat(n))||this)._string="",i._label=null,i._cursor=null,i._cursorNode=new l,i._stringWidths=[],i._capsLock=!1,i._maxContextLength=0,i._pos=-1,i}i(n,t);var d=n.prototype;return d.onEnable=function(){this._label=this.node.getComponentInChildren(h),this._label&&(this._label.node.addChild(this._cursorNode),this._cursor=this._cursorNode.addComponent(r),this._cursor.lineWidth=8,this._cursor.color.fromHEX("#ffffff"),this._cursor.fillColor.fromHEX("#ffffff"),this._cursor.strokeColor.fromHEX("#ffffff"),this._label.node._uiProps.uiTransformComp&&this._cursorNode.setPosition(0,-this._label.node._uiProps.uiTransformComp.height/2,0),this._cursor.moveTo(0,-this._label.fontSize/2),this._cursor.lineTo(0,this._label.fontSize/2),this._cursor.stroke(),this._cursor.fill(),this.updateStringWidth(this._label.string,u.INIT)),a.on(o.EventType.KEY_UP,this._keyUp,this),a.on(e.XR_CAPS_LOCK,this._xrCapsLock,this),a.on(e.XR_KEYBOARD_INIT,this._init,this)},d.onDisable=function(){a.off(o.EventType.KEY_UP,this._keyUp,this),a.off(e.XR_CAPS_LOCK,this._xrCapsLock,this),a.off(e.XR_KEYBOARD_INIT,this._init,this)},d._init=function(){this._capsLock=!1},d._xrCapsLock=function(){this._capsLock=!this._capsLock},d.moveCursor=function(t){if(!(this._stringWidths.length<=0)&&this._label){var i=new _;this._label.node.inverseTransformPoint(i,t);var s=0,n=i.x;this._label.contentWidth>=c&&(n=i.x+this._label.contentWidth-c);for(var h=0;h<this._stringWidths.length&&!(this._stringWidths[h]>n);h++);this._pos=h-1,s=-1===this._pos?0:this._stringWidths[this._pos],this._label.contentWidth>=c&&(s-=this._label.contentWidth-c),this._cursorNode.setPosition(s,this._cursorNode.position.y,this._cursorNode.position.z)}},d._keyUp=function(t){if(t===g.ENTER)this.node.emit(e.XR_KEYBOARD_INPUT,this._string);else if(t===g.BACKSPACE)this._pos>=0&&(this._string=this._string.substring(0,this._pos)+this._string.substring(this._pos+1,this._string.length),this._pos--,this.updateStringWidth(this._string,u.DELETE));else if(this._string.length<this._maxContextLength){var i;if(!this._capsLock&&t>64&&t<91)i=String.fromCharCode(t+32);else{if(t===g.CAPS_LOCK||t===g.SHIFT_LEFT||t===g.SHIFT_RIGHT)return;i=t===g.COMMA?String.fromCharCode(44):String.fromCharCode(t)}this.addString(i)}},d.addString=function(t){this._string=this._string.substring(0,this._pos+1)+t+this._string.substring(this._pos+1,this._string.length),this._pos++,this.updateStringWidth(this._string,u.ADD)},d.updateStringWidth=function(t,i){if(this._label){this._label.string=t,this._label.updateRenderData(!0),i===u.DELETE?this._stringDeleteWidth():i===u.ADD?this._stringAddWidth():this._stringInitWidth();var s=-1===this._pos?0:this._stringWidths[this._pos];s=this._label.contentWidth>c?s-(this._label.contentWidth-c):s,this._cursorNode.setPosition(s,this._cursorNode.position.y,this._cursorNode.position.z)}},d._stringDeleteWidth=function(){var t=0;t=-1===this._pos?this._stringWidths[this._pos+1]:this._stringWidths[this._pos+1]-this._stringWidths[this._pos];for(var i=this._pos+1;i<this._stringWidths.length-1;++i)this._stringWidths[i]=this._stringWidths[i+1]-t;this._stringWidths.pop()},d._stringAddWidth=function(){if(this._label){if(this._stringWidths.length>0)for(var t=this._label.contentWidth-this._stringWidths[this._stringWidths.length-1],i=this._stringWidths.length-1;i>this._pos-1;--i)this._stringWidths[i]=0===i?t:this._stringWidths[i-1]+t;this._stringWidths.push(this._label.contentWidth)}},d._stringInitWidth=function(){this._pos=this._stringWidths.length-1},d.clear=function(){var t=this._string.length;this._pos=t-1;for(var i=0;i<t;i++)this._keyUp(g.BACKSPACE)},s(n,[{key:"maxContextLength",get:function(){return this._maxContextLength},set:function(t){this._maxContextLength=t}},{key:"string",get:function(){return this._string},set:function(t){for(var i=0;i<t.length;i++)this.addString(t[i])}}]),n}(d));n._RF.pop()}}}));

System.register("chunks:///_virtual/xr-keyboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-keyboard-handle.ts"],(function(e){var t,i,n,r,o,a,l,p,c,y,s,d,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createClass},function(e){a=e.cclegacy,l=e._decorator,p=e.EventHandler,c=e.CCBoolean,y=e.Input,s=e.KeyCode,d=e.Component},function(e){u=e.xrKeyboardEventInput}],execute:function(){var b,h,f,g,I,m,x,K,T,_,v,U,w,E;a._RF.push({},"c8a3cbMNIpJXqqZ+mEorEqQ","xr-keyboard",void 0);var k=l.ccclass,z=l.help,R=l.menu,W=l.property;e("XRKeyboard",(b=k("cc.XRKeyboard"),h=z("i18n:cc.XRKeyboard"),f=R("XR/XRUI/XRKeyboard"),g=W({serializable:!0}),I=W({serializable:!0,type:[p],displayOrder:3,tooltip:"i18n:xr-plugin.xr_keyboard.onCommitText"}),m=W({serializable:!0,type:[p],displayOrder:4,tooltip:"i18n:xr-plugin.xr_keyboard.onShowKeyboard"}),x=W({serializable:!0,type:[p],displayOrder:3,tooltip:"i18n:xr-plugin.xr_keyboard.onHideKeyboard"}),K=W({type:c,displayOrder:2,tooltip:"i18n:xr-plugin.xr_keyboard.disableUIInteractionWhenTyping"}),b(T=h(T=f((v=t((_=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"_disableUIInteractionWhenTyping",v,r(t)),n(t,"onCommitText",U,r(t)),n(t,"onShowKeyboard",w,r(t)),n(t,"onHideKeyboard",E,r(t)),t._occupy=!1,t}i(t,e);var a=t.prototype;return a.getXRKeyboardNode=function(){if(this._occupy){if(this._disableUIInteractionWhenTyping)return null;u.emit(y.EventType.KEY_UP,s.ENTER)}return this.node},a.commitText=function(){p.emitEvents(this.onCommitText,this)},a.showKeyboard=function(){p.emitEvents(this.onShowKeyboard,this)},a.hideKeyboard=function(){p.emitEvents(this.onHideKeyboard,this)},o(t,[{key:"disableUIInteractionWhenTyping",get:function(){return this._disableUIInteractionWhenTyping},set:function(e){e!==this._disableUIInteractionWhenTyping&&(this._disableUIInteractionWhenTyping=e)}},{key:"occupy",set:function(e){this._occupy=e}}]),t}(d)).prototype,"_disableUIInteractionWhenTyping",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),U=t(_.prototype,"onCommitText",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=t(_.prototype,"onShowKeyboard",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(_.prototype,"onHideKeyboard",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),t(_.prototype,"disableUIInteractionWhenTyping",[K],Object.getOwnPropertyDescriptor(_.prototype,"disableUIInteractionWhenTyping"),_.prototype),T=_))||T)||T)||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/xr-passthrough-layer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interface.ts","./xr-feature-define.ts","./xr-extension.ts"],(function(e){var t,r,i,a,n,o,p,y,s,h,c,l,u,f,d,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createClass},function(e){o=e.cclegacy,p=e._decorator,y=e.CCInteger,s=e.sys,h=e.Component},function(e){c=e.xrInterface,l=e.XRConfigKey},function(e){u=e.CxrLayerType},function(e){f=e.xrExtension,d=e.XrExtensionKey,_=e.XrBufferOperationType}],execute:function(){var g,m,P,O,T,D,x,b,v,L,R;o._RF.push({},"44a5f8PiclDOIVsD8pUD2Hf","xr-passthrough-layer",void 0);var C=p.ccclass,X=p.property,w=p.menu,A=function(){function e(){this.layerType=u.Underlay,this.compositionDepth=0,this.hidden=!1,this.textureOpacity=1}var t=e.prototype;return t.toBufferArray=function(){var e=new Float32Array(4);return e[0]=this.layerType,e[1]=this.compositionDepth,e[2]=this.hidden?1:0,e[3]=this.textureOpacity,e},t.print=function(){console.log("[CxrPassthroughLayerParam] layerType:"+this.layerType+",compositionDepth:"+this.compositionDepth+",hidden:"+this.hidden+",textureOpacity:"+this.textureOpacity)},e}();e("XRPassThroughLayer",(g=C("cc.XRPassThroughLayer"),m=w("XR/Extra/XRPassThroughLayer"),P=X({group:{name:"Compositing",displayOrder:1},displayName:"Placement",type:u,tooltip:"i18n:xr-plugin.compositionLayer.layertype"}),O=X({type:y,group:{name:"Compositing",displayOrder:2},displayName:"Depth",range:[0,65500,1],tooltip:"i18n:xr-plugin.compositionLayer.depth"}),T=X({displayOrder:3,slide:!0,range:[0,1,.1],displayName:"Opacity",tooltip:"i18n:xr-plugin.passthrough.opacity"}),g(D=m((b=t((x=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,i(t,"_layerType",b,a(t)),i(t,"_layerDepth",v,a(t)),i(t,"_opacity",L,a(t)),t._layerParam=new A,i(t,"_hidden",R,a(t)),t}r(t,e);var o=t.prototype;return o.start=function(){this._layerParam.compositionDepth=this._layerDepth,this._layerParam.hidden=this._hidden,this._layerParam.layerType=this._layerType,this._layerParam.textureOpacity=this._opacity,this._layerParam.print(),this.syncToOverlay(),this.enablePassthroughLayer(!0)},o.update=function(e){this.syncToOverlay()},o.syncToOverlay=function(){if(s.isXR&&s.isNative){this._layerParam.compositionDepth=this._layerDepth,this._layerParam.hidden=this._hidden,this._layerParam.layerType=this._layerType,this._layerParam.textureOpacity=this._opacity;var e=this._layerParam.toBufferArray();f.syncSharedBufferWithNative_Float32(d.XEK_PASSTHROUGH_LAYER_TICK,_.XBOT_SET,e,e.length)}},o.onDestroy=function(){this.enablePassthroughLayer(!1)},o.enablePassthroughLayer=function(e){s.isXR&&s.isNative&&c.setIntConfig(l.FEATURE_PASSTHROUGH,e?1:0)},n(t,[{key:"Hidden",get:function(){return this._hidden},set:function(e){this._hidden=e}},{key:"Layer",get:function(){return this._layerType},set:function(e){this._layerType=e}},{key:"Depth",get:function(){return this._layerDepth},set:function(e){this._layerDepth=e}},{key:"Opacity",get:function(){return this._opacity},set:function(e){this._opacity=e}}]),t}(h)).prototype,"_layerType",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.Underlay}}),v=t(x.prototype,"_layerDepth",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=t(x.prototype,"_opacity",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),R=t(x.prototype,"_hidden",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(x.prototype,"Layer",[P],Object.getOwnPropertyDescriptor(x.prototype,"Layer"),x.prototype),t(x.prototype,"Depth",[O],Object.getOwnPropertyDescriptor(x.prototype,"Depth"),x.prototype),t(x.prototype,"Opacity",[T],Object.getOwnPropertyDescriptor(x.prototype,"Opacity"),x.prototype),D=x))||D)||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/xr-permission-helper.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,s,r;return{setters:[function(e){i=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,r=e.native}],execute:function(){s._RF.push({},"98676GPZyNK5JFQhfp22ASR","xr-permission-helper",void 0);e("XRPermissionResult",function(e){return e[e.PERMISSION_GRANTED=0]="PERMISSION_GRANTED",e[e.PERMISSION_DENIED=-1]="PERMISSION_DENIED",e}({})),e("XRPermissionName",function(e){return e.INTERNET="android.permission.INTERNET",e.READ_EXTERNAL_STORAGE="android.permission.READ_EXTERNAL_STORAGE",e.RECORD_AUDIO="android.permission.RECORD_AUDIO",e.ACCESS_FINE_LOCATION="android.permission.ACCESS_FINE_LOCATION",e.ACCESS_COARSE_LOCATION="android.permission.ACCESS_COARSE_LOCATION",e.WRITE_EXTERNAL_STORAGE="android.permission.WRITE_EXTERNAL_STORAGE",e.CAMERA="android.permission.CAMERA",e.READ_PHONE_STATE="android.permission.READ_PHONE_STATE",e}({}));var n=e("XRPermissionHelper",function(){function e(){}return e.checkPermission=function(e,i){return i&&this._checkPermissionMap.set(e,i),this.addListenerCheck(),r.jsbBridgeWrapper.dispatchEventToNative(this.XR_PERMISSION_EVENT_NAME,this.XR_PERMISSION_TAG_CHECK+":"+e),!1},e.requestPermissions=function(e,i){this._requestPermissionEventListener=i,this.addListenerCheck();for(var s="",n=0;n<e.length;n++)n!==e.length-1?s=s+e[n]+"&":s+=e[n];return r.jsbBridgeWrapper.dispatchEventToNative(this.XR_PERMISSION_EVENT_NAME,this.XR_PERMISSION_TAG_REQUEST+":"+s),!1},e.addListenerCheck=function(){var e=this;this._listenerAdded||(this._listenerAdded=!0,r.jsbBridgeWrapper.addNativeEventListener(this.XR_PERMISSION_EVENT_NAME,(function(s){var r=s.split(":");if(r[0]===e.XR_PERMISSION_TAG_CHECK){if(e._checkPermissionMap.has(r[1])){var n=parseInt(r[2]);e._checkPermissionMap.get(r[1])(n)}}else if(r[0]===e.XR_PERMISSION_TAG_REQUEST){for(var E,t=r[1].split("&"),_=[],R=[],o=i(t);!(E=o()).done;){var S=E.value.split("#");_.push(S[0]);var N=parseInt(S[1]);R.push(N)}e._requestPermissionEventListener&&e._requestPermissionEventListener(_,R)}})))},e}());n.XR_PERMISSION_EVENT_NAME="xr-permission",n.XR_PERMISSION_TAG_CHECK="check",n.XR_PERMISSION_TAG_REQUEST="request",n._listenerAdded=!1,n._requestPermissionEventListener=null,n._checkPermissionMap=new Map,s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-plane-detection-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-spaces-feature-manager.ts","./xr-plane.ts","./xr-plane-result.ts"],(function(e){var t,n,a,r,i,o,s,l,p,c,u,f,g,R,D,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,s=e._decorator,l=e.Prefab,p=e.sys,c=e.instantiate,u=e.director},function(e){f=e.XRSpacesConfigKey,g=e.XRSpacesFeatureType,R=e.XRSpacesFeatureManager},function(e){D=e.XRPlane},function(e){P=e.XRPlanesResult}],execute:function(){var h,d,y,X,_,v;o._RF.push({},"dbc5bMrSZpPiJrcL86SDKvR","xr-plane-detection-manager",void 0);var M=s.ccclass,S=s.property,E=s.menu;e("XRPlaneDetectionManager",(h=M("cc.spaces.XRPlaneDetectionManager"),d=E("hidden:XR/Spaces/XRPlaneDetectionManager"),y=S({type:l}),h(X=d((v=t((_=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._planeDetectionResult=new P,a(t,"planePrefab",v,r(t)),t._planesMap=new Map,t}n(t,e);var o=t.prototype;return o.onStart=function(){p.isXR&&(xr.entry.setXRIntConfig(f.PLANE_DETECTION,1),console.log("[XRPlaneDetectionManager] onStart"))},o.onStop=function(){p.isXR&&(xr.entry.setXRIntConfig(f.PLANE_DETECTION,0),console.log("[XRPlaneDetectionManager] onStop"))},o.getFeatureType=function(){return g.PLANE_DETECTION},o.onRetrieveChanges=function(e){if(p.isXR){var t=xr.entry.getXRStringConfig(f.PLANE_DETECTION_DATA);if(t.length>0&&(this._planeDetectionResult.parseData(t),this._planeDetectionResult.planeDatas.length>0))for(var n,a=i(this._planeDetectionResult.planeDatas);!(n=a()).done;){var r=n.value;if(this._planesMap.has(r.id))this._planesMap.get(r.id).updatePlaneData(r);else if(this.planePrefab){var o=c(this.planePrefab);if(o){o.parent=u.getScene(),o.name="plane-"+r.id;var s=o.getComponent(D);s&&(s.updatePlaneData(r),this._planesMap.set(r.id,s))}}}}},t}(R)).prototype,"planePrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=_))||X)||X));o._RF.pop()}}}));

System.register("chunks:///_virtual/xr-plane-mesh-visualizer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-plane.ts"],(function(e){var n,t,i,r,s,a,o,l,u,h,p,c,d,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,o=e.Line,l=e.MeshRenderer,u=e.Vec3,h=e.sys,p=e.Quat,c=e.utils,d=e.Component},function(e){g=e.XRPlane}],execute:function(){var f,b,_,v,y;s._RF.push({},"210a9Yrvw9CcIrWqIu3yfL8","xr-plane-mesh-visualizer",void 0);var m=a.ccclass,w=a.menu,R=a.property;e("XRPlaneMeshVisualizer",m("cc.spaces.XRPlaneMeshVisualizer")(f=w("hidden:XR/Spaces/XRPlaneMeshVisualizer")((_=n((b=function(e){function n(){for(var n,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return(n=e.call.apply(e,[this].concat(s))||this)._plane=null,n._line=null,n._renderer=null,i(n,"enableDebugVertexs",_,r(n)),i(n,"debugRotation",v,r(n)),i(n,"debugPosition",y,r(n)),n}t(n,e);var s=n.prototype;return s.onLoad=function(){if(this._line=this.node.getComponent(o),this._plane=this.node.getComponent(g),this._renderer=this.node.getComponent(l),this.enableDebugVertexs){var e=[new u(-.95,-.04,.92),new u(-.54,-.04,.98),new u(.08,-.04,.43),new u(.5,-.04,-.64),new u(.5,-.04,-1),new u(.39,-.04,-1.06)];this.updatePolygonMesh(e)}},s.update=function(e){this._plane&&this._plane.isTracking?this.updatePolygonMesh(this._plane.vertexs):h.isXR&&this._renderer&&(this._renderer.mesh=null)},s.updatePolygonMesh=function(e){if(!(e.length<3)){for(var n=[],t=[],i=0;i<e.length;i++){var r=e[i],s=new u;if(this.enableDebugVertexs){var a=new p;p.fromEuler(a,this.debugRotation.x,this.debugRotation.y,this.debugRotation.z),u.transformRTS(s,r,a,this.debugPosition,u.ONE)}else this._plane&&u.transformRTS(s,r,this._plane.planeData.poseOrientation,this._plane.planeData.posePosition,u.ONE);t.push(s),n.push(r.x,r.y,r.z),"new Vec3"+r.toString()+",\n"}var o=t.slice(0);o.push(t[0]),this._line&&(this._line.positions=o);var l={positions:n,indices:this.generateIndices(e)},h=c.MeshUtils.createMesh(l);h&&this._renderer&&(this._renderer.mesh=h)}},s.generateIndices=function(e){var n=e.length-1;n>1&&u.equals(e[0],e[e.length-1])&&n--;for(var t=n,i=[],r=0;r<n;++r){var s=(r+1)%n;i.push(t),i.push(r),i.push(s)}return i},n}(d)).prototype,"enableDebugVertexs",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=n(b.prototype,"debugRotation",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),y=n(b.prototype,"debugPosition",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),f=b))||f)||f);s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-plane-result.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,a,n,s,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,a=e._decorator,n=e.Vec2,s=e.Vec3,r=e.Quat}],execute:function(){i._RF.push({},"f956aGj7NpGKbsdE5J2HqbC","xr-plane-result",void 0);a.ccclass;var o=e("XrPlaneTypeQCOM",function(e){return e[e.XR_PLANE_TYPE_HORIZONTAL_UPWARD_QCOM=0]="XR_PLANE_TYPE_HORIZONTAL_UPWARD_QCOM",e[e.XR_PLANE_TYPE_HORIZONTAL_DOWNWARD_QCOM=1]="XR_PLANE_TYPE_HORIZONTAL_DOWNWARD_QCOM",e[e.XR_PLANE_TYPE_VERTICAL_QCOM=2]="XR_PLANE_TYPE_VERTICAL_QCOM",e[e.XR_PLANE_TYPE_ARBITRARY_QCOM=3]="XR_PLANE_TYPE_ARBITRARY_QCOM",e[e.XR_PLANE_TYPE_MAX_ENUM_QCOM=2147483647]="XR_PLANE_TYPE_MAX_ENUM_QCOM",e}({})),_=e("XRPlaneData",(function(){this.id=0,this.planeType=o.XR_PLANE_TYPE_MAX_ENUM_QCOM,this.confidence=0,this.externSizeWidth=new n,this.externSizeHeight=new n,this.vertexs=[],this.posePosition=new s,this.poseOrientation=new r,this.width=0,this.height=0,this.isValid=!1}));e("XRPlanesResult",function(){function e(){this.planeDatas=new Array}return e.prototype.parseData=function(e){if(this.planeDatas=[],e&&e.length>0){var i=e.split("&");if(i.length>0)for(var a,n=t(i);!(a=n()).done;){var r=a.value;if(r.length>0){var o=r.split("|"),p=new _;p.vertexs=[],p.id=parseInt(o[0]),p.confidence=parseFloat(o[1]),p.planeType=parseInt(o[2]),p.externSizeWidth.x=parseFloat(o[3]),p.externSizeWidth.y=parseFloat(o[4]),p.width=p.externSizeWidth.y-p.externSizeWidth.x,p.externSizeHeight.x=parseFloat(o[5]),p.externSizeHeight.y=parseFloat(o[6]),p.height=p.externSizeHeight.y-p.externSizeHeight.x,p.posePosition.x=parseFloat(o[7]),p.posePosition.y=parseFloat(o[8]),p.posePosition.z=parseFloat(o[9]),p.poseOrientation.x=parseFloat(o[10]),p.poseOrientation.y=parseFloat(o[11]),p.poseOrientation.z=parseFloat(o[12]),p.poseOrientation.w=parseFloat(o[13]);for(var l=parseInt(o[14]),h=0;h<l;h++){var P=new s;P.x=parseFloat(o[15+2*h]),P.y=0,P.z=parseFloat(o[15+2*h+1]),p.vertexs.push(P)}p.isValid=!0,this.planeDatas.push(p)}}}},e}());i._RF.pop()}}}));

System.register("chunks:///_virtual/xr-plane.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-plane-result.ts"],(function(e){var t,n,i,a,s,o,r;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,i=e.createClass},function(e){a=e.cclegacy,s=e._decorator,o=e.Component},function(e){r=e.XRPlaneData}],execute:function(){var c;a._RF.push({},"9c095wPxJZP4IKBaBDJRbZy","xr-plane",void 0);var l=s.ccclass,u=s.menu;e("XRPlane",l("cc.spaces.XRPlane")(c=u("hidden:XR/Spaces/XRPlane")(c=function(e){function a(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this)._isTracking=!1,t._planeVertexs=new Array,t._objectNode=null,t.planeData=new r,t}t(a,e);var s=a.prototype;return s.onLoad=function(){this._objectNode=this.node.getChildByName("Object")},s.update=function(e){},s.onEnable=function(){},s.onDisable=function(){},s.updatePlaneData=function(e){if(this.planeData=e,this._objectNode||(this._objectNode=this.node.getChildByName("Object")),this.isTracking=e.isValid,this._planeVertexs=[],this.isTracking){this._planeVertexs.concat(e.vertexs);for(var t,i=n(e.vertexs);!(t=i()).done;){var a=t.value;this._planeVertexs.push(a)}this.node.setWorldPosition(e.posePosition),this.node.setWorldRotation(e.poseOrientation)}},i(a,[{key:"isTracking",get:function(){return this._isTracking},set:function(e){this._isTracking=e}},{key:"vertexs",get:function(){return this._planeVertexs},set:function(e){this._planeVertexs=e}}]),a}(o))||c)||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/xr-raycast-hit-result.ts",["cc"],(function(t){var s,a,i,r;return{setters:[function(t){s=t.cclegacy,a=t._decorator,i=t.Quat,r=t.Vec3}],execute:function(){var e;s._RF.push({},"05beaT5MDZHrr21LmaGsWUN","xr-raycast-hit-result",void 0);var o=a.ccclass;t("XRRaycastHitResult",o("cc.spaces.XRRaycastHitResult")(e=function(){function t(){this.targetId=0,this.position=new r,this.rotation=new i,this.surfaceNormal=new r,this.isValid=!1}return t.prototype.parseData=function(t){if(this.isValid=!1,t&&t.length>0){var s=t.split("|");s.length>0&&(this.targetId=parseInt(s[0]),this.position.x=parseFloat(s[1]),this.position.y=parseFloat(s[2]),this.position.z=parseFloat(s[3]),this.surfaceNormal.x=parseFloat(s[4]),this.surfaceNormal.y=parseFloat(s[5]),this.surfaceNormal.z=parseFloat(s[6]),i.fromViewUp(this.rotation,r.UNIT_Z,this.surfaceNormal),this.isValid=!0)}},t}())||e);s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-reference-image-asset.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-tracked-image-manager.ts","./xr-tracked-image-object.ts"],(function(e){var a,r,t,i,n,c,s,l,g,m,o;return{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,s=e.Texture2D,l=e.Component,g=e.Vec2},function(e){m=e.XRTrackedImageManager},function(e){o=e.XRTrackedImageObject}],execute:function(){var u,p,f,d,b,I,h,y,k,R,z,N,j,v;n._RF.push({},"335b7pwnTRHR53bubFVEQih","xr-reference-image-asset",void 0);var O=c.ccclass,w=c.property,x=c.menu;e("XRReferenceImageAsset",(u=O("cc.spaces.XRReferenceImageAsset"),p=x("hidden:XR/Spaces/XRReferenceImageAsset"),f=w({type:s,displayName:"Texture 2D"}),d=w({displayName:"Name"}),b=w({displayName:"Physical Size(meters)"}),I=w({type:m,displayName:"Tracked Image Manager"}),h=w({type:o,displayName:"Tracked Image Object"}),u(y=p((R=a((k=function(e){function a(){for(var a,r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return a=e.call.apply(e,[this].concat(n))||this,t(a,"trackingImage",R,i(a)),t(a,"referenceImageName",z,i(a)),t(a,"physicalSize",N,i(a)),t(a,"trackingImageManager",j,i(a)),t(a,"trackedImageObject",v,i(a)),a}return r(a,e),a.prototype.start=function(){var e,a;this.trackedImageObject||(this.trackedImageObject=this.node.getComponentInChildren(o));var r,t=null==(e=this.trackingImage)||null==(a=e.image)?void 0:a.url,i=this.referenceImageName+"|@assets/"+t+"|"+this.physicalSize.x+"|"+this.physicalSize.y;this.trackedImageObject&&(this.trackedImageObject.trackedImageName=this.referenceImageName,null==(r=this.trackingImageManager)||r.registerReferenceImageAsset(i,this.referenceImageName,this.trackedImageObject.node))},a}(l)).prototype,"trackingImage",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=a(k.prototype,"referenceImageName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),N=a(k.prototype,"physicalSize",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g}}),j=a(k.prototype,"trackingImageManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=a(k.prototype,"trackedImageObject",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=k))||y)||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/xr-remote-preview.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,r,s,a,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,o=t.sys,r=t.Vec4,s=t.Quat,a=t.Vec3,l=t.Component}],execute:function(){var h;i._RF.push({},"a62f9zsdhJI4qbcrCx1Bu43","xr-remote-preview",void 0);var c=n.ccclass,d=n.menu,g=11259375,f=t("XRDataPackageType",function(t){return t[t.DPT_MSG_DEVICE_INFO=1]="DPT_MSG_DEVICE_INFO",t[t.DPT_MSG_POSE_DATA=2]="DPT_MSG_POSE_DATA",t[t.DPT_MSG_CONTROLLER_KEY=3]="DPT_MSG_CONTROLLER_KEY",t[t.DPT_MSG_CONTENT=4]="DPT_MSG_CONTENT",t}({})),u=(t("XRVendor",function(t){return t[t.VD_MONADO=0]="VD_MONADO",t[t.VD_META_QUEST=1]="VD_META_QUEST",t[t.VD_HUAWEIVR=2]="VD_HUAWEIVR",t[t.VD_PICO=3]="VD_PICO",t[t.VD_ROKID=4]="VD_ROKID",t}({})),t("XRKeyEventType",function(t){return t[t.KET_CLICK=0]="KET_CLICK",t[t.KET_STICK=1]="KET_STICK",t[t.KET_GRAB=2]="KET_GRAB",t}({})),t("XRPacketHeaderInfo",function(){function t(){this.headFlag=0,this.packetDataLength=0,this.packetType=f.DPT_MSG_CONTENT,this.isValid=!1,this.dataView=null,this.chunkArray=null}return t.prototype.parseData=function(t){this.chunkArray=new Int8Array(t);var e=this.chunkArray.length;this.dataView=new DataView(t);var i=this.dataView.getUint32(0,!0),n=this.dataView.getUint32(4,!0);this.isValid=!1,i===g?e<n+8?console.log("XRPacketHeaderInfo.parseData error length not right : "+e+"<"+n):(this.packetType=this.dataView.getInt16(8,!0),this.isValid=!0):console.log("XRPacketHeaderInfo.parseData error head code not match : "+i+"!="+g)},t}())),C=t("XRCommonMessage",function(){function t(){this.packetType=f.DPT_MSG_CONTENT,this.messageContent=""}var e=t.prototype;return e.parseData=function(t,e){var i,n,o;if(t.parseData(e),t.isValid){this.packetType=null==(i=t.dataView)?void 0:i.getInt16(8,!0);var r=null==(n=t.chunkArray)?void 0:n.slice(10,null==(o=t.chunkArray)?void 0:o.length);r&&(this.messageContent=String.fromCharCode.apply(String,r).replace(/\u0000/g,""))}else console.log("XRCommonMessage.parseData header invalid!")},e.print=function(){console.log("XRDeviceInfo: \ntype."+this.packetType+" \nmessageContent."+this.messageContent)},t}()),y=t("XRDeviceInfo",function(){function t(){this.packetType=f.DPT_MSG_CONTENT,this.version=0,this.deviceName="",this.xrVendorType=0,this.leftEyeFov=new r,this.rightEyeFov=new r}var e=t.prototype;return e.parseData=function(t,e){if(t.parseData(e),t.isValid){if(t.dataView){var i;this.packetType=t.dataView.getInt16(8,!0),this.version=t.dataView.getInt16(10,!0);var n=null==(i=t.chunkArray)?void 0:i.slice(12,44);n&&(this.deviceName=String.fromCharCode.apply(String,n).replace(/\u0000/g,"")),this.xrVendorType=t.dataView.getInt16(44,!0),this.leftEyeFov.x=t.dataView.getFloat32(46,!0),this.leftEyeFov.y=t.dataView.getFloat32(50,!0),this.leftEyeFov.z=t.dataView.getFloat32(54,!0),this.leftEyeFov.w=t.dataView.getFloat32(58,!0),this.rightEyeFov.x=t.dataView.getFloat32(62,!0),this.rightEyeFov.y=t.dataView.getFloat32(66,!0),this.rightEyeFov.z=t.dataView.getFloat32(70,!0),this.rightEyeFov.w=t.dataView.getFloat32(74,!0)}}else console.log("XRDeviceInfo.parseData header invalid!")},e.print=function(){console.log("XRDeviceInfo: \ntype."+this.packetType+" \nversion."+this.version+" \ndeviceName."+this.deviceName+" \nxrVendorType."+this.xrVendorType+" \nleftEyeFov."+this.leftEyeFov.x+","+this.leftEyeFov.y+","+this.leftEyeFov.z+","+this.leftEyeFov.w+" \nrightEyeFov."+this.rightEyeFov.x+","+this.rightEyeFov.y+","+this.rightEyeFov.z+","+this.rightEyeFov.w)},t}()),w=t("XRPoseInfo",function(){function t(){this.packetType=f.DPT_MSG_CONTENT,this.hmdOrientation=new s,this.hmdPosition=new a,this.leftControllerOrientation=new s,this.leftControllerPosition=new a,this.rightControllerOrientation=new s,this.rightControllerPosition=new a,this.hmdEuler=new a,this.leftControllerEuler=new a,this.rightControllerEuler=new a}var e=t.prototype;return e.parseData=function(t,e){t.parseData(e),t.isValid?(t.dataView&&(this.packetType=t.dataView.getInt16(8,!0),this.hmdOrientation.x=t.dataView.getFloat32(10,!0),this.hmdOrientation.y=t.dataView.getFloat32(14,!0),this.hmdOrientation.z=t.dataView.getFloat32(18,!0),this.hmdOrientation.w=t.dataView.getFloat32(22,!0),this.hmdPosition.x=t.dataView.getFloat32(26,!0),this.hmdPosition.y=t.dataView.getFloat32(30,!0),this.hmdPosition.z=t.dataView.getFloat32(34,!0),this.leftControllerOrientation.x=t.dataView.getFloat32(38,!0),this.leftControllerOrientation.y=t.dataView.getFloat32(42,!0),this.leftControllerOrientation.z=t.dataView.getFloat32(46,!0),this.leftControllerOrientation.w=t.dataView.getFloat32(50,!0),this.leftControllerPosition.x=t.dataView.getFloat32(54,!0),this.leftControllerPosition.y=t.dataView.getFloat32(58,!0),this.leftControllerPosition.z=t.dataView.getFloat32(62,!0),this.rightControllerOrientation.x=t.dataView.getFloat32(66,!0),this.rightControllerOrientation.y=t.dataView.getFloat32(70,!0),this.rightControllerOrientation.z=t.dataView.getFloat32(74,!0),this.rightControllerOrientation.w=t.dataView.getFloat32(78,!0),this.rightControllerPosition.x=t.dataView.getFloat32(82,!0),this.rightControllerPosition.y=t.dataView.getFloat32(86,!0),this.rightControllerPosition.z=t.dataView.getFloat32(90,!0)),0===this.hmdOrientation.w&&(this.hmdOrientation.w=1),0===this.leftControllerOrientation.w&&(this.leftControllerOrientation.w=1),0===this.rightControllerOrientation.w&&(this.rightControllerOrientation.w=1),this.hmdOrientation.getEulerAngles(this.hmdEuler),this.leftControllerOrientation.getEulerAngles(this.leftControllerEuler),this.rightControllerOrientation.getEulerAngles(this.rightControllerEuler)):console.log("XRPoseInfo.parseData header invalid!")},e.print=function(){console.log("XRPoseInfo: \ntype."+this.packetType+" \nhmdRot."+this.hmdEuler.toString()+" \nhmdPos."+this.hmdPosition.toString()+" \nleftCtrlRot."+this.leftControllerEuler.toString()+" \nleftCtrlPos."+this.leftControllerPosition.toString()+" \nrightCtrlRot."+this.rightControllerEuler.toString()+" \nrightCtrlPos."+this.rightControllerPosition.toString())},t}()),_=t("XRControllerKeyInfo",function(){function t(){this.packetType=f.DPT_MSG_CONTENT,this.keyEventType=0,this.stickAxisCode=0,this.stickAxisValue=0,this.stickKeyCode=0,this.isButtonPressed=!1}var e=t.prototype;return e.parseData=function(t,e){t.parseData(e),t.isValid?t.dataView&&(this.packetType=t.dataView.getInt16(8,!0),this.keyEventType=t.dataView.getInt16(10,!0),this.stickAxisCode=t.dataView.getInt16(12,!0),this.stickAxisValue=t.dataView.getFloat32(14,!0),this.stickKeyCode=t.dataView.getInt16(18,!0),this.isButtonPressed=1===t.dataView.getInt8(20)):console.log("XRControllerKeyInfo.parseData header invalid!")},e.print=function(){console.log("XRControllerKeyInfo: \ntype."+this.packetType+" \nkeyEventType."+this.keyEventType+" \nstickKeyCode."+this.stickKeyCode+" \nbtnPressed."+this.isButtonPressed+" \nstickAxisCode."+this.stickAxisCode+" \nstickAxisValue."+this.stickAxisValue)},t}());t("XRRemotePreView",c("cc.XRRemotePreView")(h=d("XR/Extra/XRRemotePreView")(h=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this)._wsClient=null,e._wsServerIp=null,e._xrPacketHeaderInfo=new u,e._xrDeviceInfo=new y,e._xrPoseInfo=new w,e._xrControllerKeyInfo=new _,e._xrCommonMessage=new C,e._wsLastTickTime=0,e._retryCount=0,e}e(i,t);var n=i.prototype;return n.update=function(t){this._wsLastTickTime+=t,this._wsLastTickTime>=30&&(this._wsLastTickTime=0,this._wsClient&&this._wsClient.readyState==WebSocket.OPEN&&this._wsClient.send("tick"))},n.sendControllerKeyInfo=function(){if(o.isBrowser){var t=new CustomEvent("xr-remote-input",{detail:{keyEventType:this._xrControllerKeyInfo.keyEventType,stickAxisCode:this._xrControllerKeyInfo.stickAxisCode,stickAxisValue:this._xrControllerKeyInfo.stickAxisValue,stickKeyCode:this._xrControllerKeyInfo.stickKeyCode,isButtonPressed:this._xrControllerKeyInfo.isButtonPressed}});window.dispatchEvent(t)}},n.syncHmdControllerPose=function(){this.node.emit("sync-pose",this._xrPoseInfo)},n.syncDeviceInfo=function(){this.node.emit("sync-device-info",this._xrDeviceInfo)},n.connect=function(t){var e=this;null===this._wsServerIp&&(this._wsServerIp="ws://"+t+":8989"),this._wsClient=new WebSocket(this._wsServerIp),this._wsClient.onopen=function(){console.log("[WebSocket] onopen")},this._wsClient.onmessage=function(t){e.getBufferData(t.data).then((function(t){e.unpackData(t)})).catch((function(t){console.log("[WebSocket] getBufferData error."+t)}))},this._wsClient.onerror=function(){console.log("[WebSocket] onerror")},this._wsClient.onclose=function(t){5!==e._retryCount&&(console.log("[WebSocket] onclose:"+t.code+" | "+t.reason+" | retryCount."+e._retryCount),e.scheduleOnce(e.connect,3),e._retryCount++)},console.log("[XRRemotePreView] connect")},n.disconnect=function(){this._wsClient&&(this._wsClient.onopen=null,this._wsClient.onmessage=null,this._wsClient.onerror=null,this._wsClient.onclose=null,this._wsClient.close()),this._wsClient=null},n.getBufferData=function(t){return new Promise((function(e){"[object Blob]"===t.toString()?t.arrayBuffer().then((function(t){e(t)})):e(t)}))},n.unpackData=function(t){switch(this._xrPacketHeaderInfo.parseData(t),this._xrPacketHeaderInfo.packetType){case f.DPT_MSG_CONTROLLER_KEY:this._xrControllerKeyInfo.parseData(this._xrPacketHeaderInfo,t),this.sendControllerKeyInfo();break;case f.DPT_MSG_DEVICE_INFO:this._xrDeviceInfo.parseData(this._xrPacketHeaderInfo,t),this._xrDeviceInfo.print(),this.syncDeviceInfo();break;case f.DPT_MSG_POSE_DATA:this._xrPoseInfo.parseData(this._xrPacketHeaderInfo,t),this.syncHmdControllerPose();break;case f.DPT_MSG_CONTENT:this._xrCommonMessage.parseData(this._xrPacketHeaderInfo,t),this._xrCommonMessage.print()}},n.onDestroy=function(){this.disconnect()},i}(l))||h)||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/xr-spaces-feature-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(A){var T,n,e,_;return{setters:[function(A){T=A.inheritsLoose},function(A){n=A.cclegacy,e=A._decorator,_=A.Component}],execute:function(){var t;n._RF.push({},"d4addfNmKxGRKb8NxtvpYFG","xr-spaces-feature-manager",void 0);var S=e.ccclass,N=e.menu,a=A("XRSpacesFeatureType",function(A){return A[A.UNKNOWN=-1]="UNKNOWN",A[A.IMAGE_TRACKING=0]="IMAGE_TRACKING",A[A.HIT_TESTING=1]="HIT_TESTING",A[A.PLANE_DETECTION=2]="PLANE_DETECTION",A[A.SPATIAL_ANCHOR=3]="SPATIAL_ANCHOR",A[A.HAND_TRACKING=4]="HAND_TRACKING",A[A.CAMERA_ACCESS=5]="CAMERA_ACCESS",A}({}));A("XRSpacesConfigKey",function(A){return A[A.IMAGE_TRACKING=19]="IMAGE_TRACKING",A[A.IMAGE_TRACKING_CANDIDATEIMAGE=20]="IMAGE_TRACKING_CANDIDATEIMAGE",A[A.IMAGE_TRACKING_DATA=21]="IMAGE_TRACKING_DATA",A[A.IMAGE_TRACKING_SUPPORT_STATUS=22]="IMAGE_TRACKING_SUPPORT_STATUS",A[A.HIT_TESTING=23]="HIT_TESTING",A[A.HIT_TESTING_DATA=24]="HIT_TESTING_DATA",A[A.HIT_TESTING_SUPPORT_STATUS=25]="HIT_TESTING_SUPPORT_STATUS",A[A.PLANE_DETECTION=26]="PLANE_DETECTION",A[A.PLANE_DETECTION_DATA=27]="PLANE_DETECTION_DATA",A[A.PLANE_DETECTION_SUPPORT_STATUS=28]="PLANE_DETECTION_SUPPORT_STATUS",A[A.SPATIAL_ANCHOR=29]="SPATIAL_ANCHOR",A[A.SPATIAL_ANCHOR_DATA=30]="SPATIAL_ANCHOR_DATA",A[A.SPATIAL_ANCHOR_SUPPORT_STATUS=31]="SPATIAL_ANCHOR_SUPPORT_STATUS",A[A.HAND_TRACKING=32]="HAND_TRACKING",A[A.HAND_TRACKING_DATA=33]="HAND_TRACKING_DATA",A[A.HAND_TRACKING_SUPPORT_STATUS=34]="HAND_TRACKING_SUPPORT_STATUS",A[A.CAMERA_ACCESS=48]="CAMERA_ACCESS",A[A.CAMERA_ACCESS_DATA=49]="CAMERA_ACCESS_DATA",A[A.CAMERA_ACCESS_SUPPORT_STATUS=50]="CAMERA_ACCESS_SUPPORT_STATUS",A}({})),A("XRSpacesFeatureManager",S("cc.spaces.XRSpacesFeatureManager")(t=N("hidden:XR/Spaces/FeatureManager")(t=function(A){function n(){for(var T,n=arguments.length,e=new Array(n),_=0;_<n;_++)e[_]=arguments[_];return(T=A.call.apply(A,[this].concat(e))||this)._isRunning=!1,T}T(n,A);var e=n.prototype;return e.onStart=function(){},e.onStop=function(){},e.getFeatureType=function(){return a.UNKNOWN},e.onRetrieveChanges=function(A){},e.start=function(){},e.update=function(A){this._isRunning&&this.onRetrieveChanges(A)},e.onEnable=function(){console.log("[XRSpacesFeatureManager] onEnable."+this.getFeatureType().toString())},e.onDisable=function(){console.log("[XRSpacesFeatureManager] onDisable."+this.getFeatureType().toString())},e.onDestroy=function(){this.disableFeature()},e.enableFeature=function(){this._isRunning||(this._isRunning=!0,this.onStart())},e.disableFeature=function(){this._isRunning&&(this._isRunning=!1,this.onStop())},e.isRunning=function(){return this._isRunning},n}(_))||t)||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/xr-spaces-runtime-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-hand-tracking-manager.ts","./xr-hit-testing-manager.ts","./xr-tracked-image-manager.ts","./xr-plane-detection-manager.ts","./xr-spatial-anchor-manager.ts","./xr-spaces-feature-manager.ts"],(function(e){var a,t,n,r,i,u,s,o,c,g,p,l,M,d,f,F;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose,u=e.createClass},function(e){s=e.cclegacy,o=e._decorator,c=e.Node,g=e.Component},function(e){p=e.XRHandTrackingManager},function(e){l=e.XRHitTestingManager},function(e){M=e.XRTrackedImageManager},function(e){d=e.XRPlaneDetectionManager},function(e){f=e.XRSpatialAnchorManager},function(e){F=e.XRSpacesFeatureType}],execute:function(){var h,v,m,y,_,R,T;s._RF.push({},"0404apOtE1NR5p4TPdLfN7m","xr-spaces-runtime-manager",void 0);var b=o.ccclass,S=o.property,X=o.menu;e("XRSpacesRuntimeManager",(h=b("cc.spaces.XRSpacesRuntimeManager"),v=X("hidden:XR/Spaces/RuntimeManager"),m=S({type:[c]}),h(y=v(((T=function(e){function a(){for(var a,t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return a=e.call.apply(e,[this].concat(i))||this,n(a,"featureManagerNodes",R,r(a)),a._currentActivedFeatureType=F.UNKNOWN,a._activedFeatureManager=null,a._featureManagerMap=new Map,a}t(a,e);var s=a.prototype;return s.onLoad=function(){if(a.instance=this,this.featureManagerNodes)for(var e,t=i(this.featureManagerNodes);!(e=t()).done;){var n=e.value,r=n.getComponent(M),u=n.getComponent(l),s=n.getComponent(d),o=n.getComponent(f),c=n.getComponent(p);r&&this._featureManagerMap.set(r.getFeatureType(),r),u&&this._featureManagerMap.set(u.getFeatureType(),u),s&&this._featureManagerMap.set(s.getFeatureType(),s),o&&this._featureManagerMap.set(o.getFeatureType(),o),c&&this._featureManagerMap.set(c.getFeatureType(),c)}},s.update=function(e){},s.onToggleFeature=function(e){this._activedFeatureManager&&this._activedFeatureManager.getFeatureType()===e?console.log("[XRSpacesRuntimeManager] onToggleFeature:"+e+" is already enabled !!!"):(console.log("[XRSpacesRuntimeManager] onToggleFeature:"+e),this._activedFeatureManager&&this.isFeatureMutuallyExclusive(this._activedFeatureManager.getFeatureType(),e)&&this.disableActivedFeature(),this.enableFeature(e))},s.disableActivedFeature=function(){this._activedFeatureManager&&(console.log("[XRSpacesRuntimeManager] disableActivedFeature."+this._activedFeatureManager.getFeatureType().toString()),this._activedFeatureManager.disableFeature(),this._activedFeatureManager.node.active=!1)},s.enableFeature=function(e){this._featureManagerMap.has(e)?(console.log("[XRSpacesRuntimeManager] enableFeature:"+e.toString()),this.activedFeatureType=e,this._activedFeatureManager=this._featureManagerMap.get(e),this._activedFeatureManager&&(this._activedFeatureManager.enableFeature(),this._activedFeatureManager.node.active=!0)):console.error("[XRSpacesRuntimeManager] Not support feature type : "+e.toString())},s.onEnable=function(){},s.onDisable=function(){},s.onDestroy=function(){a.instance=null},s.isFeatureMutuallyExclusive=function(e,a){return!0},s.getHandTrackingManager=function(){return this._featureManagerMap.get(F.HAND_TRACKING)},u(a,[{key:"activedFeatureType",get:function(){return this._currentActivedFeatureType},set:function(e){this._currentActivedFeatureType=e}}]),a}(g)).instance=null,R=a((_=T).prototype,"featureManagerNodes",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=_))||y)||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-spatial-anchor-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-spaces-feature-manager.ts","./xr-spatial-anchor.ts"],(function(a){var n,t,e,o,r,c,i,s,l,A,h;return{setters:[function(a){n=a.inheritsLoose,t=a.createForOfIteratorHelperLoose},function(a){e=a.cclegacy,o=a._decorator,r=a.sys},function(a){c=a.XRSpacesConfigKey,i=a.XRSpacesFeatureType,s=a.XRSpacesFeatureManager},function(a){l=a.XRSpatialAnchorData,A=a.AnchorState,h=a.XRSpatialAnchor}],execute:function(){var d;e._RF.push({},"b0d2d/8BcVCE7+IGS8qIkrI","xr-spatial-anchor-manager",void 0);var S=o.ccclass,p=o.menu,g=function(a){return a[a.CREATE_NEW=1]="CREATE_NEW",a[a.REMOVE_SAVED=2]="REMOVE_SAVED",a[a.SAVE=3]="SAVE",a[a.CLEAR_STORE=4]="CLEAR_STORE",a[a.LOAD_ALL_SAVED=5]="LOAD_ALL_SAVED",a}(g||{});a("XRSpatialAnchorManager",S("cc.spaces.XRSpatialAnchorManager")(d=p("hidden:XR/Spaces/XRSpatialAnchorManager")(d=function(a){function e(){for(var n,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(n=a.call.apply(a,[this].concat(e))||this)._onLoadedCallback=null,n._onSavedCallback=null,n._onAddedCallback=null,n._anchorsMap=new Map,n._loadedAnchorDatasMap=new Map,n}n(e,a);var o=e.prototype;return o.onStart=function(){r.isXR&&(xr.entry.setXRIntConfig(c.SPATIAL_ANCHOR,1),console.log("[XRSpatialAnchorManager] onStart"))},o.onStop=function(){r.isXR&&(xr.entry.setXRIntConfig(c.SPATIAL_ANCHOR,0),console.log("[XRSpatialAnchorManager] onStop"))},o.getFeatureType=function(){return i.SPATIAL_ANCHOR},o.getLoadedAnchorDatas=function(){for(var a,n=[],e=t(this._loadedAnchorDatasMap.values());!(a=e()).done;){var o=a.value;n.push(o)}return n},o.onRetrieveChanges=function(a){if(r.isXR){var n=xr.entry.getXRStringConfig(c.SPATIAL_ANCHOR_DATA);if(n.length>0){var e=n.split("&");if(e.length>0){for(var o,i=!1,s=t(e);!(o=s()).done;){var h=o.value;if(h.length>0){var d,S=void 0,p=h.split("|"),g=parseFloat(p[0]),R=p[1];if(-1===g){i=!0;continue}if(this._loadedAnchorDatasMap.has(R))null==(d=S=this._loadedAnchorDatasMap.get(R))||d.praseDataArray(p);else(S=new l).praseDataArray(p),this._loadedAnchorDatasMap.set(R,S);if(this._anchorsMap.has(R)){var _=this._anchorsMap.get(R);_&&S&&(_.syncSpatialAnchorData(S),_.anchorState===A.CREATING?(_.anchorState=A.CREATED,this._onAddedCallback&&this._onAddedCallback(_)):S.isSaved&&_.anchorState===A.SAVING&&(_.anchorState=A.SAVED,this._onSavedCallback&&this._onSavedCallback(_)))}}}i&&this._onLoadedCallback&&this._onLoadedCallback()}}}},o.loadAllSavedAnchors=function(a){r.isXR&&(console.log("[XRSpatialAnchorManager] loadAllSavedAnchors"),this._onLoadedCallback=a,xr.entry.setXRStringConfig(c.SPATIAL_ANCHOR,this.generateConfigData(g.LOAD_ALL_SAVED,"")))},o.clearStore=function(){r.isXR&&(console.log("[XRSpatialAnchorManager] clearStore"),xr.entry.setXRStringConfig(c.SPATIAL_ANCHOR,this.generateConfigData(g.CLEAR_STORE,"")))},o.asyncSaveAnchor=function(a,n){r.isXR&&(a.anchorState=A.SAVING,this._onSavedCallback=n,xr.entry.setXRStringConfig(c.SPATIAL_ANCHOR,this.generateConfigData(g.SAVE,""+a.spatialAnchorData.id)))},o.addAnchor=function(a,n){r.isXR&&(console.log("XRSpatialAnchorManager] addAnchor:"+a.spatialAnchorData.name),a.anchorState=A.CREATING,this._anchorsMap.set(a.spatialAnchorData.name,a),this._onAddedCallback=n,xr.entry.setXRStringConfig(c.SPATIAL_ANCHOR,this.generateConfigData(g.CREATE_NEW,a.getCreateInfo())))},o.addAnchorNode=function(a,n){if(r.isXR){var t=a.getComponent(h);t&&(t.syncSpatialAnchorData(n),this._anchorsMap.set(t.spatialAnchorData.name,t),console.log("XRSpatialAnchorManager] addAnchorNode:"+t.spatialAnchorData.name))}},o.removeSavedAnchor=function(a){r.isXR&&(console.log("XRSpatialAnchorManager] removeSavedAnchor:"+a.spatialAnchorData.id),this._anchorsMap.delete(a.spatialAnchorData.name),this._loadedAnchorDatasMap.delete(a.spatialAnchorData.name),xr.entry.setXRStringConfig(c.SPATIAL_ANCHOR,this.generateConfigData(g.REMOVE_SAVED,a.spatialAnchorData.id+"|1")))},o.reset=function(){console.log("[XRSpatialAnchorManager] reset."+this._anchorsMap.size),this._onLoadedCallback=null,this._onSavedCallback=null,this._onAddedCallback=null;for(var a,n=t(this._anchorsMap.values());!(a=n()).done;){var e=a.value;e.node&&e.node.destroy()}this._loadedAnchorDatasMap.clear(),this._anchorsMap.clear()},o.generateConfigData=function(a,n){return a+":"+n},e}(s))||d)||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/xr-spatial-anchor.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,s,a,o,n,e,r;return{setters:[function(t){i=t.inheritsLoose,s=t.createClass},function(t){a=t.cclegacy,o=t._decorator,n=t.Vec3,e=t.Quat,r=t.Component}],execute:function(){var h;a._RF.push({},"125645ZXwtH/JS3eHSNONUW","xr-spatial-anchor",void 0);var p=o.ccclass,c=o.menu,l=t("AnchorState",function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.CREATING=1]="CREATING",t[t.CREATED=2]="CREATED",t[t.SAVING=3]="SAVING",t[t.SAVED=4]="SAVED",t[t.REMOVING=5]="REMOVING",t[t.REMOVED=6]="REMOVED",t}({})),d=t("XRSpatialAnchorData",function(){function t(){this.name="sa",this.id=0,this.isSaved=!1,this.isFromPersistArea=!1,this.isTracked=!1,this.isValid=!1,this.posePosition=new n,this.poseOrientation=new e}var i=t.prototype;return i.praseData=function(t){if(this.isValid=!1,t.length>0){var i=t.split("|");this.praseDataArray(i)}},i.praseDataArray=function(t){this.isValid=!1,t.length>0&&(this.id=parseFloat(t[0]),this.name=t[1],this.isSaved=1===parseInt(t[2]),this.isFromPersistArea=1===parseInt(t[3]),this.isTracked=1===parseInt(t[4]),this.isValid=!0,t.length>5&&(this.posePosition.x=parseFloat(t[5]),this.posePosition.y=parseFloat(t[6]),this.posePosition.z=parseFloat(t[7]),this.poseOrientation.x=parseFloat(t[8]),this.poseOrientation.y=parseFloat(t[9]),this.poseOrientation.z=parseFloat(t[10]),this.poseOrientation.w=parseFloat(t[11])))},i.copyFrom=function(t){this.name=t.name,this.id=t.id,this.isSaved=t.isSaved,this.isFromPersistArea=t.isFromPersistArea,this.isValid=t.isValid,this.isTracked=t.isTracked,this.posePosition.x=t.posePosition.x,this.posePosition.y=t.posePosition.y,this.posePosition.z=t.posePosition.z,this.poseOrientation.x=t.poseOrientation.x,this.poseOrientation.y=t.poseOrientation.y,this.poseOrientation.z=t.poseOrientation.z,this.poseOrientation.w=t.poseOrientation.w},i.print=function(){console.log("[XRSpatialAnchorData] name."+this.name+", id."+this.id+", saved."+this.isSaved+", persised."+this.isFromPersistArea+", \n        tracked."+this.isTracked+", position."+this.posePosition.toString()+", orientation."+this.poseOrientation.toString())},t}());t("XRSpatialAnchor",p("cc.spaces.XRSpatialAnchor")(h=c("hidden:XR/Spaces/XRSpatialAnchor")(h=function(t){function a(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return(i=t.call.apply(t,[this].concat(a))||this).anchorState=l.UNKNOWN,i._spatialAnchorData=new d,i}i(a,t);var o=a.prototype;return o.onLoad=function(){this._spatialAnchorData.name="sa_"+this.uuid,this.node.name="sa_"+this.uuid,console.log("XRSpatialAnchor onLoad."+this._spatialAnchorData.name)},o.syncSpatialAnchorData=function(t){this._spatialAnchorData.copyFrom(t),this.node.name=this._spatialAnchorData.name,this._spatialAnchorData.isFromPersistArea&&(this.anchorState=l.SAVED),this.node.worldPosition=this._spatialAnchorData.posePosition,this.node.worldRotation=this._spatialAnchorData.poseOrientation,this.node.active&&!this._spatialAnchorData.isTracked?this.node.active=!1:!this.node.active&&this._spatialAnchorData.isTracked&&(this.node.active=!0)},o.getCreateInfo=function(){return this._spatialAnchorData.name+"|"+this.node.worldPosition.x+"|"+this.node.worldPosition.y+"|"+this.node.worldPosition.z+"|"+this.node.worldRotation.x+"|"+this.node.worldRotation.y+"|"+this.node.worldRotation.z+"|"+this.node.worldRotation.w},s(a,[{key:"spatialAnchorData",get:function(){return this._spatialAnchorData}}]),a}(r))||h)||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/xr-spatial-audio-source.ts",["./rollupPluginModLoBabelHelpers.js","cc","./pose-tracker.ts"],(function(t){var i,e,o,n,r,a,_,s,l,A,p,u,c,d,E,T,O,D,N;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){_=t.cclegacy,s=t._decorator,l=t.ccenum,A=t.AudioClip,p=t.sys,u=t.find,c=t.native,d=t.Node,E=t.director,T=t.clamp,O=t.Component},function(t){D=t.PoseTracker,N=t.TrackingSource_Type}],execute:function(){var f,I,h,S,R,y,P,v,L,U,m,g,b,X,M,w,V,C,x,G,B,F,k,j,z,J;_._RF.push({},"bc9b6inbsRGsLou9EJjjZ9x","xr-spatial-audio-source",void 0);var W=s.ccclass,Y=s.property,H=s.menu,Z=(s.type,t("XRAudioState",function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.UNLOAD=3]="UNLOAD",t[t.CREATED=4]="CREATED",t[t.PLAYING=5]="PLAYING",t[t.PAUSED=6]="PAUSED",t[t.RESUMED=7]="RESUMED",t[t.STOPPED=8]="STOPPED",t[t.PLAY_COMPLETED=9]="PLAY_COMPLETED",t}({})));l(Z);var q=t("XRAudioDistanceRolloffModel",function(t){return t[t.OFF=-1]="OFF",t[t.LINEAR=1]="LINEAR",t[t.LOGARITHMIC=0]="LOGARITHMIC",t}({}));l(q);t("XRSpatialAudioSource",(f=W("cc.XRSpatialAudioSource"),I=H("XR/Extra/XRSpatialAudioSource"),h=Y({type:A,serializable:!0}),S=Y({serializable:!0}),R=Y({serializable:!0}),y=Y({serializable:!0}),P=Y({type:q,serializable:!0}),v=Y({serializable:!0}),L=Y({serializable:!0}),U=Y({type:A,tooltip:"i18n:xr-plugin.spatialAudio.clip"}),m=Y({tooltip:"i18n:xr-plugin.spatialAudio.loop"}),g=Y({tooltip:"i18n:xr-plugin.spatialAudio.playOnAwake"}),b=Y({tooltip:"i18n:xr-plugin.spatialAudio.volume",range:[0,1]}),X=Y({type:q,displayName:"Distance Rolloff Model",tooltip:"i18n:xr-plugin.spatialAudio.distanceRolloffModel"}),M=Y({tooltip:"i18n:xr-plugin.spatialAudio.minDistance",range:[0,1e6],visible:function(){return this._audioDistanceRolloffModel!==q.OFF}}),w=Y({tooltip:"i18n:xr-plugin.spatialAudio.maxDistance",range:[1,1e6],visible:function(){return this._audioDistanceRolloffModel!==q.OFF}}),f(V=I(((J=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,o(i,"_clip",x,n(i)),o(i,"_loop",G,n(i)),o(i,"_playOnAwake",B,n(i)),o(i,"_volume",F,n(i)),o(i,"_audioDistanceRolloffModel",k,n(i)),o(i,"_minDistance",j,n(i)),o(i,"_maxDistance",z,n(i)),i._xrAgent=null,i._hmdNode=null,i._audioState=Z.DEFAULT,i}e(i,t);var _=i.prototype;return _.onLoad=function(){var t=this;if(p.isXR&&p.isNative){var e;if(this._xrAgent||(this._xrAgent=u("XR Agent")),this._xrAgent)for(var o,n=this._xrAgent.getComponentsInChildren(D),a=r(n);!(o=a()).done;){var _=o.value;_.trackingSource===N.VIEW_POSE_ACTIVE_HMD&&(this._hmdNode=_.node)}console.log("onLoad.xr-spatial-audio-source:"+i.XR_SPATIAL_AUDIO_EVENT_NAME+"_"+this.uuid),c.jsbBridgeWrapper.addNativeEventListener(i.XR_SPATIAL_AUDIO_EVENT_NAME+"_"+this.uuid,(function(e){var o=e.split("&");o[0]===i.XR_SPATIAL_AUDIO_EVENT_TAG_STATUS_SOUND_OBJECT&&(t._audioState=parseInt(o[1]))}));var s=i.XR_SPATIAL_AUDIO_EVENT_TAG_INIT+"&"+this.uuid+"&"+(null==(e=this._clip)?void 0:e.nativeUrl)+"&"+this.node.worldPosition.x+"&"+this.node.worldPosition.y+"&"+this.node.worldPosition.z+"&"+this._volume+"&"+(this._loop?"1":"0")+"&"+(this._playOnAwake?"1":"0")+"&"+this._audioDistanceRolloffModel+"&"+this._minDistance+"&"+this._maxDistance;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,s)}this.node.on(d.EventType.TRANSFORM_CHANGED,(function(e){if(e&d.TransformBit.POSITION&&p.isXR&&p.isNative){var o=i.XR_SPATIAL_AUDIO_EVENT_TAG_LOCATION_SOUND_OBJECT+"&"+t.uuid+"&"+t.node.worldPosition.x+"&"+t.node.worldPosition.y+"&"+t.node.worldPosition.z;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,o)}}),this)},_.update=function(t){if(p.isXR&&p.isNative&&this._hmdNode&&i.tickFrameCount!==E.getTotalFrames()){var e=i.XR_SPATIAL_AUDIO_EVENT_TAG_SYNC_SIXDOF_DATA+"&"+this._hmdNode.worldPosition.x+"&"+this._hmdNode.worldPosition.y+"&"+this._hmdNode.worldPosition.z+"&"+this._hmdNode.worldRotation.x+"&"+this._hmdNode.worldRotation.y+"&"+this._hmdNode.worldRotation.z+"&"+this._hmdNode.worldRotation.w;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,e),i.tickFrameCount=E.getTotalFrames()}},_.onDestroy=function(){if(p.isXR&&p.isNative){var t=i.XR_SPATIAL_AUDIO_EVENT_TAG_STOP_SOUND_OBJECT+"&"+this.uuid;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,t),c.jsbBridgeWrapper.removeAllListenersForEvent(i.XR_SPATIAL_AUDIO_EVENT_NAME+"_"+this.uuid)}},_.play=function(){if(p.isXR&&p.isNative&&this._audioState!==Z.PLAYING){var t=i.XR_SPATIAL_AUDIO_EVENT_TAG_RESUME_SOUND_OBJECT+"&"+this.uuid;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,t);var e=i.XR_SPATIAL_AUDIO_EVENT_TAG_PLAY_SOUND_OBJECT+"&"+this.uuid;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,e)}},_.pause=function(){if(p.isXR&&p.isNative&&this._audioState!==Z.PAUSED){var t=i.XR_SPATIAL_AUDIO_EVENT_TAG_PAUSE_SOUND_OBJECT+"&"+this.uuid;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,t)}},_.setVolumeInternal=function(){if(p.isXR&&p.isNative){var t=i.XR_SPATIAL_AUDIO_EVENT_TAG_VOLUME_SOUND_OBJECT+"&"+this.uuid+"&"+this._volume;c.jsbBridgeWrapper.dispatchEventToNative(i.XR_SPATIAL_AUDIO_EVENT_NAME,t)}},a(i,[{key:"clip",get:function(){return this._clip},set:function(t){t!==this._clip&&(this._clip=t)}},{key:"loop",get:function(){return this._loop},set:function(t){this._loop=t}},{key:"playOnAwake",get:function(){return this._playOnAwake},set:function(t){this._playOnAwake=t}},{key:"volume",get:function(){return this._volume},set:function(t){Number.isNaN(t)?console.warn("illegal audio volume!"):(t=T(t,0,1),this._volume=t,this.setVolumeInternal())}},{key:"distanceRolloffModel",get:function(){return this._audioDistanceRolloffModel},set:function(t){t!==this._audioDistanceRolloffModel&&(this._audioDistanceRolloffModel=t)}},{key:"rolloffMinDistance",get:function(){return this._minDistance},set:function(t){this._minDistance=t}},{key:"rolloffMaxDistance",get:function(){return this._maxDistance},set:function(t){this._maxDistance=t}}]),i}(O)).XR_SPATIAL_AUDIO_EVENT_NAME="xr-spatial-audio",J.XR_SPATIAL_AUDIO_EVENT_TAG_INIT="to-init",J.XR_SPATIAL_AUDIO_EVENT_TAG_STATUS_SOUND_OBJECT="sound-status",J.XR_SPATIAL_AUDIO_EVENT_TAG_PAUSE_SOUND_OBJECT="sound-pause",J.XR_SPATIAL_AUDIO_EVENT_TAG_RESUME_SOUND_OBJECT="sound-resume",J.XR_SPATIAL_AUDIO_EVENT_TAG_STOP_SOUND_OBJECT="sound-stop",J.XR_SPATIAL_AUDIO_EVENT_TAG_PLAY_SOUND_OBJECT="sound-play",J.XR_SPATIAL_AUDIO_EVENT_TAG_LOCATION_SOUND_OBJECT="sound-position",J.XR_SPATIAL_AUDIO_EVENT_TAG_VOLUME_SOUND_OBJECT="sound-volume",J.XR_SPATIAL_AUDIO_EVENT_TAG_UNLOAD="sound-unload",J.XR_SPATIAL_AUDIO_EVENT_TAG_SYNC_SIXDOF_DATA="sound-sync-sixdof-data",J.tickFrameCount=0,x=i((C=J).prototype,"_clip",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(C.prototype,"_loop",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=i(C.prototype,"_playOnAwake",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=i(C.prototype,"_volume",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=i(C.prototype,"_audioDistanceRolloffModel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return q.OFF}}),j=i(C.prototype,"_minDistance",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=i(C.prototype,"_maxDistance",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),i(C.prototype,"clip",[U],Object.getOwnPropertyDescriptor(C.prototype,"clip"),C.prototype),i(C.prototype,"loop",[m],Object.getOwnPropertyDescriptor(C.prototype,"loop"),C.prototype),i(C.prototype,"playOnAwake",[g],Object.getOwnPropertyDescriptor(C.prototype,"playOnAwake"),C.prototype),i(C.prototype,"volume",[b],Object.getOwnPropertyDescriptor(C.prototype,"volume"),C.prototype),i(C.prototype,"distanceRolloffModel",[X],Object.getOwnPropertyDescriptor(C.prototype,"distanceRolloffModel"),C.prototype),i(C.prototype,"rolloffMinDistance",[M],Object.getOwnPropertyDescriptor(C.prototype,"rolloffMinDistance"),C.prototype),i(C.prototype,"rolloffMaxDistance",[w],Object.getOwnPropertyDescriptor(C.prototype,"rolloffMaxDistance"),C.prototype),V=C))||V)||V));_._RF.pop()}}}));

System.register("chunks:///_virtual/xr-switch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-keyboard-handle.ts"],(function(t){var i,s,e,h,o,_,c,n,l,r,a;return{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.inheritsLoose,e=t.initializerDefineProperty,h=t.assertThisInitialized,o=t.createClass},function(t){_=t.cclegacy,c=t._decorator,n=t.Node,l=t.XrKeyboardEventType,r=t.Component},function(t){a=t.xrKeyboardEventInput}],execute:function(){var y,p,w,b,m,u,f,T,O,d,v,g,x,L;_._RF.push({},"90b69PCbDdEnZ1RRl0FofqB","xr-switch",void 0);var S=c.ccclass,M=c.help,R=c.menu,z=c.property;t("XRSwitch",(y=S("cc.XRSwitch"),p=M("i18n:cc.XRSwitch"),w=R("XR/XRUI/XRSwitch"),b=z({serializable:!0}),m=z({serializable:!0}),u=z({serializable:!0}),f=z({type:n,displayOrder:1,tooltip:"i18n:xr-plugin.xr_switch.switch_latin"}),T=z({type:n,displayOrder:2,tooltip:"i18n:xr-plugin.xr_switch.switch_symbol"}),O=z({type:n,displayOrder:3,tooltip:"i18n:xr-plugin.xr_switch.switch_math_symbol"}),y(d=p(d=w((g=i((v=function(t){function i(){for(var i,s=arguments.length,o=new Array(s),_=0;_<s;_++)o[_]=arguments[_];return i=t.call.apply(t,[this].concat(o))||this,e(i,"_switch_latin",g,h(i)),e(i,"_switch_symbol",x,h(i)),e(i,"_switch_math_symbol",L,h(i)),i._type="",i}s(i,t);var _=i.prototype;return _.onEnable=function(){a.on(l.TO_LATIN,this._switchToTable,this),a.on(l.TO_SYMBOL,this._switchToTable,this),a.on(l.TO_MATH_SYMBOL,this._switchToTable,this)},_.onDisable=function(){a.off(l.TO_LATIN,this._switchToTable,this),a.off(l.TO_SYMBOL,this._switchToTable,this),a.off(l.TO_MATH_SYMBOL,this._switchToTable,this)},_._switchToTable=function(t){this._type=t},_.update=function(){""!==this._type&&(this._type===l.TO_LATIN?(this._switch_latin&&(this._switch_latin.active=!0),this._switch_symbol&&(this._switch_symbol.active=!1),this._switch_math_symbol&&(this._switch_math_symbol.active=!1)):this._type===l.TO_SYMBOL?(this._switch_latin&&(this._switch_latin.active=!1),this._switch_symbol&&(this._switch_symbol.active=!0),this._switch_math_symbol&&(this._switch_math_symbol.active=!1)):this._type===l.TO_MATH_SYMBOL&&(this._switch_latin&&(this._switch_latin.active=!1),this._switch_symbol&&(this._switch_symbol.active=!1),this._switch_math_symbol&&(this._switch_math_symbol.active=!0)),this._type="")},o(i,[{key:"switch_latin",get:function(){return this._switch_latin},set:function(t){t!==this._switch_latin&&(this._switch_latin=t)}},{key:"switch_symbol",get:function(){return this._switch_symbol},set:function(t){t!==this._switch_symbol&&(this._switch_symbol=t)}},{key:"switch_math_symbol",get:function(){return this._switch_math_symbol},set:function(t){t!==this._switch_math_symbol&&(this._switch_math_symbol=t)}}]),i}(r)).prototype,"_switch_latin",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(v.prototype,"_switch_symbol",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(v.prototype,"_switch_math_symbol",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i(v.prototype,"switch_latin",[f],Object.getOwnPropertyDescriptor(v.prototype,"switch_latin"),v.prototype),i(v.prototype,"switch_symbol",[T],Object.getOwnPropertyDescriptor(v.prototype,"switch_symbol"),v.prototype),i(v.prototype,"switch_math_symbol",[O],Object.getOwnPropertyDescriptor(v.prototype,"switch_math_symbol"),v.prototype),d=v))||d)||d)||d));_._RF.pop()}}}));

System.register("chunks:///_virtual/xr-tracked-image-manager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-spaces-feature-manager.ts"],(function(e){var t,a,r,n,s,i,o,g,c,u,d,p;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,n=e._decorator,s=e.Vec3,i=e.Quat,o=e.EventTarget,g=e.Event,c=e.sys},function(e){u=e.XRSpacesConfigKey,d=e.XRSpacesFeatureType,p=e.XRSpacesFeatureManager}],execute:function(){var f,h;r._RF.push({},"5f4d16EZ/JFyrO7iXqL6+Mw","xr-tracked-image-manager",void 0);var I=n.ccclass,v=n.menu,m=e("XRTrackedImageInfo",(function(e){this.name="",this.position=new s,this.quaternion=new i;var t=e.split("|");this.name=t[0],this.position.x=parseFloat(t[1]),this.position.y=parseFloat(t[2]),this.position.z=parseFloat(t[3]),this.quaternion.x=parseFloat(t[4]),this.quaternion.y=parseFloat(t[5]),this.quaternion.z=parseFloat(t[6]),this.quaternion.w=parseFloat(t[7])})),_=e("EventTrackedImage",function(e){function a(t){var a;return(a=e.call(this,t,!1)||this).added=[],a.updated=[],a.removed=[],a}return t(a,e),a.prototype.reset=function(){this.added=[],this.updated=[],this.removed=[]},a}(g)),T=e("TrackedImageEventType",function(e){return e.DEFAULT="xr-tracked-image",e.ADDED="xr-tracked-image-added",e.REMOVED="xr-tracked-image-removed",e.UPDATED="xr-tracked-image-updated",e}({}));e("XRTrackedImageManager",I("cc.spaces.XRTrackedImageManager")(f=v("hidden:XR/Spaces/XRTrackedImageManager")(((h=function(e){function r(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this)._trackedImageObjects=new Map,t._referenceImageAssets=new Array,t._trackingImageInfo=new Map,t._previousTrackingImageInfo=new Map,t._eventTarget=new _(T.DEFAULT),t._isSuppored=!1,t}t(r,e);var n=r.prototype;return n.registerReferenceImageAsset=function(e,t,a){this._referenceImageAssets.push(e),this._trackedImageObjects.set(t,a)},r.onTrackedImagesChanged=function(e,t){r._trackedEventTarget.on(T.DEFAULT,e,t)},r.offTrackedImagesChanged=function(e,t){r._trackedEventTarget.off(T.DEFAULT,e,t)},n.onStart=function(){if(c.isXR&&(this._isSuppored=xr.entry.getXRBoolConfig(u.IMAGE_TRACKING_SUPPORT_STATUS),console.log("[XRTrackedImageManager] onStart.spt."+this._isSuppored+" | "+this._referenceImageAssets.length),this._referenceImageAssets.length>0)){xr.entry.setXRIntConfig(u.IMAGE_TRACKING,1);for(var e,t=a(this._referenceImageAssets);!(e=t()).done;){var r=e.value;xr.entry.setXRStringConfig(u.IMAGE_TRACKING_CANDIDATEIMAGE,r)}}},n.onStop=function(){this._isSuppored&&(xr.entry.setXRIntConfig(u.IMAGE_TRACKING,0),console.log("[XRTrackedImageManager] onStop"))},n.getFeatureType=function(){return d.IMAGE_TRACKING},n.onRetrieveChanges=function(e){if(c.isXR&&this._isSuppored){this._trackingImageInfo.clear();var t=xr.entry.getXRStringConfig(u.IMAGE_TRACKING_DATA);if(t.length>0){for(var n,s=t.split("&"),i=a(s);!(n=i()).done;){var o=n.value,g=new m(o);this._trackingImageInfo.set(g.name,g)}this._eventTarget.reset();for(var d,p=a(this._previousTrackingImageInfo);!(d=p()).done;){var f=d.value,h=f[0],I=f[1];this._trackingImageInfo.has(h)||this._eventTarget.removed.push(I)}for(var v,_=a(this._trackingImageInfo);!(v=_()).done;){var l=v.value,k=l[0],A=l[1];this._previousTrackingImageInfo.has(k)?this._eventTarget.updated.push(A):this._eventTarget.added.push(A)}this._previousTrackingImageInfo.clear();for(var R,E=a(this._trackingImageInfo);!(R=E()).done;){var y=R.value,F=y[0],M=y[1];this._previousTrackingImageInfo.set(F,M)}r._trackedEventTarget.emit(T.DEFAULT,this._eventTarget)}}},r}(p))._trackedEventTarget=new o,f=h))||f)||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/xr-tracked-image-object.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-tracked-image-manager.ts"],(function(e){var a,t,n,r,i,o,c,s,d;return{setters:[function(e){a=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,c=e._decorator,s=e.Component},function(e){d=e.XRTrackedImageManager}],execute:function(){var h,m,u;o._RF.push({},"4d71atN6epDg5H/7+tY3zxB","xr-tracked-image-object",void 0);var l=c.ccclass,g=c.menu,f=c.property;e("XRTrackedImageObject",l("cc.spaces.XRTrackedImageObject")(h=g("hidden:XR/Spaces/XRTrackedImageObject")((u=a((m=function(e){function a(){for(var a,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return a=e.call.apply(e,[this].concat(i))||this,n(a,"dismissWhenLostTracking",u,r(a)),a.trackedImageName=null,a.trackedImageInfo=null,a}t(a,e);var o=a.prototype;return o.start=function(){this.changeChildrenActive(!1)},o.updateTrackedImageInfo=function(e){if(this.trackedImageName){for(var a,t=i(e.added);!(a=t()).done;){var n=a.value;n.name===this.trackedImageName&&this.syncTransform(n)}for(var r,o=i(e.updated);!(r=o()).done;){var c=r.value;c.name===this.trackedImageName&&this.syncTransform(c)}if(this.dismissWhenLostTracking)for(var s,d=i(e.removed);!(s=d()).done;){s.value.name===this.trackedImageName&&this.changeChildrenActive(!1)}}},o.syncTransform=function(e){this.trackedImageInfo=e,this.node.worldPosition=e.position,this.node.worldRotation=e.quaternion,this.node.active=!0,this.changeChildrenActive(!0)},o.onEnable=function(){d.onTrackedImagesChanged(this.updateTrackedImageInfo,this)},o.onDisable=function(){d.offTrackedImagesChanged(this.updateTrackedImageInfo,this)},o.changeChildrenActive=function(e){for(var a,t=i(this.node.children);!(a=t()).done;){a.value.active=e}},a}(s)).prototype,"dismissWhenLostTracking",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=m))||h)||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/xr-transition.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var n,t,e,r,s,a,o,l,c,p,u,d,h,_,f,y;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,r=i.assertThisInitialized},function(i){s=i.cclegacy,a=i._decorator,o=i.ccenum,l=i.Node,c=i.Animation,p=i.Prefab,u=i.Mask,d=i.find,h=i.instantiate,_=i.director,f=i.SceneAsset,y=i.Component}],execute:function(){var A,T,g,I,b,E,k,v,L,N,S,m,P,D,C,R,B,w,O;s._RF.push({},"81658aEZYdJ4pPeQeBlkylj","xr-transition",void 0);var G=a.ccclass,z=a.property,H=a.menu,M=a.help,F=i("XRMaskType",function(i){return i[i.GRAPHICS_RECT=0]="GRAPHICS_RECT",i[i.GRAPHICS_ELLIPSE=1]="GRAPHICS_ELLIPSE",i}({})),K=i("SlideType",function(i){return i[i.SLIDE_IN_BOTTOM=0]="SLIDE_IN_BOTTOM",i[i.SLIDE_IN_TOP=1]="SLIDE_IN_TOP",i[i.SLIDE_IN_LEFT=2]="SLIDE_IN_LEFT",i[i.SLIDE_IN_RIGHT=3]="SLIDE_IN_RIGHT",i}({})),X=i("TransitionType",function(i){return i[i.LOADING=0]="LOADING",i[i.BLINK=1]="BLINK",i[i.SLIDE=2]="SLIDE",i}({}));o(X);i("XRTransition",(A=G("XRTransition"),T=M("i18n:cc.ARFaceTracking"),g=H("hidden:XR/Transition/XRTransition"),I=z({type:l}),b=z({type:c}),E=z({type:c}),k=z({type:c}),v=z({type:l}),L=z({type:p}),N=z({type:p}),A(S=T(S=g((P=n((m=function(i){function n(){for(var n,t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return n=i.call.apply(i,[this].concat(s))||this,e(n,"control",P,r(n)),e(n,"loadingAni",D,r(n)),e(n,"blinkAni",C,r(n)),e(n,"slinkAni",R,r(n)),e(n,"progressNode",B,r(n)),e(n,"transitionEndRootPrefab",w,r(n)),e(n,"transitionEndPrefab",O,r(n)),n._transitionType=X.LOADING,n._maskType=F.GRAPHICS_ELLIPSE,n._slideType=K.SLIDE_IN_BOTTOM,n._progress=null,n}t(n,i);var s=n.prototype;return s._setBlinkMaskType=function(i){this._maskType=i,this.blinkAni&&(this.blinkAni.node.getComponent(u).type=i)},s._setslideType=function(i){this._slideType=i,this.slinkAni&&(this.slinkAni.defaultClip=this.slinkAni.clips[i])},s._playAni=function(i){var n,t;switch(this._transitionType=i,this._transitionType){case X.LOADING:if(this.blinkAni&&(this.blinkAni.node.active=!1),this.slinkAni&&(this.slinkAni.node.active=!1),this.progressNode){var e,r;this.progressNode.active=!0;var s=null==(e=this.progressNode.getChildByName("bg"))||null==(r=e._uiProps)?void 0:r.uiTransformComp;s&&(this._progress=s)}this.loadingAni&&(this.loadingAni.play("loadingAppearAni"),this.loadingAni.on(c.EventType.FINISHED,this._loadingBounceAni,this));break;case X.BLINK:this.loadingAni&&(this.loadingAni.node.active=!1),this.slinkAni&&(this.slinkAni.node.active=!1),null==(n=this.blinkAni)||n.play();break;case X.SLIDE:this.loadingAni&&(this.loadingAni.node.active=!1),this.blinkAni&&(this.blinkAni.node.active=!1),null==(t=this.slinkAni)||t.play()}},s._loadingBounceAni=function(){var i;null==(i=this.loadingAni)||i.play("loadingBounceAni")},s.transitionStart=function(i,n,t){this._setBlinkMaskType(i),this._setslideType(t),this.control&&(this.control.active=!0),this._playAni(n)},s.transitionProgress=function(i){var n;switch(this._transitionType){case X.LOADING:if(null!=(n=this.progressNode)&&n._uiProps.uiTransformComp&&this._progress){var t=Math.round(this.progressNode._uiProps.uiTransformComp.width*i);this._progress.width=this._progress.width>t?this._progress.width:t}break;case X.BLINK:case X.SLIDE:}},s._createTransitionEnd=function(i,n,t){var e=d("Canvas"),r=null;if(e){if(i){var s=h(i);e.addChild(s),r=s.getChildByName(t)}}else if(n){var a,o=h(n);null==(a=_.getScene())||a.addChild(o),r=o.getChildByPath("TransitionEnd/"+t)}return r},s._playTransitionEnd=function(i,n,t,e,r){switch(i){case X.LOADING:var s=this._createTransitionEnd(n,t,"loadingEnd");s&&(s.active=!0);break;case X.BLINK:var a=this._createTransitionEnd(n,t,"blinkEnd");if(a){a.active=!0;var o=a.getComponent(u);o&&(o.type=Number(e))}break;case X.SLIDE:var l=this._createTransitionEnd(n,t,"slideEnd");if(l){l.active=!0;var p=l.getComponent(c);p&&(p.defaultClip=p.clips[r])}}},s.transitionEnd=function(i){var n=this._transitionType,t=this._maskType,e=this._slideType,r=this.transitionEndPrefab,s=this.transitionEndRootPrefab,a=this;i instanceof f?_.runScene(i,(function(){}),(function(){a._playTransitionEnd(n,r,s,t,e)})):_.loadScene(i,(function(){a._playTransitionEnd(n,r,s,t,e)}))},n}(y)).prototype,"control",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=n(m.prototype,"loadingAni",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(m.prototype,"blinkAni",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=n(m.prototype,"slinkAni",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(m.prototype,"progressNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(m.prototype,"transitionEndRootPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(m.prototype,"transitionEndPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=m))||S)||S)||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/xr-video-caption.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-video-player.ts"],(function(e){var t,r,i,o,n,a,s,l,c,p,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.createClass},function(e){a=e.cclegacy,s=e._decorator,l=e.ccenum,c=e.Asset,p=e.assetManager,u=e.Component},function(e){f=e.XRVideoPlayer}],execute:function(){var d,y,h,m,g,v,_,R,L,T,C,b;a._RF.push({},"e9814K8BT9CQ7FARXfYxTeq","xr-video-caption",void 0);var S=s.ccclass,x=s.property,F=s.menu,P=e("CaptionSourceType",function(e){return e[e.REMOTE=0]="REMOTE",e[e.LOCAL=1]="LOCAL",e}({}));l(P);e("XRVideoCaption",(d=S("cc.XRVideoCaption"),y=F("XR/Extra/XRVideoCaption"),h=x({displayName:"Caption Source Type",type:P,tooltip:"i18n:xr-plugin.videoplayer.captionSourceType"}),m=x({tooltip:"i18n:xr-plugin.videoplayer.captionRemoteURL",visible:function(){return this.resourceType===P.REMOTE}}),g=x({tooltip:"i18n:xr-plugin.videoplayer.captionFile",type:c,displayName:"Caption File",visible:function(){return this.resourceType===P.LOCAL}}),v=x({tooltip:"i18n:xr-plugin.videoplayer.videoPlayer",type:f}),d(_=y((L=t((R=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,i(t,"_resourceType",L,o(t)),i(t,"_remoteURL",T,o(t)),i(t,"_file",C,o(t)),i(t,"videoPlayer",b,o(t)),t}r(t,e);var a=t.prototype;return a.start=function(){this.resourceType===P.LOCAL?this.loadLocalFile():this.loadRemoteFile()},a.loadLocalFile=function(){if(this._file){var e=this._file._nativeAsset;this.asyncParseContent(e)}},a.loadRemoteFile=function(){var e=this;this._remoteURL.length>0&&(p.downloader.register(".srt",(function(e,t,r){p.downloader.downloadFile(e,{priority:0,xhrResponseType:"arraybuffer"},(function(e,t){console.log("download file progress : "+e+"/"+t)}),r)})),p.parser.register(".srt",(function(e,t,r){r(null,e)})),p.loadRemote(this.remoteURL,(function(t,r){if(t)console.log("loadRemote srt failed !!!"+t.message);else if("[object ArrayBuffer]"===r._nativeAsset.toString()){var i=r._nativeAsset,o=String.fromCharCode.apply(null,Array.from(new Uint16Array(i)));e.asyncParseContent(o)}})))},a.asyncParseContent=function(e){var t=this;new Promise((function(r,i){var o=t.parseSubtitleContent(e);o.length>0?r&&r(o):i&&i(new Array)})).then((function(e){t.videoPlayer&&(t.videoPlayer.subtitleData=e)})).catch((function(e){console.error("promise reject : "+e)}))},a.parseSubtitleContent=function(e){for(var t=this.tryParse(e),r=[],i=0;i<t.length;i+=4){var o=this.doCorrectFormat(t[i+1].trim()),n=this.doCorrectFormat(t[i+2].trim()),a={id:t[i].trim(),startTime:o,startSeconds:this._timestampToSeconds(o),endTime:n,endSeconds:this._timestampToSeconds(n),text:t[i+3].trim()};r.push(a)}return r},a.tryParse=function(e){var t=(e=e.replace(/\r/g,"")).split(/(\d+)\n(\d{1,2}:\d{2}:\d{2},\d{1,3}) --> (\d{1,2}:\d{2}:\d{2},\d{1,3})/g);return t.shift(),t},a.doCorrectFormat=function(e){var t,r=e.replace(".",",").split(","),i=r[0],o=r[1];t=this._fixedStrDigit(3,o);var n=i.split(":"),a=n[0],s=n[1],l=n[2];return this._fixedStrDigit(2,a,!1)+":"+this._fixedStrDigit(2,s,!1)+":"+this._fixedStrDigit(2,l,!1)+","+t},a._fixedStrDigit=function(e,t,r){if(void 0===r&&(r=!0),t.length>e&&(t=t.slice(0,e)),t.length<e)if(r)for(var i=0;i<e;i++)t+="0";else for(var o=0;o<e;o++)t="0"+t;return t},a._timestampToSeconds=function(e){var t=e.split(","),r=t[0],i=t[1],o=parseInt(i),n=r.split(":").map((function(e){return parseInt(e)})),a=n[0],s=n[1];return.001*o+n[2]+60*s+3600*a},n(t,[{key:"resourceType",get:function(){return this._resourceType},set:function(e){this._resourceType!==e&&(this._resourceType=e)}},{key:"remoteURL",get:function(){return this._remoteURL},set:function(e){this._remoteURL!==e&&(this._remoteURL=e,this.loadRemoteFile())}},{key:"captionFile",get:function(){return this._file},set:function(e){this._file!==e&&(this._file=e,this.loadLocalFile())}}]),t}(u)).prototype,"_resourceType",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return P.LOCAL}}),T=t(R.prototype,"_remoteURL",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(R.prototype,"resourceType",[h],Object.getOwnPropertyDescriptor(R.prototype,"resourceType"),R.prototype),t(R.prototype,"remoteURL",[m],Object.getOwnPropertyDescriptor(R.prototype,"remoteURL"),R.prototype),C=t(R.prototype,"_file",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(R.prototype,"videoPlayer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=R))||_)||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/xr-video-controller.ts",["./rollupPluginModLoBabelHelpers.js","cc","./hmd-ctrl.ts","./xr-controller.ts","./ray-interactor.ts","./xr-gaze-interactor.ts","./xr-video-player.ts"],(function(e){var t,i,l,n,o,a,r,s,h,u,d,p,y,P,_,v,c,C,m,T,S,E,g,B,R,b,f,I,L,D,H,k;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy,r=e._decorator,s=e.Button,h=e.ProgressBar,u=e.find,d=e.Slider,p=e.Label,y=e.RichText,P=e.EventHandler,_=e.XrUIPressEventType,v=e.Input,c=e.Sprite,C=e.Vec3,m=e.PhysicsSystem,T=e.PhysicsGroup,S=e.VideoPlayer,E=e.Component},function(e){g=e.HMDCtrl},function(e){B=e.XRController,R=e.XrInputDeviceType,b=e.XrEventTypeRight,f=e.XrEventActionType,I=e.XrEventTypeLeft},function(e){L=e.RayInteractor},function(e){D=e.XRGazeInteractor},function(e){H=e.XRVideoPlayer,k=e.VideoShape}],execute:function(){var x,V,N,X,U,O,w,F,A,K,z,W,M,G,Q,Y,j,J,Z,q,$,ee,te,ie,le,ne,oe,ae;a._RF.push({},"c5a8f6OYxdEeI02dgLZW+wJ","xr-video-controller",void 0);var re=r.ccclass,se=r.property,he=r.menu;e("XRVideoController",(x=re("cc.XRVideoController"),V=he("XR/Extra/XRVideoController"),N=se({type:H,tooltip:"i18n:xr-plugin.XRVideoController.videoPlayer"}),X=se({type:g,tooltip:"i18n:xr-plugin.XRVideoController.hmdControl"}),U=se({type:B,tooltip:"i18n:xr-plugin.XRVideoController.leftHandController"}),O=se({type:B,tooltip:"i18n:xr-plugin.XRVideoController.rightHandController"}),w=se({type:s,tooltip:"i18n:xr-plugin.XRVideoController.playPause"}),F=se({type:h,tooltip:"i18n:xr-plugin.XRVideoController.progressBar"}),A=se({type:s,tooltip:"i18n:xr-plugin.XRVideoController.fastForward"}),K=se({type:s,tooltip:"i18n:xr-plugin.XRVideoController.rewind"}),z=se({type:s,tooltip:"i18n:xr-plugin.XRVideoController.videoShapeUI"}),W=se({type:s,tooltip:"i18n:xr-plugin.XRVideoController.playerBackRateBar"}),M=se({type:s,tooltip:"i18n:xr-plugin.XRVideoController.volumeUI"}),G=se({serializable:!0}),x(Q=V((j=t((Y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,l(t,"videoPlayer",j,n(t)),l(t,"hmdControl",J,n(t)),l(t,"leftHandController",Z,n(t)),l(t,"rightHandController",q,n(t)),l(t,"playPause",$,n(t)),l(t,"progressBar",ee,n(t)),l(t,"fastForward",te,n(t)),l(t,"rewind",ie,n(t)),l(t,"videoShapeUI",le,n(t)),l(t,"playerBackRateBar",ne,n(t)),l(t,"volumeUI",oe,n(t)),l(t,"autoHideWhenNoOperation",ae,n(t)),t.PANEL_SHOW_TIME=3,t._pauseButton=null,t._seekToSlider=null,t._volumeSlider=null,t._volumeValueLabel=null,t._playedTimeLabel=null,t._totalTimeLabel=null,t._volumeControlPanel=null,t._subtitleEnableButton=null,t._subtitleDisableButton=null,t._exitButton=null,t._playSpeedControlPanel=null,t._playShapeControlPanel=null,t._volumePanelLifeTime=0,t._playSpeedPanelLifeTime=t.PANEL_SHOW_TIME,t._playShapePanelLifeTime=t.PANEL_SHOW_TIME,t._subtitlePanoRichText=null,t._subtitlePlaneRichText=null,t._videoFileName=null,t._controllerPanelLifeTime=5,t._leftControllerRayInteractor=null,t._rightControllerRayInteractor=null,t._gazeControllerRayInteractor=null,t}i(t,e);var a=t.prototype;return a.onLoad=function(){if(!this.hmdControl){var e=u("XR Agent"),t=null==e?void 0:e.getComponentsInChildren(g);t&&(this.hmdControl=t[0]);var i=null==e?void 0:e.getComponentsInChildren(B);if(i)for(var l,n=o(i);!(l=n()).done;){var a=l.value;a.inputDevice===R.Left_Hand?this.leftHandController=a:a.inputDevice===R.Right_Hand&&(this.rightHandController=a)}}},a.start=function(){var e,t,i,l,n,o,a,r,h,c,C,m,T,S,E,g,B,R,b,f,I,H,k,x,V,N,X,U;if(this._pauseButton=null==(e=this.node.getChildByName("Pause"))?void 0:e.getComponent(s),this._seekToSlider=null==(t=this.node.getChildByName("SeekSlider"))?void 0:t.getComponent(d),this._playedTimeLabel=null==(i=this.node.getChildByName("PlayedTime"))?void 0:i.getComponent(p),this._totalTimeLabel=null==(l=this.node.getChildByName("TotalTime"))?void 0:l.getComponent(p),this._volumeControlPanel=this.node.getChildByName("VolumeControlPanel"),this._volumeSlider=null==(n=this._volumeControlPanel)||null==(o=n.getChildByName("VolumeSlider"))?void 0:o.getComponent(d),this._volumeValueLabel=null==(a=this._volumeControlPanel)||null==(r=a.getChildByName("VolumeValue"))?void 0:r.getComponent(p),this._subtitleEnableButton=null==(h=this.node.getChildByName("SubtitleDisabled"))?void 0:h.getComponent(s),this._subtitleDisableButton=null==(c=this.node.getChildByName("SubtitleEnabled"))?void 0:c.getComponent(s),this._exitButton=null==(C=this.node.getChildByName("Exit"))?void 0:C.getComponent(s),this._playSpeedControlPanel=this.node.getChildByName("PlaySpeedControlPanel"),this.videoPlayer&&this.videoPlayer.isSupport3DMode()?(this._playShapeControlPanel=this.node.getChildByName("PlayShapeControlPanel-3D"),this._playShapeControlPanel||(this._playShapeControlPanel=this.node.getChildByName("PlayShapeControlPanel"))):this._playShapeControlPanel=this.node.getChildByName("PlayShapeControlPanel"),this._subtitlePanoRichText=null==(m=this.node.getChildByName("SubtitleDisplayPano"))?void 0:m.getComponent(y),this._subtitlePanoRichText?this._subtitlePanoRichText.string="":console.warn("Not find SubtitleDisplayPano node !!!"),this.videoPlayer){var O,w=this.videoPlayer.content();this._subtitlePlaneRichText=null==w||null==(O=w.getChildByName("SubtitleDisplayPlane"))?void 0:O.getComponent(y),this._subtitlePlaneRichText?this._subtitlePlaneRichText.string="":console.warn("Not find SubtitleDisplayPlane node !!!")}this._videoFileName=null==(T=this.node.getChildByName("VideoClipName"))?void 0:T.getComponent(p),this._videoFileName&&(this._videoFileName.string="");var F,A,K,z,W,M,G,Q,Y,j,J,Z,q,$,ee,te,ie,le,ne,oe,ae,re,se,he,ue,de,pe,ye,Pe,_e,ve,ce,Ce,me,Te,Se,Ee=new P;(Ee.target=this.node,Ee.component="cc.XRVideoController",Ee.handler="onVideoPlayerCallback",Ee.customEventData="",null==(S=this.videoPlayer)||S.videoPlayerEvent.push(Ee),null==(E=this.fastForward)||E.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(g=this.playPause)||g.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(B=this.rewind)||B.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(R=this.volumeUI)||R.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(b=this.videoShapeUI)||b.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(f=this.playerBackRateBar)||f.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(I=this._pauseButton)||I.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(H=this._exitButton)||H.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(k=this._subtitleEnableButton)||k.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(x=this._subtitleDisableButton)||x.node.on(s.EventType.CLICK,this.onButtonClick,this),null==(V=this._seekToSlider)||V.node.on("slide",this.sliderSeekToCallback,this),null==(N=this._volumeSlider)||N.node.on("slide",this.sliderVolumeCallback,this),null==(X=this._volumeSlider)||X.node.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(U=this._volumeSlider)||U.node.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),this._playSpeedControlPanel)&&(null==(F=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_05"))||F.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(A=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_05"))||A.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(K=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_05"))||K.on(s.EventType.CLICK,this.onButtonClick,this),null==(z=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_10"))||z.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(W=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_10"))||W.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(M=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_10"))||M.on(s.EventType.CLICK,this.onButtonClick,this),null==(G=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_15"))||G.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(Q=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_15"))||Q.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(Y=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_15"))||Y.on(s.EventType.CLICK,this.onButtonClick,this),null==(j=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_20"))||j.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(J=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_20"))||J.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(Z=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_20"))||Z.on(s.EventType.CLICK,this.onButtonClick,this),null==(q=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_25"))||q.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==($=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_25"))||$.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(ee=this._playSpeedControlPanel.getChildByPath("Container/PlaySpeed_25"))||ee.on(s.EventType.CLICK,this.onButtonClick,this));this._playShapeControlPanel&&(null==(te=this._playShapeControlPanel.getChildByPath("Container/PlayShape_2D"))||te.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(ie=this._playShapeControlPanel.getChildByPath("Container/PlayShape_2D"))||ie.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(le=this._playShapeControlPanel.getChildByPath("Container/PlayShape_2D"))||le.on(s.EventType.CLICK,this.onButtonClick,this),null==(ne=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano180"))||ne.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(oe=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano180"))||oe.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(ae=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano180"))||ae.on(s.EventType.CLICK,this.onButtonClick,this),null==(re=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano360"))||re.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(se=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano360"))||se.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(he=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano360"))||he.on(s.EventType.CLICK,this.onButtonClick,this),null==(ue=this._playShapeControlPanel.getChildByPath("Container/PlayShape_3DLR"))||ue.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(de=this._playShapeControlPanel.getChildByPath("Container/PlayShape_3DLR"))||de.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(pe=this._playShapeControlPanel.getChildByPath("Container/PlayShape_3DLR"))||pe.on(s.EventType.CLICK,this.onButtonClick,this),null==(ye=this._playShapeControlPanel.getChildByPath("Container/PlayShape_3DTB"))||ye.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(Pe=this._playShapeControlPanel.getChildByPath("Container/PlayShape_3DTB"))||Pe.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(_e=this._playShapeControlPanel.getChildByPath("Container/PlayShape_3DTB"))||_e.on(s.EventType.CLICK,this.onButtonClick,this),null==(ve=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano3603DLR"))||ve.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(ce=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano3603DLR"))||ce.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(Ce=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano3603DLR"))||Ce.on(s.EventType.CLICK,this.onButtonClick,this),null==(me=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano3603DTB"))||me.on(_.XRUI_HOVER_ENTERED,this.onHoverEnter,this),null==(Te=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano3603DTB"))||Te.on(_.XRUI_HOVER_EXITED,this.onHoverExit,this),null==(Se=this._playShapeControlPanel.getChildByPath("Container/PlayShape_Pano3603DTB"))||Se.on(s.EventType.CLICK,this.onButtonClick,this));this.refreshPanelUIStatus(),this.leftHandController&&(this.leftHandController.node.on(v.EventType.HANDLE_INPUT,this.onControllerEventCallback,this),this._leftControllerRayInteractor=this.leftHandController.node.getComponent(L)),this.rightHandController&&(this.rightHandController.node.on(v.EventType.HANDLE_INPUT,this.onControllerEventCallback,this),this._rightControllerRayInteractor=this.rightHandController.node.getComponent(L));var ge=u("Gaze Pointer Interactor");ge&&(this._gazeControllerRayInteractor=ge.getComponent(D))},a.onControllerEventCallback=function(e){e.inputSourceType;var t=e.eventType,i=(e.touchEventActionType,e.keyEventActionType);switch(t){case b.BUTTON_A:case b.BUTTON_B:case I.BUTTON_X:case I.BUTTON_Y:case I.TRIGGER_LEFT:case b.TRIGGER_RIGHT:case I.GRIP_LEFT:case b.GRIP_RIGHT:case I.THUMBSTICK_LEFT:case b.THUMBSTICK_RIGHT:break;case I.TRIGGER_BTN_LEFT:case b.TRIGGER_BTN_RIGHT:if(i===f.KEY_UP&&!this.node.active){if(this.hmdControl){var l=this.hmdControl.node.worldPosition,n=this.hmdControl.node.forward.normalize();this.node.worldPosition=l.clone().add(n.clone().multiplyScalar(3.5)).add3f(0,.618,0),this.node.lookAt(l.clone().add(n.clone().multiplyScalar(10)))}this.node.active=!0,this.changeButtonState(!0),this._controllerPanelLifeTime=5}}},a.onHoverEnter=function(e){var t,i=e.currentTarget;i&&i===(null==(t=this._volumeSlider)?void 0:t.node)&&(this._volumePanelLifeTime=0),i&&i.name.startsWith("PlaySpeed_")&&(this._playSpeedPanelLifeTime-=this.PANEL_SHOW_TIME),i&&i.name.startsWith("PlayShape_")&&(this._playShapePanelLifeTime-=this.PANEL_SHOW_TIME)},a.onHoverExit=function(e){var t,i=e.currentTarget;i&&i===(null==(t=this._volumeSlider)?void 0:t.node)&&(this._volumePanelLifeTime=this.PANEL_SHOW_TIME,this._controllerPanelLifeTime=5),i&&i.name.startsWith("PlaySpeed_")&&(this._playSpeedPanelLifeTime+=this.PANEL_SHOW_TIME,this._controllerPanelLifeTime=5),i&&i.name.startsWith("PlayShape_")&&(this._playShapePanelLifeTime+=this.PANEL_SHOW_TIME,this._controllerPanelLifeTime=5)},a.closePlaySpeedControlPanel=function(){this._playSpeedControlPanel&&(this._playSpeedControlPanel.active=!1)},a.closePlayShapeControlPanel=function(){this._playShapeControlPanel&&(this._playShapeControlPanel.active=!1)},a.closeVolumeControlPanel=function(){this._volumeControlPanel&&(this._volumeControlPanel.active=!1)},a.sliderSeekToCallback=function(e){this.videoPlayer&&(this.videoPlayer.currentTime=e.progress*this.videoPlayer.duration+.001,this._playedTimeLabel&&(this._playedTimeLabel.string=this.formatSeconds(this.videoPlayer.currentTime)),this._totalTimeLabel&&(this._totalTimeLabel.string=this.formatSeconds(this.videoPlayer.duration))),this.progressBar&&(this.progressBar.progress=e.progress);var t=e.node.getComponent(c);t&&(t.fillRange=e.progress)},a.sliderVolumeCallback=function(e){this.videoPlayer&&(this.videoPlayer.mute&&0!==e.progress&&(this.videoPlayer.mute=!1),this.videoPlayer.volume=e.progress),this._volumeValueLabel&&this.videoPlayer&&(this._volumeValueLabel.string=(100*this.videoPlayer.volume).toFixed());var t=e.node.getComponent(c);t&&(t.fillRange=e.progress)},a.onButtonClick=function(e){var t,i,l,n,o,a,r,s,h,u,d,y,P,_;e.uuid===(null==(t=this.playPause)?void 0:t.uuid)&&(null==(d=this.videoPlayer)||d.play());e.uuid===(null==(i=this._pauseButton)?void 0:i.uuid)&&(null==(y=this.videoPlayer)||y.pause());if((e.uuid===(null==(l=this.fastForward)?void 0:l.uuid)&&this.videoPlayer&&(this.videoPlayer.currentTime+=5,this.syncPlayProgress()),e.uuid===(null==(n=this.rewind)?void 0:n.uuid)&&this.videoPlayer&&(this.videoPlayer.currentTime-=5,this.syncPlayProgress()),e.uuid===(null==(o=this.volumeUI)?void 0:o.uuid))&&(this._volumeControlPanel&&(this._volumeControlPanel.active=!this._volumeControlPanel.active),null!=(P=this._volumeControlPanel)&&P.active&&(this._volumePanelLifeTime=this.PANEL_SHOW_TIME,this._volumeSlider))){this.videoPlayer&&(this._volumeSlider.progress=this.videoPlayer.volume,this._volumeValueLabel&&(this._volumeValueLabel.string=(100*this.videoPlayer.volume).toFixed()));var v=this._volumeSlider.node.getComponent(c);v&&(v.fillRange=this._volumeSlider.progress)}e.uuid===(null==(a=this._exitButton)?void 0:a.uuid)&&(null==(_=this.videoPlayer)||_.pause(),this.node.parent&&(this.node.parent.active=!1));if(e.uuid===(null==(r=this.playerBackRateBar)?void 0:r.uuid)&&this._playSpeedControlPanel&&(this._playSpeedControlPanel.active=!this._playSpeedControlPanel.active,this._playSpeedControlPanel.active&&(this._playSpeedPanelLifeTime=this.PANEL_SHOW_TIME)),e.uuid===(null==(s=this.videoShapeUI)?void 0:s.uuid)&&this._playShapeControlPanel&&(this._playShapeControlPanel.active=!this._playShapeControlPanel.active,this._playShapeControlPanel.active&&(this._playShapePanelLifeTime=this.PANEL_SHOW_TIME)),e.node.name.startsWith("PlaySpeed_")){var m,T,S=parseInt(e.node.name.split("_")[1]);this.videoPlayer&&(this.videoPlayer.playbackRate=.1*S);var E,g=null==(m=this.playerBackRateBar)||null==(T=m.node.getChildByName("Label"))?void 0:T.getComponent(p);if(g)g.string=(null==(E=this.videoPlayer)?void 0:E.playbackRate)+"X"}if(e.node.name.startsWith("PlayShape_")){var B,R,b=e.node.name.split("_")[1],f=new C;"2D"===b?this.videoPlayer&&(this.videoPlayer.shape=k.Quad):"Pano180"===b?(f.y=.618,this.videoPlayer&&(this.videoPlayer.shape=k.Pano180)):"Pano360"===b?(f.y=.618,this.videoPlayer&&(this.videoPlayer.shape=k.Pano360)):"3DLR"===b?this.videoPlayer&&(this.videoPlayer.shape=k.Quad_3D_LR):"3DTB"===b?this.videoPlayer&&(this.videoPlayer.shape=k.Quad_3D_TB):"Pano3603DLR"===b?(f.y=.618,this.videoPlayer&&(this.videoPlayer.shape=k.Pano360_3D_LR)):"Pano3603DTB"===b&&(f.y=.618,this.videoPlayer&&(this.videoPlayer.shape=k.Pano360_3D_TB)),this.node.setPosition(f);var I=null==(B=this.videoShapeUI)||null==(R=B.node.getChildByName("Label"))?void 0:R.getComponent(p);I&&this.videoPlayer&&(I.string=this.getVideoShapeText(this.videoPlayer.shape))}e.uuid===(null==(h=this._subtitleEnableButton)?void 0:h.uuid)&&(this.changeSubtitleActiveStatus(!0),this._subtitleEnableButton.node.active=!1,this._subtitleDisableButton&&(this._subtitleDisableButton.node.active=!0)),e.uuid===(null==(u=this._subtitleDisableButton)?void 0:u.uuid)&&(this.changeSubtitleActiveStatus(!1),this._subtitleEnableButton&&(this._subtitleEnableButton.node.active=!0),this._subtitleDisableButton.node.active=!1)},a.syncPlayProgress=function(){if(this.videoPlayer){var e;this._playedTimeLabel&&(this._playedTimeLabel.string=this.formatSeconds(this.videoPlayer.currentTime)),this._totalTimeLabel&&(this._totalTimeLabel.string=this.formatSeconds(this.videoPlayer.duration));var t=this.videoPlayer.currentTime/this.videoPlayer.duration;this._seekToSlider&&(this._seekToSlider.progress=t);var i=null==(e=this._seekToSlider)?void 0:e.node.getComponent(c);i&&(i.fillRange=t)}},a.update=function(e){this.videoPlayer&&this.videoPlayer.isPlaying&&(this.syncPlayProgress(),this.updateSubtitle()),this.videoPlayer&&this._videoFileName&&0===this._videoFileName.string.length&&(this._videoFileName.string=this.videoPlayer.getVideoName());var t=!1;if((this._playShapePanelLifeTime>0&&(this._playShapePanelLifeTime-=e,this._playShapePanelLifeTime<=0?this.closePlayShapeControlPanel():t=!0),this._playSpeedPanelLifeTime>0&&(this._playSpeedPanelLifeTime-=e,this._playSpeedPanelLifeTime<=0?this.closePlaySpeedControlPanel():t=!0),this._volumePanelLifeTime>0&&(this._volumePanelLifeTime-=e,this._volumePanelLifeTime<=0?this.closeVolumeControlPanel():t=!0),this._leftControllerRayInteractor&&this.checkControllerRaycast(this._leftControllerRayInteractor),this._rightControllerRayInteractor&&this.checkControllerRaycast(this._rightControllerRayInteractor),this._gazeControllerRayInteractor&&this._gazeControllerRayInteractor.node.active&&this._controllerPanelLifeTime<=1)&&m.instance.raycast(this._gazeControllerRayInteractor.getRay(),4294967295,100,!0)){var i=m.instance.raycastResults;if(i)for(var l,n=o(i);!(l=n()).done;){"VideoControllerBackground"===l.value.collider.node.name&&(this._controllerPanelLifeTime=5)}}!t&&this._controllerPanelLifeTime>0&&this.autoHideWhenNoOperation&&(this._controllerPanelLifeTime-=e),this._controllerPanelLifeTime<=0&&this.node.active&&(this.node.active=!1,this._volumeControlPanel&&(this._volumeControlPanel.active=!1),this._playSpeedControlPanel&&(this._playSpeedControlPanel.active=!1),this._playShapeControlPanel&&(this._playShapeControlPanel.active=!1),this.changeButtonState(!1))},a.changeButtonState=function(e){this._pauseButton&&(this._pauseButton.interactable=e),this._subtitleEnableButton&&(this._subtitleEnableButton.interactable=e),this._subtitleDisableButton&&(this._subtitleDisableButton.interactable=e),this.playPause&&(this.playPause.interactable=e),this._exitButton&&(this._exitButton.interactable=e),this.fastForward&&(this.fastForward.interactable=e),this.rewind&&(this.rewind.interactable=e),this.videoShapeUI&&(this.videoShapeUI.interactable=e),this.playerBackRateBar&&(this.playerBackRateBar.interactable=e),this.volumeUI&&(this.volumeUI.interactable=e)},a.checkControllerRaycast=function(e){if((void 0===e&&(e=null),e)&&m.instance.lineStripCast(e.getLineWorldPositions(),T.DEFAULT,100,!0)){var t=m.instance.lineStripCastResults;if(t)for(var i,l=o(t);!(i=l()).done;){"VideoControllerBackground"===i.value.collider.node.name&&(this._controllerPanelLifeTime=5)}}},a.onVideoPlayerCallback=function(e,t){switch(t){case S.EventType.READY_TO_PLAY:this.playPause&&(this.playPause.node.active=!0,this.playPause.interactable=!0),this._pauseButton&&(this._pauseButton.node.active=!1);break;case S.EventType.PLAYING:this.playPause&&(this.playPause.node.active=!1),this._pauseButton&&(this._pauseButton.node.active=!0,this._pauseButton.interactable=!0);break;case S.EventType.PAUSED:case S.EventType.STOPPED:case S.EventType.COMPLETED:this.playPause&&(this.playPause.node.active=!0,this.playPause.interactable=!0),this._pauseButton&&(this._pauseButton.node.active=!1);break;case S.EventType.ERROR:console.log("onVideoPlayerCallback error !!!");break;case"shapetype-changed":this.changeSubtitleActiveStatus(!0)}},a.refreshPanelUIStatus=function(){var e,t,i,l,n,o;if(null!=(e=this._volumeControlPanel)&&e.active){if(this._volumeSlider){this.videoPlayer&&(this._volumeSlider.progress=this.videoPlayer.volume);var a=this._volumeSlider.node.getComponent(c);a&&(a.fillRange=this._volumeSlider.progress)}this._volumeValueLabel&&this.videoPlayer&&(this._volumeValueLabel.string=(100*this.videoPlayer.volume).toFixed())}null!=(t=this.videoPlayer)&&t.isPlaying?(this._pauseButton&&(this._pauseButton.node.active=!0),this.playPause&&(this.playPause.node.active=!1)):(this._pauseButton&&(this._pauseButton.node.active=!1),this.playPause&&(this.playPause.node.active=!0));var r=0;this.videoPlayer&&this.videoPlayer.duration>0&&(r=this.videoPlayer.currentTime/this.videoPlayer.duration),this._seekToSlider&&(this._seekToSlider.progress=r),this.progressBar&&(this.progressBar.progress=r),this.videoPlayer&&(this._playedTimeLabel&&(this._playedTimeLabel.string=this.formatSeconds(this.videoPlayer.currentTime)),this._totalTimeLabel&&(this._totalTimeLabel.string=this.formatSeconds(this.videoPlayer.duration)));var s,h=null==(i=this.playerBackRateBar)||null==(l=i.node.getChildByName("Label"))?void 0:l.getComponent(p);h&&(h.string=(null==(s=this.videoPlayer)?void 0:s.playbackRate)+"X");var u=null==(n=this.videoShapeUI)||null==(o=n.node.getChildByName("Label"))?void 0:o.getComponent(p);u&&this.videoPlayer&&(u.string=this.getVideoShapeText(this.videoPlayer.shape))},a.getVideoShapeText=function(e){var t="";switch(e){case k.Quad:t="2D";break;case k.Pano360:t="360° Pano";break;case k.Pano180:t="180° Pano";break;case k.Quad_3D_LR:t="3D LR";break;case k.Quad_3D_TB:t="3D TB";break;case k.Pano360_3D_LR:t="360° Pano\n3D LR";break;case k.Pano360_3D_TB:t="360° Pano\n3D TB"}return t},a.formatSeconds=function(e){if((e=Math.floor(e))>60){var t=Math.floor(e/60);if(t>60){var i=Math.floor(t/60),l=e-60*i*60;return"00:"+((t-=60*i)<10?"0"+t.toFixed():t.toFixed())+":"+(l<10?"0"+l.toFixed():l.toFixed())}var n=e-60*t;return"00:"+(t<10?"0"+t.toFixed():t.toFixed())+":"+(n<10?"0"+n.toFixed():n.toFixed())}return"00:00:"+(e<10?"0"+e.toFixed():e.toFixed())},a.changeSubtitleActiveStatus=function(e){if(this.videoPlayer)switch(this.videoPlayer.shape){case k.Quad:case k.Quad_3D_LR:case k.Quad_3D_TB:this._subtitlePlaneRichText&&(this._subtitlePlaneRichText.node.active=e),this._subtitlePanoRichText&&e&&(this._subtitlePanoRichText.node.active=!e);break;case k.Pano360_3D_LR:case k.Pano360_3D_TB:case k.Pano360:case k.Pano180:this._subtitlePanoRichText&&(this._subtitlePanoRichText.node.active=e),this._subtitlePlaneRichText&&e&&(this._subtitlePlaneRichText.node.active=!e)}},a.updateSubtitle=function(){if(this.videoPlayer){var e,t=null;switch(this.videoPlayer.shape){case k.Quad:case k.Quad_3D_LR:case k.Quad_3D_TB:t=this._subtitlePlaneRichText;break;case k.Pano360_3D_LR:case k.Pano360_3D_TB:case k.Pano360:case k.Pano180:t=this._subtitlePanoRichText}var i=this.videoPlayer.subtitleData.length>0;if(null!=(e=t)&&e.node.active)if(i){var l=this.videoPlayer.getSubtitleContent(this.videoPlayer.currentTime);t.string=l}else t.string=""}},t}(E)).prototype,"videoPlayer",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(Y.prototype,"hmdControl",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(Y.prototype,"leftHandController",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(Y.prototype,"rightHandController",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(Y.prototype,"playPause",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(Y.prototype,"progressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(Y.prototype,"fastForward",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(Y.prototype,"rewind",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(Y.prototype,"videoShapeUI",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(Y.prototype,"playerBackRateBar",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(Y.prototype,"volumeUI",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(Y.prototype,"autoHideWhenNoOperation",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=Y))||Q)||Q));a._RF.pop()}}}));

System.register("chunks:///_virtual/xr-video-player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./xr-interface.ts"],(function(e){var t,i,o,n,r,a,s,d,h,l,p,u,v,c,_,y,m,b,f,P,T,E,g,D,w,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,s=e._decorator,d=e.ccenum,h=e.VideoPlayer,l=e.VideoClip,p=e.EventHandler,u=e.MeshRenderer,v=e.VERSION,c=e.sys,_=e.native,y=e.game,m=e.Game,b=e.director,f=e.Texture2D,P=e.ImageAsset,T=e.Vec3,E=e.utils,g=e.gfx,D=e.Component},function(e){w=e.xrInterface,R=e.XRConfigKey}],execute:function(){var N,x,V,A,I,S,L,O,k,U,B,H,W,M,K,C,z,F,G,j,Q,X,Y,q,J,Z,$,ee,te,ie,oe,ne,re,ae,se,de,he,le,pe,ue,ve,ce;a._RF.push({},"db2ebM76HlGab8stwuZ1UK7","xr-video-player",void 0);var _e=s.ccclass,ye=s.property,me=s.menu,be=void 0!==globalThis.jsb&&void 0!==jsb.window?jsb.window:globalThis,fe=be.document,Pe=e("MediaPlayerInfo",function(e){return e[e.UNKNOWN=1]="UNKNOWN",e[e.STARTED_AS_NEXT=2]="STARTED_AS_NEXT",e[e.VIDEO_RENDERING_START=3]="VIDEO_RENDERING_START",e[e.VIDEO_TRACK_LAGGING=700]="VIDEO_TRACK_LAGGING",e[e.BUFFERING_START=701]="BUFFERING_START",e[e.BUFFERING_END=702]="BUFFERING_END",e[e.NETWORK_BANDWIDTH=703]="NETWORK_BANDWIDTH",e[e.BAD_INTERLEAVING=800]="BAD_INTERLEAVING",e[e.NOT_SEEKABLE=801]="NOT_SEEKABLE",e[e.METADATA_UPDATE=802]="METADATA_UPDATE",e[e.EXTERNAL_METADATA_UPDATE=803]="EXTERNAL_METADATA_UPDATE",e[e.AUDIO_NOT_PLAYING=804]="AUDIO_NOT_PLAYING",e[e.VIDEO_NOT_PLAYING=805]="VIDEO_NOT_PLAYING",e[e.TIMED_TEXT_ERROR=900]="TIMED_TEXT_ERROR",e[e.UNSUPPORTED_SUBTITLE=901]="UNSUPPORTED_SUBTITLE",e[e.SUBTITLE_TIMED_OUT=902]="SUBTITLE_TIMED_OUT",e}({}));d(Pe);var Te=e("VideoShape",function(e){return e[e.Quad=0]="Quad",e[e.Pano180=1]="Pano180",e[e.Pano360=2]="Pano360",e[e.Quad_3D_LR=3]="Quad_3D_LR",e[e.Quad_3D_TB=4]="Quad_3D_TB",e[e.Pano360_3D_LR=5]="Pano360_3D_LR",e[e.Pano360_3D_TB=6]="Pano360_3D_TB",e}({}));d(Te);var Ee=e("PanoramicEffectOption",function(e){return e[e.Performance=0]="Performance",e[e.Balanced=1]="Balanced",e[e.Quality=2]="Quality",e}({}));d(Ee);e("SubtitleData",(function(){this.id="",this.startTime="",this.startSeconds=0,this.endTime="",this.endSeconds=0,this.text=""}));var ge="xr-video-player:",De="xr-event",we=function(){function e(){this.headTag=De,this.eventId=1,this.videoPlayerHandleKey="",this.videoSourceType=0,this.videoSourceUrl="",this.videoWidth=0,this.videoHeight=0,this.videoTextureId=0,this.isLoop=0,this.seekToMsec=0,this.isPlaying=!1,this.duration=0,this.currentPosition=0,this.eventName="",this.onInfoWhat=Pe.UNKNOWN,this.volume=0,this.videoSourceSizeWidth=0,this.videoSourceSizeHeight=0,this.playbackSpeed=1}var t=e.prototype;return t.decodeData=function(e){var t=e.split("&");if(t[0]===De)switch(this.eventId=parseInt(t[1]),this.eventName=t[2],this.videoPlayerHandleKey=t[3],this.eventId){case 51:this.seekToMsec=parseInt(t[4]);break;case 50:this.isLoop=parseInt(t[4]);break;case 32:this.isPlaying=1===parseInt(t[4]);break;case 31:this.duration=.001*parseInt(t[4]);break;case 30:this.currentPosition=.001*parseInt(t[4]);break;case 105:this.onInfoWhat=parseInt(t[4]);break;case 104:this.videoSourceSizeWidth=parseInt(t[4]),this.videoSourceSizeHeight=parseInt(t[5])}},t.encodeData=function(){switch(this.eventId){case 2:return"xr-event&"+this.eventId+"&"+this.eventName+"&"+this.videoPlayerHandleKey+"&"+this.videoSourceType+"&"+this.videoSourceUrl+"&"+this.isLoop+"&"+this.volume+"&"+this.playbackSpeed;case 51:return"xr-event&"+this.eventId+"&"+this.eventName+"&"+this.videoPlayerHandleKey+"&"+this.seekToMsec.toFixed();case 50:return"xr-event&"+this.eventId+"&"+this.eventName+"&"+this.videoPlayerHandleKey+"&"+this.isLoop;case 52:return"xr-event&"+this.eventId+"&"+this.eventName+"&"+this.videoPlayerHandleKey+"&"+this.volume;case 53:return"xr-event&"+this.eventId+"&"+this.eventName+"&"+this.videoPlayerHandleKey+"&"+this.videoWidth+"&"+this.videoHeight+"&"+this.videoTextureId;case 54:return"xr-event&"+this.eventId+"&"+this.eventName+"&"+this.videoPlayerHandleKey+"&"+this.playbackSpeed;default:return"xr-event&"+this.eventId+"&"+this.eventName+"&"+this.videoPlayerHandleKey}},e}();e("XRVideoPlayer",(N=_e("cc.XRVideoPlayer"),x=me("XR/Extra/XRVideoPlayer"),V=ye({serializable:!0}),A=ye({serializable:!0}),I=ye({serializable:!0}),S=ye({serializable:!0}),L=ye({serializable:!0}),O=ye({serializable:!0}),k=ye({serializable:!0}),U=ye({serializable:!0}),B=ye({serializable:!0}),H=ye({serializable:!0}),W=ye({serializable:!0}),M=ye({displayName:"Source Type",type:h.ResourceType,tooltip:"i18n:xr-plugin.videoplayer.resourceType"}),K=ye({tooltip:"i18n:xr-plugin.videoplayer.remoteURL",visible:function(){return this.resourceType===h.ResourceType.REMOTE}}),C=ye({type:l,tooltip:"i18n:xr-plugin.videoplayer.clip",visible:function(){return this.resourceType===h.ResourceType.LOCAL}}),z=ye({tooltip:"i18n:xr-plugin.videoplayer.playOnAwake"}),F=ye({tooltip:"i18n:xr-plugin.videoplayer.playbackRate",slide:!0,range:[0,2.5,.5]}),G=ye({tooltip:"i18n:xr-plugin.videoplayer.volume",slide:!0,range:[0,1,.1]}),j=ye({tooltip:"i18n:xr-plugin.videoplayer.mute"}),Q=ye({tooltip:"i18n:xr-plugin.videoplayer.loop"}),X=ye({tooltip:"i18n:xr-plugin.videoplayer.keepAspectRatio"}),Y=ye({type:Te,tooltip:"i18n:xr-plugin.videoplayer.videoShape"}),q=ye({type:Ee,visible:function(){return!1}}),J=ye({type:[p],displayOrder:100,tooltip:"i18n:xr-plugin.videoplayer.videoPlayerEvent"}),Z=ye({type:u,displayName:"Content",tooltip:"i18n:xr-plugin.videoplayer.videoContent"}),N($=x(((ce=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"_loop",te,n(t)),o(t,"_playOnAwake",ie,n(t)),o(t,"_volume",oe,n(t)),o(t,"_mute",ne,n(t)),o(t,"_resourceType",re,n(t)),o(t,"_remoteURL",ae,n(t)),o(t,"_clip",se,n(t)),o(t,"_keepAspectRatio",de,n(t)),o(t,"_playbackRate",he,n(t)),o(t,"_videoShape",le,n(t)),o(t,"_panoramicEffectOption",pe,n(t)),o(t,"videoPlayerEvent",ue,n(t)),o(t,"renderer",ve,n(t)),t._webVideoEventList=new Map,t._webVideo=null,t._webVideoLoaded=!1,t._copyWebVideoTexture=!1,t._videoRegions=[],t._eventName=ge,t._eventUniqeueId=0,t._duration=0,t._currentTime=0,t._isPlayingCache=!1,t._isPlaying=!1,t._isReseted=!1,t._videoPlayerHandleKey=null,t._videoEventDataPosition=new we,t._videoEventDataForDecode=new we,t._videoTexture=null,t._refreshTime=Number.MAX_VALUE,t._autoPlayOnReady=!1,t._isPlayerPrepared=!1,t._meshQuad=null,t._meshPanoramic180=null,t._meshPanoramic360=null,t._videoDefaultThumbTexture=null,t._isCanSeekTo=!0,t._subtitleArrayData=[],t._lastSubtitleBeginIdx=0,t._isSupport3DVideo=!1,t}i(t,e);var a=t.prototype;return a.isSupport3DMode=function(){return this._isSupport3DVideo},a.getVideoName=function(){if(this.resourceType===h.ResourceType.LOCAL)return this.clip?this.clip.name:"";var e=this.remoteURL.split("/");return e?e[e.length-1]:""},a.getSubtitleContent=function(e){if(this._subtitleArrayData.length>0)for(var t=this._lastSubtitleBeginIdx;t<this._subtitleArrayData.length;t++)if(e>=this._subtitleArrayData[t].startSeconds&&e<=this._subtitleArrayData[t].endSeconds)return this._lastSubtitleBeginIdx=t,this._subtitleArrayData[t].text;return""},a.onLoad=function(){this._videoPlayerHandleKey="xr-vp-key-"+this.node.name+"-"+t.videoPlayerUniqueId,this._eventUniqeueId=t.videoPlayerUniqueId,this._eventName="xr-video-player:"+this._eventUniqeueId,t.videoPlayerUniqueId++,3===t.videoPlayerUniqueId&&console.error("Currently a maximum of 3 XRVideoPlayer components can be used at the same time !!!");var e=v.split("."),i=parseInt(e[0]),o=parseInt(e[1]),n=parseInt(e[2]);this._isSupport3DVideo=i>3||3===i&&o>7||3===i&&7===o&&n>2,console.log("CEV:"+i+"_"+o+"_"+n+"."+this._isSupport3DVideo)},a.start=function(){var e,t,i=this;if(this._videoEventDataPosition.eventId=30,this._videoEventDataPosition.eventName=this._eventName,this._videoPlayerHandleKey&&(this._videoEventDataPosition.videoPlayerHandleKey=this._videoPlayerHandleKey),this.renderer||(this.renderer=this.getComponent(u),this.renderer||console.error("Must has a valid MeshRenderer component!!!")),this._videoDefaultThumbTexture=null==(e=this.renderer)||null==(t=e.material)?void 0:t.getProperty("mainTexture"),this.onChangeShape(),c.isNative)_.jsbBridgeWrapper.addNativeEventListener(this._eventName,(function(e){if(i._videoEventDataForDecode.decodeData(e),100===i._videoEventDataForDecode.eventId)i.onReadyToPlay();else if(103===i._videoEventDataForDecode.eventId)i.onError();else if(101===i._videoEventDataForDecode.eventId)i.onCompleted();else if(102===i._videoEventDataForDecode.eventId)i.onSeekCompleted();else if(31===i._videoEventDataForDecode.eventId)i._duration=Math.floor(i._videoEventDataForDecode.duration);else if(32===i._videoEventDataForDecode.eventId)i._isPlaying=i._videoEventDataForDecode.isPlaying;else if(30===i._videoEventDataForDecode.eventId)i._currentTime=Math.floor(i._videoEventDataForDecode.currentPosition);else if(105===i._videoEventDataForDecode.eventId){if(i.onInfo(i._videoEventDataForDecode.onInfoWhat),i._videoEventDataForDecode.onInfoWhat===Pe.VIDEO_RENDERING_START){var t,o;if(console.log("video rendering start"),i._videoTexture)console.log("setProperty(mainTexture) to video..."),null==(t=i.renderer)||null==(o=t.material)||o.setProperty("mainTexture",i._videoTexture);i.onPlaying()}}else 104===i._videoEventDataForDecode.eventId&&i.createVideoTexture(i._videoEventDataForDecode.videoSourceSizeWidth,i._videoEventDataForDecode.videoSourceSizeHeight)})),this._isSupport3DVideo&&(w.setBoolConfig(R.EYE_RENDER_JS_CALLBACK,!0),w.setEyeRenderCallback(this.beforeRender,this.endRender,this));else if(c.isBrowser){var o="";this.resourceType===h.ResourceType.LOCAL?this.clip&&(o=this.clip.nativeUrl):o=this.remoteURL,this.createWebVideoPlayer(o),y.on(m.EVENT_HIDE,(function(){console.log("video will pause"),i._isPlayingCache=i._isPlaying,i._isPlaying&&i.pause()})),y.on(m.EVENT_SHOW,(function(){console.log("video will resume"),i._isPlayingCache&&i.play()}))}this.onPrepare()},a.beforeRender=function(e){var t=this._videoShape===Te.Pano360_3D_LR||this._videoShape===Te.Pano360_3D_TB||this._videoShape===Te.Quad_3D_LR||this._videoShape===Te.Quad_3D_TB;if(this.renderer&&t){var i,o,n=b.getTotalFrames();null==(i=this.renderer)||null==(o=i.material)||o.setProperty("leftEyeIndex",1*n)}},a.endRender=function(e){var t=this._videoShape===Te.Pano360_3D_LR||this._videoShape===Te.Pano360_3D_TB||this._videoShape===Te.Quad_3D_LR||this._videoShape===Te.Quad_3D_TB;if(this.renderer&&t){var i,o,n=b.getTotalFrames();null==(i=this.renderer)||null==(o=i.material)||o.setProperty("rightEyeIndex",1*(n+1))}},a.createVideoTexture=function(e,t){console.log("createVideoTexture");var i=e,o=t,n=e/t;this.keepAspectRatio&&(n>1.77777?o=Math.ceil(i/16*9):i=Math.ceil(o/9*16));var r=!1;if((null===this._videoTexture||this._videoTexture&&(this._videoTexture.width!==i||this._videoTexture.height!==o))&&(r=!0),r){var a,s;this._videoTexture&&this._videoTexture.destroy(),this._videoTexture=new f,this._videoTexture._uuid="xr-video-texture";var d={width:i,height:o,_data:new Uint8Array(i*o*4),_compressed:!1,format:f.PixelFormat.RGBA8888},h=new P(d);this._videoTexture.image=h,console.log("create video texture :"+i+"x"+o+" | "+(null==(a=this._videoTexture)||null==(s=a.getGFXTexture())?void 0:s.getGLTextureHandle()))}if(c.isNative){var l,p=new we;p.eventName=this._eventName,p.eventId=53,this._videoPlayerHandleKey&&(p.videoPlayerHandleKey=this._videoPlayerHandleKey),p.videoWidth=i,p.videoHeight=o;var u=null==(l=this._videoTexture)?void 0:l.getGFXTexture();u&&(p.videoTextureId=u.getGLTextureHandle()),_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,p.encodeData())}},a.update=function(e){this._isPlaying&&(this._refreshTime+=e,this._refreshTime>1&&(this._refreshTime=0,c.isNative&&_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,this._videoEventDataPosition.encodeData())),c.isBrowser&&this.updateWebVideoTexture())},a.setPlayerVolume=function(e){if(c.isNative){var t=new we;t.eventId=52,t.eventName=this._eventName,this._videoPlayerHandleKey&&(t.videoPlayerHandleKey=this._videoPlayerHandleKey),t.volume=e,_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.encodeData())}else c.isBrowser&&this._webVideo&&(this._webVideo.volume=e)},a.onPrepare=function(){var e="";if(this.resourceType===h.ResourceType.LOCAL?this.clip&&(e=this.clip.nativeUrl):e=this.remoteURL,c.isNative){var t=new we;t.eventName=this._eventName,t.eventId=2,this._videoPlayerHandleKey&&(t.videoPlayerHandleKey=this._videoPlayerHandleKey),t.videoSourceType=this.resourceType===h.ResourceType.LOCAL?1:2,t.videoSourceUrl=e,t.isLoop=this.loop?1:0,t.volume=this.mute?0:this.volume,t.playbackSpeed=this.playbackRate,_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.encodeData())}},a.play=function(){var e=this;if(this._isReseted||!this._isPlayerPrepared)return this._isReseted=!1,this._autoPlayOnReady=!0,void this.onPrepare();if(this._isPlaying=!0,c.isNative){var t=new we;t.eventId=3,t.eventName=this._eventName,this._videoPlayerHandleKey&&(t.videoPlayerHandleKey=this._videoPlayerHandleKey),_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.encodeData())}else if(c.isBrowser&&this._webVideo){var i=this._webVideo.play();be.Promise&&i instanceof Promise&&i.catch((function(t){e._isPlaying=!1})).then((function(){}))}this._currentTime>0&&this.onPlaying()},a.pause=function(){if(this._refreshTime=Number.MAX_VALUE,this._isPlaying=!1,c.isNative){var e=new we;e.eventId=4,e.eventName=this._eventName,this._videoPlayerHandleKey&&(e.videoPlayerHandleKey=this._videoPlayerHandleKey),_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,e.encodeData())}else c.isBrowser&&this._webVideo&&this._webVideo.pause();this.onPaused()},a.stop=function(){this._refreshTime=Number.MAX_VALUE,this._isPlaying=!1;var e=new we;e.eventId=5,e.eventName=this._eventName,this._videoPlayerHandleKey&&(e.videoPlayerHandleKey=this._videoPlayerHandleKey),c.isNative?_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,e.encodeData()):c.isBrowser&&this._webVideo&&(this._webVideo.currentTime=0,this._webVideo.pause()),this.onStopped()},a.reset=function(){if(this._currentTime=0,this._duration=0,this._refreshTime=Number.MAX_VALUE,this._isPlayerPrepared=!1,this._isPlaying=!1,this._isReseted=!0,console.log("setProperty(mainTexture) to default"),c.isNative){var e=new we;e.eventId=6,e.eventName=this._eventName,this._videoPlayerHandleKey&&(e.videoPlayerHandleKey=this._videoPlayerHandleKey),_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,e.encodeData())}},a.onEnable=function(){console.log("XRVideoPlayer.onEnable")},a.onDisable=function(){this._refreshTime=Number.MAX_VALUE,console.log("XRVideoPlayer.onDisable")},a.onDestroy=function(){if(console.log("XRVideoPlayer.onDestroy"),c.isNative){var e=new we;e.eventId=7,e.eventName=this._eventName,this._videoPlayerHandleKey&&(e.videoPlayerHandleKey=this._videoPlayerHandleKey),_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,e.encodeData()),_.jsbBridgeWrapper.removeAllListenersForEvent(this._eventName)}else c.isBrowser&&this._webVideo&&this.removeVideoPlayer();t.videoPlayerUniqueId--},a.content=function(){var e;return null==(e=this.renderer)?void 0:e.node},a.onReadyToPlay=function(){this._isPlayerPrepared=!0,p.emitEvents(this.videoPlayerEvent,this,h.EventType.READY_TO_PLAY),this.node.emit(h.EventType.READY_TO_PLAY,this),(this.playOnAwake||this._autoPlayOnReady)&&(this._autoPlayOnReady=!1,this.play())},a.onPlaying=function(){p.emitEvents(this.videoPlayerEvent,this,h.EventType.PLAYING),this.node.emit(h.EventType.PLAYING,this)},a.onPaused=function(){p.emitEvents(this.videoPlayerEvent,this,h.EventType.PAUSED),this.node.emit(h.EventType.PAUSED,this)},a.onStopped=function(){p.emitEvents(this.videoPlayerEvent,this,h.EventType.STOPPED),this.node.emit(h.EventType.STOPPED,this)},a.onCompleted=function(){this.loop&&(p.emitEvents(this.videoPlayerEvent,this,h.EventType.READY_TO_PLAY),this.node.emit(h.EventType.READY_TO_PLAY,this),this.play()),p.emitEvents(this.videoPlayerEvent,this,h.EventType.COMPLETED),this.node.emit(h.EventType.COMPLETED,this)},a.onError=function(){p.emitEvents(this.videoPlayerEvent,this,h.EventType.ERROR),this.node.emit(h.EventType.ERROR,this)},a.onSeekCompleted=function(){p.emitEvents(this.videoPlayerEvent,this,"seekto-completed"),this.node.emit("seekto-completed",this),this._isCanSeekTo=!0,c.isNative&&_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,this._videoEventDataPosition.encodeData())},a.onInfo=function(e){p.emitEvents(this.videoPlayerEvent,this,"on-info",e),this.node.emit("on-info",this,e)},a.onChangeShape=function(){this.renderer&&this.renderer.material&&this.renderer.material.setProperty("videoShape",this._videoShape);var e=new T(1,1,1);switch(this._videoShape){case Te.Quad:case Te.Quad_3D_LR:case Te.Quad_3D_TB:this._meshQuad||(this._meshQuad=E.MeshUtils.createMesh(this.generateQuadGeometry())),this.renderer&&(this.renderer.mesh=this._meshQuad),e.x=4,e.y=2.25,e.z=1;break;case Te.Pano360:case Te.Pano360_3D_LR:case Te.Pano360_3D_TB:this.onChangePanoramicEffectOption(),this.renderer&&(this.renderer.mesh=this._meshPanoramic360),e.x=10,e.y=10,e.z=10;break;case Te.Pano180:this.onChangePanoramicEffectOption(),this.renderer&&(this.renderer.mesh=this._meshPanoramic180),e.x=10,e.y=10,e.z=10}this.renderer&&(this.renderer.node.scale=e),p.emitEvents(this.videoPlayerEvent,this,"shapetype-changed"),this.node.emit("shapetype-changed",this)},a.onChangePanoramicEffectOption=function(){var e=40,t=40;switch(this._panoramicEffectOption){case Ee.Performance:e=40,t=40;break;case Ee.Balanced:e=60,t=60;break;case Ee.Quality:e=100,t=100}switch(this._videoShape){case Te.Pano360:case Te.Pano360_3D_LR:case Te.Pano360_3D_TB:if(this.renderer)if(this._meshPanoramic360){var i=E.MeshUtils.createMesh(this.generateSphereGeometry(this._videoShape,e,t));this._meshPanoramic360.destroy(),this._meshPanoramic360=i}else this._meshPanoramic360=E.MeshUtils.createMesh(this.generateSphereGeometry(this._videoShape,e,t));break;case Te.Pano180:if(this.renderer)if(this._meshPanoramic180){var o=E.MeshUtils.createMesh(this.generateSphereGeometry(this._videoShape,e,t));this._meshPanoramic180.destroy(),this._meshPanoramic180=o}else this._meshPanoramic180=E.MeshUtils.createMesh(this.generateSphereGeometry(this._videoShape,e,t))}},a.generateQuadGeometry=function(){var e={positions:[-.5,-.5,0,-.5,.5,0,.5,.5,0,.5,-.5,0],indices:[0,3,1,3,2,1],minPos:{x:-.5,y:-.5,z:0},maxPos:{x:.5,y:.5,z:0},boundingRadius:Math.sqrt(.5),normals:[0,0,1,0,0,1,0,0,1,0,0,1],uvs:[0,1,0,0,1,0,1,1]};return e},a.generateSphereGeometry=function(e,t,i){void 0===t&&(t=60),void 0===i&&(i=60);for(var o=10,n=[],r=[],a=[],s=[],d=new T(-10,-10,-10),h=new T(o,o,o),l=0;l<=i;++l)for(var p=l*Math.PI/i,u=Math.sin(p),v=-Math.cos(p),c=0;c<=t;++c){var _=2*c*Math.PI/t-Math.PI/2;e===Te.Pano180&&(_=1*c*Math.PI/t+Math.PI/2);var y=Math.sin(_)*u,m=v,b=Math.cos(_)*u,f=1-c/t,P=1-l/i;if(n.push(y*o,m*o,b*o),r.push(y,m,b),a.push(f,P),l<i&&c<t){var E=t+1,g=E*l+c,D=E*(l+1)+c,w=E*(l+1)+c+1,R=E*l+c+1;s.push(g,D,R),s.push(R,D,w)}}return{positions:n,indices:s,normals:r,uvs:a,minPos:d,maxPos:h,boundingRadius:10}},a.createWebVideoPlayer=function(e){var t=this._webVideo=fe.createElement("video");t.className="cocosxrVideo",t.style.visibility="hidden",t.style.position="absolute",t.style.bottom="0px",t.style.left="0px",t.style["transform-origin"]="0px 100% 0px",t.style["-webkit-transform-origin"]="0px 100% 0px",t.setAttribute("preload","auto"),t.setAttribute("webkit-playsinline",""),t.setAttribute("x5-playsinline",""),t.setAttribute("playsinline",""),t.crossOrigin="anonymous",t.autoplay=!1,t.muted=!0,this._bindDomEvent();var i=fe.createElement("source");t.appendChild(i),i.src=e;var o=new g.BufferTextureCopy;o.texOffset.x=0,o.texOffset.y=0,o.texExtent.width=1,o.texExtent.height=1,o.texExtent.depth=1,this._videoRegions.push(o)},a.removeVideoPlayer=function(){var e=this._webVideo;e&&(e.remove(),this.removeAllListeners()),this._webVideoLoaded=!1},a._bindDomEvent=function(){this.addListener("loadedmetadata",this.onLoadedMetadata.bind(this)),this.addListener("canplay",this.onWebVideoCanPlay.bind(this)),this.addListener("canplaythrough",this.onWebVideoCanPlay.bind(this)),this.addListener("play",this.onWebVideoPlay.bind(this)),this.addListener("playing",this.onPlayingWebVideo.bind(this)),this.addListener("pause",this.onWebVideoPause.bind(this)),this.addListener("ended",this.onWebVideoEnded.bind(this)),this.addListener("error",this.onWebVideoError.bind(this)),this.addListener("timeupdate",this.onWebVideoTimeUpdated.bind(this)),this.addListener("seeked",this.onWebVideoSeeked.bind(this))},a.updateWebVideoTexture=function(){if(this._copyWebVideoTexture&&this._webVideo&&this._videoTexture){var e=this._videoTexture.getGFXTexture();g.deviceManager.gfxDevice.copyTexImagesToTexture([this._webVideo],e,this._videoRegions)}this._webVideo&&(this._currentTime=this._webVideo.currentTime)},a.onLoadedMetadata=function(e){if(this._webVideo){console.log("onLoadedMetadata."+this._webVideo.videoWidth+","+this._webVideo.videoHeight+","+this._webVideo.duration+","+this._webVideo.readyState),this._videoTexture=new f,this._videoTexture._uuid="xr-video-texture";var t=this._webVideo.videoWidth/this._webVideo.videoHeight,i=this._webVideo.videoWidth,o=this._webVideo.videoHeight;this.keepAspectRatio&&(t>1.77777?o=Math.ceil(i/16*9):i=Math.ceil(o/9*16)),this._videoRegions[0].texOffset.x=(i-this._webVideo.videoWidth)/2,this._videoRegions[0].texExtent.width=i,this._videoRegions[0].texExtent.height=o;var n={width:i,height:o,_data:new Uint8Array(i*o*3),_compressed:!1,format:f.PixelFormat.RGB888},r=new P(n);this._videoTexture&&(this._videoTexture.image=r),this._duration=this._webVideo.duration}},a.onWebVideoCanPlay=function(e){var t;console.log("onCanPlay."+(null==(t=this._webVideo)?void 0:t.readyState)),this._webVideoLoaded||(this._webVideoLoaded=!0,this._webVideo&&(this._webVideo.setAttribute("muted",""),this._webVideo.volume=this._volume,this._webVideo.muted=this._mute,this._webVideo.playbackRate=this._playbackRate,this._webVideo.loop=this.loop),this.playOnAwake=!1,this.onReadyToPlay())},a.onWebVideoPlay=function(e){var t,i,o;(console.log("onPlay."+(null==(t=this._webVideo)?void 0:t.readyState)),this._isPlaying=!0,this._videoTexture)&&(null==(i=this.renderer)||null==(o=i.material)||o.setProperty("mainTexture",this._videoTexture))},a.onPlayingWebVideo=function(e){console.log("onPlayingWebVideo"),this.onPlaying()},a.onWebVideoPause=function(e){console.log("onPause"),this.onPaused()},a.onWebVideoEnded=function(e){console.log("onEnded"),this.onCompleted()},a.onClick=function(e){console.log("onClick")},a.onWebVideoError=function(e){var t=e.target;t&&t.error&&console.error("Error "+t.error.code+"; details: "+t.error.message),this.onError()},a.onWebVideoTimeUpdated=function(e){this._copyWebVideoTexture=!0},a.onWebVideoSeeked=function(e){console.log("onSeeked"),!this._isPlaying&&this._webVideo&&this._webVideo.pause(),this.onSeekCompleted()},a.onDurationchange=function(e){console.log("onDurationchange")},a.addListener=function(e,t){this._webVideo&&(this._webVideoEventList.set(e,t),this._webVideo.addEventListener(e,t))},a.removeAllListeners=function(){var e=this;this._webVideoEventList.forEach((function(t,i){e._webVideo&&e._webVideo.removeEventListener(i,t)})),this._webVideoEventList.clear()},r(t,[{key:"resourceType",get:function(){return this._resourceType},set:function(e){this._resourceType!==e&&(this._resourceType=e)}},{key:"remoteURL",get:function(){return this._remoteURL},set:function(e){this._remoteURL!==e&&(this._remoteURL=e)}},{key:"clip",get:function(){return this._clip},set:function(e){this._clip!==e&&(this._clip=e)}},{key:"playOnAwake",get:function(){return this._playOnAwake},set:function(e){this._playOnAwake=e}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){if(this._playbackRate=e<0?1:e>4?4:e,c.isNative){var t=new we;t.eventId=54,t.eventName=this._eventName,this._videoPlayerHandleKey&&(t.videoPlayerHandleKey=this._videoPlayerHandleKey),t.playbackSpeed=e,_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.encodeData())}else c.isBrowser&&this._webVideo&&(this._webVideo.playbackRate=e)}},{key:"volume",get:function(){return this._mute?0:this._volume},set:function(e){this._volume=e,this.setPlayerVolume(this.mute?0:e)}},{key:"mute",get:function(){return this._mute},set:function(e){this._mute=e,this.setPlayerVolume(e?0:this._volume)}},{key:"loop",get:function(){return this._loop},set:function(e){if(this._loop=e,c.isNative){var t=new we;t.eventId=50,t.eventName=this._eventName,this._videoPlayerHandleKey&&(t.videoPlayerHandleKey=this._videoPlayerHandleKey),t.isLoop=1,_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.encodeData())}else c.isBrowser&&this._webVideo&&(this._webVideo.loop=e)}},{key:"keepAspectRatio",get:function(){return this._keepAspectRatio},set:function(e){this._keepAspectRatio!==e&&(this._keepAspectRatio=e)}},{key:"shape",get:function(){return this._videoShape},set:function(e){!(e===Te.Pano360_3D_LR||e===Te.Pano360_3D_TB||e===Te.Quad_3D_LR||e===Te.Quad_3D_TB)||this._isSupport3DVideo?this._videoShape!==e&&(this._videoShape=e,this.onChangeShape()):console.warn("currently engine is not support 3d video shape, must be >=3.7.3!!!")}},{key:"panoramicEffectOption",get:function(){return this._panoramicEffectOption},set:function(e){this._panoramicEffectOption!==e&&(this._panoramicEffectOption=e,this.onChangePanoramicEffectOption())}},{key:"subtitleData",get:function(){return this._subtitleArrayData},set:function(e){this._subtitleArrayData=e}},{key:"duration",get:function(){return this._duration}},{key:"currentTime",get:function(){return this._currentTime},set:function(e){if(this._isCanSeekTo){if(this._currentTime=e,this._lastSubtitleBeginIdx=0,this._refreshTime=Number.MAX_VALUE,c.isNative){var t=new we;t.eventId=51,t.eventName=this._eventName,this._videoPlayerHandleKey&&(t.videoPlayerHandleKey=this._videoPlayerHandleKey),t.seekToMsec=Math.floor(1e3*e),_.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.encodeData())}else c.isBrowser&&this._webVideo&&(this._webVideo.currentTime=e);this._isCanSeekTo=!1}else console.error("set currentTime failed, because mediaplayer is seeking!!!")}},{key:"isPlaying",get:function(){return this._isPlaying}}]),t}(D)).videoPlayerUniqueId=0,te=t((ee=ce).prototype,"_loop",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=t(ee.prototype,"_playOnAwake",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),oe=t(ee.prototype,"_volume",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),ne=t(ee.prototype,"_mute",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re=t(ee.prototype,"_resourceType",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.ResourceType.LOCAL}}),ae=t(ee.prototype,"_remoteURL",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),se=t(ee.prototype,"_clip",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ee.prototype,"_keepAspectRatio",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),he=t(ee.prototype,"_playbackRate",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),le=t(ee.prototype,"_videoShape",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Te.Quad}}),pe=t(ee.prototype,"_panoramicEffectOption",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ee.Balanced}}),t(ee.prototype,"resourceType",[M],Object.getOwnPropertyDescriptor(ee.prototype,"resourceType"),ee.prototype),t(ee.prototype,"remoteURL",[K],Object.getOwnPropertyDescriptor(ee.prototype,"remoteURL"),ee.prototype),t(ee.prototype,"clip",[C],Object.getOwnPropertyDescriptor(ee.prototype,"clip"),ee.prototype),t(ee.prototype,"playOnAwake",[z],Object.getOwnPropertyDescriptor(ee.prototype,"playOnAwake"),ee.prototype),t(ee.prototype,"playbackRate",[F],Object.getOwnPropertyDescriptor(ee.prototype,"playbackRate"),ee.prototype),t(ee.prototype,"volume",[G],Object.getOwnPropertyDescriptor(ee.prototype,"volume"),ee.prototype),t(ee.prototype,"mute",[j],Object.getOwnPropertyDescriptor(ee.prototype,"mute"),ee.prototype),t(ee.prototype,"loop",[Q],Object.getOwnPropertyDescriptor(ee.prototype,"loop"),ee.prototype),t(ee.prototype,"keepAspectRatio",[X],Object.getOwnPropertyDescriptor(ee.prototype,"keepAspectRatio"),ee.prototype),t(ee.prototype,"shape",[Y],Object.getOwnPropertyDescriptor(ee.prototype,"shape"),ee.prototype),t(ee.prototype,"panoramicEffectOption",[q],Object.getOwnPropertyDescriptor(ee.prototype,"panoramicEffectOption"),ee.prototype),ue=t(ee.prototype,"videoPlayerEvent",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ve=t(ee.prototype,"renderer",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=ee))||$)||$));a._RF.pop()}}}));

System.register("chunks:///_virtual/xr-webview.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,_,a,s,E,l,u,d,h,v,c,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){_=e.cclegacy,a=e._decorator,s=e.MeshRenderer,E=e.Vec3,l=e.sys,u=e.native,d=e.Texture2D,h=e.ImageAsset,v=e.XrUIPressEventType,c=e.Vec2,T=e.Component}],execute:function(){var p,V,W,N,R,I,f,x,A,g;_._RF.push({},"5a2e9rd7jxAZoqbodDgN9+V","xr-webview",void 0);var B=a.ccclass,w=a.property,X=a.menu;e("XRWebView",(p=B("cc.XRWebView"),V=X("XR/Extra/XRWebView"),W=w({type:s,displayName:"Content",tooltip:"i18n:xr-plugin.webview.content"}),N=w({tooltip:"i18n:xr-plugin.webview.url"}),R=w({serializable:!0}),p(I=V(((g=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),_=0;_<i;_++)o[_]=arguments[_];return t=e.call.apply(e,[this].concat(o))||this,r(t,"renderer",x,n(t)),r(t,"_url",A,n(t)),t._videoTexture=null,t._textureWidth=1920,t._textureHeight=1080,t._eventName="",t._eventUniqeueId=0,t._localPoint=new E,t}i(t,e);var _=t.prototype;return _.onLoad=function(){this._eventUniqeueId=t.webViewUniqueId,this._eventName=""+t.XR_WEBVIEW_EVENT_NAME+this._eventUniqeueId,t.webViewUniqueId++,3===t.webViewUniqueId&&console.error("Currently a maximum of 3 XRWebView components can be used at the same time !!!")},_.start=function(){var e=this;if(this.renderer||(this.renderer=this.getComponent(s),this.renderer||console.error("Must has a valid MeshRenderer component!!!")),l.isNative){u.jsbBridgeWrapper.addNativeEventListener(this._eventName,(function(i){i===t.XR_WEBVIEW_EVENT_TAG_ADDED&&e.createVideoTexture(e._textureWidth,e._textureHeight)}));var i=t.XR_WEBVIEW_EVENT_TAG_TO_ADD+"&"+this._textureWidth+"&"+this._textureHeight+"&"+this._url;u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,i)}},_.createVideoTexture=function(e,i){console.log("createVideoTexture");var r=e,n=i,o=!1;if((null===this._videoTexture||this._videoTexture&&(this._videoTexture.width!==r||this._videoTexture.height!==n))&&(o=!0),o){var _,a,s,E;this._videoTexture&&this._videoTexture.destroy(),this._videoTexture=new d,this._videoTexture._uuid="xr-video-texture";var v={width:r,height:n,_data:new Uint8Array(r*n*4),_compressed:!1,format:d.PixelFormat.RGBA8888},c=new h(v);this._videoTexture.image=c,null==(_=this.renderer)||null==(a=_.material)||a.setProperty("mainTexture",this._videoTexture),console.log("create video texture :"+r+"x"+n+" | "+(null==(s=this._videoTexture)||null==(E=s.getGFXTexture())?void 0:E.getGLTextureHandle()))}if(l.isNative){var T,p=null==(T=this._videoTexture)?void 0:T.getGFXTexture();if(p){var V=t.XR_WEBVIEW_EVENT_TAG_TEXTUREINFO+"&"+p.getGLTextureHandle()+"&"+r+"&"+n;u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,V)}}},_.onDestroy=function(){l.isNative&&(u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.XR_WEBVIEW_EVENT_TAG_TO_REMOVE),u.jsbBridgeWrapper.removeAllListenersForEvent(this._eventName),t.webViewUniqueId--)},_.onEnable=function(){var e,t,i;null==(e=this.renderer)||e.node.on(v.XRUI_HOVER_STAY,this.onHoverStay,this),null==(t=this.renderer)||t.node.on(v.XRUI_CLICK,this.onClickDown,this),null==(i=this.renderer)||i.node.on(v.XRUI_UNCLICK,this.onClickUp,this)},_.onDisable=function(){var e,t,i;null==(e=this.renderer)||e.node.off(v.XRUI_HOVER_STAY,this.onHoverStay,this),null==(t=this.renderer)||t.node.off(v.XRUI_CLICK,this.onClickDown,this),null==(i=this.renderer)||i.node.off(v.XRUI_UNCLICK,this.onClickUp,this)},_.calculateClickUVPostion=function(e){if(this.renderer){var t=this.renderer.node.getWorldMatrix().clone().invert();return E.transformMat4(this._localPoint,e,t),new c(this._localPoint.x+.5,this._localPoint.y+.5)}return c.ZERO},_.onHoverStay=function(e){if(this.renderer&&e.hitPoint&&l.isNative){var i=this.calculateClickUVPostion(e.hitPoint),r=t.XR_WEBVIEW_EVENT_TAG_HOVER+"&"+i.x+"&"+i.y;u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,r)}},_.onClickDown=function(e){if(this.renderer&&e.hitPoint&&l.isNative){var i=this.calculateClickUVPostion(e.hitPoint),r=t.XR_WEBVIEW_EVENT_TAG_CLICK_DOWN+"&"+i.x+"&"+i.y;u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,r)}},_.onClickUp=function(e){if(this.renderer&&l.isNative){var i=this.calculateClickUVPostion(e),r=t.XR_WEBVIEW_EVENT_TAG_CLICK_UP+"&"+i.x+"&"+i.y;u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,r)}},_.goBack=function(){l.isNative&&u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.XR_WEBVIEW_EVENT_TAG_GOBACK)},_.goForward=function(){l.isNative&&u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.XR_WEBVIEW_EVENT_TAG_GOFORWARD)},_.loadUrl=function(e){if(l.isNative){var i=t.XR_WEBVIEW_EVENT_TAG_LOADURL+"&"+e;u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,i)}},_.reload=function(){l.isNative&&u.jsbBridgeWrapper.dispatchEventToNative(this._eventName,t.XR_WEBVIEW_EVENT_TAG_RELOAD)},o(t,[{key:"url",get:function(){return this._url},set:function(e){this._url=e,this.loadUrl(this._url)}}]),t}(T)).XR_WEBVIEW_EVENT_NAME="xr-webview-",g.XR_WEBVIEW_EVENT_TAG_TO_ADD="to-add",g.XR_WEBVIEW_EVENT_TAG_TO_REMOVE="to-remove",g.XR_WEBVIEW_EVENT_TAG_ADDED="added",g.XR_WEBVIEW_EVENT_TAG_REMOVED="removed",g.XR_WEBVIEW_EVENT_TAG_TEXTUREINFO="textureinfo",g.XR_WEBVIEW_EVENT_TAG_HOVER="hover",g.XR_WEBVIEW_EVENT_TAG_CLICK_DOWN="click-down",g.XR_WEBVIEW_EVENT_TAG_CLICK_UP="click-up",g.XR_WEBVIEW_EVENT_TAG_GOFORWARD="go-forward",g.XR_WEBVIEW_EVENT_TAG_GOBACK="go-back",g.XR_WEBVIEW_EVENT_TAG_LOADURL="load-url",g.XR_WEBVIEW_EVENT_TAG_RELOAD="reload",g.webViewUniqueId=0,x=t((f=g).prototype,"renderer",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(f.prototype,"url",[N],Object.getOwnPropertyDescriptor(f.prototype,"url"),f.prototype),A=t(f.prototype,"_url",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),I=f))||I)||I));_._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});