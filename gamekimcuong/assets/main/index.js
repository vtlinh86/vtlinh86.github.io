System.register("chunks:///_virtual/FlowMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts"],(function(t){"use strict";var e,r,i,n,a,o,c,s,u,l,p,f,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,a=t.defineProperty},function(t){o=t.cclegacy,c=t._decorator,s=t.Node,u=t.resources,l=t.Prefab,p=t.instantiate,f=t.Component},function(t){h=t.RESOURCES_PATH}],execute:function(){var m,A,S,M,_;o._RF.push({},"2f2c6HtS5BLiKJ44FHDam2M","FlowMgr",void 0);var L,G=c.ccclass,I=c.property;!function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.PLAY_GAME=2]="PLAY_GAME"}(L||(L={}));t("FlowMgr",(m=G("FlowMgr"),A=I(s),m((_=e((M=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o))||this,i(n(e),"mGameContainer",_,n(e)),a(n(e),"mState",void 0),e}r(e,t);var o=e.prototype;return o.start=function(){this.SetState(L.INIT)},o.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case L.INIT:break;case L.PLAY_GAME:u.load(h.PREFAB_GAME_MGR,l,(function(t,r){r&&(p(r).parent=e.mGameContainer)}))}},o.update=function(t){switch(this.mState){case L.INIT:this.SetState(L.PLAY_GAME);break;case L.PLAY_GAME:}},e}(f)).prototype,"mGameContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=M))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./GameMgr.ts"],(function(t){"use strict";var e,i,a,n,s,o,r,c,p,h,m,S,l,u,A,f,T,P,E,I,M,R,y,O,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,s=t.defineProperty,o=t.createClass},function(t){r=t.cclegacy,c=t._decorator,p=t.SpriteFrame,h=t.Sprite,m=t.UITransform,S=t.UIOpacity,l=t.Vec2,u=t.Node,A=t.Vec3,f=t.tween,T=t.Tween,P=t.Component},function(t){E=t.FALL_DOWN_1_ROW_DURATION,I=t.FALL_DOWN_SCALE_DURATION,M=t.MAP_SIZE,R=t.SWIPE_OFFSET_MIN,y=t.MATCH_ANIMATION_DURATION,O=t.SWAP_DURATION},function(t){d=t.GameMgr}],execute:function(){var w,v,D,g,N,b,H,F,L,_,C,W,U,V,k,Y,G;r._RF.push({},"36c59uAUWBETLRc2rlMiGvI","Item",void 0);var x,z,Z=c.ccclass,q=c.property;!function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.APPEAR=2]="APPEAR",t[t.READY=3]="READY",t[t.SWAP=4]="SWAP",t[t.MATCH=5]="MATCH",t[t.FALL_DOWN=6]="FALL_DOWN",t[t.INACTIVE=7]="INACTIVE"}(x||(x={})),function(t){t[t.HINT=1]="HINT",t[t.VER=2]="VER",t[t.HOR=4]="HOR"}(z||(z={}));t("Item",(w=Z("Item"),v=q({type:[p]}),D=q({type:[p]}),g=q({type:[p]}),N=q(h),b=q(m),H=q(h),F=q(S),w((C=e((_=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,a(n(e),"mArrSpriteFrame",C,n(e)),a(n(e),"mArrSpriteFrameHor",W,n(e)),a(n(e),"mArrSpriteFrameVer",U,n(e)),a(n(e),"mSprite",V,n(e)),a(n(e),"mSpriteUITransform",k,n(e)),a(n(e),"mSpriteHint",Y,n(e)),a(n(e),"mSpriteHintOpacity",G,n(e)),s(n(e),"mState",void 0),s(n(e),"mType",void 0),s(n(e),"mMapPos",l.ZERO.clone()),s(n(e),"mMapPosTarget",l.ZERO.clone()),s(n(e),"mTouchStartPos",void 0),s(n(e),"mIsScaleUp",void 0),s(n(e),"mFallDownRow",void 0),s(n(e),"mAppearDelay",void 0),s(n(e),"mAppearDuration",void 0),s(n(e),"mEffect",void 0),e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.node.on(u.EventType.TOUCH_START,this.OnTouchStart,this),this.node.on(u.EventType.TOUCH_END,this.OnTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this.OnTouchEnd,this)},r.onEnable=function(){},r.onDisable=function(){},r.start=function(){},r.SetState=function(t){var e=this;switch(this.mState){case x.APPEAR:case x.SWAP:case x.FALL_DOWN:this.SetMapPosition(this.mMapPosTarget)}switch(this.mState=t,this.mState){case x.INIT:this.RemoveAllEffect(),this.mSprite.node.setScale(A.ONE);break;case x.APPEAR:this.SetAppearAnimation(this.mAppearDelay,this.mAppearDuration),setTimeout((function(){e.SetState(x.READY)}),1e3*(this.mAppearDelay+this.mAppearDuration));break;case x.READY:break;case x.SWAP:var i=O;this.SetSwapAnimation(i),setTimeout((function(){switch(e.mState){case x.SWAP:e.SetState(x.READY)}}),1e3*i);break;case x.MATCH:var a=y;this.SetMatchAnimation(a),this.RemoveEffect(z.HINT),setTimeout((function(){switch(e.mState){case x.MATCH:e.SetState(x.INACTIVE)}}),1e3*a);break;case x.FALL_DOWN:this.mMapPosTarget.x=this.mMapPos.x,this.mMapPosTarget.y=this.mMapPos.y-this.mFallDownRow;var n=this.mFallDownRow*E+I;this.SetFallDownAnimation(n),setTimeout((function(){switch(e.mState){case x.FALL_DOWN:e.SetState(x.READY)}}),1e3*n);break;case x.INACTIVE:d.Instance.UpdateMap(null,this.mMapPos,this.mMapPos)}},r.AddEffect=function(t){switch(this.mEffect|=t,t){case z.HINT:this.mSpriteHint.node.active=!0,this.mSpriteHintOpacity.opacity=0,f(this.mSpriteHintOpacity).to(.5,{opacity:255}).to(.5,{opacity:0}).union().repeatForever().start();break;case z.VER:case z.HOR:}},r.RemoveEffect=function(t){switch(this.mEffect=this.mEffect|t-t,t){case z.HINT:this.mSpriteHint.node.active=!1,T.stopAllByTarget(this.mSpriteHintOpacity);break;case z.VER:case z.HOR:}},r.update=function(t){switch(this.mState){case x.INIT:this.SetState(x.APPEAR);break;case x.APPEAR:case x.READY:case x.SWAP:case x.MATCH:case x.FALL_DOWN:case x.INACTIVE:}},r.SetStateInit=function(t,e,i,a){this.Type=t,this.mMapPosTarget=e.clone(),this.mAppearDelay=i,this.mAppearDuration=a,this.SetMapPosition(new l(e.x,M.ROW)),this.SetState(x.INIT)},r.IsStateReady=function(){return this.mState==x.READY},r.IsStateInactive=function(){return this.mState==x.INACTIVE},r.Swap=function(t,e){switch(this.mState){case x.READY:this.mMapPosTarget=t.clone(),this.mIsScaleUp=e,this.SetState(x.SWAP)}},r.SetStateMatch=function(){switch(this.mState){case x.READY:this.SetState(x.MATCH)}},r.SetStateFallDown=function(t){if(t>0)switch(this.mState){case x.READY:this.mFallDownRow=t,this.SetState(x.FALL_DOWN)}},r.SetEffectHint=function(t){t?this.AddEffect(z.HINT):this.RemoveEffect(z.HINT)},r.SetMapPosition=function(t){var e=this.mMapPos.clone();this.mMapPos=t.clone(),this.UpdateNodePosition(this.mMapPos),console.log(this.mMapPos),d.Instance.UpdateMap(this,this.mMapPos,e)},r.UpdateNodePosition=function(t){this.node.setPosition(this.ConvertMapPosToGamePos(t))},r.ConvertMapPosToGamePos=function(t){return new A((t.x-.5*(M.COL-1))*M.COL_OFFSET,(t.y-.5*(M.ROW-1))*M.ROW_OFFSET)},r.OnTouchStart=function(t){switch(console.log("Item - OnTouchStart"),console.log(this.mMapPos),this.mState){case x.READY:this.mTouchStartPos=t.getLocation(),f(this.mSprite.node).to(.1,{scale:new A(.9,.9,.9)},{easing:"quadOut"}).to(.3,{scale:new A(1,1,1)},{easing:"elasticOut"}).start()}},r.OnTouchEnd=function(t){switch(console.log("Item - OnTouchEnd"),this.mState){case x.READY:var e=t.getLocation(),i=new l;if(l.subtract(i,e,this.mTouchStartPos),i.length()>=R){var a=this.GetSwapTarget(i);console.log(a),d.Instance.SwapItems(this.mMapPos,a)}}},r.GetSwapTarget=function(t){var e=Math.atan2(t.y,t.x)/Math.PI*180;return Math.abs(e-0)<=45?new l(this.mMapPos.x+1,this.mMapPos.y):Math.abs(e-90)<=45?new l(this.mMapPos.x,this.mMapPos.y+1):Math.abs(e- -90)<=45?new l(this.mMapPos.x,this.mMapPos.y-1):new l(this.mMapPos.x-1,this.mMapPos.y)},r.SetSwapAnimation=function(t){f(this.node).to(t,{position:this.ConvertMapPosToGamePos(this.mMapPosTarget)}).start();var e=A.ONE.clone().multiplyScalar(this.mIsScaleUp?1.2:.6);f(this.mSprite.node).to(.5*t,{scale:e},{easing:"sineOut"}).to(.5*t,{scale:A.ONE},{easing:"sineIn"}).start()},r.SetMatchAnimation=function(t){f(this.mSprite.node).to(t,{scale:A.ZERO}).start()},r.SetFallDownAnimation=function(t){var e=this;f(this.node).to(t-I,{position:this.ConvertMapPosToGamePos(this.mMapPosTarget)},{easing:"quadIn"}).call((function(){e.SetSpritePunch(I)})).start()},r.SetAppearAnimation=function(t,e){var i=this;f(this.node).delay(t).to(e-I,{position:this.ConvertMapPosToGamePos(this.mMapPosTarget)},{easing:"quadIn"}).call((function(){i.SetSpritePunch(I)})).start(),this.mSprite.node.setScale(A.ZERO),f(this.mSprite.node).delay(t).to(E,{scale:A.ONE}).start()},r.SetSpritePunch=function(t){var e=.5*(1-.8)*this.mSpriteUITransform.height;f(this.mSprite.node).to(.3*t,{scale:new A(1,.8,1)},{easing:"sineIn"}).to(.7*t,{scale:new A(1,1,1)},{easing:"backOut"}).start(),f(this.mSprite.node).by(.3*t,{position:new A(0,-e,0)},{easing:"sineIn"}).by(.7*t,{position:new A(0,e,0)},{easing:"backOut"}).start()},r.RemoveAllEffect=function(){console.log("RemoveAllEffect"),this.RemoveEffect(z.HINT),this.RemoveEffect(z.VER),this.RemoveEffect(z.HOR)},o(e,[{key:"Type",get:function(){return this.mType},set:function(t){this.mType=t,this.mSprite.spriteFrame=this.mArrSpriteFrame[this.mType]}}]),e}(P)).prototype,"mArrSpriteFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=e(_.prototype,"mArrSpriteFrameHor",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=e(_.prototype,"mArrSpriteFrameVer",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=e(_.prototype,"mSprite",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=e(_.prototype,"mSpriteUITransform",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=e(_.prototype,"mSpriteHint",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G=e(_.prototype,"mSpriteHintOpacity",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=_))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameDefine.ts","./GameUtilites.ts","./Match3Algorithm.ts","./Item.ts"],(function(t){"use strict";var e,a,i,n,s,r,o,m,I,S,_,c,h,A,p,M,l,E,f,u;return{setters:[function(t){e=t.defineProperty,a=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.createClass,s=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,m=t._decorator,I=t.Node,S=t.Prefab,_=t.Vec2,c=t.instantiate,h=t.Component},function(t){A=t.MAP_SIZE,p=t.NUMBER_OF_ITEM_TYPES,M=t.FALL_DOWN_1_ROW_DURATION,l=t.FALL_DOWN_SCALE_DURATION},function(t){E=t.GameUtilites},function(t){f=t.Match3Algorithm},function(t){u=t.Item}],execute:function(){var T,C,R,W,P,w,L,N,y;o._RF.push({},"61b3bdCTWJF+5iY93JINKlb","GameMgr",void 0);var H,d=m.ccclass,O=m.property;!function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CREATE_NEW_GAME=2]="CREATE_NEW_GAME",t[t.CHECK_ALL_ITEMS_READY=3]="CHECK_ALL_ITEMS_READY",t[t.READY=4]="READY",t[t.SWAP_ITEMS=5]="SWAP_ITEMS",t[t.UNDO_SWAP_ITEMS=6]="UNDO_SWAP_ITEMS",t[t.CHECK_MATCH_3_AFTER_SWAP_ITEM=7]="CHECK_MATCH_3_AFTER_SWAP_ITEM",t[t.CHECK_MATCH_3_AFTER_SPAWN_ITEM=8]="CHECK_MATCH_3_AFTER_SPAWN_ITEM",t[t.MATCH_3=9]="MATCH_3",t[t.ITEMS_FALL_DOWN=10]="ITEMS_FALL_DOWN",t[t.SPAWN_ITEM=11]="SPAWN_ITEM"}(H||(H={}));t("GameMgr",(T=d("GameMgr"),C=O(I),R=O(S),T((y=N=function(t){function a(){for(var a,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return a=t.call.apply(t,[this].concat(n))||this,s(r(a),"mItemsContainer",w,r(a)),s(r(a),"mPrefabItem",L,r(a)),e(r(a),"mState",void 0),e(r(a),"mMapItem",void 0),e(r(a),"mArrItem",[]),e(r(a),"mSwapInfo",void 0),e(r(a),"mAllResult",void 0),e(r(a),"mArrSpawnItemMapPos",void 0),a}i(a,t);var o=a.prototype;return o.onLoad=function(){a.mInstance=this},o.start=function(){this.SetState(H.INIT)},o.SetState=function(t){var e=this;switch(this.mState=t,this.mState){case H.INIT:break;case H.CREATE_NEW_GAME:this.CreateNewMap();break;case H.CHECK_ALL_ITEMS_READY:break;case H.READY:this.Hint();break;case H.SWAP_ITEMS:this.mSwapInfo.item2.node.setSiblingIndex(0),this.mSwapInfo.item1.node.setSiblingIndex(1),this.mSwapInfo.item1.Swap(this.mSwapInfo.mapPosTarget1,!0),this.mSwapInfo.item2.Swap(this.mSwapInfo.mapPosTarget2,!1);break;case H.UNDO_SWAP_ITEMS:this.mSwapInfo.item1.node.setSiblingIndex(0),this.mSwapInfo.item2.node.setSiblingIndex(1),this.mSwapInfo.item1.Swap(this.mSwapInfo.mapPosTarget2,!1),this.mSwapInfo.item2.Swap(this.mSwapInfo.mapPosTarget1,!0);break;case H.CHECK_MATCH_3_AFTER_SWAP_ITEM:case H.CHECK_MATCH_3_AFTER_SPAWN_ITEM:break;case H.MATCH_3:this.mAllResult.forEach((function(t){t.ver&&t.ver.forEach((function(t){try{e.mMapItem[t.x][t.y].SetStateMatch()}catch(t){}})),t.hor&&t.hor.forEach((function(t){try{e.mMapItem[t.x][t.y].SetStateMatch()}catch(t){}}))}));break;case H.ITEMS_FALL_DOWN:for(var a=0;a<A.COL;a++)for(var i=0,n=0;n<A.ROW;n++){var s=this.mMapItem[a][n];s?s.SetStateFallDown(i):i++}break;case H.SPAWN_ITEM:for(var r=f.Instance.SpawnItem(this.GetMapType(this.mMapItem),A.COL,A.ROW,p),o=0;o<A.COL;o++)for(var m=null,I=0;I<A.ROW;I++){if(!this.mMapItem[o][I])m||(m=I),this.GetItem().SetStateInit(r[o][I],new _(o,I),(I-m)*M,(A.ROW-I)*M+l)}}},o.update=function(t){switch(this.mState){case H.INIT:this.SetState(H.CREATE_NEW_GAME);break;case H.CREATE_NEW_GAME:this.SetState(H.CHECK_ALL_ITEMS_READY);break;case H.CHECK_ALL_ITEMS_READY:this.IsAllItemsReady()&&this.SetState(H.READY);break;case H.READY:break;case H.SWAP_ITEMS:this.mSwapInfo.item1.IsStateReady()&&this.mSwapInfo.item2.IsStateReady()&&this.SetState(H.CHECK_MATCH_3_AFTER_SWAP_ITEM);break;case H.UNDO_SWAP_ITEMS:this.mSwapInfo.item1.IsStateReady()&&this.mSwapInfo.item2.IsStateReady()&&this.SetState(H.CHECK_ALL_ITEMS_READY);break;case H.CHECK_MATCH_3_AFTER_SWAP_ITEM:this.mAllResult=f.Instance.GetArrResultAtArrPos(this.GetMapType(this.mMapItem),[this.mSwapInfo.mapPosTarget1,this.mSwapInfo.mapPosTarget2]),f.Instance.IsMatch3(this.mAllResult)?this.SetState(H.MATCH_3):this.SetState(H.UNDO_SWAP_ITEMS);break;case H.CHECK_MATCH_3_AFTER_SPAWN_ITEM:this.mAllResult=f.Instance.GetArrResultAtArrPos(this.GetMapType(this.mMapItem),this.mArrSpawnItemMapPos),f.Instance.IsMatch3(this.mAllResult)?this.SetState(H.MATCH_3):this.SetState(H.CHECK_ALL_ITEMS_READY);break;case H.MATCH_3:this.IsMatch3Finish()&&this.SetState(H.ITEMS_FALL_DOWN);break;case H.ITEMS_FALL_DOWN:this.IsMatch3Finish()&&this.SetState(H.SPAWN_ITEM);break;case H.SPAWN_ITEM:this.IsAllItemsReady()&&this.SetState(H.CHECK_MATCH_3_AFTER_SPAWN_ITEM)}},o.SwapItems=function(t,e){switch(this.mState){case H.READY:this.mSwapInfo=this.GetSwapInfo(t,e),this.mSwapInfo.item1&&this.mSwapInfo.item2&&this.SetState(H.SWAP_ITEMS)}},o.UpdateMap=function(t,e,a){if(E.IsPosInMap(a,A.COL,A.ROW))try{this.mMapItem[a.x][a.y].node.uuid==t.node.uuid&&(this.mMapItem[a.x][a.y]=null)}catch(t){}E.IsPosInMap(e,A.COL,A.ROW)&&(this.mMapItem[e.x][e.y]=t)},o.CreateNewMap=function(){console.log("CreateNewMap"),this.mMapItem=Array(A.COL).fill(null).map((function(){return Array(A.ROW).fill(null)}));var t=f.Instance.GenerateNewMap(A.COL,A.ROW,p);this.mArrSpawnItemMapPos=[];for(var e=0;e<A.COL;e++)for(var a=0;a<A.ROW;a++){this.mArrSpawnItemMapPos.push(new _(e,a)),this.GetItem().SetStateInit(t[e][a],new _(e,a),(a-0)*M,(A.ROW-a)*M+l)}console.log(this.mMapItem),console.log(this.mArrItem),console.log(this.mArrItem.map((function(t){return t.node.uuid})))},o.GetItem=function(){for(var t=0;t<this.mArrItem.length;t++)if(this.mArrItem[t].IsStateInactive())return this.mArrItem[t];var e=c(this.mPrefabItem);e.parent=this.mItemsContainer;var a=e.getComponent(u);return this.mArrItem.push(a),a},o.IsAllItemsReady=function(){for(var t=0;t<A.COL;t++)for(var e=0;e<A.ROW;e++){var a=this.mMapItem[t][e];if(null==a||!a.IsStateReady())return!1}return!0},o.IsMatch3Finish=function(){for(var t=0;t<A.COL;t++)for(var e=0;e<A.ROW;e++){var a=this.mMapItem[t][e];if(null!=a&&!a.IsStateReady())return!1}return!0},o.GetSwapInfo=function(t,e){var a=null,i=null;try{a=this.mMapItem[t.x][t.y],i=this.mMapItem[e.x][e.y]}catch(t){}var n={item1:a,item2:i,mapPosTarget1:e.clone(),mapPosTarget2:t.clone()};return console.log("GetSwapInfo"),console.log(n),n},o.GetMapType=function(t){return t.map((function(t){return t.map((function(t){return null==t?null:t.Type}))}))},o.Hint=function(){var t=this,e=f.Instance.GetHint(this.GetMapType(this.mMapItem),A.COL,A.ROW);e&&(this.RemoveHintAllItem(),e.forEach((function(e){t.mMapItem[e.x][e.y].SetEffectHint(!0)})))},o.RemoveHintAllItem=function(){this.mMapItem.forEach((function(t){t&&t.forEach((function(t){t&&t.SetEffectHint(!1)}))}))},n(a,null,[{key:"Instance",get:function(){return this.mInstance}}]),a}(h),e(N,"mInstance",void 0),w=a((P=y).prototype,"mItemsContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=a(P.prototype,"mPrefabItem",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=P))||W));o._RF.pop()}}}));

System.register("chunks:///_virtual/Match3Algorithm.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameUtilites.ts"],(function(n){"use strict";var e,t,r,o,a,c;return{setters:[function(n){e=n.defineProperty,t=n.createClass},function(n){r=n.cclegacy,o=n._decorator,a=n.Vec2},function(n){c=n.GameUtilites}],execute:function(){var u,l,i;r._RF.push({},"d26e38+Fb5FPLXj5LexPRhl","Match3Algorithm",void 0);var h=o.ccclass;o.property,n("Match3Algorithm",h("Match3Algorithm")((i=l=function(){function n(){e(this,"ARR_PATTERN_MATCH_3_CHANCE",[[new a(0,0),new a(1,0),new a(3,0)],[new a(0,0),new a(2,0),new a(3,0)],[new a(0,0),new a(0,1),new a(0,3)],[new a(0,0),new a(0,2),new a(0,3)],[new a(0,0),new a(1,0),new a(2,-1)],[new a(0,0),new a(0,1),new a(1,2)],[new a(0,0),new a(-1,0),new a(-2,1)],[new a(0,0),new a(0,-1),new a(-1,-2)],[new a(0,0),new a(1,0),new a(2,1)],[new a(0,0),new a(0,1),new a(-1,2)],[new a(0,0),new a(-1,0),new a(-2,-1)],[new a(0,0),new a(0,-1),new a(1,-2)],[new a(0,0),new a(1,1),new a(2,0)],[new a(0,0),new a(-1,1),new a(0,2)],[new a(0,0),new a(-1,-1),new a(-2,0)],[new a(0,0),new a(1,-1),new a(0,-2)]])}var r=n.prototype;return r.GenerateNewMap=function(n,e,t){for(var r=this,o=Array(n).fill(null).map((function(){return Array(e).fill(null)})),u=function(u){for(var l=!0,i=c.RandomInt(0,n),h=c.RandomInt(0,e),s=r.ARR_PATTERN_MATCH_3_CHANCE[c.RandomInt(0,r.ARR_PATTERN_MATCH_3_CHANCE.length)].map((function(n){return new a(i+n.x,h+n.y)})),w=0;w<s.length;w++){var f=s[w].x,A=s[w].y;if(f<0||f>=n||A<0||A>=e||null!=o[f][A]){l=!1;break}}if(l){var v=c.RandomInt(0,t);s.forEach((function(n){o[n.x][n.y]=v}));var p=r.GetArrResultAtArrPos(o,s);r.IsMatch3(p)&&s.forEach((function(n){o[n.x][n.y]=null}))}},l=0;l<1e3;l++)u();for(var i=0;i<n;i++)for(var h=0;h<e;h++)if(null==o[i][h]){var s=1e3,w=new a(i,h),f=void 0;do{s--;var A=c.RandomInt(0,t);o[i][h]=A;var v=this.GetArrResultAtArrPos(o,[w]);f=this.IsMatch3(v)}while(f&&s>=0);if(s<0)return alert("GenerateNewMap: Fail"),this.GenerateNewMap(n,e,t)}return console.log("map"),console.log(o),o},r.IsMatch3=function(n){var e=!1;return n.forEach((function(n){(n.ver||n.hor)&&(e=!0)})),e},r.GetArrResultAtArrPos=function(n,e){var t=this,r=[];return e.forEach((function(e){r.push(t.GetResultAtPos(n,e))})),r},r.SpawnItem=function(n,e,t,r){console.log("SpawnItem");var o,u,l=[];n.forEach((function(n,e){n.forEach((function(n,t){null==n&&l.push(new a(e,t))}))}));do{l.forEach((function(e){n[e.x][e.y]=c.RandomInt(0,r)}));var i=this.GetArrResultAtArrPos(n,l);o=this.IsMatch3(i),u=this.GetArrMatch3Chance(n,e,t)}while(!(o||u.length>0));return console.log(n),console.log(n),console.log(l),n},r.GetHint=function(n,e,t){var r=this.GetArrMatch3Chance(n,e,t);return r.length>0?r[c.RandomInt(0,r.length)]:null},r.GetResultAtPos=function(n,e){var t=e.x,r=e.y,o=n[t][r];if(null==o||o<0)return{ver:null,hor:null};t=e.x,r=e.y;var c=[];c.push(new a(t,r)),t=e.x,r=e.y;try{for(;o==n[t][++r];)c.push(new a(t,r))}catch(n){}t=e.x,r=e.y;try{for(;o==n[t][--r];)c.push(new a(t,r))}catch(n){}t=e.x,r=e.y;var u=[];u.push(new a(t,r)),t=e.x,r=e.y;try{for(;o==n[++t][r];)u.push(new a(t,r))}catch(n){}t=e.x,r=e.y;try{for(;o==n[--t][r];)u.push(new a(t,r))}catch(n){}return{ver:c.length>=3?c:null,hor:u.length>=3?u:null}},r.GetArrMatch3Chance=function(n,e,t){for(var r=this,o=[],c=function(e){for(var c=function(t){r.ARR_PATTERN_MATCH_3_CHANCE.forEach((function(r){var c=r.map((function(n){return new a(e+n.x,t+n.y)})),u=c.map((function(e){try{return n[e.x][e.y]}catch(n){return null}})),l=u.filter((function(n){return n==u[0]})).length==u.length;null!=u&&l&&o.push(c)}))},u=0;u<t;u++)c(u)},u=0;u<e;u++)c(u);return o},t(n,null,[{key:"Instance",get:function(){return this.mInstance||(this.mInstance=new n),this.mInstance}}]),n}(),e(l,"mInstance",null),u=i))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/GameDefine.ts",["cc"],(function(_){"use strict";var O;return{setters:[function(_){O=_.cclegacy}],execute:function(){var e,E;_({MAP_SIZE:void 0,RESOURCES_PATH:void 0}),O._RF.push({},"d794dgBe7tKjI91/pHGUY21","GameDefine",void 0),function(_){_.PREFAB_GAME_MGR="prefabs/GameMgr"}(e||(e=_("RESOURCES_PATH",{}))),function(_){_[_.ROW=10]="ROW",_[_.COL=5]="COL",_[_.ROW_OFFSET=130]="ROW_OFFSET",_[_.COL_OFFSET=130]="COL_OFFSET"}(E||(E=_("MAP_SIZE",{})));_("NUMBER_OF_ITEM_TYPES",6),_("SWIPE_OFFSET_MIN",30),_("SWAP_DURATION",.2),_("MATCH_ANIMATION_DURATION",.2),_("FALL_DOWN_1_ROW_DURATION",.05),_("FALL_DOWN_SCALE_DURATION",.2),_("MATCH_LENGTH_4",4);O._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,c,s;return{setters:[function(e){t=e.defineProperty,n=e.createClass},function(e){r=e.cclegacy,c=e._decorator,s=e.EventTarget}],execute:function(){var o,u,E;e("EVENT_NAME",void 0),r._RF.push({},"e9f7c4ortBM2bLV0biXREMr","EventMgr",void 0);var i,a=c.ccclass;c.property,e("GAME_EVENT","GAME_EVENT");i||(i=e("EVENT_NAME",{}));e("EventMgr",a("EventMgr")((E=u=function(){function e(){}return n(e,null,[{key:"Instance",get:function(){return this.mInstance}}]),e}(),t(u,"mInstance",new s),o=E))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/GameUtilites.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"ef074qNTqJL75vNMrdzU6nl","GameUtilites",void 0);t("GameUtilites",function(){function t(){}return t.RandomInt=function(t,n){return Math.floor(t+(n-t)*Math.random())},t.IsPosInMap=function(t,n,e){return t.x>=0&&t.x<n&&t.y>=0&&t.y<e},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameDefine.ts","./FlowMgr.ts","./GameUtilites.ts","./Match3Algorithm.ts","./GameMgr.ts","./Item.ts","./EventMgr.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});