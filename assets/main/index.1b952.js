window.__require=function t(e,o,n){function r(s,a){if(!o[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var p="function"==typeof __require&&__require;if(!a&&p)return p(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var l=o[s]={exports:{}};e[s][0].call(l.exports,function(t){return r(e[s][1][t]||t)},l,l.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({BodyCollider:[function(t,e,o){"use strict";cc._RF.push(e,"084aa+xWsZP+aOwuPW4SAbT","BodyCollider");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.BodyCollider=void 0;var s=t("../GameDefine"),a=t("./BulletStats"),c=t("./Enemy"),p=t("./Player"),l=cc._decorator,h=l.ccclass,u=l.property,E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsHead=!1,e}return r(e,t),e.prototype.start=function(){},e.prototype.onBeginContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET:var n=o.getComponent(a.BulletStats);if(null!=n&&null!=n.GetPlayerId()){var r=cc.v2();o.body.getWorldPosition(r),null!=this.mEnemy&&n.GetCountEnter(this.mEnemy.node.uuid)<=0&&this.mEnemy.GetShot(n.GetPlayerId(),n.GetDamage(),this.mIsHead,r,o.body.linearVelocity),null!=this.mPlayer&&n.GetCountEnter(this.mPlayer.node.uuid)<=0&&this.mPlayer.GetShot(n.GetPlayerId(),n.GetDamage(),this.mIsHead,r,o.body.linearVelocity),null!=this.mEnemy&&n.AddCountEnter(this.mEnemy.node.uuid,1),null!=this.mPlayer&&n.AddCountEnter(this.mPlayer.node.uuid,1)}}},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case s.COLLIDER_TAG.BULLET:var n=o.getComponent(a.BulletStats);null!=n&&null!=n.GetPlayerId()&&(null!=this.mEnemy&&n.AddCountEnter(this.mEnemy.node.uuid,-1),null!=this.mPlayer&&n.AddCountEnter(this.mPlayer.node.uuid,-1))}},i([u(c.Enemy)],e.prototype,"mEnemy",void 0),i([u(p.Player)],e.prototype,"mPlayer",void 0),i([u(Boolean)],e.prototype,"mIsHead",void 0),i([h],e)}(cc.Component);o.BodyCollider=E,cc._RF.pop()},{"../GameDefine":"GameDefine","./BulletStats":"BulletStats","./Enemy":"Enemy","./Player":"Player"}],BotControl:[function(t,e,o){"use strict";cc._RF.push(e,"84677L6btdLNKP1YygpaBNB","BotControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.BotControl=void 0;var s,a=t("../GameDefine"),c=t("./Player"),p=cc._decorator,l=p.ccclass;p.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CHECK_PLAYER_READY_AIM=2]="CHECK_PLAYER_READY_AIM",t[t.DELAY_AIM=3]="DELAY_AIM",t[t.AIM=4]="AIM",t[t.SHOOT=5]="SHOOT"}(s||(s={}));var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mPlayer=this.node.getComponent(c.Player);break;case s.CHECK_PLAYER_READY_AIM:break;case s.DELAY_AIM:this.mPercent=a.GameDefine.RandomInRange(.1,.2);break;case s.AIM:this.mPercent=a.GameDefine.RandomInRange(.1,.2);var e=this.node.parent.convertToWorldSpaceAR(this.node.position);e.x+=a.GameDefine.RandomInRange(-500,500),e.y+=a.GameDefine.RandomInRange(-500,500),this.mPlayer.SetAimPosition(new cc.Vec2(e.x,e.y)),this.mPlayer.SetStateAim();break;case s.SHOOT:this.mPlayer.SetStateShoot()}},e.prototype.update=function(){},e.prototype.lateUpdate=function(t){switch(this.mState){case s.INIT:this.SetState(s.CHECK_PLAYER_READY_AIM);break;case s.CHECK_PLAYER_READY_AIM:this.mPlayer.IsStateReadyAim()&&this.SetState(s.DELAY_AIM);break;case s.DELAY_AIM:this.mPercent-=t,this.mPercent<=0&&this.SetState(s.AIM);break;case s.AIM:this.mPercent-=t,this.mPercent<=0&&this.SetState(s.SHOOT);break;case s.SHOOT:this.SetState(s.CHECK_PLAYER_READY_AIM)}},i([l],e)}(cc.Component);o.BotControl=h,cc._RF.pop()},{"../GameDefine":"GameDefine","./Player":"Player"}],BulletStats:[function(t,e,o){"use strict";cc._RF.push(e,"406a3IY38VBUbriWMCR70aZ","BulletStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletStats=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mDamage=-1,e.mBounceCount=0,e.mSpeed=0,e.mCountEnter={},e}return r(e,t),e.prototype.SetPlayerId=function(t){this.mPlayerId=t},e.prototype.GetPlayerId=function(){return this.mPlayerId},e.prototype.GetDamage=function(){return this.mDamage},e.prototype.GetBounceCount=function(){return this.mBounceCount},e.prototype.GetSpeed=function(){return this.mSpeed},e.prototype.GetCountEnter=function(t){return null==this.mCountEnter[t]&&(this.mCountEnter[t]=0),this.mCountEnter[t]},e.prototype.AddCountEnter=function(t,e){null!=this.mCountEnter[t]&&(this.mCountEnter[t]+=e)},i([c(cc.Float)],e.prototype,"mDamage",void 0),i([c(cc.Float)],e.prototype,"mBounceCount",void 0),i([c(cc.Float)],e.prototype,"mSpeed",void 0),i([a],e)}(cc.Component);o.BulletStats=p,cc._RF.pop()},{}],BulletUIContainer:[function(t,e,o){"use strict";cc._RF.push(e,"dd41bbFSBdGGogTlvmBfH+E","BulletUIContainer");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletUIContainer=void 0;var s,a=t("../MessageMgr"),c=cc._decorator,p=c.ccclass,l=c.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE"})(s||(s={}));var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){a.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){a.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:case s.ACTIVE:}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:}},e.prototype.OnMessage=function(){},i([l(cc.Prefab)],e.prototype,"mBulletUI",void 0),i([p],e)}(cc.Component);o.BulletUIContainer=h,cc._RF.pop()},{"../MessageMgr":"MessageMgr"}],BulletUI:[function(t,e,o){"use strict";cc._RF.push(e,"2ca71eq2OpApJFhPf6iNQlr","BulletUI");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},i([c(cc.Label)],e.prototype,"label",void 0),i([c],e.prototype,"text",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],Bullet_01:[function(t,e,o){"use strict";cc._RF.push(e,"8ad8801h7ZFpZZHqejQu/4g","Bullet_01");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.END=3]="END"})(s||(s={}));var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:var e=this.mRigidBody.getWorldRotation()/180*Math.PI;this.mRigidBody.linearVelocity=new cc.Vec2(Math.cos(e)*this.mBulletStats.GetSpeed(),-Math.sin(e)*this.mBulletStats.GetSpeed()),this.mBounceCount=this.mBulletStats.GetBounceCount(),c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,1);break;case s.ACTIVE:break;case s.END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:this.UpdateRotation(),this.mBounceCount<=0&&this.SetState(s.END);break;case s.END:}},e.prototype.onBeginContact=function(){},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case a.COLLIDER_TAG.PLATFORM:this.mBounceCount--}},e.prototype.UpdateRotation=function(){var t=this.mRigidBody.linearVelocity;this.node.angle=Math.atan2(t.y,t.x)/Math.PI*180},i([u(cc.RigidBody)],e.prototype,"mRigidBody",void 0),i([u(p.BulletStats)],e.prototype,"mBulletStats",void 0),i([h],e)}(cc.Component);o.default=E,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats"}],Bullet_02_Sub:[function(t,e,o){"use strict";cc._RF.push(e,"dcceb7HW3ROWb5GHcMeqvFK","Bullet_02_Sub");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Bullet_02_Sub=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.EXPLOSIVE=3]="EXPLOSIVE",t[t.END=4]="END"})(s||(s={}));var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,1),this.mBounceCount=this.mBulletStats.GetBounceCount(),this.mRigidBody.linearVelocity=new cc.Vec2(this.mBulletStats.GetSpeed()*Math.cos(this.mStartAngleSpeed/180*Math.PI),this.mBulletStats.GetSpeed()*Math.sin(this.mStartAngleSpeed/180*Math.PI));break;case s.ACTIVE:break;case s.EXPLOSIVE:var e=cc.instantiate(this.mPrefabExplosive);e.parent=this.node.parent,e.position=this.node.position,e.getComponent(p.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId());break;case s.END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:this.mBounceCount<=0&&this.SetState(s.EXPLOSIVE);break;case s.EXPLOSIVE:this.SetState(s.END);break;case s.END:}},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case a.COLLIDER_TAG.PLATFORM:this.mBounceCount--}},e.prototype.SetSpeedAngle=function(t){this.mStartAngleSpeed=t},i([u(cc.RigidBody)],e.prototype,"mRigidBody",void 0),i([u(p.BulletStats)],e.prototype,"mBulletStats",void 0),i([u(cc.Prefab)],e.prototype,"mPrefabExplosive",void 0),i([h],e)}(cc.Component);o.Bullet_02_Sub=E,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats"}],Bullet_02:[function(t,e,o){"use strict";cc._RF.push(e,"afd55bUIBhE0KuO44yapcf6","Bullet_02");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=t("./Bullet_02_Sub"),h=cc._decorator,u=h.ccclass,E=h.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.EXPLOSIVE=3]="EXPLOSIVE",t[t.END=4]="END"})(s||(s={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.BULLET_SUB_NUMBER=3,e.BULLET_SUB_ANGLE_OFFSET=15,e}return r(e,t),e.prototype.onEnable=function(){var t=a.GameDefine.GetGameContainer();t&&(t.on(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.on(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this))},e.prototype.onDisable=function(){var t=a.GameDefine.GetGameContainer();t&&(t.off(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.off(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this))},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:var e=this.mRigidBody.getWorldRotation()/180*Math.PI;this.mRigidBody.linearVelocity=new cc.Vec2(Math.cos(e)*this.mBulletStats.GetSpeed(),-Math.sin(e)*this.mBulletStats.GetSpeed()),this.mBounceCount=this.mBulletStats.GetBounceCount(),c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,1);break;case s.ACTIVE:break;case s.EXPLOSIVE:for(var o=this.mRigidBody.linearVelocity,n=(e=Math.atan2(o.y,o.x)/Math.PI*180,0);n<this.BULLET_SUB_NUMBER;n++){var r=cc.instantiate(this.mPrefabBulletSub);r.parent=this.node.parent,r.position=this.node.position,r.getComponent(l.Bullet_02_Sub).SetSpeedAngle(e+(-(this.BULLET_SUB_NUMBER-1)/2+n)*this.BULLET_SUB_ANGLE_OFFSET),r.getComponent(p.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId())}break;case s.END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:this.UpdateRotation(),this.mBounceCount<=0&&this.SetState(s.EXPLOSIVE);break;case s.EXPLOSIVE:this.SetState(s.END);break;case s.END:}},e.prototype.onBeginContact=function(){},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case a.COLLIDER_TAG.PLATFORM:this.mBounceCount--}},e.prototype.OnMouseDown=function(){switch(this.mState){case s.ACTIVE:this.mBounceCount=0}},e.prototype.UpdateRotation=function(){var t=this.mRigidBody.linearVelocity;this.node.angle=Math.atan2(t.y,t.x)/Math.PI*180},i([E(cc.RigidBody)],e.prototype,"mRigidBody",void 0),i([E(p.BulletStats)],e.prototype,"mBulletStats",void 0),i([E(cc.Prefab)],e.prototype,"mPrefabBulletSub",void 0),i([u],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats","./Bullet_02_Sub":"Bullet_02_Sub"}],Bullet_03:[function(t,e,o){"use strict";cc._RF.push(e,"7cb05N8bYJNOKFoyXoCVyRB","Bullet_03");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.EXPLOSIVE=3]="EXPLOSIVE",t[t.END=4]="END"})(s||(s={}));var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:var e=this.mRigidBody.getWorldRotation()/180*Math.PI;this.mRigidBody.linearVelocity=new cc.Vec2(Math.cos(e)*this.mBulletStats.GetSpeed(),-Math.sin(e)*this.mBulletStats.GetSpeed()),this.mBounceCount=this.mBulletStats.GetBounceCount(),c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,1);break;case s.ACTIVE:break;case s.EXPLOSIVE:var o=cc.instantiate(this.mPrefabExplosive);o.parent=this.node.parent,o.position=this.node.position,o.getComponent(p.BulletStats).SetPlayerId(this.mBulletStats.GetPlayerId());break;case s.END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:this.UpdateRotation(),this.mBounceCount<=0&&this.SetState(s.EXPLOSIVE);break;case s.EXPLOSIVE:this.SetState(s.END);break;case s.END:}},e.prototype.onBeginContact=function(){},e.prototype.onEndContact=function(t,e,o){switch(o.tag){case a.COLLIDER_TAG.PLATFORM:this.mBounceCount--}},e.prototype.UpdateRotation=function(){var t=this.mRigidBody.linearVelocity;this.node.angle=Math.atan2(t.y,t.x)/Math.PI*180},i([u(cc.RigidBody)],e.prototype,"mRigidBody",void 0),i([u(p.BulletStats)],e.prototype,"mBulletStats",void 0),i([u(cc.Prefab)],e.prototype,"mPrefabExplosive",void 0),i([h],e)}(cc.Component);o.default=E,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats"}],EnemyStats:[function(t,e,o){"use strict";cc._RF.push(e,"c575fsP2jVAF5ZgdygxzWgS","EnemyStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.EnemyStats=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mHealth=1,e}return r(e,t),e.prototype.start=function(){this.SetHealth(this.mHealth)},e.prototype.AddHealth=function(t){this.SetHealth(this.mHealth+t)},e.prototype.IsDead=function(){return this.mHealth<=0},e.prototype.SetHealth=function(t){this.mHealth=Math.max(t,0)},i([c(Number)],e.prototype,"mHealth",void 0),i([a],e)}(cc.Component);o.EnemyStats=p,cc._RF.pop()},{}],Enemy:[function(t,e,o){"use strict";cc._RF.push(e,"7095832x6JHT4GsGCuZEQkc","Enemy");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Enemy=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./EnemyStats"),l=t("./RagDoll"),h=cc._decorator,u=h.ccclass,E=h.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.IDLE=2]="IDLE",t[t.DEAD=3]="DEAD"})(s||(s={}));var _=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.node.parent.scaleX<0&&(this.node.parent.scaleX*=-1,this.node.scaleX*=-1),this.UpdateEnableBodyCollider(),c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_ENEMY,1);break;case s.IDLE:this.mSpine.setAnimation(0,"Idle",!0);break;case s.DEAD:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_ENEMY,-1),this.MakeRagdoll(),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.IDLE);break;case s.IDLE:case s.DEAD:}},e.prototype.GetShot=function(t,e,o,n,r){switch(this.mState){case s.IDLE:this.mEnemyStats.AddHealth(e),this.mEnemyStats.IsDead()&&(this.mBulletPhysicPos=n,this.mBulletSpeed=r,this.SetState(s.DEAD))}},e.prototype.UpdateEnableBodyCollider=function(){this.mContainerCollider_L.active=this.node.scaleX<0,this.mContainerCollider_R.active=this.node.scaleX>=0},e.prototype.MakeRagdoll=function(){var t=this.node.scaleX<0?this.mPrefabRagdoll_L:this.mPrefabRagdoll_R,e=cc.instantiate(t);e.parent=this.node.parent,e.position=this.node.position,e.getComponent(l.RagDoll).SetForce(this.mBulletSpeed,this.mBulletPhysicPos)},i([E(sp.Skeleton)],e.prototype,"mSpine",void 0),i([E(cc.Node)],e.prototype,"mContainerCollider_L",void 0),i([E(cc.Node)],e.prototype,"mContainerCollider_R",void 0),i([E(p.EnemyStats)],e.prototype,"mEnemyStats",void 0),i([E(cc.Prefab)],e.prototype,"mPrefabRagdoll_L",void 0),i([E(cc.Prefab)],e.prototype,"mPrefabRagdoll_R",void 0),i([u],e)}(cc.Component);o.Enemy=_,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./EnemyStats":"EnemyStats","./RagDoll":"RagDoll"}],Explosive:[function(t,e,o){"use strict";cc._RF.push(e,"cdd18mhhy1BkLQhMCFnIsOf","Explosive");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass;p.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.END=3]="END"}(s||(s={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsAnimationComplete=!1,e}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,1);break;case s.ACTIVE:break;case s.END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_BULLET_FLYING,-1),this.node.destroy()}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:this.mIsAnimationComplete&&this.SetState(s.END);break;case s.END:}},e.prototype.OnAnimationComplete=function(){this.mIsAnimationComplete=!0},i([l],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],GameDefine:[function(t,e,o){"use strict";cc._RF.push(e,"08b35U6NHVOx4wUFRw6kkob","GameDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.COLLIDER_TAG=o.GAME_MESSAGE=o.GameDefine=void 0;var n=function(){function t(){}return t.GetCanvasGame=function(){return cc.find("CanvasGame")},t.GetGameContainer=function(){return cc.find("CanvasGame/GameContainer")},t.CanvasGameUpdateAlignment=function(){var t=this.GetCanvasGame();if(null!=t){var e=t.getComponent(cc.Widget);null!=e&&e.updateAlignment()}},t.ConsoleLogVec2=function(t){console.log(Math.round(t.x),Math.round(t.y))},t.MoveToTarget=function(t,e,o,n){return o=Math.abs(o),t<e?Math.min(t+o*n,e):t>e?Math.max(t-o*n,e):t},t.ConfuseArray=function(t,e){if(void 0===e&&(e=10),t.length<=1)return t;for(var o=0;o<e;o++){var n=Math.floor(Math.random()*t.length),r=Math.floor(Math.random()*t.length),i=t[n];t[n]=t[r],t[r]=i}return t},t.Clamp=function(t,e,o){var n=Math.max(e,o),r=Math.min(e,o);return t>n?n:t<r?r:t},t.RandomInRange=function(t,e){return t+Math.random()*(e-t)},t.IS_DEBUG=!0,t}();o.GameDefine=n,function(t){t[t.STATE_MAIN_MENU=0]="STATE_MAIN_MENU",t[t.STATE_INGAME=1]="STATE_INGAME",t[t.STATE_END_GAME_WIN=2]="STATE_END_GAME_WIN",t[t.STATE_END_GAME_LOSE=3]="STATE_END_GAME_LOSE",t[t.STATE_DUEL_MODE=4]="STATE_DUEL_MODE",t[t.STATE_DUEL_MODE_WIN=5]="STATE_DUEL_MODE_WIN",t[t.STATE_DUEL_MODE_LOSE=6]="STATE_DUEL_MODE_LOSE",t[t.STATE_DUEL_MODE_DRAW=7]="STATE_DUEL_MODE_DRAW",t[t.CLEAR_LEVEL=8]="CLEAR_LEVEL",t[t.LEVEL_IS_CLEARED=9]="LEVEL_IS_CLEARED",t[t.LOAD_LEVEL=10]="LOAD_LEVEL",t[t.LOAD_LEVEL_DUEL_MODE=11]="LOAD_LEVEL_DUEL_MODE",t[t.ADD_TO_PLAYER_LIST=12]="ADD_TO_PLAYER_LIST",t[t.REMOVE_FROM_PLAYER_LIST=13]="REMOVE_FROM_PLAYER_LIST",t[t.ADD_TO_SHOOT_LIST=14]="ADD_TO_SHOOT_LIST",t[t.REMOVE_FROM_SHOOT_LIST=15]="REMOVE_FROM_SHOOT_LIST",t[t.START_PLAYER_TURN=16]="START_PLAYER_TURN",t[t.END_PLAYER_TURN=17]="END_PLAYER_TURN",t[t.PLAYER_ANIMATION_IDLE=18]="PLAYER_ANIMATION_IDLE",t[t.PLAYER_ANIMATION_AIM=19]="PLAYER_ANIMATION_AIM",t[t.PLAYER_START_AIM=20]="PLAYER_START_AIM",t[t.PLAYER_END_AIM=21]="PLAYER_END_AIM",t[t.PLAYER_SHOOT=22]="PLAYER_SHOOT",t[t.PLAYER_WIN=23]="PLAYER_WIN",t[t.PLAYER_LOSE=24]="PLAYER_LOSE",t[t.AIM_POSITION=25]="AIM_POSITION",t[t.AIM_RAY_INFO=26]="AIM_RAY_INFO",t[t.ADD_BULLET_FLYING=27]="ADD_BULLET_FLYING",t[t.ADD_ENEMY=28]="ADD_ENEMY",t[t.BULLET_INFO=29]="BULLET_INFO",t[t.DUEL_MODE_DETECT_RESULT=30]="DUEL_MODE_DETECT_RESULT",t[t.DUEL_MODE_WIN=31]="DUEL_MODE_WIN",t[t.DUEL_MODE_LOSE=32]="DUEL_MODE_LOSE",t[t.BULLET_UI_AMOUT_OF_BULLET_MAX=33]="BULLET_UI_AMOUT_OF_BULLET_MAX"}(o.GAME_MESSAGE||(o.GAME_MESSAGE={})),o.COLLIDER_TAG={PLATFORM:1,BULLET:11},cc._RF.pop()},{}],GameSetup:[function(t,e,o){"use strict";cc._RF.push(e,"8c7e3ctRExBHZASntnI+d/v","GameSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./GameDefine"),a=cc._decorator,c=a.ccclass,p=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onLoad=function(){this.SetupPhysic()},e.prototype.SetupPhysic=function(){cc.director.getPhysicsManager().enabled=!0,s.GameDefine.IS_DEBUG&&cc.debug.isDisplayStats()&&(cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit)},i([c],e)}(cc.Component));o.default=p,cc._RF.pop()},{"./GameDefine":"GameDefine"}],LevelMgr:[function(t,e,o){"use strict";cc._RF.push(e,"ef973JA221LNJUezXdxmVkK","LevelMgr");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelMgr=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("../UserProfile"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CLEAR_LEVEL=2]="CLEAR_LEVEL",t[t.LEVEL_IS_CLEARED=3]="LEVEL_IS_CLEARED",t[t.LOAD_LEVEL=4]="LOAD_LEVEL",t[t.LOAD_LEVEL_DUEL_MODE=5]="LOAD_LEVEL_DUEL_MODE"})(s||(s={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mArrPrefabLevel=[],e.mArrPrefabLevelDuelMode=[],e}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:break;case s.CLEAR_LEVEL:this.mGameContainer.destroyAllChildren();break;case s.LEVEL_IS_CLEARED:c.MessageMgr.SendMessage(a.GAME_MESSAGE.LEVEL_IS_CLEARED);break;case s.LOAD_LEVEL:var e=p.UserProfile.GetInstance().GetCurrentLevel();e>=this.mArrPrefabLevel.length&&(p.UserProfile.GetInstance().SetCurrentLevel(0),e=p.UserProfile.GetInstance().GetCurrentLevel()),cc.instantiate(this.mArrPrefabLevel[e]).parent=this.mGameContainer;break;case s.LOAD_LEVEL_DUEL_MODE:var o=Math.floor(Math.random()*this.mArrPrefabLevelDuelMode.length);cc.instantiate(this.mArrPrefabLevelDuelMode[o]).parent=this.mGameContainer}},e.prototype.update=function(){switch(this.mState){case s.INIT:break;case s.CLEAR_LEVEL:this.mGameContainer.childrenCount<=0&&this.SetState(s.LEVEL_IS_CLEARED);break;case s.LEVEL_IS_CLEARED:case s.LOAD_LEVEL:case s.LOAD_LEVEL_DUEL_MODE:}},e.prototype.OnMessage=function(t){switch(t){case a.GAME_MESSAGE.CLEAR_LEVEL:this.SetState(s.CLEAR_LEVEL);break;case a.GAME_MESSAGE.LOAD_LEVEL:this.SetState(s.LOAD_LEVEL);break;case a.GAME_MESSAGE.LOAD_LEVEL_DUEL_MODE:this.SetState(s.LOAD_LEVEL_DUEL_MODE)}},i([u(cc.Node)],e.prototype,"mGameContainer",void 0),i([u([cc.Prefab])],e.prototype,"mArrPrefabLevel",void 0),i([u([cc.Prefab])],e.prototype,"mArrPrefabLevelDuelMode",void 0),i([h],e)}(cc.Component);o.LevelMgr=E,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","../UserProfile":"UserProfile"}],MessageMgr:[function(t,e,o){"use strict";cc._RF.push(e,"0684bqrPlhKC6ZlAIhmE8+u","MessageMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.MessageMgr=void 0;var n=function(){function t(){}return t.AddListener=function(t,e){this.arrListener.push({callback:t,id:e})},t.RemoveListener=function(t){for(var e=this.arrListener.length,o=0;o<e;o++)if(null!=this.arrListener[o]&&this.arrListener[o].id==t){this.isRemoveNull=!0,this.arrListener[o]=null;break}},t.SendMessage=function(t,e){this.countCallingMessage++;for(var o=this.arrListener.length,n=0;n<o;n++)try{null!=this.arrListener[n]&&this.arrListener[n].callback(t,e)}catch(r){console.log(r)}this.countCallingMessage--,this.countCallingMessage<=0&&this.isRemoveNull&&(this.isRemoveNull=!1,this.arrListener=this.arrListener.filter(function(t){return null!=t}))},t.arrListener=[],t.countCallingMessage=0,t.isRemoveNull=!1,t}();o.MessageMgr=n,cc._RF.pop()},{}],NewScript:[function(t,e,o){"use strict";cc._RF.push(e,"3bd89xExkxCjqOY0XVrW3Yy","NewScript");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return r(e,t),e.prototype.start=function(){},i([c(cc.Label)],e.prototype,"label",void 0),i([c],e.prototype,"text",void 0),i([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{}],PlayerAimRay:[function(t,e,o){"use strict";cc._RF.push(e,"ff444+LUlJNk7rlqzoooZTg","PlayerAimRay");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerAimRay=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./BulletStats"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.SHOW=2]="SHOW",t[t.HIDE=3]="HIDE"})(s||(s={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.OFFSET_AIM_POINT=40,e.NUMBER_AIM_POINT=Math.ceil(1280*Math.sqrt(2)/e.OFFSET_AIM_POINT),e}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mAimPointContainer.active=!1,this.MakeAimPoints();break;case s.SHOW:this.mAimPointContainer.active=!0;break;case s.HIDE:this.mAimPointContainer.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.HIDE);break;case s.SHOW:case s.HIDE:}},e.prototype.OnMessage=function(t,e){switch(t){case a.GAME_MESSAGE.PLAYER_START_AIM:e.playerId==this.mPlayerId&&this.SetState(s.SHOW);break;case a.GAME_MESSAGE.PLAYER_END_AIM:e.playerId==this.mPlayerId&&this.SetState(s.HIDE);break;case a.GAME_MESSAGE.AIM_RAY_INFO:if(e.playerId==this.mPlayerId){var o=this.node.parent.convertToNodeSpaceAR(e.gunBarrelPosition);this.node.x=o.x,this.node.y=o.y;var n=this.node.parent.convertToNodeSpaceAR(e.gunPosition),r=this.node.parent.convertToNodeSpaceAR(e.aimPosition);this.mAngle=Math.atan2(r.y-n.y,r.x-n.x)/Math.PI*180,this.AlignAimPoints(this.mAngle,this.mBulletSpeed,this.mBulletGravity)}break;case a.GAME_MESSAGE.PLAYER_SHOOT:if(e.playerId==this.mPlayerId){var i=cc.instantiate(e.bulletPrefab);i.parent=e.bulletContainer,o=e.bulletContainer.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(new cc.Vec2(this.node.x,this.node.y))),i.x=o.x,i.y=o.y,i.angle=this.mAngle,i.getComponent(p.BulletStats).SetPlayerId(this.mPlayerId)}break;case a.GAME_MESSAGE.BULLET_INFO:if(e.playerId==this.mPlayerId){var c=cc.instantiate(e.prefabBullet);this.mBulletSpeed=c.getComponent(p.BulletStats).GetSpeed(),this.mBulletGravity=cc.director.getPhysicsManager().gravity.multiplyScalar(c.getComponent(cc.RigidBody).gravityScale),c.destroy()}}},e.prototype.SetPlayerId=function(t){this.mPlayerId=t},e.prototype.MakeAimPoints=function(){for(var t=0;t<this.NUMBER_AIM_POINT;t++){var e=cc.instantiate(this.mPrefabAimPoint);e.parent=this.mAimPointContainer,e.x=t*this.OFFSET_AIM_POINT,e.y=0}},e.prototype.AlignAimPoints=function(t,e,o){for(var n=e*Math.cos(t/180*Math.PI),r=e*Math.sin(t/180*Math.PI),i=0;i<this.NUMBER_AIM_POINT;i++){var s=i*(this.OFFSET_AIM_POINT/e),a=this.mAimPointContainer.children[i];a.x=n*s+o.x*s*s/2,a.y=r*s+o.y*s*s/2}},i([u(cc.Node)],e.prototype,"mAimPointContainer",void 0),i([u(cc.Prefab)],e.prototype,"mPrefabAimPoint",void 0),i([h],e)}(cc.Component);o.PlayerAimRay=E,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./BulletStats":"BulletStats"}],PlayerAimTarget:[function(t,e,o){"use strict";cc._RF.push(e,"5e162US3INAJrRxi/it/J3G","PlayerAimTarget");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerAimTarget=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.SHOW=2]="SHOW",t[t.HIDE=3]="HIDE"})(s||(s={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mSprite.active=!1;break;case s.SHOW:this.mSprite.active=!0;break;case s.HIDE:this.mSprite.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.HIDE);break;case s.SHOW:case s.HIDE:}},e.prototype.OnMessage=function(t,e){switch(t){case a.GAME_MESSAGE.AIM_RAY_INFO:if(e.playerId==this.mPlayerId){var o=this.node.parent.convertToNodeSpaceAR(e.aimPosition);this.node.x=o.x,this.node.y=o.y}break;case a.GAME_MESSAGE.PLAYER_START_AIM:e.playerId==this.mPlayerId&&this.SetState(s.SHOW);break;case a.GAME_MESSAGE.PLAYER_END_AIM:e.playerId==this.mPlayerId&&this.SetState(s.HIDE)}},e.prototype.SetPlayerId=function(t){this.mPlayerId=t},i([h(cc.Node)],e.prototype,"mSprite",void 0),i([l],e)}(cc.Component);o.PlayerAimTarget=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],PlayerCreator:[function(t,e,o){"use strict";cc._RF.push(e,"19b1dTBGoVLtLZ4SfTRXzYe","PlayerCreator");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerSetup=void 0;var s=t("./BotControl"),a=t("./UserControl"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsUser=!0,e}return r(e,t),e.prototype.start=function(){var t=cc.instantiate(this.mPrefabPlayer);t.parent=this.node,t.getComponent(a.UserControl).enabled=this.mIsUser,t.getComponent(s.BotControl).enabled=!this.mIsUser},i([l(Boolean)],e.prototype,"mIsUser",void 0),i([p],e)}(cc.Component);o.PlayerSetup=h,cc._RF.pop()},{"./BotControl":"BotControl","./UserControl":"UserControl"}],PlayerHealthBar:[function(t,e,o){"use strict";cc._RF.push(e,"0d0b26vB51Muod1+YLaQQgG","PlayerHealthBar");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerHealthBar=void 0;var s=cc._decorator,a=s.ccclass,c=s.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.start=function(){},e.prototype.SetPercent=function(t,e){this.mSpriteFill.fillRange=t,this.mTextHealth.string=e},e.prototype.SetTextAmountOfBullet=function(t){this.mTextAmountOfBullet.string=t},i([c(cc.Sprite)],e.prototype,"mSpriteFill",void 0),i([c(cc.Label)],e.prototype,"mTextHealth",void 0),i([c(cc.Label)],e.prototype,"mTextAmountOfBullet",void 0),i([a],e)}(cc.Component);o.PlayerHealthBar=p,cc._RF.pop()},{}],PlayerSetup:[function(t,e,o){"use strict";cc._RF.push(e,"aea517Nn/ROvLfUo10qZ5sr","PlayerSetup");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerSetup=void 0;var s=t("./BotControl"),a=t("./Player"),c=t("./PlayerSpine"),p=t("./PlayerStats"),l=t("./UserControl"),h=cc._decorator,u=h.ccclass,E=h.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mIsUser=!0,e.mHealthMax=0,e.mBulletMax=0,e.mDirectionX=1,e.mPointList01=[],e.mPointList02=[],e.mPointList03=[],e.mPointList04=[],e}return r(e,t),e.prototype.start=function(){var t=this.node.getComponentInChildren(l.UserControl);t&&(t.enabled=this.mIsUser);var e=this.node.getComponentInChildren(s.BotControl);e&&(e.enabled=!this.mIsUser);var o=this.node.getComponentInChildren(p.PlayerStats);o&&(this.mHealthMax>0&&o.SetHealthMax(this.mHealthMax),this.mBulletMax>0&&o.SetAmountOfBulletMax(this.mBulletMax));var n=this.node.getComponentInChildren(c.PlayerSpine);n&&n.SetDirectionX(this.mDirectionX);var r=this.node.getComponentInChildren(a.Player);r&&(this.mPointList01.length>0&&r.AddMovePointList(this.mPointList01),this.mPointList02.length>0&&r.AddMovePointList(this.mPointList02),this.mPointList03.length>0&&r.AddMovePointList(this.mPointList03),this.mPointList04.length>0&&r.AddMovePointList(this.mPointList04))},i([E(cc.Boolean)],e.prototype,"mIsUser",void 0),i([E(cc.Integer)],e.prototype,"mHealthMax",void 0),i([E(cc.Integer)],e.prototype,"mBulletMax",void 0),i([E(cc.Integer)],e.prototype,"mDirectionX",void 0),i([E({type:[cc.Node]})],e.prototype,"mPointList01",void 0),i([E({type:[cc.Node]})],e.prototype,"mPointList02",void 0),i([E({type:[cc.Node]})],e.prototype,"mPointList03",void 0),i([E({type:[cc.Node]})],e.prototype,"mPointList04",void 0),i([u],e)}(cc.Component);o.PlayerSetup=_,cc._RF.pop()},{"./BotControl":"BotControl","./Player":"Player","./PlayerSpine":"PlayerSpine","./PlayerStats":"PlayerStats","./UserControl":"UserControl"}],PlayerSpine:[function(t,e,o){"use strict";cc._RF.push(e,"6ef82Te0h1Or5V40EqlIzYB","PlayerSpine");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerSpine=void 0;var s=t("../GameDefine"),a=t("../MessageMgr"),c=cc._decorator,p=c.ccclass,l=c.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mDirectionX=1,e}return r(e,t),e.prototype.onEnable=function(){a.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){a.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.mBoneAim=this.mSpine.findBone("Aim"),this.mBoneGunBarrel=this.mSpine.findBone("Bullet_Position")},e.prototype.OnMessage=function(t,e){switch(t){case s.GAME_MESSAGE.PLAYER_ANIMATION_IDLE:e.playerId==this.mPlayerId&&this.mSpine.setAnimation(0,"Idle",!0);break;case s.GAME_MESSAGE.PLAYER_ANIMATION_AIM:e.playerId==this.mPlayerId&&this.mSpine.setAnimation(0,"Aim",!0);break;case s.GAME_MESSAGE.AIM_POSITION:e.playerId==this.mPlayerId&&this.AimPosition(e.aimPos)}},e.prototype.SetPlayerId=function(t){this.mPlayerId=t},e.prototype.SetDirectionX=function(t){this.mDirectionX=t>=0?1:-1,this.mSpine.node.scaleX=Math.abs(this.mSpine.node.scaleX)*this.mDirectionX},e.prototype.GetDirectionX=function(){return this.mDirectionX},e.prototype.AimPosition=function(t){this.mSpine.node.scaleX=Math.abs(this.mSpine.node.scaleX);var e=this.mSpine.node.convertToNodeSpaceAR(t);this.mSpine.node.scaleX=(e.x>=0?1:-1)*Math.abs(this.mSpine.node.scaleX),this.SetDirectionX(this.mSpine.node.scaleX),this.mBoneAim.x=Math.abs(e.x),this.mBoneAim.y=e.y,this.mBoneAim.updateWorldTransform();var o=new cc.Vec2(this.mBoneAim.worldX-this.mBoneGunBarrel.worldX,this.mBoneAim.worldY-this.mBoneGunBarrel.worldY);if(o.len()>400){var n=o.normalize(),r=this.mBoneAim.parent.worldToLocal(new sp.spine.Vector2(this.mBoneGunBarrel.worldX+400*n.x,this.mBoneGunBarrel.worldY+400*n.y));this.mBoneAim.x=r.x,this.mBoneAim.y=r.y}a.MessageMgr.SendMessage(s.GAME_MESSAGE.AIM_RAY_INFO,{playerId:this.mPlayerId,gunBarrelPosition:this.mSpine.node.convertToWorldSpaceAR(new cc.Vec2(this.mBoneGunBarrel.worldX,this.mBoneGunBarrel.worldY)),gunPosition:this.mSpine.node.convertToWorldSpaceAR(new cc.Vec2(this.mBoneGunBarrel.parent.worldX,this.mBoneGunBarrel.parent.worldY)),aimPosition:t})},i([l(sp.Skeleton)],e.prototype,"mSpine",void 0),i([p],e)}(cc.Component);o.PlayerSpine=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],PlayerStats:[function(t,e,o){"use strict";cc._RF.push(e,"09e79m1jupF7Ke5+5cj4eHI","PlayerStats");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerStats=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./PlayerHealthBar"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE"})(s||(s={}));var E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.HEALTH_MAX=5,e.AMOUNT_OF_BULLET_MAX=5,e.MOVE_SPEED=400,e}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mPlayerHealthBar=this.node.getComponentInChildren(p.PlayerHealthBar),this.SetHealth(this.HEALTH_MAX),this.SetAmountOfBullet(this.AMOUNT_OF_BULLET_MAX),c.MessageMgr.SendMessage(a.GAME_MESSAGE.BULLET_UI_AMOUT_OF_BULLET_MAX,this.AMOUNT_OF_BULLET_MAX);break;case s.ACTIVE:}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:}},e.prototype.SetHealthMax=function(t){this.HEALTH_MAX=t},e.prototype.SetAmountOfBulletMax=function(t){this.AMOUNT_OF_BULLET_MAX=t},e.prototype.AddHealth=function(t){this.SetHealth(this.mHealth+t)},e.prototype.IsDeath=function(){return this.mHealth<=0},e.prototype.AddAmountOfBullet=function(t){this.SetAmountOfBullet(this.mAmountOfBullet+t)},e.prototype.IsOutOfBullet=function(){return this.mAmountOfBullet<=0},e.prototype.GetMoveSpeed=function(){return this.MOVE_SPEED},e.prototype.SetHealth=function(t){this.mHealth=Math.max(t,0),this.mPlayerHealthBar.SetPercent(a.GameDefine.Clamp(this.mHealth/this.HEALTH_MAX,0,1),this.mHealth+"/"+this.HEALTH_MAX)},e.prototype.SetAmountOfBullet=function(t){this.mAmountOfBullet=Math.max(t,0),this.mPlayerHealthBar.SetTextAmountOfBullet(this.mAmountOfBullet+"/"+this.AMOUNT_OF_BULLET_MAX)},i([u(cc.Integer)],e.prototype,"HEALTH_MAX",void 0),i([u(cc.Integer)],e.prototype,"AMOUNT_OF_BULLET_MAX",void 0),i([h],e)}(cc.Component);o.PlayerStats=E,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./PlayerHealthBar":"PlayerHealthBar"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"582b4q/5NRNRLVIbxM0THID","Player");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("./PlayerAimRay"),l=t("./PlayerAimTarget"),h=t("./PlayerSpine"),u=t("./PlayerStats"),E=t("./UserControl"),_=cc._decorator,f=_.ccclass,S=_.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.IDLE=2]="IDLE",t[t.READY_AIM=3]="READY_AIM",t[t.AIM=4]="AIM",t[t.SHOOT=5]="SHOOT",t[t.MOVE_START=6]="MOVE_START",t[t.MOVE=7]="MOVE",t[t.MOVE_END=8]="MOVE_END",t[t.WIN=9]="WIN",t[t.DEATH=10]="DEATH"})(s||(s={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mAimPosition=new cc.Vec2(0,0),e.mArrMovePointList=[],e}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState){case s.AIM:c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_END_AIM,{playerId:this.node.uuid})}switch(this.mState=t,this.mState){case s.INIT:this.mMoveListIndex=-1,this.mPlayerSpine=this.node.getComponentInChildren(h.PlayerSpine);var e=cc.instantiate(this.mPrefabAimRay);e.parent=this.node,e.getComponent(p.PlayerAimRay).SetPlayerId(this.node.uuid);for(var o=this.node.getComponentsInChildren(h.PlayerSpine),n=0;n<o.length;n++)o[n].SetPlayerId(this.node.uuid);var r=this.node.getComponentsInChildren(l.PlayerAimTarget);for(n=0;n<r.length;n++)r[n].SetPlayerId(this.node.uuid);c.MessageMgr.SendMessage(a.GAME_MESSAGE.BULLET_INFO,{playerId:this.node.uuid,prefabBullet:this.mPrefabBullet}),c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_TO_PLAYER_LIST,this.node.uuid),c.MessageMgr.SendMessage(a.GAME_MESSAGE.ADD_TO_SHOOT_LIST,this.node.uuid);break;case s.IDLE:c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_ANIMATION_IDLE,{playerId:this.node.uuid}),c.MessageMgr.SendMessage(a.GAME_MESSAGE.END_PLAYER_TURN,this.node.uuid),this.mPlayerStats.IsOutOfBullet()&&c.MessageMgr.SendMessage(a.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST,this.node.uuid);break;case s.READY_AIM:break;case s.AIM:c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_ANIMATION_AIM,{playerId:this.node.uuid}),c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_START_AIM,{playerId:this.node.uuid});break;case s.SHOOT:this.mPercent=0,this.mCountBulletFlying=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_ANIMATION_IDLE,{playerId:this.node.uuid}),c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_SHOOT,{playerId:this.node.uuid,bulletContainer:this.node.parent,bulletPrefab:this.mPrefabBullet}),this.mPlayerStats.AddAmountOfBullet(-1);break;case s.MOVE_START:this.mArrMovePointList.length>0?(this.mMoveListIndex++,this.mMovePointIndex=-1,this.mMovePointList=this.mArrMovePointList[this.mMoveListIndex%this.mArrMovePointList.length],this.SetState(s.MOVE)):this.SetState(s.MOVE_END);break;case s.MOVE:this.mMovePointIndex++,this.mMovePointIndex<this.mMovePointList.length?(this.mMoveTarget=this.mMovePointList[this.mMovePointIndex],this.mPlayerSpine.SetDirectionX(this.mMoveTarget.x-this.node.x)):this.SetState(s.MOVE_END);break;case s.MOVE_END:this.SetState(s.IDLE);break;case s.WIN:break;case s.DEATH:c.MessageMgr.SendMessage(a.GAME_MESSAGE.REMOVE_FROM_PLAYER_LIST,this.node.uuid),c.MessageMgr.SendMessage(a.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST,this.node.uuid),this.node.destroy()}},e.prototype.update=function(t){switch(this.mState){case s.INIT:this.SetState(s.IDLE);break;case s.IDLE:this.UpdateColliderDirection(),this.mPlayerStats.IsDeath()&&this.SetState(s.DEATH);break;case s.READY_AIM:this.UpdateColliderDirection();break;case s.AIM:this.UpdateAim(),this.UpdateColliderDirection();break;case s.SHOOT:this.mPercent=this.mCountBulletFlying<=0?a.GameDefine.MoveToTarget(this.mPercent,1,1/.3,t):0,this.UpdateColliderDirection(),this.mCountBulletFlying<=0&&this.mPercent>=1&&this.SetState(s.MOVE_START);break;case s.MOVE_START:this.UpdateColliderDirection();break;case s.MOVE:this.UpdateMove(t),this.UpdateColliderDirection(),this.node.x==this.mMoveTarget.x&&this.node.y==this.mMoveTarget.y&&this.SetState(s.MOVE);break;case s.MOVE_END:this.UpdateColliderDirection();break;case s.WIN:case s.DEATH:}},e.prototype.OnMessage=function(t,e){switch(t){case a.GAME_MESSAGE.ADD_BULLET_FLYING:switch(this.mState){case s.SHOOT:this.mCountBulletFlying+=e}break;case a.GAME_MESSAGE.PLAYER_WIN:switch(this.mState){case s.IDLE:case s.READY_AIM:case s.AIM:case s.SHOOT:case s.MOVE_START:case s.MOVE:case s.MOVE_END:this.SetState(s.WIN)}break;case a.GAME_MESSAGE.START_PLAYER_TURN:switch(this.mState){case s.IDLE:e==this.node.uuid&&this.SetState(s.READY_AIM)}break;case a.GAME_MESSAGE.DUEL_MODE_DETECT_RESULT:switch(this.mState){case s.IDLE:case s.READY_AIM:case s.AIM:case s.SHOOT:case s.MOVE_START:case s.MOVE:case s.MOVE_END:e==this.node.uuid&&(this.node.getComponent(E.UserControl).enabled?c.MessageMgr.SendMessage(a.GAME_MESSAGE.DUEL_MODE_WIN):c.MessageMgr.SendMessage(a.GAME_MESSAGE.DUEL_MODE_LOSE))}}},e.prototype.IsStateReadyAim=function(){return this.mState==s.READY_AIM},e.prototype.SetStateAim=function(){switch(this.mState){case s.READY_AIM:this.SetState(s.AIM)}},e.prototype.SetStateShoot=function(){switch(this.mState){case s.AIM:this.SetState(s.SHOOT)}},e.prototype.SetAimPosition=function(t){switch(this.mState){case s.READY_AIM:case s.AIM:this.mAimPosition=t}},e.prototype.GetShot=function(t,e){switch(this.mState){case s.IDLE:t!=this.node.uuid&&this.mPlayerStats.AddHealth(e)}},e.prototype.AddMovePointList=function(t){this.mArrMovePointList.push(t)},e.prototype.UpdateAim=function(){c.MessageMgr.SendMessage(a.GAME_MESSAGE.AIM_POSITION,{playerId:this.node.uuid,aimPos:this.mAimPosition})},e.prototype.UpdateColliderDirection=function(){this.mContainerCollider_L.active=this.mPlayerSpine.GetDirectionX()<0,this.mContainerCollider_R.active=this.mPlayerSpine.GetDirectionX()>=0},e.prototype.UpdateMove=function(t){var e=this.mMoveTarget.position.add(this.node.position.mul(-1)).normalize().mul(this.mPlayerStats.GetMoveSpeed());this.node.x=a.GameDefine.MoveToTarget(this.node.x,this.mMoveTarget.x,e.x,t),this.node.y=a.GameDefine.MoveToTarget(this.node.y,this.mMoveTarget.y,e.y,t);for(var o=this.node.getComponentsInChildren(cc.RigidBody),n=0;n<o.length;n++)o[n].syncPosition(!1)},i([S(u.PlayerStats)],e.prototype,"mPlayerStats",void 0),i([S(cc.Node)],e.prototype,"mContainerCollider_L",void 0),i([S(cc.Node)],e.prototype,"mContainerCollider_R",void 0),i([S(cc.Prefab)],e.prototype,"mPrefabAimRay",void 0),i([S(cc.Prefab)],e.prototype,"mPrefabBullet",void 0),i([f],e)}(cc.Component);o.Player=d,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","./PlayerAimRay":"PlayerAimRay","./PlayerAimTarget":"PlayerAimTarget","./PlayerSpine":"PlayerSpine","./PlayerStats":"PlayerStats","./UserControl":"UserControl"}],RagDoll:[function(t,e,o){"use strict";cc._RF.push(e,"80839yAWKZOA6ChwM2S9xmW","RagDoll");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.RagDoll=void 0;var s,a=cc._decorator,c=a.ccclass;a.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE"}(s||(s={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FORCE=1e3,e}return r(e,t),e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:break;case s.ACTIVE:this.node.getComponent(cc.RigidBody).applyLinearImpulse(this.mForce,this.mForcePos,!0)}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:}},e.prototype.SetForce=function(t,e){if(t.mag()>0)this.mForce=t.clone().normalizeSelf().multiplyScalar(this.FORCE),this.mForcePos=e;else{var o=new cc.Vec2(0,0);this.node.getComponent(cc.RigidBody).getWorldPosition(o),this.mForce=e.clone().addSelf(o.multiplyScalar(-1)).normalizeSelf().multiplyScalar(.3*this.FORCE),this.mForcePos=e}},i([c],e)}(cc.Component);o.RagDoll=p,cc._RF.pop()},{}],StateDuelModeDraw:[function(t,e,o){"use strict";cc._RF.push(e,"8fad2AoUhBL6YTD7WeYE6Sq","StateDuelModeDraw");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.PLAY_AGAIN=3]="PLAY_AGAIN",t[t.END=4]="END"})(s||(s={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUI.active=!0;break;case s.ACTIVE:break;case s.PLAY_AGAIN:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE);break;case s.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:break;case s.PLAY_AGAIN:this.SetState(s.END);break;case s.END:}},e.prototype.OnMessage=function(t){switch(t){case a.GAME_MESSAGE.STATE_DUEL_MODE_DRAW:this.SetState(s.INIT)}},e.prototype.OnClickButtonPlayAgain=function(){switch(this.mState){case s.ACTIVE:this.SetState(s.PLAY_AGAIN)}},i([h(cc.Node)],e.prototype,"mUI",void 0),i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateDuelModeLose:[function(t,e,o){"use strict";cc._RF.push(e,"0b7d1D4LsRMM5gjuT6bDbFK","StateDuelModeLose");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.PLAY_AGAIN=3]="PLAY_AGAIN",t[t.END=4]="END"})(s||(s={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUI.active=!0;break;case s.ACTIVE:break;case s.PLAY_AGAIN:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE);break;case s.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:break;case s.PLAY_AGAIN:this.SetState(s.END);break;case s.END:}},e.prototype.OnMessage=function(t){switch(t){case a.GAME_MESSAGE.STATE_DUEL_MODE_LOSE:this.SetState(s.INIT)}},e.prototype.OnClickButtonPlayAgain=function(){switch(this.mState){case s.ACTIVE:this.SetState(s.PLAY_AGAIN)}},i([h(cc.Node)],e.prototype,"mUI",void 0),i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateDuelModeWin:[function(t,e,o){"use strict";cc._RF.push(e,"4e4692nyzVFbKAXQlaI6vLa","StateDuelModeWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.StateDuelModeWin=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.PLAY_AGAIN=3]="PLAY_AGAIN",t[t.END=4]="END"})(s||(s={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUI.active=!0;break;case s.ACTIVE:break;case s.PLAY_AGAIN:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE);break;case s.END:this.mUI.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:break;case s.PLAY_AGAIN:this.SetState(s.END);break;case s.END:}},e.prototype.OnMessage=function(t){switch(t){case a.GAME_MESSAGE.STATE_DUEL_MODE_WIN:this.SetState(s.INIT)}},e.prototype.OnClickButtonPlayAgain=function(){switch(this.mState){case s.ACTIVE:this.SetState(s.PLAY_AGAIN)}},i([h(cc.Node)],e.prototype,"mUI",void 0),i([l],e)}(cc.Component);o.StateDuelModeWin=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateDuelMode:[function(t,e,o){"use strict";cc._RF.push(e,"c3b10WMH/NIZ49v4u1wuS2O","StateDuelMode");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.StateDuelMode=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CLEAR_LEVEL=2]="CLEAR_LEVEL",t[t.LOAD_LEVEL=3]="LOAD_LEVEL",t[t.PLAYING=4]="PLAYING",t[t.DETECT_RESULT=5]="DETECT_RESULT",t[t.WIN=6]="WIN",t[t.WIN_END=7]="WIN_END",t[t.LOSE=8]="LOSE",t[t.LOSE_END=9]="LOSE_END",t[t.DRAW=10]="DRAW",t[t.DRAW_END=11]="DRAW_END",t[t.END=12]="END"})(s||(s={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.onLoad=function(){},e.prototype.start=function(){this.SetState(s.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUIIngame.active=!0,this.mPlayerList=[],this.mShootList=[],a.GameDefine.CanvasGameUpdateAlignment();break;case s.CLEAR_LEVEL:c.MessageMgr.SendMessage(a.GAME_MESSAGE.CLEAR_LEVEL);break;case s.LOAD_LEVEL:this.mPercent=0,this.mCountEnemy=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.LOAD_LEVEL_DUEL_MODE);break;case s.PLAYING:this.mShootList=a.GameDefine.ConfuseArray(this.mShootList,10),this.mShootIndex=-1,this.mIsCallNextTurn=!0;break;case s.DETECT_RESULT:c.MessageMgr.SendMessage(a.GAME_MESSAGE.DUEL_MODE_DETECT_RESULT,this.mPlayerList[0]);break;case s.WIN:this.mPercent=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_WIN);break;case s.WIN_END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE_WIN);break;case s.LOSE:this.mPercent=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_WIN);break;case s.LOSE_END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE_LOSE);break;case s.DRAW:this.mPercent=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_WIN);break;case s.DRAW_END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE_DRAW);break;case s.END:this.mUIIngame.active=!1}},e.prototype.update=function(t){switch(this.mState){case s.INIT:this.SetState(s.CLEAR_LEVEL);break;case s.CLEAR_LEVEL:break;case s.LOAD_LEVEL:this.mPercent+=.1,this.mPercent>=1&&this.SetState(s.PLAYING);break;case s.PLAYING:this.UpdateCallPlayerReadyAim(),1==this.mPlayerList.length?this.SetState(s.DETECT_RESULT):this.mShootList.length<=0&&this.SetState(s.DRAW);break;case s.DETECT_RESULT:break;case s.WIN:this.mPercent=a.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(s.WIN_END);break;case s.WIN_END:this.SetState(s.END);break;case s.LOSE:this.mPercent=a.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(s.LOSE_END);break;case s.LOSE_END:this.SetState(s.END);break;case s.DRAW:this.mPercent=a.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(s.DRAW_END);break;case s.DRAW_END:this.SetState(s.END);break;case s.END:}},e.prototype.OnMessage=function(t,e){switch(t){case a.GAME_MESSAGE.STATE_DUEL_MODE:switch(this.mState){case s.END:this.SetState(s.INIT)}break;case a.GAME_MESSAGE.LEVEL_IS_CLEARED:switch(this.mState){case s.CLEAR_LEVEL:this.SetState(s.LOAD_LEVEL)}break;case a.GAME_MESSAGE.ADD_ENEMY:switch(this.mState){case s.LOAD_LEVEL:case s.PLAYING:this.mCountEnemy+=e}break;case a.GAME_MESSAGE.ADD_TO_PLAYER_LIST:switch(this.mState){case s.LOAD_LEVEL:this.mPlayerList.push(e)}break;case a.GAME_MESSAGE.REMOVE_FROM_PLAYER_LIST:switch(this.mState){case s.PLAYING:for(var o=0;o<this.mPlayerList.length;o++)if(this.mPlayerList[o]==e){this.mPlayerList.splice(o,1);break}}break;case a.GAME_MESSAGE.ADD_TO_SHOOT_LIST:switch(this.mState){case s.LOAD_LEVEL:this.mShootList.push(e)}break;case a.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST:switch(this.mState){case s.PLAYING:for(o=0;o<this.mShootList.length;o++)if(this.mShootList[o]==e){this.mShootList.splice(o,1),o<=this.mShootIndex&&(this.mShootIndex-=1,this.mShootIndex<0&&(this.mShootIndex+=this.mShootList.length));break}}break;case a.GAME_MESSAGE.END_PLAYER_TURN:switch(this.mState){case s.PLAYING:this.mShootList.length>0&&this.mShootIndex>=0&&this.mShootList[this.mShootIndex%this.mShootList.length]==e&&(this.mIsCallNextTurn=!0)}break;case a.GAME_MESSAGE.DUEL_MODE_WIN:switch(this.mState){case s.DETECT_RESULT:this.SetState(s.WIN)}break;case a.GAME_MESSAGE.DUEL_MODE_LOSE:switch(this.mState){case s.DETECT_RESULT:this.SetState(s.LOSE)}}},e.prototype.UpdateCallPlayerReadyAim=function(){this.mIsCallNextTurn&&(this.mIsCallNextTurn=!1,this.mShootIndex=(this.mShootIndex+1)%this.mShootList.length,c.MessageMgr.SendMessage(a.GAME_MESSAGE.START_PLAYER_TURN,this.mShootList[this.mShootIndex%this.mShootList.length]))},i([h(cc.Node)],e.prototype,"mUIIngame",void 0),i([l],e)}(cc.Component);o.StateDuelMode=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateEndGameLose:[function(t,e,o){"use strict";cc._RF.push(e,"6be48w6ba9BJZcq1CXiyi5X","StateEndGameLose");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.StateEndGameLose=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.RETRY=3]="RETRY",t[t.END=4]="END"})(s||(s={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUIEndGame.active=!0;break;case s.ACTIVE:break;case s.RETRY:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_INGAME);break;case s.END:this.mUIEndGame.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:break;case s.RETRY:this.SetState(s.END);break;case s.END:}},e.prototype.OnMessage=function(t){switch(t){case a.GAME_MESSAGE.STATE_END_GAME_LOSE:this.SetState(s.INIT)}},e.prototype.OnClickButtonRetry=function(){switch(this.mState){case s.ACTIVE:this.SetState(s.RETRY)}},i([h(cc.Node)],e.prototype,"mUIEndGame",void 0),i([l],e)}(cc.Component);o.StateEndGameLose=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateEndGameWin:[function(t,e,o){"use strict";cc._RF.push(e,"6d053Zp6BVEtL/iVAJ/BNQb","StateEndGameWin");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.StateEndGameWin=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=t("../UserProfile"),l=cc._decorator,h=l.ccclass,u=l.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE",t[t.NEXT_LEVEL=3]="NEXT_LEVEL",t[t.END=4]="END"})(s||(s={}));var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.start=function(){this.SetState(s.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUIEndGame.active=!0;break;case s.ACTIVE:break;case s.NEXT_LEVEL:p.UserProfile.GetInstance().AddCurrentLevel(1),c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_INGAME);break;case s.END:this.mUIEndGame.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:break;case s.NEXT_LEVEL:this.SetState(s.END);break;case s.END:}},e.prototype.OnMessage=function(t){switch(t){case a.GAME_MESSAGE.STATE_END_GAME_WIN:this.SetState(s.INIT)}},e.prototype.OnClickButtonNext=function(){switch(this.mState){case s.ACTIVE:this.SetState(s.NEXT_LEVEL)}},i([u(cc.Node)],e.prototype,"mUIEndGame",void 0),i([h],e)}(cc.Component);o.StateEndGameWin=E,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr","../UserProfile":"UserProfile"}],StateIngame:[function(t,e,o){"use strict";cc._RF.push(e,"3ae409jzGhD75OX4os06vWg","StateIngame");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.StateIngame=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.CLEAR_LEVEL=2]="CLEAR_LEVEL",t[t.LOAD_LEVEL=3]="LOAD_LEVEL",t[t.PLAYING=4]="PLAYING",t[t.DETECT_RESULT=5]="DETECT_RESULT",t[t.WIN=6]="WIN",t[t.WIN_END=7]="WIN_END",t[t.LOSE=8]="LOSE",t[t.LOSE_END=9]="LOSE_END",t[t.DRAW=10]="DRAW",t[t.DRAW_END=11]="DRAW_END",t[t.END=12]="END"})(s||(s={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){c.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},e.prototype.onDisable=function(){c.MessageMgr.RemoveListener(this.node.uuid)},e.prototype.onLoad=function(){},e.prototype.start=function(){this.SetState(s.END)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUIIngame.active=!0,this.mPlayerList=[],this.mShootList=[],a.GameDefine.CanvasGameUpdateAlignment();break;case s.CLEAR_LEVEL:c.MessageMgr.SendMessage(a.GAME_MESSAGE.CLEAR_LEVEL);break;case s.LOAD_LEVEL:this.mPercent=0,this.mCountEnemy=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.LOAD_LEVEL);break;case s.PLAYING:this.mShootList=a.GameDefine.ConfuseArray(this.mShootList,10),this.mShootIndex=-1,this.mIsCallNextTurn=!0;break;case s.DETECT_RESULT:c.MessageMgr.SendMessage(a.GAME_MESSAGE.DUEL_MODE_DETECT_RESULT,this.mPlayerList[0]);break;case s.WIN:this.mPercent=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_WIN);break;case s.WIN_END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_END_GAME_WIN);break;case s.LOSE:this.mPercent=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_WIN);break;case s.LOSE_END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_END_GAME_LOSE);break;case s.DRAW:this.mPercent=0,c.MessageMgr.SendMessage(a.GAME_MESSAGE.PLAYER_WIN);break;case s.DRAW_END:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE_DRAW);break;case s.END:this.mUIIngame.active=!1}},e.prototype.update=function(t){switch(this.mState){case s.INIT:this.SetState(s.CLEAR_LEVEL);break;case s.CLEAR_LEVEL:break;case s.LOAD_LEVEL:this.mPercent+=.1,this.mPercent>=1&&this.SetState(s.PLAYING);break;case s.PLAYING:this.UpdateCallPlayerReadyAim(),this.mCountEnemy<=0?this.SetState(s.WIN):this.mShootList.length<=0&&this.SetState(s.LOSE);break;case s.DETECT_RESULT:break;case s.WIN:this.mPercent=a.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(s.WIN_END);break;case s.WIN_END:this.SetState(s.END);break;case s.LOSE:this.mPercent=a.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(s.LOSE_END);break;case s.LOSE_END:this.SetState(s.END);break;case s.DRAW:this.mPercent=a.GameDefine.MoveToTarget(this.mPercent,1,.5,t),this.mPercent>=1&&this.SetState(s.DRAW_END);break;case s.DRAW_END:this.SetState(s.END);break;case s.END:}},e.prototype.OnMessage=function(t,e){switch(t){case a.GAME_MESSAGE.STATE_INGAME:switch(this.mState){case s.END:this.SetState(s.INIT)}break;case a.GAME_MESSAGE.LEVEL_IS_CLEARED:switch(this.mState){case s.CLEAR_LEVEL:this.SetState(s.LOAD_LEVEL)}break;case a.GAME_MESSAGE.ADD_ENEMY:switch(this.mState){case s.LOAD_LEVEL:case s.PLAYING:this.mCountEnemy+=e}break;case a.GAME_MESSAGE.ADD_TO_PLAYER_LIST:switch(this.mState){case s.LOAD_LEVEL:this.mPlayerList.push(e)}break;case a.GAME_MESSAGE.REMOVE_FROM_PLAYER_LIST:switch(this.mState){case s.PLAYING:for(var o=0;o<this.mPlayerList.length;o++)if(this.mPlayerList[o]==e){this.mPlayerList.splice(o,1);break}}break;case a.GAME_MESSAGE.ADD_TO_SHOOT_LIST:switch(this.mState){case s.LOAD_LEVEL:this.mShootList.push(e)}break;case a.GAME_MESSAGE.REMOVE_FROM_SHOOT_LIST:switch(this.mState){case s.PLAYING:for(o=0;o<this.mShootList.length;o++)if(this.mShootList[o]==e){this.mShootList.splice(o,1),o<=this.mShootIndex&&(this.mShootIndex-=1,this.mShootIndex<0&&(this.mShootIndex+=this.mShootList.length));break}}break;case a.GAME_MESSAGE.END_PLAYER_TURN:switch(this.mState){case s.PLAYING:this.mShootList.length>0&&this.mShootIndex>=0&&this.mShootList[this.mShootIndex%this.mShootList.length]==e&&(this.mIsCallNextTurn=!0)}break;case a.GAME_MESSAGE.DUEL_MODE_WIN:switch(this.mState){case s.DETECT_RESULT:this.SetState(s.WIN)}break;case a.GAME_MESSAGE.DUEL_MODE_LOSE:switch(this.mState){case s.DETECT_RESULT:this.SetState(s.LOSE)}}},e.prototype.UpdateCallPlayerReadyAim=function(){this.mIsCallNextTurn&&(this.mIsCallNextTurn=!1,this.mShootIndex=(this.mShootIndex+1)%this.mShootList.length,c.MessageMgr.SendMessage(a.GAME_MESSAGE.START_PLAYER_TURN,this.mShootList[this.mShootIndex%this.mShootList.length]))},i([h(cc.Node)],e.prototype,"mUIIngame",void 0),i([l],e)}(cc.Component);o.StateIngame=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateMainMenu:[function(t,e,o){"use strict";cc._RF.push(e,"5811cw45WVNF7qlOXk8dC17","StateMainMenu");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.StateMainMenu=void 0;var s,a=t("../GameDefine"),c=t("../MessageMgr"),p=cc._decorator,l=p.ccclass,h=p.property;(function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.NORMAL=2]="NORMAL",t[t.PLAY_GAME=3]="PLAY_GAME",t[t.DUEL_MODE=4]="DUEL_MODE",t[t.END=5]="END"})(s||(s={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mState=s.NULL,e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mUIMainMenu.active=!0;break;case s.NORMAL:break;case s.PLAY_GAME:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_INGAME);break;case s.DUEL_MODE:c.MessageMgr.SendMessage(a.GAME_MESSAGE.STATE_DUEL_MODE);break;case s.END:this.mUIMainMenu.active=!1}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.NORMAL);break;case s.NORMAL:break;case s.PLAY_GAME:case s.DUEL_MODE:this.SetState(s.END);break;case s.END:}},e.prototype.OnClickButtonPlay=function(){switch(this.mState){case s.NORMAL:this.SetState(s.PLAY_GAME)}},e.prototype.OnClickButtonDuel=function(){switch(this.mState){case s.NORMAL:this.SetState(s.DUEL_MODE)}},i([h(cc.Node)],e.prototype,"mUIMainMenu",void 0),i([l],e)}(cc.Component);o.StateMainMenu=u,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],UserControl:[function(t,e,o){"use strict";cc._RF.push(e,"8440brvZh1ETKjt9uJWVewB","UserControl");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.UserControl=void 0;var s,a=t("../GameDefine"),c=t("./Player"),p=cc._decorator,l=p.ccclass;p.property,function(t){t[t.NULL=0]="NULL",t[t.INIT=1]="INIT",t[t.ACTIVE=2]="ACTIVE"}(s||(s={}));var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.onEnable=function(){var t=a.GameDefine.GetGameContainer();t&&(t.on(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.on(cc.Node.EventType.MOUSE_MOVE,this.OnMouseMove,this),t.on(cc.Node.EventType.MOUSE_UP,this.OnMouseUp,this),t.on(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.OnMouseMove,this),t.on(cc.Node.EventType.TOUCH_END,this.OnMouseUp,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this.OnMouseUp,this))},e.prototype.onDisable=function(){var t=a.GameDefine.GetGameContainer();t&&(t.off(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),t.off(cc.Node.EventType.MOUSE_MOVE,this.OnMouseMove,this),t.off(cc.Node.EventType.MOUSE_UP,this.OnMouseUp,this),t.off(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this),t.off(cc.Node.EventType.TOUCH_MOVE,this.OnMouseMove,this),t.off(cc.Node.EventType.TOUCH_END,this.OnMouseUp,this),t.off(cc.Node.EventType.TOUCH_CANCEL,this.OnMouseUp,this))},e.prototype.start=function(){this.SetState(s.INIT)},e.prototype.SetState=function(t){switch(this.mState=t,this.mState){case s.INIT:this.mPlayer=this.node.getComponent(c.Player);break;case s.ACTIVE:}},e.prototype.update=function(){switch(this.mState){case s.INIT:this.SetState(s.ACTIVE);break;case s.ACTIVE:}},e.prototype.OnMouseDown=function(t){switch(this.mState){case s.ACTIVE:this.mPlayer.SetAimPosition(t.getLocation()),this.mPlayer.SetStateAim()}},e.prototype.OnMouseMove=function(t){switch(this.mState){case s.ACTIVE:this.mPlayer.SetAimPosition(t.getLocation())}},e.prototype.OnMouseUp=function(){switch(this.mState){case s.ACTIVE:this.mPlayer.SetStateShoot()}},i([l],e)}(cc.Component);o.UserControl=h,cc._RF.pop()},{"../GameDefine":"GameDefine","./Player":"Player"}],UserProfile:[function(t,e,o){"use strict";cc._RF.push(e,"5b2f64oTwBId5rdNYeea8pD","UserProfile");var n,r=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(i<3?r(s):i>3?r(e,o,s):r(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.UserProfile=void 0;var s=cc._decorator,a=s.ccclass,c=(s.property,"kcl"),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return r(e,t),o=e,e.GetInstance=function(){return null==this.mInstance&&(this.mInstance=new o),this.mInstance},e.prototype.GetCurrentLevel=function(){return parseInt(cc.sys.localStorage.getItem(c)||"0")},e.prototype.SetCurrentLevel=function(t){cc.sys.localStorage.setItem(c,Math.max(t,0))},e.prototype.AddCurrentLevel=function(t){this.SetCurrentLevel(this.GetCurrentLevel()+t)},o=i([a],e)}(cc.Component);o.UserProfile=p,cc._RF.pop()},{}]},{},["GameDefine","GameSetup","BodyCollider","BotControl","BulletStats","BulletUI","BulletUIContainer","Bullet_01","Bullet_02","Bullet_02_Sub","Bullet_03","Enemy","EnemyStats","Explosive","LevelMgr","Player","PlayerAimRay","PlayerAimTarget","PlayerCreator","PlayerHealthBar","PlayerSetup","PlayerSpine","PlayerStats","RagDoll","UserControl","MessageMgr","NewScript","StateDuelMode","StateDuelModeDraw","StateDuelModeLose","StateDuelModeWin","StateEndGameLose","StateEndGameWin","StateIngame","StateMainMenu","UserProfile"]);