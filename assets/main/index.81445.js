window.__require=function e(t,o,n){function r(c,s){if(!o[c]){if(!t[c]){var a=c.split("/");if(a=a[a.length-1],!t[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var u=o[c]={exports:{}};t[c][0].call(u.exports,function(e){return r(t[c][1][e]||e)},u,u.exports,e,t,o,n)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<n.length;c++)r(n[c]);return r}({Bullet_01:[function(e,t,o){"use strict";cc._RF.push(t,"8ad8801h7ZFpZZHqejQu/4g","Bullet_01");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c,s=e("../GameDefine"),a=cc._decorator,p=a.ccclass,u=a.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.ACTIVE=2]="ACTIVE",e[e.END=3]="END"})(c||(c={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SPEED_START=1e3,t.MAX_CONTACT_COUNT=10,t}return r(t,e),t.prototype.start=function(){this.SetState(c.INIT)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:var t=this.mRigidBody.getWorldRotation()/180*Math.PI;this.mRigidBody.linearVelocity=new cc.Vec2(Math.cos(t)*this.SPEED_START,-Math.sin(t)*this.SPEED_START),this.mContactCount=this.MAX_CONTACT_COUNT;break;case c.ACTIVE:break;case c.END:this.node.destroy()}},t.prototype.update=function(){switch(this.mState){case c.INIT:this.SetState(c.ACTIVE);break;case c.ACTIVE:this.UpdateRotation();break;case c.END:}},t.prototype.onBeginContact=function(){},t.prototype.onEndContact=function(e,t,o){switch(o.tag){case s.COLLIDER_TAG.PLATFORM:this.mContactCount--,this.mContactCount<=0&&this.SetState(c.END)}},t.prototype.UpdateRotation=function(){var e=this.mRigidBody.linearVelocity;this.node.rotation=Math.atan2(-e.y,e.x)/Math.PI*180},i([u(cc.RigidBody)],t.prototype,"mRigidBody",void 0),i([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameDefine":"GameDefine"}],GameDefine:[function(e,t,o){"use strict";cc._RF.push(t,"08b35U6NHVOx4wUFRw6kkob","GameDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.COLLIDER_TAG=o.GAME_MESSAGE=o.GameDefine=void 0;var n=function(){function e(){}return e.InputPositionToWorldPosition=function(e){return e},e.ConsoleLogVec2=function(e){console.log(Math.round(e.x),Math.round(e.y))},e}();o.GameDefine=n,function(e){e[e.STATE_INGAME=0]="STATE_INGAME",e[e.CLEAR_LEVEL=1]="CLEAR_LEVEL",e[e.LEVEL_IS_CLEARED=2]="LEVEL_IS_CLEARED",e[e.LOAD_LEVEL=3]="LOAD_LEVEL",e[e.PLAYER_ANIMATION_IDLE=4]="PLAYER_ANIMATION_IDLE",e[e.PLAYER_ANIMATION_AIM=5]="PLAYER_ANIMATION_AIM",e[e.PLAYER_START_AIM=6]="PLAYER_START_AIM",e[e.PLAYER_END_AIM=7]="PLAYER_END_AIM",e[e.PLAYER_SHOOT=8]="PLAYER_SHOOT",e[e.AIM_POSITION=9]="AIM_POSITION",e[e.AIM_RAY_INFO=10]="AIM_RAY_INFO"}(o.GAME_MESSAGE||(o.GAME_MESSAGE={})),o.COLLIDER_TAG={PLATFORM:1},cc._RF.pop()},{}],GameSetup:[function(e,t,o){"use strict";cc._RF.push(t,"8c7e3ctRExBHZASntnI+d/v","GameSetup");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onLoad=function(){this.SetupPhysic()},t.prototype.SetupPhysic=function(){cc.director.getPhysicsManager().enabled=!0},i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],LevelMgr:[function(e,t,o){"use strict";cc._RF.push(t,"ef973JA221LNJUezXdxmVkK","LevelMgr");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.LevelMgr=void 0;var c,s=e("../GameDefine"),a=e("../MessageMgr"),p=cc._decorator,u=p.ccclass,f=p.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.CLEAR_LEVEL=2]="CLEAR_LEVEL",e[e.LEVEL_IS_CLEARED=3]="LEVEL_IS_CLEARED",e[e.LOAD_LEVEL=4]="LOAD_LEVEL"})(c||(c={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mArrPrefabLevel=[],t}return r(t,e),t.prototype.onEnable=function(){a.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},t.prototype.onDisable=function(){a.MessageMgr.RemoveListener(this.node.uuid)},t.prototype.start=function(){this.SetState(c.INIT)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:break;case c.CLEAR_LEVEL:this.mGameContainer.destroyAllChildren();break;case c.LEVEL_IS_CLEARED:a.MessageMgr.SendMessage(s.GAME_MESSAGE.LEVEL_IS_CLEARED);break;case c.LOAD_LEVEL:cc.instantiate(this.mArrPrefabLevel[this.mLevel]).parent=this.mGameContainer}},t.prototype.update=function(){switch(this.mState){case c.INIT:break;case c.CLEAR_LEVEL:this.mGameContainer.childrenCount<=0&&this.SetState(c.LEVEL_IS_CLEARED);break;case c.LEVEL_IS_CLEARED:case c.LOAD_LEVEL:}},t.prototype.OnMessage=function(e,t){switch(e){case s.GAME_MESSAGE.CLEAR_LEVEL:this.SetState(c.CLEAR_LEVEL);break;case s.GAME_MESSAGE.LOAD_LEVEL:this.mLevel=t,this.SetState(c.LOAD_LEVEL)}},i([f(cc.Node)],t.prototype,"mGameContainer",void 0),i([f([cc.Prefab])],t.prototype,"mArrPrefabLevel",void 0),i([u],t)}(cc.Component);o.LevelMgr=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],MessageMgr:[function(e,t,o){"use strict";cc._RF.push(t,"0684bqrPlhKC6ZlAIhmE8+u","MessageMgr"),Object.defineProperty(o,"__esModule",{value:!0}),o.MessageMgr=void 0;var n=function(){function e(){}return e.AddListener=function(e,t){this.arrListener.push({callback:e,id:t})},e.RemoveListener=function(e){for(var t=this.arrListener.length,o=0;o<t;o++)if(this.arrListener[o].id==e){this.arrListener.splice(o,1);break}},e.SendMessage=function(e,t){for(var o=this.arrListener.length,n=0;n<o;n++)this.arrListener[n].callback(e,t)},e.arrListener=[],e}();o.MessageMgr=n,cc._RF.pop()},{}],PlayerAimRay_01:[function(e,t,o){"use strict";cc._RF.push(t,"3de1bQABV9MCIUOQioCaqDq","PlayerAimRay_01");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerAimRay_01=void 0;var c,s=e("../GameDefine"),a=e("../MessageMgr"),p=cc._decorator,u=p.ccclass,f=p.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.SHOW=2]="SHOW",e[e.HIDE=3]="HIDE"})(c||(c={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.OFFSET_AIM_POINT=20,t.NUMBER_AIM_POINT=Math.ceil(1280*Math.sqrt(2)/t.OFFSET_AIM_POINT),t}return r(t,e),t.prototype.onEnable=function(){a.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},t.prototype.onDisable=function(){a.MessageMgr.RemoveListener(this.node.uuid)},t.prototype.start=function(){this.SetState(c.INIT)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:this.mAimPointContainer.active=!1,this.MakeAimPoints();break;case c.SHOW:this.mAimPointContainer.active=!0;break;case c.HIDE:this.mAimPointContainer.active=!1}},t.prototype.update=function(){switch(this.mState){case c.INIT:this.SetState(c.HIDE);break;case c.SHOW:case c.HIDE:}},t.prototype.OnMessage=function(e,t){switch(e){case s.GAME_MESSAGE.PLAYER_START_AIM:this.SetState(c.SHOW);break;case s.GAME_MESSAGE.PLAYER_END_AIM:this.SetState(c.HIDE);break;case s.GAME_MESSAGE.AIM_RAY_INFO:var o=this.node.parent.convertToNodeSpaceAR(t.gunBarrelPosition);this.node.x=o.x,this.node.y=o.y;var n=this.node.parent.convertToNodeSpaceAR(t.gunPosition),r=this.node.parent.convertToNodeSpaceAR(t.aimPosition),i=Math.atan2(r.y-n.y,r.x-n.x)/Math.PI*180;this.node.rotation=-i;break;case s.GAME_MESSAGE.PLAYER_SHOOT:var a=cc.instantiate(this.mPrefabBullet);a.parent=t.bulletContainer,o=t.bulletContainer.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(new cc.Vec2(this.node.x,this.node.y))),a.x=o.x,a.y=o.y,a.rotation=this.node.rotation}},t.prototype.MakeAimPoints=function(){for(var e=0;e<this.NUMBER_AIM_POINT;e++){var t=cc.instantiate(this.mPrefabAimPoint);t.parent=this.mAimPointContainer,t.x=e*this.OFFSET_AIM_POINT,t.y=0}},i([f(cc.Node)],t.prototype,"mAimPointContainer",void 0),i([f(cc.Prefab)],t.prototype,"mPrefabAimPoint",void 0),i([f(cc.Prefab)],t.prototype,"mPrefabBullet",void 0),i([u],t)}(cc.Component);o.PlayerAimRay_01=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],PlayerAimTarget:[function(e,t,o){"use strict";cc._RF.push(t,"5e162US3INAJrRxi/it/J3G","PlayerAimTarget");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerAimTarget=void 0;var c,s=e("../GameDefine"),a=e("../MessageMgr"),p=cc._decorator,u=p.ccclass,f=p.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.SHOW=2]="SHOW",e[e.HIDE=3]="HIDE"})(c||(c={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){a.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},t.prototype.onDisable=function(){a.MessageMgr.RemoveListener(this.node.uuid)},t.prototype.start=function(){this.SetState(c.INIT)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:this.mSprite.active=!1;break;case c.SHOW:this.mSprite.active=!0;break;case c.HIDE:this.mSprite.active=!1}},t.prototype.update=function(){switch(this.mState){case c.INIT:this.SetState(c.HIDE);break;case c.SHOW:case c.HIDE:}},t.prototype.OnMessage=function(e,t){switch(e){case s.GAME_MESSAGE.AIM_RAY_INFO:var o=this.node.parent.convertToNodeSpaceAR(t.aimPosition);this.node.x=o.x,this.node.y=o.y;break;case s.GAME_MESSAGE.PLAYER_START_AIM:this.SetState(c.SHOW);break;case s.GAME_MESSAGE.PLAYER_END_AIM:this.SetState(c.HIDE)}},i([f(cc.Node)],t.prototype,"mSprite",void 0),i([u],t)}(cc.Component);o.PlayerAimTarget=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],PlayerSpine:[function(e,t,o){"use strict";cc._RF.push(t,"6ef82Te0h1Or5V40EqlIzYB","PlayerSpine");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../GameDefine"),s=e("../MessageMgr"),a=cc._decorator,p=a.ccclass,u=a.property,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){s.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},t.prototype.onDisable=function(){s.MessageMgr.RemoveListener(this.node.uuid)},t.prototype.start=function(){this.mBoneAim=this.mSpine.findBone("Aim"),this.mBoneGunBarrel=this.mSpine.findBone("Bullet_Position")},t.prototype.OnMessage=function(e,t){switch(e){case c.GAME_MESSAGE.PLAYER_ANIMATION_IDLE:this.mSpine.setAnimation(0,"Idle",!0);break;case c.GAME_MESSAGE.PLAYER_ANIMATION_AIM:this.mSpine.setAnimation(0,"Aim",!0);break;case c.GAME_MESSAGE.AIM_POSITION:this.AimPosition(t)}},t.prototype.AimPosition=function(e){this.mSpine.node.scaleX=Math.abs(this.mSpine.node.scaleX);var t=this.mSpine.node.convertToNodeSpaceAR(e);this.mSpine.node.scaleX=Math.sign(t.x)*Math.abs(this.mSpine.node.scaleX),this.mBoneAim.x=Math.abs(t.x),this.mBoneAim.y=t.y,this.mBoneAim.updateWorldTransform();var o=new cc.Vec2(this.mBoneAim.worldX-this.mBoneGunBarrel.worldX,this.mBoneAim.worldY-this.mBoneGunBarrel.worldY);if(o.len()>400){var n=o.normalize(),r=this.mBoneAim.parent.worldToLocal(new sp.spine.Vector2(this.mBoneGunBarrel.worldX+400*n.x,this.mBoneGunBarrel.worldY+400*n.y));this.mBoneAim.x=r.x,this.mBoneAim.y=r.y}s.MessageMgr.SendMessage(c.GAME_MESSAGE.AIM_RAY_INFO,{gunBarrelPosition:this.mSpine.node.convertToWorldSpaceAR(new cc.Vec2(this.mBoneGunBarrel.worldX,this.mBoneGunBarrel.worldY)),gunPosition:this.mSpine.node.convertToWorldSpaceAR(new cc.Vec2(this.mBoneGunBarrel.parent.worldX,this.mBoneGunBarrel.parent.worldY)),aimPosition:e})},i([u(sp.Skeleton)],t.prototype,"mSpine",void 0),i([p],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"582b4q/5NRNRLVIbxM0THID","Player");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=void 0;var c,s=e("../GameDefine"),a=e("../MessageMgr"),p=cc._decorator,u=p.ccclass;p.property,function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.IDLE=2]="IDLE",e[e.AIM=3]="AIM",e[e.SHOOT=4]="SHOOT"}(c||(c={}));var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mAimPosition=new cc.Vec2(0,0),t}return r(t,e),t.prototype.onEnable=function(){var e=cc.find("Canvas/GameContainer");e&&(e.on(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),e.on(cc.Node.EventType.MOUSE_MOVE,this.OnMouseMove,this),e.on(cc.Node.EventType.MOUSE_UP,this.OnMouseUp,this),e.on(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this),e.on(cc.Node.EventType.TOUCH_MOVE,this.OnMouseMove,this),e.on(cc.Node.EventType.TOUCH_END,this.OnMouseUp,this),e.on(cc.Node.EventType.TOUCH_CANCEL,this.OnMouseUp,this))},t.prototype.onDisable=function(){var e=cc.find("Canvas/GameContainer");e&&(e.off(cc.Node.EventType.MOUSE_DOWN,this.OnMouseDown,this),e.off(cc.Node.EventType.MOUSE_MOVE,this.OnMouseMove,this),e.off(cc.Node.EventType.MOUSE_UP,this.OnMouseUp,this),e.off(cc.Node.EventType.TOUCH_START,this.OnMouseDown,this),e.off(cc.Node.EventType.TOUCH_MOVE,this.OnMouseMove,this),e.off(cc.Node.EventType.TOUCH_END,this.OnMouseUp,this),e.off(cc.Node.EventType.TOUCH_CANCEL,this.OnMouseUp,this))},t.prototype.start=function(){this.SetState(c.INIT)},t.prototype.SetState=function(e){switch(this.mState){case c.AIM:a.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_END_AIM)}switch(this.mState=e,this.mState){case c.INIT:break;case c.IDLE:a.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_ANIMATION_IDLE);break;case c.AIM:a.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_ANIMATION_AIM),a.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_START_AIM);break;case c.SHOOT:a.MessageMgr.SendMessage(s.GAME_MESSAGE.PLAYER_SHOOT,{bulletContainer:this.node.parent})}},t.prototype.update=function(){switch(this.mState){case c.INIT:this.SetState(c.IDLE);break;case c.IDLE:break;case c.AIM:this.UpdateAim();break;case c.SHOOT:this.SetState(c.IDLE)}},t.prototype.OnMouseDown=function(e){switch(this.mState){case c.IDLE:this.mAimPosition=e.getLocation(),this.SetState(c.AIM)}},t.prototype.OnMouseMove=function(e){switch(this.mState){case c.AIM:this.mAimPosition=e.getLocation()}},t.prototype.OnMouseUp=function(){switch(this.mState){case c.AIM:this.SetState(c.SHOOT)}},t.prototype.UpdateAim=function(){a.MessageMgr.SendMessage(s.GAME_MESSAGE.AIM_POSITION,this.mAimPosition)},i([u],t)}(cc.Component);o.Player=f,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateEndGameLose:[function(e,t,o){"use strict";cc._RF.push(t,"6be48w6ba9BJZcq1CXiyi5X","StateEndGameLose");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.StateEndGameLose=void 0;var c,s=cc._decorator,a=s.ccclass,p=s.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.END=2]="END"})(c||(c={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){this.SetState(c.END)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:this.mUIEndGame.active=!0;break;case c.END:this.mUIEndGame.active=!1}},i([p(cc.Node)],t.prototype,"mUIEndGame",void 0),i([a],t)}(cc.Component);o.StateEndGameLose=u,cc._RF.pop()},{}],StateEndGameWin:[function(e,t,o){"use strict";cc._RF.push(t,"6d053Zp6BVEtL/iVAJ/BNQb","StateEndGameWin");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.StateEndGameWin=void 0;var c,s=cc._decorator,a=s.ccclass,p=s.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.END=2]="END"})(c||(c={}));var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){this.SetState(c.END)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:this.mUIEndGame.active=!0;break;case c.END:this.mUIEndGame.active=!1}},i([p(cc.Node)],t.prototype,"mUIEndGame",void 0),i([a],t)}(cc.Component);o.StateEndGameWin=u,cc._RF.pop()},{}],StateIngame:[function(e,t,o){"use strict";cc._RF.push(t,"3ae409jzGhD75OX4os06vWg","StateIngame");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.StateIngame=void 0;var c,s=e("../GameDefine"),a=e("../MessageMgr"),p=cc._decorator,u=p.ccclass,f=p.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.CLEAR_LEVEL=2]="CLEAR_LEVEL",e[e.LOAD_LEVEL=3]="LOAD_LEVEL",e[e.PLAYING=4]="PLAYING",e[e.END=5]="END"})(c||(c={}));var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.onEnable=function(){a.MessageMgr.AddListener(this.OnMessage.bind(this),this.node.uuid)},t.prototype.onDisable=function(){a.MessageMgr.RemoveListener(this.node.uuid)},t.prototype.onLoad=function(){},t.prototype.start=function(){this.SetState(c.END)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:this.mUIIngame.active=!0;break;case c.CLEAR_LEVEL:a.MessageMgr.SendMessage(s.GAME_MESSAGE.CLEAR_LEVEL);break;case c.LOAD_LEVEL:a.MessageMgr.SendMessage(s.GAME_MESSAGE.LOAD_LEVEL,0);break;case c.PLAYING:break;case c.END:this.mUIIngame.active=!1}},t.prototype.update=function(){switch(this.mState){case c.INIT:this.SetState(c.CLEAR_LEVEL);break;case c.CLEAR_LEVEL:case c.LOAD_LEVEL:case c.PLAYING:case c.END:}},t.prototype.OnMessage=function(e){switch(e){case s.GAME_MESSAGE.STATE_INGAME:switch(this.mState){case c.END:this.SetState(c.INIT)}break;case s.GAME_MESSAGE.LEVEL_IS_CLEARED:switch(this.mState){case c.CLEAR_LEVEL:this.SetState(c.LOAD_LEVEL)}}},i([f(cc.Node)],t.prototype,"mUIIngame",void 0),i([u],t)}(cc.Component);o.StateIngame=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],StateMainMenu:[function(e,t,o){"use strict";cc._RF.push(t,"5811cw45WVNF7qlOXk8dC17","StateMainMenu");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.StateMainMenu=void 0;var c,s=e("../GameDefine"),a=e("../MessageMgr"),p=cc._decorator,u=p.ccclass,f=p.property;(function(e){e[e.NULL=0]="NULL",e[e.INIT=1]="INIT",e[e.NORMAL=2]="NORMAL",e[e.PLAY_GAME=3]="PLAY_GAME",e[e.END=4]="END"})(c||(c={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mState=c.NULL,t}return r(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.SetState(c.INIT)},t.prototype.SetState=function(e){switch(this.mState=e,this.mState){case c.INIT:this.mUIMainMenu.active=!0;break;case c.NORMAL:break;case c.PLAY_GAME:a.MessageMgr.SendMessage(s.GAME_MESSAGE.STATE_INGAME);break;case c.END:this.mUIMainMenu.active=!1}},t.prototype.update=function(){switch(this.mState){case c.INIT:this.SetState(c.NORMAL);break;case c.NORMAL:break;case c.PLAY_GAME:this.SetState(c.END);break;case c.END:}},t.prototype.OnClickButtonPlay=function(){switch(this.mState){case c.NORMAL:this.SetState(c.PLAY_GAME)}},i([f(cc.Node)],t.prototype,"mUIMainMenu",void 0),i([u],t)}(cc.Component);o.StateMainMenu=h,cc._RF.pop()},{"../GameDefine":"GameDefine","../MessageMgr":"MessageMgr"}],TestControlAim:[function(e,t,o){"use strict";cc._RF.push(t,"1cbd9mRg8RBeLctt0QGC0op","TestControlAim");var n,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,c=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(c=(i<3?r(c):i>3?r(t,o,c):r(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.start=function(){var e=cc.find("Canvas/GameContainer");e&&e.on(cc.Node.EventType.MOUSE_MOVE,this.OnMouseMove,this),console.log(cc.view),console.log(cc.view.getScaleX()),console.log(cc.view.getScaleY()),console.log(cc.view.getCanvasSize()),console.log(cc.view.getCanvasSize().width/cc.view.getScaleX(),cc.view.getCanvasSize().height/cc.view.getScaleX()),console.log(cc.view.getFrameSize()),this.mAnimOffset=this.node.convertToNodeSpace(this.mAimNode.convertToWorldSpace(new cc.Vec2(0,0))),console.log(this.mAnimOffset),this.mSpine=this.node.getComponent(sp.Skeleton),console.log(this.mSpine),this.mAimBone=this.mSpine.findBone("Aim"),console.log(this.mAimBone)},t.prototype.update=function(){},t.prototype.OnMouseMove=function(e){var t=e.getLocation();t.x-=.5*cc.view.getCanvasSize().width/cc.view.getScaleX(),t.y-=.5*cc.view.getCanvasSize().height/cc.view.getScaleY();var o=this.node.convertToNodeSpace(t);this.mAimBone.x=o.x-this.mAnimOffset.x,this.mAimBone.y=o.y-this.mAnimOffset.y},i([a(cc.Node)],t.prototype,"mAimNode",void 0),i([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{}]},{},["GameDefine","GameSetup","Bullet_01","LevelMgr","Player","PlayerAimRay_01","PlayerAimTarget","PlayerSpine","MessageMgr","StateEndGameLose","StateEndGameWin","StateIngame","StateMainMenu","TestControlAim"]);